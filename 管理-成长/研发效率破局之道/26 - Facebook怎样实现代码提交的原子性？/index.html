<!--geek time docs 🚀, MIT license-->


<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="极客时间文档">
      
      
        <meta name="author" content="zkep">
      
      
        <link rel="canonical" href="https://github.com/uaxe/geektime-docs/%E7%AE%A1%E7%90%86-%E6%88%90%E9%95%BF/%E7%A0%94%E5%8F%91%E6%95%88%E7%8E%87%E7%A0%B4%E5%B1%80%E4%B9%8B%E9%81%93/26%20-%20Facebook%E6%80%8E%E6%A0%B7%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7%EF%BC%9F/">
      
      
        <link rel="prev" href="../25%20-%20%E7%8E%A9%E8%BD%ACGit%EF%BC%9A%E4%BA%94%E7%A7%8D%E6%8F%90%E9%AB%98%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E5%8E%9F%E5%AD%90%E6%80%A7%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">
      
      
        <link rel="next" href="../27%20-%20%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%9A%E4%B8%8D%E5%8F%AA%E6%98%AF%E9%85%B7%EF%BC%8C%E6%9B%B4%E9%87%8D%E8%A6%81%E7%9A%84%E6%98%AF%E8%83%BD%E6%8F%90%E9%AB%98%E4%B8%AA%E4%BA%BA%E6%95%88%E8%83%BD/">
      
      
      <link rel="icon" href="../../../None">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>26 Facebook怎样实现代码提交的原子性？ - 极客时间文档</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            


          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="极客时间文档" class="md-header__button md-logo" aria-label="极客时间文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            极客时间文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              26   Facebook怎样实现代码提交的原子性？
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/zkep/mygeektime" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    zkep/mygeektime
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../AI-%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="md-tabs__link">
          
  
    
  
  AI-大数据

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E4%BA%A7%E5%93%81-%E8%BF%90%E8%90%A5/" class="md-tabs__link">
          
  
    
  
  产品-运营

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E5%89%8D%E7%AB%AF-%E7%A7%BB%E5%8A%A8/" class="md-tabs__link">
          
  
    
  
  前端-移动

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E5%90%8E%E7%AB%AF-%E6%9E%B6%E6%9E%84/" class="md-tabs__link">
          
  
    
  
  后端-架构

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  管理-成长

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="md-tabs__link">
          
  
    
  
  计算机基础

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E8%BF%90%E7%BB%B4-%E6%B5%8B%E8%AF%95/" class="md-tabs__link">
          
  
    
  
  运维-测试

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="极客时间文档" class="md-nav__button md-logo" aria-label="极客时间文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    极客时间文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zkep/mygeektime" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    zkep/mygeektime
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../AI-%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    AI-大数据
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E4%BA%A7%E5%93%81-%E8%BF%90%E8%90%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    产品-运营
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E5%89%8D%E7%AB%AF-%E7%A7%BB%E5%8A%A8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    前端-移动
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E5%90%8E%E7%AB%AF-%E6%9E%B6%E6%9E%84/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    后端-架构
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    管理-成长
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            管理-成长
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../10x%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B7%A5%E4%BD%9C%E6%B3%95/10x%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B7%A5%E4%BD%9C%E6%B3%95/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    10x程序员工作法
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../B%E7%AB%AF%E4%BD%93%E9%AA%8C%E8%AE%BE%E8%AE%A1%E5%85%A5%E9%97%A8%E8%AF%BE/B%E7%AB%AF%E4%BD%93%E9%AA%8C%E8%AE%BE%E8%AE%A1%E5%85%A5%E9%97%A8%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    B端体验设计入门课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E4%B9%94%E6%96%B0%E4%BA%AE%E7%9A%84CTO%E6%88%90%E9%95%BF%E5%A4%8D%E7%9B%98/%E4%B9%94%E6%96%B0%E4%BA%AE%E7%9A%84CTO%E6%88%90%E9%95%BF%E5%A4%8D%E7%9B%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    乔新亮的CTO成长复盘
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E4%BA%92%E8%81%94%E7%BD%91%E4%BA%BA%E7%9A%84%E8%8B%B1%E8%AF%AD%E7%A7%81%E6%95%99%E8%AF%BE/%E4%BA%92%E8%81%94%E7%BD%91%E4%BA%BA%E7%9A%84%E8%8B%B1%E8%AF%AD%E7%A7%81%E6%95%99%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    互联网人的英语私教课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E4%BA%BA%E4%BA%BA%E9%83%BD%E7%94%A8%E5%BE%97%E4%B8%8A%E7%9A%84%E5%86%99%E4%BD%9C%E8%AF%BE/%E4%BA%BA%E4%BA%BA%E9%83%BD%E7%94%A8%E5%BE%97%E4%B8%8A%E7%9A%84%E5%86%99%E4%BD%9C%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    人人都用得上的写作课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    动态规划面试宝典
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%8E%BB%E6%97%A0%E6%96%B9%E5%90%91%E7%9A%84%E4%BF%A1/%E5%8E%BB%E6%97%A0%E6%96%B9%E5%90%91%E7%9A%84%E4%BF%A1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    去无方向的信
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%A4%A7%E5%8E%82%E6%99%8B%E5%8D%87%E6%8C%87%E5%8D%97/%E5%A4%A7%E5%8E%82%E6%99%8B%E5%8D%87%E6%8C%87%E5%8D%97/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    大厂晋升指南
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E5%AD%A6%E4%B9%A0%E9%AB%98%E6%89%8B/%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E5%AD%A6%E4%B9%A0%E9%AB%98%E6%89%8B/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    如何成为学习高手
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%A6%82%E4%BD%95%E7%9C%8B%E6%87%82%E4%B8%80%E5%B9%85%E7%94%BB/%E5%A6%82%E4%BD%95%E7%9C%8B%E6%87%82%E4%B8%80%E5%B9%85%E7%94%BB/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    如何看懂一幅画
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%A6%82%E4%BD%95%E8%AF%BB%E6%87%82%E4%B8%80%E9%A6%96%E8%AF%97/%E5%A6%82%E4%BD%95%E8%AF%BB%E6%87%82%E4%B8%80%E9%A6%96%E8%AF%97/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    如何读懂一首诗
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%B7%A5%E7%A8%8B%E5%B8%88%E4%B8%AA%E4%BA%BA%E5%8F%91%E5%B1%95%E6%8C%87%E5%8D%97/%E5%B7%A5%E7%A8%8B%E5%B8%88%E4%B8%AA%E4%BA%BA%E5%8F%91%E5%B1%95%E6%8C%87%E5%8D%97/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    工程师个人发展指南
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%81%8B%E7%88%B1%E5%BF%85%E4%BF%AE%E8%AF%BE/%E6%81%8B%E7%88%B1%E5%BF%85%E4%BF%AE%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    恋爱必修课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%8E%A9%E9%9F%B3%E4%B9%90/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E7%8E%A9%E9%9F%B3%E4%B9%90/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    手把手教你玩音乐
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%89%8B%E6%9C%BA%E6%91%84%E5%BD%B1/%E6%89%8B%E6%9C%BA%E6%91%84%E5%BD%B1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    手机摄影
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%89%93%E9%80%A0%E7%88%86%E6%AC%BE%E7%9F%AD%E8%A7%86%E9%A2%91/%E6%89%93%E9%80%A0%E7%88%86%E6%AC%BE%E7%9F%AD%E8%A7%86%E9%A2%91/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    打造爆款短视频
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%95%86%E4%B8%9A%E6%A1%88%E4%BE%8B%E8%A7%A3%E8%AF%BB/%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%95%86%E4%B8%9A%E6%A1%88%E4%BE%8B%E8%A7%A3%E8%AF%BB/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    技术与商业案例解读
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%9836%E8%AE%B2/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%9836%E8%AE%B2/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    技术管理实战36讲
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B%E8%AF%BE/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    技术管理案例课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E5%AE%98%E8%AF%86%E4%BA%BA%E6%89%8B%E5%86%8C/%E6%8A%80%E6%9C%AF%E9%9D%A2%E8%AF%95%E5%AE%98%E8%AF%86%E4%BA%BA%E6%89%8B%E5%86%8C/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    技术面试官识人手册
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    技术领导力实战笔记
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0%202022/%E6%8A%80%E6%9C%AF%E9%A2%86%E5%AF%BC%E5%8A%9B%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0%202022/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    技术领导力实战笔记 2022
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%91%84%E5%BD%B1%E5%85%A5%E9%97%A8%E8%AF%BE/%E6%91%84%E5%BD%B1%E5%85%A5%E9%97%A8%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    摄影入门课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%9C%B1%E8%B5%9F%E7%9A%84%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86%E8%AF%BE/%E6%9C%B1%E8%B5%9F%E7%9A%84%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    朱赟的技术管理课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%9E%97%E5%A4%96%20%C2%B7%20%E4%B8%93%E5%88%A9%E5%86%99%E4%BD%9C%E7%AC%AC%E4%B8%80%E8%AF%BE/%E6%9E%97%E5%A4%96%20%C2%B7%20%E4%B8%93%E5%88%A9%E5%86%99%E4%BD%9C%E7%AC%AC%E4%B8%80%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    林外 · 专利写作第一课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%B5%81%E7%A8%8B%E5%9E%8B%E7%BB%84%E7%BB%8715%E8%AE%B2/%E6%B5%81%E7%A8%8B%E5%9E%8B%E7%BB%84%E7%BB%8715%E8%AE%B2/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    流程型组织15讲
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%88%B1%E4%B8%8A%E8%B7%91%E6%AD%A5/%E7%88%B1%E4%B8%8A%E8%B7%91%E6%AD%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    爱上跑步
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%99%BD%E8%AF%9D%E6%B3%95%E5%BE%8B42%E8%AE%B2/%E7%99%BD%E8%AF%9D%E6%B3%95%E5%BE%8B42%E8%AE%B2/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    白话法律42讲
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_30" checked>
        
          
          <label class="md-nav__link" for="__nav_5_30" id="__nav_5_30_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    研发效率破局之道
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_30_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_30">
            <span class="md-nav__icon md-icon"></span>
            研发效率破局之道
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%A0%94%E5%8F%91%E6%95%88%E7%8E%87%E7%A0%B4%E5%B1%80%E4%B9%8B%E9%81%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    研发效率破局之道
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E7%AF%87%E8%AF%8D%20-%20%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E8%A6%81%E5%85%B3%E6%B3%A8%E7%A0%94%E5%8F%91%E6%95%88%E8%83%BD%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开篇词   为什么你要关注研发效能？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01%20-%20%E6%95%88%E8%83%BD%E6%A8%A1%E5%9E%8B%EF%BC%9A%E5%A6%82%E4%BD%95%E7%B3%BB%E7%BB%9F%E5%9C%B0%E7%90%86%E8%A7%A3%E7%A0%94%E5%8F%91%E6%95%88%E8%83%BD%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01   效能模型：如何系统地理解研发效能？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02%20-%20%E6%95%88%E8%83%BD%E5%BA%A6%E9%87%8F%EF%BC%9A%E6%95%88%E6%9E%9C%E4%B8%8D%E5%A5%BD%E7%94%9A%E8%87%B3%E6%9C%89%E5%89%AF%E4%BD%9C%E7%94%A8%EF%BC%8C%E6%80%8E%E4%B9%88%E5%9B%9E%E4%BA%8B%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02   效能度量：效果不好甚至有副作用，怎么回事？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03%20-%20%E6%95%88%E8%83%BD%E5%BA%A6%E9%87%8F%EF%BC%9A%E5%A6%82%E4%BD%95%E9%80%89%E5%AF%B9%E6%8C%87%E6%A0%87%E4%B8%8E%E6%96%B9%E6%B3%95%EF%BC%8C%E7%9C%9F%E6%AD%A3%E6%8F%90%E5%8D%87%E6%95%88%E8%83%BD%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03   效能度量：如何选对指标与方法，真正提升效能？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04%20-%20%E6%B5%81%E7%A8%8B%E4%BC%98%E5%8C%96%EF%BC%9A%E6%80%8E%E6%A0%B7%E6%89%8D%E8%83%BD%E8%AE%A9%E6%95%8F%E6%8D%B7%E3%80%81%E7%B2%BE%E7%9B%8A%E7%9C%9F%E6%AD%A3%E4%B8%BA%E6%88%91%E6%89%80%E7%94%A8%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04   流程优化：怎样才能让敏捷、精益真正为我所用？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05%20-%20%E4%BB%A3%E7%A0%81%E5%85%A5%E5%BA%93%E5%89%8D%EF%BC%9AFacebook%E5%A6%82%E4%BD%95%E8%AE%A9%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E8%81%9A%E7%84%A6%E4%BA%8E%E5%BC%80%E5%8F%91%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05   代码入库前：Facebook如何让开发人员聚焦于开发？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06%20-%20%E4%BB%A3%E7%A0%81%E5%85%A5%E5%BA%93%E5%88%B0%E4%BA%A7%E5%93%81%E4%B8%8A%E7%BA%BF%EF%BC%9AFacebook%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8CI-CD%E6%BB%A1%E8%B6%B3%E4%B8%9A%E5%8A%A1%E8%A6%81%E6%B1%82%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06   代码入库到产品上线：Facebook如何使用CI CD满足业务要求？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07%20-%20%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%EF%BC%9AFacebook%E7%9A%84%E7%AD%96%E7%95%A5%EF%BC%8C%E9%80%82%E5%90%88%E6%88%91%E7%9A%84%E5%9B%A2%E9%98%9F%E5%90%97%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07   分支管理：Facebook的策略，适合我的团队吗？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08%20-%20DevOps%E3%80%81SRE%E7%9A%84%E5%85%B1%E6%80%A7%EF%BC%9A%E5%BA%94%E7%94%A8%E5%85%A8%E6%A0%88%E6%80%9D%E8%B7%AF%E6%89%93%E9%80%9A%E5%BC%80%E5%8F%91%E5%92%8C%E8%BF%90%E7%BB%B4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08   DevOps、SRE的共性：应用全栈思路打通开发和运维
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09%20-%20%E4%BF%A1%E6%81%AF%E6%B5%81%E9%80%9A%EF%BC%9A%E8%AE%A9%E5%9B%A2%E9%98%9F%E9%AB%98%E6%95%88%E5%8D%8F%E5%90%8C%EF%BC%8C%E8%AE%A9%E4%BA%A7%E5%93%81%E5%87%86%E7%A1%AE%E5%87%BB%E4%B8%AD%E7%9B%AE%E6%A0%87/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09   信息流通：让团队高效协同，让产品准确击中目标
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10%20-%20%E7%AD%94%E7%96%91%E7%AF%87%EF%BC%9A%E5%8F%8D%E5%AF%B9996%E5%B9%B6%E4%B8%8D%E6%98%AF%E5%8F%8D%E5%AF%B9%E5%A5%8B%E6%96%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10   答疑篇：反对996并不是反对奋斗
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11%20-%20%E7%A0%94%E5%8F%91%E7%8E%AF%E5%A2%83%EF%BC%9AFacebook%E6%80%8E%E6%A0%B7%E8%AE%A9%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E4%B8%8D%E5%86%8D%E6%93%8D%E5%BF%83%E7%8E%AF%E5%A2%83%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11   研发环境：Facebook怎样让开发人员不再操心环境？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12%20-%20%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%EF%BC%9A%E5%93%AA%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%9B%B4%E9%80%82%E5%90%88%E6%88%91%E7%9A%84%E5%9B%A2%E9%98%9F%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12   代码审查：哪种方式更适合我的团队？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13%20-%20%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%EF%BC%9A%E5%AD%A6%E4%B9%A0Facebook%E7%9C%9F%E6%AD%A3%E5%8F%91%E6%8C%A5%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%E7%9A%84%E6%8F%90%E6%95%88%E4%BD%9C%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13   代码审查：学习Facebook真正发挥代码审查的提效作用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14%20-%20%E8%B4%A8%E9%87%8F%E4%B8%8E%E9%80%9F%E5%BA%A6%E7%9A%84%E5%9D%87%E8%A1%A1%EF%BC%9A%E8%AE%A9%E2%80%9C%E5%94%AF%E5%BF%AB%E4%B8%8D%E7%A0%B4%E2%80%9D%E5%BF%AB%E5%BE%97%E6%9B%B4%E6%8C%81%E4%B9%85/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14   质量与速度的均衡：让“唯快不破”快得更持久
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15%20-%20%E5%BC%80%E6%BA%90%EF%BC%9A%E4%BB%8EPhabricator%E7%9A%84%E5%BC%80%E6%BA%90%E5%8E%86%E7%A8%8B%E7%9C%8B%E5%BC%80%E6%BA%90%E5%88%A9%E5%BC%8A/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15   开源：从Phabricator的开源历程看开源利弊
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16%20-%20%E9%AB%98%E6%95%88%E4%B8%8A%E4%BA%91%EF%BC%9A%E5%A6%82%E4%BD%95%E7%94%A8%E4%BA%91%E8%AE%A1%E7%AE%97%E6%9D%A5%E6%8F%90%E9%AB%98%E6%95%88%E8%83%BD%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16   高效上云：如何用云计算来提高效能？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17%20-%20%E6%B5%8B%E8%AF%95%E5%B7%A6%E7%A7%BB%EF%BC%9A%E6%B5%8B%E8%AF%95%E5%A6%82%E4%BD%95%E5%BA%94%E5%AF%B9%E6%96%B0%E7%9A%84%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17   测试左移：测试如何应对新的开发模式？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18%20-%20%E8%93%9D%E7%BB%BF%E7%BA%A2%E9%BB%91%E7%81%B0%E5%BA%A6%E5%8F%91%E5%B8%83%EF%BC%9A%E8%BF%99%E4%BA%9B%E4%BA%94%E9%A2%9C%E5%85%AD%E8%89%B2%E7%9A%84%E5%8F%91%E5%B8%83%E5%88%B0%E5%BA%95%E6%80%8E%E4%B9%88%E7%94%A8%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18   蓝绿红黑灰度发布：这些五颜六色的发布到底怎么用？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19%20-%20%E4%B8%8D%E5%86%8D%E6%8E%89%E9%98%9F%EF%BC%8C%E7%A0%94%E5%8F%91%E6%B5%81%E7%A8%8B%E3%80%81%E5%B7%A5%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B6%8B%E5%8A%BF%E8%A7%A3%E8%AF%BB%E5%92%8C%E5%B1%95%E6%9C%9B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19   不再掉队，研发流程、工程方法趋势解读和展望
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20%20-%20%E7%AD%94%E7%96%91%E7%AF%87%EF%BC%9A%E5%A6%82%E4%BD%95%E5%B9%B3%E8%A1%A1%E7%9F%AD%E6%9C%9F%E6%94%B6%E7%9B%8A%E5%92%8C%E9%95%BF%E6%9C%9F%E6%94%B6%E7%9B%8A%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20   答疑篇：如何平衡短期收益和长期收益？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21%20-%20%E9%AB%98%E6%95%88%E5%B7%A5%E4%BD%9C%EF%BC%9AFacebook%E7%9A%8410x%E7%A8%8B%E5%BA%8F%E5%91%98%E6%95%88%E7%8E%87%E5%BF%83%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21   高效工作：Facebook的10x程序员效率心法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22%20-%20%E6%B7%B1%E5%BA%A6%E5%B7%A5%E4%BD%9C%EF%BC%9A%E8%81%9A%E7%84%A6%E6%9C%80%E6%9C%89%E4%BB%B7%E5%80%BC%E7%9A%84%E4%BA%8B%E5%84%BF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22   深度工作：聚焦最有价值的事儿
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23%20-%20%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7%EF%BC%9A%E9%80%89%E5%AF%B9%E7%94%A8%E5%AF%B9%E6%89%8D%E8%83%BD%E4%BA%8B%E5%8D%8A%E5%8A%9F%E5%80%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23   效率工具：选对用对才能事半功倍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%89%B9%E5%88%AB%E6%94%BE%E9%80%81%20-%20%E6%AF%8F%E4%B8%AA%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E9%83%BD%E5%BA%94%E8%AF%A5%E5%AD%A6%E4%B8%80%E4%BA%9BVIM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    特别放送   每个开发人员都应该学一些VIM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24%20-%20VIM%EF%BC%9A%E5%A6%82%E4%BD%95%E9%AB%98%E6%80%A7%E4%BB%B7%E6%AF%94%E5%9C%B0%E5%AD%A6%E4%B9%A0VIM%E7%9A%84%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24   VIM：如何高性价比地学习VIM的实用技巧？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25%20-%20%E7%8E%A9%E8%BD%ACGit%EF%BC%9A%E4%BA%94%E7%A7%8D%E6%8F%90%E9%AB%98%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E5%8E%9F%E5%AD%90%E6%80%A7%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25   玩转Git：五种提高代码提交原子性的基本操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    26   Facebook怎样实现代码提交的原子性？
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    26   Facebook怎样实现代码提交的原子性？
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      工作流一：使用一个分支完成所有需求的开发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="工作流一：使用一个分支完成所有需求的开发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      单分支工作流具体步骤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1a" class="md-nav__link">
    <span class="md-ellipsis">
      阶段1：开始开发需求A
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2b" class="md-nav__link">
    <span class="md-ellipsis">
      阶段2：开始开发需求B
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3bb1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段3：拆分需求B的代码，把B1’提交检查系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4b2b1b1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段4：继续开发B2，同时得到B1的反馈，修改B1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5a1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段5：继续开发A1，并发出代码审查
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6b1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段6：B1检查通过，推送到远程代码仓共享分支
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      用本地多分支实现多个需求的提交的原子性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="用本地多分支实现多个需求的提交的原子性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      多分支工作流具体步骤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1c" class="md-nav__link">
    <span class="md-ellipsis">
      阶段1：开发需求C
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2d" class="md-nav__link">
    <span class="md-ellipsis">
      阶段2：开发需求D
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3c1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段3：推送提交C1到远端代码仓共享分支
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4d1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段4：继续开发D1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      两种工作流的对比
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      小结
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      思考题
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../27%20-%20%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%9A%E4%B8%8D%E5%8F%AA%E6%98%AF%E9%85%B7%EF%BC%8C%E6%9B%B4%E9%87%8D%E8%A6%81%E7%9A%84%E6%98%AF%E8%83%BD%E6%8F%90%E9%AB%98%E4%B8%AA%E4%BA%BA%E6%95%88%E8%83%BD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    27   命令行：不只是酷，更重要的是能提高个人效能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28%20-%20%E4%BB%8E%E5%B7%A5%E4%BD%9C%E5%9C%BA%E6%99%AF%E5%87%BA%E5%8F%91%EF%BC%8C%E5%AF%BB%E6%89%BE%E7%82%AB%E9%85%B7%E4%B8%94%E6%9C%89%E6%95%88%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    28   从工作场景出发，寻找炫酷且有效的命令行工具
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29%20-%20%201%2B1%3E2%EF%BC%8C%E7%81%B5%E6%B4%BB%E7%9A%84%E5%B7%A5%E5%85%B7%E7%BB%84%E5%90%88%E5%8F%8A%E7%8E%AF%E5%A2%83%E8%AE%A9%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%95%88%E7%8E%87%E7%BF%BB%E5%80%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    29    1+1>2，灵活的工具组合及环境让你的工作效率翻倍
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30%20-%20%E7%AD%94%E7%96%91%E7%AF%87%EF%BC%9A%E5%85%B3%E4%BA%8E%E4%BB%B7%E5%80%BC%E5%AF%BC%E5%90%91%E5%92%8C%E6%B2%9F%E9%80%9A/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    30   答疑篇：关于价值导向和沟通
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31%20-%20%E4%B8%9A%E5%8A%A1%E7%9B%AE%E6%A0%87%E5%92%8C%E6%8A%80%E6%9C%AF%E7%9B%AE%E6%A0%87%E4%B8%A4%E6%89%8B%E6%8A%93%EF%BC%9A%E6%80%8E%E6%A0%B7%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E5%9B%A2%E9%98%9F%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    31   业务目标和技术目标两手抓：怎样打造高效团队？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../32%20-%20%E4%BB%8ENetflix%E5%85%AC%E5%BC%80%E7%9A%84%E8%91%97%E5%90%8DPPT%E8%B0%88%E7%A1%85%E8%B0%B7%E5%85%AC%E5%8F%B8%E6%96%87%E5%8C%96/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    32   从Netflix公开的著名PPT谈硅谷公司文化
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33%20-%20Facebook%E4%BC%81%E4%B8%9A%E6%96%87%E5%8C%96%EF%BC%9A%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%96%87%E5%8C%96%E6%98%AF%E5%88%9B%E9%80%A0%E5%8A%9B%E5%BC%95%E6%93%8E/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    33   Facebook企业文化：工程师文化是创造力引擎
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34%20-%20Facebook%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%96%87%E5%8C%96%E5%AE%9E%E8%B7%B5%E4%B8%89%E5%A4%A7%E6%94%AF%E6%9F%B1%E4%B9%8B%E4%B8%80%E5%81%9A%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E4%BA%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    34   Facebook工程师文化实践三大支柱之一做感兴趣的事
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35%20-%20Facebook%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%96%87%E5%8C%96%E5%AE%9E%E8%B7%B5%E4%B8%89%E5%A4%A7%E6%94%AF%E6%9F%B1%E4%B9%8B%E4%BA%8C%E6%8B%A5%E6%9C%89%E4%BF%A1%E6%81%AF%E5%92%8C%E6%9D%83%E9%99%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    35   Facebook工程师文化实践三大支柱之二拥有信息和权限
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../36%20-%20Facebook%E5%B7%A5%E7%A8%8B%E5%B8%88%E6%96%87%E5%8C%96%E5%AE%9E%E8%B7%B5%E4%B8%89%E5%A4%A7%E6%94%AF%E6%9F%B1%E4%B9%8B%E4%B8%89%E7%BB%A9%E6%95%88%E8%B0%83%E8%8A%82/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    36   Facebook工程师文化实践三大支柱之三绩效调节
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BB%93%E6%9D%9F%E8%AF%AD%20-%20%E8%B6%85%E8%B6%8A%E6%98%A8%E5%A4%A9%E7%9A%84%E8%87%AA%E5%B7%B1%EF%BC%8C%E4%BA%AB%E5%8F%97%E6%88%90%E9%95%BF%E7%9A%84%E5%BF%AB%E4%B9%90/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    结束语   超越昨天的自己，享受成长的快乐
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BB%93%E8%AF%BE%E6%B5%8B%E8%AF%95%20-%20%E5%85%B3%E4%BA%8E%E7%A0%94%E5%8F%91%E6%95%88%E7%8E%87%E7%9A%84%E8%BF%99%E4%BA%9B%E7%9F%A5%E8%AF%86%EF%BC%8C%E4%BD%A0%E9%83%BD%E6%8E%8C%E6%8F%A1%E4%BA%86%E5%90%97%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    结课测试   关于研发效率的这些知识，你都掌握了吗？
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%B8%AA%E4%BA%BA%E8%B4%A2%E5%AF%8C%E8%AF%BE/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E4%B8%AA%E4%BA%BA%E8%B4%A2%E5%AF%8C%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    程序员的个人财富课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%E6%89%8B%E5%86%8C/%E7%A8%8B%E5%BA%8F%E5%91%98%E8%81%8C%E4%B8%9A%E8%A7%84%E5%88%92%E6%89%8B%E5%86%8C/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    程序员职业规划手册
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%A8%8B%E5%BA%8F%E5%91%98%E8%BF%9B%E9%98%B6%E6%94%BB%E7%95%A5/%E7%A8%8B%E5%BA%8F%E5%91%98%E8%BF%9B%E9%98%B6%E6%94%BB%E7%95%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    程序员进阶攻略
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%BC%96%E8%BE%91%E8%AE%AD%E7%BB%83%E8%90%A5/%E7%BC%96%E8%BE%91%E8%AE%AD%E7%BB%83%E8%90%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    编辑训练营
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%81%8C%E5%9C%BA%E6%B1%82%E7%94%9F%E6%94%BB%E7%95%A5/%E8%81%8C%E5%9C%BA%E6%B1%82%E7%94%9F%E6%94%BB%E7%95%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    职场求生攻略
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%A7%86%E8%A7%89%E7%AC%94%E8%AE%B0%E5%85%A5%E9%97%A8%E8%AF%BE/%E8%A7%86%E8%A7%89%E7%AC%94%E8%AE%B0%E5%85%A5%E9%97%A8%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    视觉笔记入门课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%AE%B2%E5%A5%BD%E6%95%85%E4%BA%8B/%E8%AE%B2%E5%A5%BD%E6%95%85%E4%BA%8B/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    讲好故事
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%B6%85%E7%BA%A7%E8%AE%BF%E8%B0%88%EF%BC%9A%E5%AF%B9%E8%AF%9D%E6%AF%95%E7%8E%84/%E8%B6%85%E7%BA%A7%E8%AE%BF%E8%B0%88%EF%BC%9A%E5%AF%B9%E8%AF%9D%E6%AF%95%E7%8E%84/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    超级访谈：对话毕玄
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%B6%85%E7%BA%A7%E8%AE%BF%E8%B0%88%EF%BC%9A%E5%AF%B9%E8%AF%9D%E7%8E%89%E4%BC%AF/%E8%B6%85%E7%BA%A7%E8%AE%BF%E8%B0%88%EF%BC%9A%E5%AF%B9%E8%AF%9D%E7%8E%89%E4%BC%AF/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    超级访谈：对话玉伯
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%B6%85%E7%BA%A7%E8%AE%BF%E8%B0%88%EF%BC%9A%E5%AF%B9%E8%AF%9D%E9%81%93%E5%93%A5/%E8%B6%85%E7%BA%A7%E8%AE%BF%E8%B0%88%EF%BC%9A%E5%AF%B9%E8%AF%9D%E9%81%93%E5%93%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    超级访谈：对话道哥
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%B7%9F%E7%9D%80%E9%AB%98%E6%89%8B%E5%AD%A6%E5%A4%8D%E7%9B%98/%E8%B7%9F%E7%9D%80%E9%AB%98%E6%89%8B%E5%AD%A6%E5%A4%8D%E7%9B%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    跟着高手学复盘
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E9%9B%B7%E8%93%93%E8%93%93%E7%9A%84%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E8%AF%BE/%E9%9B%B7%E8%93%93%E8%93%93%E7%9A%84%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    雷蓓蓓的项目管理实战课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E9%BB%84%E5%8B%87%E7%9A%84OKR%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/%E9%BB%84%E5%8B%87%E7%9A%84OKR%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    黄勇的OKR实战笔记
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    计算机基础
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E8%BF%90%E7%BB%B4-%E6%B5%8B%E8%AF%95/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    运维-测试
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      工作流一：使用一个分支完成所有需求的开发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="工作流一：使用一个分支完成所有需求的开发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      单分支工作流具体步骤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1a" class="md-nav__link">
    <span class="md-ellipsis">
      阶段1：开始开发需求A
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2b" class="md-nav__link">
    <span class="md-ellipsis">
      阶段2：开始开发需求B
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3bb1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段3：拆分需求B的代码，把B1’提交检查系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4b2b1b1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段4：继续开发B2，同时得到B1的反馈，修改B1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5a1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段5：继续开发A1，并发出代码审查
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6b1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段6：B1检查通过，推送到远程代码仓共享分支
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      用本地多分支实现多个需求的提交的原子性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="用本地多分支实现多个需求的提交的原子性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      多分支工作流具体步骤
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1c" class="md-nav__link">
    <span class="md-ellipsis">
      阶段1：开发需求C
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2d" class="md-nav__link">
    <span class="md-ellipsis">
      阶段2：开发需求D
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3c1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段3：推送提交C1到远端代码仓共享分支
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4d1" class="md-nav__link">
    <span class="md-ellipsis">
      阶段4：继续开发D1
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      两种工作流的对比
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      小结
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      思考题
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>26   Facebook怎样实现代码提交的原子性？</h1>

<p>你好，我是葛俊。今天，我们继续来聊聊如何通过Git提高代码提交的原子性吧。</p>
<p>在上一篇文章中，我给你详细介绍了Git助力提高代码提交原子性的五条基础操作，今天我们再来看看Facebook的开发人员具体是如何使用这些操作来实现提交的原子性的。</p>
<p>为了帮助你更直观地理解、学习，在这篇文章里，我会与你详细描述工作场景，并列出具体命令。同时，我还把这些命令的输出也都放到了文章里，供你参考。所以，这篇文章会比较长、比较细。不过不要担心，这些内容都是日常工作中的自然流程，阅读起来也会比较顺畅。</p>
<p>在Facebook，开发人员最常使用两种Git工作流：</p>
<ul>
<li>使用一个分支，完成所有需求的开发；</li>
<li>使用多个分支，每个分支支持一个需求的开发。</li>
</ul>
<p>两种工作流都利用Git的超强功能来提高代码原子性。这里的“需求”包括功能开发和缺陷修复，用大写字母A、B、C等表示；每个需求都可能包含有多个提交，每个提交用需求名+序号表示。比如，A可能包含A1、A2两个提交，B只包含B1这一个提交，而C包含C1、C2、C3三个提交。</p>
<p>需要强调的是，这两种工作流中的一个分支和多个分支，都是在开发者本地机器上的分支，不是远程代码仓中的功能分支。我在前面<a href="https://time.geekbang.org/column/article/132499">第7篇文章</a>中提到过，Facebook的主代码仓是不使用功能分支的。</p>
<p>另外，这两种Git工作流对代码提交原子性的助力作用，跟主代码仓是否使用单分支开发没有关系。也就是说，即使你所在团队的主仓没有使用Facebook那样的单分支开发模式，仍然可以使用这两种工作流来提高代码提交的原子性。</p>
<p>接下来，我们就先看看第一种工作流，也就是使用一个分支完成所有需求的开发。</p>
<h2 id="_1">工作流一：使用一个分支完成所有需求的开发</h2>
<p>这种工作流程的最大特点是，<strong>使用一个分支上的提交链，大量使用git rebase -i来修改提交链上的提交</strong>。这里的提交链，指的是当前分支上，还没有推送到远端主仓共享分支的所有提交。</p>
<p>首先，我们需要设置一个本地分支来开发需求，通过这个分支和远端主仓的共享分支进行交互。本地分支通常直接使用master分支，而远端主仓的共享分支一般是origin/master，也叫作上游分支（upstream）。</p>
<p>一般来说，在git clone的时候，master是默认已经产生，并且是已经跟踪origin/master了的，你不需要做任何设置，可以查看.git/config文件做确认：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&gt; cat .git/config
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>...
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>[remote &quot;origin&quot;]
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    url = git@github.com:jungejason/git-atomic-demo.git
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    fetch = +refs/heads/*:refs/remotes/origin/*
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>[branch &quot;master&quot;]
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    remote = origin
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    merge = refs/heads/master
</code></pre></div>
<p>可以看到，branch "master"里有一个remote = origin选项，表明master分支在跟踪origin这个上游仓库；另外，config文件里还有一个remote "origin"选项，列举了origin这个上游仓库的地址。</p>
<p>当然，除了直接查看config文件外，Git还提供了命令行工具。你可以使用git branch -vv查看某个分支是否在跟踪某个远程分支，然后再使用git remote show 去查看远程代码仓的细节。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>## 查看远程分支细节
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>&gt; git branch -vv
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>  master      5055c14 [origin/master: behind 1] Add documentation for getRandom endpoint
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>## 查看分支跟踪的远程代码仓细节
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>&gt; git remote show origin
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>* remote origin
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>  Fetch URL: git@github.com:jungejason/git-atomic-demo.git
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>  Push  URL: git@github.com:jungejason/git-atomic-demo.git
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>  HEAD branch: master
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>  Remote branch:
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    master tracked
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>  Local branches configured for &#39;git pull&#39;:
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    master  merges with remote master
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>  Local ref configured for &#39;git push&#39;:
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    master pushes to master (fast-forwardable)
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>11:07:36 (master2) jasonge@Juns-MacBook-Pro-2.local:~/jksj-repo/git-atomic-demo
</code></pre></div>
<p>因为config文件简单直观，所以我常常直接到config文件里面查看和修改来完成这些操作。关于远程跟踪上游代码仓分支的更多细节，比如产生新分支、设置上游分支等，你可以参考<a href="https://mincong-h.github.io/2018/05/02/git-upstream-tracking/">Git: Upstream Tracking Understanding</a>这篇文章。</p>
<p>设置好分支之后，我们来看看<strong>这个工作流中的具体步骤</strong>。</p>
<h3 id="_2">单分支工作流具体步骤</h3>
<p>单分支工作流的步骤，大致包括以下4步：</p>
<ol>
<li>一个原子性的功能完成后，使用<a href="https://time.geekbang.org/column/article/152715">第25篇文章</a>中提到的改变提交顺序的方法，把它放到距离origin/master最近的地方。</li>
<li>把这个提交发到代码审查系统Phabricator上进行质量检查，包括代码审查和机器检查。在等待质量检查结果的同时，继续其他提交的开发。</li>
<li>如果没有通过质量检查，则需要对提交进行修改，修改之后返回第2步。</li>
<li>如果通过质量检查， 就把这个提交推送到主代码仓的共享分支上，然后继续其他分支的开发，回到第1步。</li>
</ol>
<p>请注意第二步的目的是，确保入库代码的质量，你可以根据实际情况进行检查。比如，你可以通过提交PR触发机器检查的工作流，也可以运行单元测试自行检查。如果没有任何质量检查的话，至少也要进行简单手工验证，让进入到远程代码仓的代码有起码的质量保障。</p>
<p>接下来，我设计了一个案例，尽量模拟我在Facebook的真实开发场景，与你讲述这个工作流的操作步骤。大致场景是这样的：我本来在开发需求A，这时来了更紧急的需求B。于是，我开始开发B，把B分成两个原子性提交B1和B2，并在B1完成之后最先推送到远程代码仓共享分支。</p>
<p>这个案例中，提交的改动很简单，但里面涉及了很多开发技巧，可供你借鉴。</p>
<h3 id="1a">阶段1：开始开发需求A</h3>
<p>某天，我接到开发需求A的任务，要求在项目中添加一个README文件，对项目进行描述。</p>
<p>我先添加一个简单的README.md文件，然后用git commit -am ‘readme’ 快速生成一个提交A1，确保代码不会丢失。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>## 文件内容
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>&gt; cat README.md
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>## This project is for demoing git
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>## 产生提交
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>&gt; git commit -am &#39;readme&#39;
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>[master 0825c0b] readme
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a> 1 file changed, 1 insertion(+)
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a> create mode 100644 README.md
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>## 查看提交历史
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>&gt; git log --oneline --graph
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>* 0825c0b (HEAD -&gt; master) readme
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>...
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>## 查看提交细节
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>&gt; git show
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>commit 0825c0b6cd98af11b171b52367209ad6e29e38d1 (HEAD -&gt; master)
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>Author: Jason Ge &lt;gejun_1978@yahoo.com&gt;
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>Date:   Tue Oct 15 12:45:08 2019
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>    readme
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>diff --git a/README.md b/README.md
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>new file mode 100644
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>index 0000000..789cfa9
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>--- /dev/null
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>+++ b/README.md
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a>@@ -0,0 +1 @@
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a>+## This project is for demoing git
</code></pre></div>
<p>这时，A1是master上没有推送到origin/master的唯一提交，也就是说，是提交链上的唯一提交。</p>
<p>请注意，A1的Commit Message很简单，就是“readme”这6个字符。在把A1发出去做代码质量检查之前，我需要添加Commit Message的细节。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/d1/0a/d14b3b23385fcb20d9a0013544a7cc0a.png?wh=542%2A197" /></p>
<p>图1 提交链状态第1步</p>
<h3 id="2b">阶段2：开始开发需求B</h3>
<p>这时，来了另外一个紧急需求B，要求是添加一个endpoint getRandom。开发时，我不切换分支，直接在master上继续开发。</p>
<p>首先，我写一个getRandom的实现，并进行简单验证。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>## 用VIM修改
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>&gt; vim index.js
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>## 查看工作区中的改动
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>&gt; git diff
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>diff --git a/index.js b/index.js
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>index 986fcd8..06695f6 100644
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>--- a/index.js
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>+++ b/index.js
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>@@ -6,6 +6,10 @@ app.get(&#39;/timestamp&#39;, function (req, res) {
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>   res.send(&#39;&#39; + Date.now())
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a> })
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>+app.get(&#39;/getRandom&#39;, function (req, res) {
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>+  res.send(&#39;&#39; + Math.random())
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>+})
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>+
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a> app.get(&#39;/&#39;, function (req, res) {
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>   res.send(&#39;hello world&#39;)
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a> })
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>## 用命令行工具httpie验证结果
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>&gt; http localhost:3000/getRandom
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>HTTP/1.1 200 OK
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>Connection: keep-alive
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>Content-Length: 19
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>Content-Type: text/html; charset=utf-8
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>Date: Tue, 15 Oct 2019 03:49:15 GMT
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>ETag: W/&quot;13-U1KCE8QRuz+dioGnmVwMkEWypYI&quot;
<a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a>X-Powered-By: Express
<a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a>
<a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a>0.25407324324864167
</code></pre></div>
<p>为确保代码不丢失，我用git commit -am ‘random’ 命令生成了一个提交B1：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>## 产生提交
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>&gt; git commit -am &#39;random&#39;
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>[master 7752df4] random
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a> 1 file changed, 4 insertions(+)
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>## 查看提交历史
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>&gt; git log --oneline --graph
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>* 7752df4 (HEAD -&gt; master) random
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>* 0825c0b readme
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>...
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>## 查看提交细节
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>&gt; git show
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>commit f59a4084e3a2c620bdec49960371f8cc93b86825 (HEAD -&gt; master)
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>Author: Jason Ge &lt;gejun_1978@yahoo.com&gt;
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>Date:   Tue Oct 15 11:55:06 2019
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>    random
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>diff --git a/index.js b/index.js
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>index 986fcd8..06695f6 100644
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>--- a/index.js
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>+++ b/index.js
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>@@ -6,6 +6,10 @@ app.get(&#39;/timestamp&#39;, function (req, res) {
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>   res.send(&#39;&#39; + Date.now())
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a> })
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>+app.get(&#39;/getRandom&#39;, function (req, res) {
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>+  res.send(&#39;&#39; + Math.random())
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>+})
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>+
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a> app.get(&#39;/&#39;, function (req, res) {
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>   res.send(&#39;hello world&#39;)
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a> })
</code></pre></div>
<p>B1的Commit Message也很简陋，因为当前的关键任务是先把功能运行起来。</p>
<p>现在，我的提交链上有A1和B1两个提交了。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/74/94/747ab78ca16aefc1f4a74a904014ae94.png?wh=773%2A196" /></p>
<p>图2 提交链状态第2步</p>
<p>接下来，我需要进行需求B的进一步开发：在README文件中给这个新的endpoint添加说明。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>&gt; git diff
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>diff --git a/README.md b/README.md
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>index 789cfa9..7b2b6af 100644
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>--- a/README.md
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>+++ b/README.md
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>@@ -1 +1,3 @@
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a> ## This project is for demoing git
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>+
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>+You can visit endpoint getRandom to get a random real number.
</code></pre></div>
<p>我认为这个改动是B1的一部分，所以我用git commit --amend把它添加到B1中。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>## 添加改动到B1
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>&gt; git add README.md
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>&gt; git commit --amend
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>[master 27c4d40] random
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a> Date: Tue Oct 15 11:55:06 2019 +0800
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a> 2 files changed, 6 insertions(+)
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>## 查看提交历史
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>&gt; git log --oneline --graph
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>* 27c4d40 (HEAD -&gt; master) random
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>* 0825c0b readme
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
</code></pre></div>
<p>现在，我的提交链上还是A1和B1’两个提交。这里的B1’是为了区别之前的B1，B1仍然存在代码仓中，不过是不再使用了而已。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/25/37/2581e07273218b464b463cf3243a3c37.png?wh=773%2A197" /></p>
<p>图3 提交链状态第3步</p>
<h3 id="3bb1">阶段3：拆分需求B的代码，把B1’提交检查系统</h3>
<p>这时，我觉得B1’的功能实现部分，也就是index.js的改动部分，可以推送到origin/master了。</p>
<p>不过，文档部分也就是README.md文件的改动，还不够好，而且功能实现和文档应该分成两个原子性提交。于是，我将B1’拆分为B1’’ 和B2两部分。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>## 将B1&#39;拆分
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>&gt; git reset HEAD^
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>Unstaged changes after reset:
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>M   README.md   ## 这个将是B2的内容
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>M   index.js    ## 这个将是B1&#39;&#39;的内容
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>&gt; git status
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>On branch master
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>Your branch is ahead of &#39;origin/master&#39; by 1 commit.
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>  (use &quot;git push&quot; to publish your local commits)
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>Changes not staged for commit:
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>    modified:   README.md
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a>    modified:   index.js
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a>no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a>&gt; git add index.js
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>&gt; git commit   ## 这里我认真填写B1&#39;&#39;的Commit Message
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a>&gt; git add README.md
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a>&gt; git commit   ## 这里我认真填写B2的Commit Message
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>## 查看提交历史
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a>* 68d813f (HEAD -&gt; master) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a>* 7d43442 Add getRandom endpoint
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a>* 0825c0b readme
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
</code></pre></div>
<p>现在，提交链上有A1、B1’’、B2三个提交。</p>
<p>请注意，在这里我把功能实现和文档分为两个原子性提交，只是为了帮助说明我需要把B1’进行原子性拆分而已，在实际工作中，很可能功能实现和文档就应该放在一个提交当中。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/1a/9d/1abf304f8b1de6fcd4a1487243e4409d.png?wh=994%2A203" /></p>
<p>图4 提交链状态第4步</p>
<p>提交B1’拆开之后，为了把B1’’ 推送到origin/master上去，我需要要把B1’’ 挪到A1的前面。首先，运行git rebase -i origin/master。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>&gt; git rebase -i origin/master
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>## 下面是弹出的编辑器
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>pick 0825c0b readme                   ## 这个是A1
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>pick 7d43442 Add getRandom endpoint   ## 这个是B1&#39;&#39;
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>pick 68d813f [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a># Rebase 7b6ea30..68d813f onto 7b6ea30 (3 commands)
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>...
</code></pre></div>
<p>然后，我把针对B1’’ 的那一行挪到第一行，保存退出。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>pick 7d43442 Add getRandom endpoint  ## 这个是B1&#39;&#39;
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>pick 0825c0b readme                  ## 这个是A1   
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>pick 68d813f [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a># Rebase 7b6ea30..68d813f onto 7b6ea30 (3 commands)
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>...
</code></pre></div>
<p>git rebase -i 命令会显示运行成功，使用git log命令可以看到我成功改变了提交的顺序。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>&gt; git rebase -i origin/master
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Successfully rebased and updated refs/heads/master.
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>&gt; git log --oneline --graph
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>* 86126f7 (HEAD -&gt; master) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>* 7113c16 readme
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>* 4d37768 Add getRandom endpoint
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
</code></pre></div>
<p>现在，提交链上有B1’’’、A1’、B2’三个提交了。请注意，B2’也是一个新的提交。虽然我只是交换了B1’’ 和A的顺序，但git rebase的操作是重新应用，产生出了三个新提交。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/2a/a8/2af308dacc801197e5248b49f8cc83a8.png?wh=994%2A204" /></p>
<p>图5 提交链状态第5步</p>
<p>现在，我可以把B1’’’ 发送给质量检查系统了。</p>
<p>首先，产生一个临时分支temp指向B2’，确保能回到原来的代码；然后，用git reset --hard命令把master和HEAD指向B1’’’。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>&gt; git branch temp
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>&gt; git reset --hard 4d37768
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>HEAD is now at 4d37768 Add getRandom endpoint
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>## 检查提交链
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>&gt; git log --oneline --graph
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>* 4d37768 (HEAD -&gt; master) Add getRandom endpoint
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>...
</code></pre></div>
<p>这时，提交链中只有B1’’’。当然，A1’和B2’仍然存在，只是不在提交链里了而已。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/71/91/71b4dba396681ffcec08e912edb7b691.png?wh=541%2A197" /></p>
<p>图6 提交链状态第6步</p>
<p>最后，运行命令把B1’’’ 提交到Phabricator上，结束后使用git reset --hard temp命令重新把HEAD指向B2’。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>## 运行arc命令把B&#39;&#39;&#39;提交到Phabricator上
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>&gt; arc diff
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>## 重新把HEAD指向B2&#39;
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>&gt; git reset --hard temp
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>HEAD is now at 86126f7 [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>## 检查提交链
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>&gt; git log --oneline --graph
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>* 86126f7 (HEAD -&gt; master, temp, single-branch-step-5) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>* 7113c16 readme
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>* 4d37768 Add getRandom endpoint
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
</code></pre></div>
<p>这时，提交链又恢复成为B1’’’、A1’、B2’三个提交了。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/91/c2/912e4a00c2d08b9d82fee818d780c0c2.png?wh=994%2A203" /></p>
<p>图7 提交链状态第7步</p>
<h3 id="4b2b1b1">阶段4：继续开发B2，同时得到B1的反馈，修改B1</h3>
<p>把B1’’’ 发送到质量检查中心之后，我回到B2’ 继续工作，也就是在README文件中继续添加关于getRandom的文档。我正在开发的过程中，得到B1’’’ 的反馈，要求我对其进行修改。于是，我首先保存当前对B2’的修改，用git commit --amend把它添加到B2’中。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>## 查看工作区中的修改
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>&gt; git diff
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>diff --git a/README.md b/README.md
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>index 8a60943..1f06f52 100644
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>--- a/README.md
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>+++ b/README.md
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>@@ -1,3 +1,4 @@
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a> ## This project is for demoing git
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a> You can visit endpoint getRandom to get a random real number.
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>+The end endpoint is `/getRandom`.
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>## 把工作区中的修改添加到B2&#39;中
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>&gt; git add README.md
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>&gt; git commit --amend
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>[master 7b4269c] [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a> Date: Tue Oct 15 17:17:18 2019 +0800
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a> 1 file changed, 3 insertions(+)
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>* 7b4269c (HEAD -&gt; master) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>* 7113c16 readme
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>* 4d37768 Add getRandom endpoint
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>...
</code></pre></div>
<p>这时，提交链成为B1’’’、A1’、B2’’ 三个提交了。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/de/c0/de37ce76ba36c0c8ec3075a67e3a8ac0.png?wh=993%2A204" /></p>
<p>图8 提交链状态第8步</p>
<p>接下来，我使用<a href="https://time.geekbang.org/column/article/152715">第25篇文章</a>中介绍的基础操作对B1’’’ 进行修改。</p>
<p>首先，在git rebase -i origin/master的文本输入框中，将pick B1’’’ 那一行修改为edit B1’’’，然后保存退出，git rebase 暂停在B1’’’ 处：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>&gt; git rebase -i origin/master
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>## 以下是弹出编辑器中的文本内容
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>edit 4d37768 Add getRandom endpoint   ## &lt;-- 这一行开头原本是pick
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>pick 7113c16 readme
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>pick 7b4269c [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>## 以下是保存退出后 git rebase -i origin/master 的输出
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>Stopped at 4d37768...  Add getRandom endpoint
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>You can amend the commit now, with
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>  git commit --amend
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>Once you are satisfied with your changes, run
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>  git rebase --continue
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>## 查看提交历史
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>&gt; git log --oneline --graph
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>* 4d37768 (HEAD) Add getRandom endpoint
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
</code></pre></div>
<p>这时，提交链上只有B1’’’ 一个提交。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/6f/66/6f62dbf5e85b3f1705d4a6475ebac966.png?wh=542%2A146" /></p>
<p>图9 提交链状态第9步</p>
<p>然后，我对index.js进行修改，并添加到B1’’’ 中，成为B1’’’’。完成之后，再次把B1’’’’ 发送到代码质量检查系统。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>## 根据同事反馈，修改index.js
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>&gt; vim index.js
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>&gt; git add index.js
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>## 查看修改
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>&gt; git diff --cached
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>diff --git a/index.js b/index.js
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>index 06695f6..cc92a42 100644
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>--- a/index.js
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>+++ b/index.js
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>@@ -7,7 +7,7 @@ app.get(&#39;/timestamp&#39;, function (req, res) {
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a> })
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a> app.get(&#39;/getRandom&#39;, function (req, res) {
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>-  res.send(&#39;&#39; + Math.random())
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>+  res.send(&#39;The random number is:&#39; + Math.random())
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a> })
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a> app.get(&#39;/&#39;, function (req, res) {
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>## 把改动添加到B1&#39;&#39;&#39;中。
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>&gt; git commit --amend
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>[detached HEAD 29c8249] Add getRandom endpoint
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a> Date: Tue Oct 15 17:16:12 2019 +0800
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a> 1 file changed, 4 insertions(+)
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>19:17:28 (master|REBASE-i) jasonge@Juns-MacBook-Pro-2.local:~/jksj-repo/git-atomic-demo
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>&gt; git show
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>commit 29c82490256459539c4a1f79f04823044f382d2b (HEAD)
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>Author: Jason Ge &lt;gejun_1978@yahoo.com&gt;
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>Date:   Tue Oct 15 17:16:12 2019
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>    Add getRandom endpoint
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>    Summary:
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>    As title.
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>    Test:
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>    Verified it on localhost:3000/getRandom
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a>diff --git a/index.js b/index.js
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a>index 986fcd8..cc92a42 100644
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>--- a/index.js
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a>+++ b/index.js
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a>@@ -6,6 +6,10 @@ app.get(&#39;/timestamp&#39;, function (req, res) {
<a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a>   res.send(&#39;&#39; + Date.now())
<a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a> })
<a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>
<a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a>+app.get(&#39;/getRandom&#39;, function (req, res) {
<a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a>+  res.send(&#39;The random number is:&#39; + Math.random())
<a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a>+})
<a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a>+
<a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a> app.get(&#39;/&#39;, function (req, res) {
<a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a>   res.send(&#39;hello world&#39;)
<a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a> })
<a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a>
<a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a>
<a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a>## 查看提交链
<a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a>&gt; git log --oneline --graph
<a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a>* 29c8249 (HEAD) Add getRandom endpoint
<a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a>* 7b6ea30 (origin/master, git-add-p) Add a new endpoint to return timestamp
<a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a>
<a id="__codelineno-15-63" name="__codelineno-15-63" href="#__codelineno-15-63"></a>
<a id="__codelineno-15-64" name="__codelineno-15-64" href="#__codelineno-15-64"></a>## 将B1&#39;&#39;&#39;&#39;发送到代码审查系统
<a id="__codelineno-15-65" name="__codelineno-15-65" href="#__codelineno-15-65"></a>&gt; arc diff
</code></pre></div>
<p>这时，提交链只有B1’’’’ 一个提交。<br />
<img alt="" src="https://static001.geekbang.org/resource/image/a1/0e/a16c37876defb48c59977c23bb86960e.png?wh=542%2A145" /></p>
<p>图10 提交链状态第10步</p>
<p>最后，运行git rebase --continue完成整个git rebase -i操作。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>&gt; git rebase --continue
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>Successfully rebased and updated refs/heads/master.
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>## 查看提交历史
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>&gt; git log --oneline --graph
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>* bc0900d (HEAD -&gt; master) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>* 1562cc7 readme
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>* 29c8249 Add getRandom endpoint
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>...
</code></pre></div>
<p>这时，提交链包含B1’’’’、A1’’、B2’’’ 三个提交。<br />
<img alt="" src="https://static001.geekbang.org/resource/image/a7/fc/a72eba2775d8ebbbe0f9808cc17917fc.png?wh=993%2A203" /></p>
<p>图11 提交链状态第11步</p>
<h3 id="5a1">阶段5：继续开发A1，并发出代码审查</h3>
<p>这时，我认为A1’’ 比B2’’’ 更为紧急重要，于是决定先完成A1’’ 的工作并发送审查，同样也是使用git rebase -i。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>&gt; git rebase -i HEAD^^  ## 两个^^表示从当前HEAD前面两个提交的地方rebase
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>## git rebase 弹出编辑窗口
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>edit 1562cc7 readme  &lt;-- 这一行开头原来是pick。这个是A1&#39;&#39;
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>pick bc0900d [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>## 保存退出后git rebase -i HEAD^^ 的结果
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>Stopped at 1562cc7...  readme
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>You can amend the commit now, with
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>  git commit --amend
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>Once you are satisfied with your changes, run
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>  git rebase --continue
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>## 对A1&#39;&#39;修改
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>&gt; vim README.md
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>&gt; git diff
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>diff --git a/README.md b/README.md
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>index 789cfa9..09bcc7d 100644
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a>--- a/README.md
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a>+++ b/README.md
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a>@@ -1 +1 @@
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a>-## This project is for demoing git
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a>+# This project is for demoing atomic commit in git
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a>&gt; git add README.md
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a>&gt; git commit --amend
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a>## 下面是git commit弹出编辑器，在里面完善A1&#39;&#39;的Commit Message
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>Add README.md file
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a>Summary: we need a README file for the project.
<a id="__codelineno-17-36" name="__codelineno-17-36" href="#__codelineno-17-36"></a>
<a id="__codelineno-17-37" name="__codelineno-17-37" href="#__codelineno-17-37"></a>Test: none.
<a id="__codelineno-17-38" name="__codelineno-17-38" href="#__codelineno-17-38"></a>
<a id="__codelineno-17-39" name="__codelineno-17-39" href="#__codelineno-17-39"></a># Please enter the Commit Message for your changes. Lines starting
<a id="__codelineno-17-40" name="__codelineno-17-40" href="#__codelineno-17-40"></a># with &#39;#&#39; will be ignored, and an empty message aborts the commit.
<a id="__codelineno-17-41" name="__codelineno-17-41" href="#__codelineno-17-41"></a>#
<a id="__codelineno-17-42" name="__codelineno-17-42" href="#__codelineno-17-42"></a># Date:      Tue Oct 15 12:45:08 2019 +0800
<a id="__codelineno-17-43" name="__codelineno-17-43" href="#__codelineno-17-43"></a>#
<a id="__codelineno-17-44" name="__codelineno-17-44" href="#__codelineno-17-44"></a># interactive rebase in progress; onto 29c8249
<a id="__codelineno-17-45" name="__codelineno-17-45" href="#__codelineno-17-45"></a># Last command done (1 command done):
<a id="__codelineno-17-46" name="__codelineno-17-46" href="#__codelineno-17-46"></a>#    edit 1562cc7 readme
<a id="__codelineno-17-47" name="__codelineno-17-47" href="#__codelineno-17-47"></a># Next command to do (1 remaining command):
<a id="__codelineno-17-48" name="__codelineno-17-48" href="#__codelineno-17-48"></a>#    pick bc0900d [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-17-49" name="__codelineno-17-49" href="#__codelineno-17-49"></a># You are currently splitting a commit while rebasing branch &#39;master&#39; on &#39;29c8249&#39;.
<a id="__codelineno-17-50" name="__codelineno-17-50" href="#__codelineno-17-50"></a>#
<a id="__codelineno-17-51" name="__codelineno-17-51" href="#__codelineno-17-51"></a># Changes to be committed:
<a id="__codelineno-17-52" name="__codelineno-17-52" href="#__codelineno-17-52"></a>#       new file:   README.md
<a id="__codelineno-17-53" name="__codelineno-17-53" href="#__codelineno-17-53"></a>#
<a id="__codelineno-17-54" name="__codelineno-17-54" href="#__codelineno-17-54"></a>
<a id="__codelineno-17-55" name="__codelineno-17-55" href="#__codelineno-17-55"></a>
<a id="__codelineno-17-56" name="__codelineno-17-56" href="#__codelineno-17-56"></a>## 保存退出后git commit 输出结果
<a id="__codelineno-17-57" name="__codelineno-17-57" href="#__codelineno-17-57"></a>[detached HEAD 2c66fe9] Add README.md file
<a id="__codelineno-17-58" name="__codelineno-17-58" href="#__codelineno-17-58"></a> Date: Tue Oct 15 12:45:08 2019 +0800
<a id="__codelineno-17-59" name="__codelineno-17-59" href="#__codelineno-17-59"></a> 1 file changed, 1 insertion(+)
<a id="__codelineno-17-60" name="__codelineno-17-60" href="#__codelineno-17-60"></a> create mode 100644 README.md
<a id="__codelineno-17-61" name="__codelineno-17-61" href="#__codelineno-17-61"></a>
<a id="__codelineno-17-62" name="__codelineno-17-62" href="#__codelineno-17-62"></a>
<a id="__codelineno-17-63" name="__codelineno-17-63" href="#__codelineno-17-63"></a>## 继续执行git rebase -i
<a id="__codelineno-17-64" name="__codelineno-17-64" href="#__codelineno-17-64"></a>&gt; git rebase --continue
<a id="__codelineno-17-65" name="__codelineno-17-65" href="#__codelineno-17-65"></a>Auto-merging README.md
<a id="__codelineno-17-66" name="__codelineno-17-66" href="#__codelineno-17-66"></a>CONFLICT (content): Merge conflict in README.md
<a id="__codelineno-17-67" name="__codelineno-17-67" href="#__codelineno-17-67"></a>error: could not apply bc0900d... [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-17-68" name="__codelineno-17-68" href="#__codelineno-17-68"></a>Resolve all conflicts manually, mark them as resolved with
<a id="__codelineno-17-69" name="__codelineno-17-69" href="#__codelineno-17-69"></a>&quot;git add/rm &lt;conflicted_files&gt;&quot;, then run &quot;git rebase --continue&quot;.
<a id="__codelineno-17-70" name="__codelineno-17-70" href="#__codelineno-17-70"></a>You can instead skip this commit: run &quot;git rebase --skip&quot;.
<a id="__codelineno-17-71" name="__codelineno-17-71" href="#__codelineno-17-71"></a>To abort and get back to the state before &quot;git rebase&quot;, run &quot;git rebase --abort&quot;.
<a id="__codelineno-17-72" name="__codelineno-17-72" href="#__codelineno-17-72"></a>Could not apply bc0900d... [DO NOT PUSH] Add documentation for getRandom endpoint
</code></pre></div>
<p>这个过程可能会出现冲突，比如在A1’’’ 之上应用B2’’’ 时可能会出现冲突。冲突出现时，你可以使用git log和git status命令查看细节。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>## 查看当前提交链
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>&gt; git log --oneline --graph
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>* 2c66fe9 (HEAD) Add README.md file
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>* 29c8249 Add getRandom endpoint
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>...
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>## 查看冲突细节
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>&gt; git status
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>interactive rebase in progress; onto 29c8249
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>Last commands done (2 commands done):
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>   edit 1562cc7 readme
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>   pick bc0900d [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>No commands remaining.
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>You are currently rebasing branch &#39;master&#39; on &#39;29c8249&#39;.
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>  (fix conflicts and then run &quot;git rebase --continue&quot;)
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>  (use &quot;git rebase --skip&quot; to skip this patch)
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>  (use &quot;git rebase --abort&quot; to check out the original branch)
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>Unmerged paths:
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>  (use &quot;git add &lt;file&gt;...&quot; to mark resolution)
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>    both modified:   README.md
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)  
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>## 用git diff 和git diff --cached查看更多细节
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>&gt; git diff
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>diff --cc README.md
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>index 09bcc7d,1f06f52..0000000
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>--- a/README.md
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>+++ b/README.md
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>@@@ -1,1 -1,4 +1,8 @@@
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>++&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a> +# This project is for demoing atomic commit in git
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>++=======
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>+ ## This project is for demoing git
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>+
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>+ You can visit endpoint getRandom to get a random real number.
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>+ The end endpoint is `/getRandom`.
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>++&gt;&gt;&gt;&gt;&gt;&gt;&gt; bc0900d... [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>&gt; git diff --cached
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>* Unmerged path README.md
</code></pre></div>
<p>解决冲突的具体步骤是：</p>
<ol>
<li>手动修改冲突文件；</li>
<li>使用git add或者git rm把修改添加到暂存区；</li>
<li>运行git rebase --continue。于是，git rebase会把暂存区的内容生成提交，并继续git-rebase后续步骤。</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>&gt; vim README.md
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>## 这个是初始内容
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a># This project is for demoing atomic commit in git
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>=======
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>## This project is for demoing git
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>You can visit endpoint getRandom to get a random real number.
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>The end endpoint is `/getRandom`.
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>&gt;&gt;&gt;&gt;&gt;&gt;&gt; bc0900d... [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>## 这个是修改后内容，并保存退出
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a># This project is for demoing atomic commit in git
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>You can visit endpoint getRandom to get a random real number.
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>The end endpoint is `/getRandom`.
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>## 添加README.md到暂存区，并使用git status查看状态
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>&gt; git add README.md
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>19:51:16 (master|REBASE-i) jasonge@Juns-MacBook-Pro-2.local:~/jksj-repo/git-atomic-demo
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>## 使用git status查看状态
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>&gt; git status
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>interactive rebase in progress; onto 29c8249
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>Last commands done (2 commands done):
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>   edit 1562cc7 readme
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>   pick bc0900d [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>No commands remaining.
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>You are currently rebasing branch &#39;master&#39; on &#39;29c8249&#39;.
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>  (all conflicts fixed: run &quot;git rebase --continue&quot;)
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>Changes to be committed:
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>    modified:   README.md
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a>
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>## 冲突成功解决，继续git rebase -i后续步骤
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a>&gt; git rebase --continue
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a>
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a>## git rebase 提示编辑B2&#39;&#39;&#39;&#39;的Commit Message
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a>[DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a>
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>Summary:
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>AT.
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a>Test:
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>None.
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a>
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a>## 保存退出之后git rebase --continue的输出
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>[detached HEAD ae38d9e] [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a> 1 file changed, 3 insertions(+)
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a>Successfully rebased and updated refs/heads/master.
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a>
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a>
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a>## 检查提交链
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a>* ae38d9e (HEAD -&gt; master) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-19-64" name="__codelineno-19-64" href="#__codelineno-19-64"></a>* 2c66fe9 Add README.md file
<a id="__codelineno-19-65" name="__codelineno-19-65" href="#__codelineno-19-65"></a>* 29c8249 Add getRandom endpoint
<a id="__codelineno-19-66" name="__codelineno-19-66" href="#__codelineno-19-66"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
</code></pre></div>
<p>这时，提交链上有B1’’’’、A1’’’、B2’’’’ 三个提交。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/03/bb/034757450750df327f5a5d4f94b728bb.png?wh=993%2A204" /></p>
<p>图12 提交链状态第12步</p>
<h3 id="6b1">阶段6：B1检查通过，推送到远程代码仓共享分支</h3>
<p>这时，我从Phabricator得到通知，B1’’’’ 检查通过了，可以将其推送到oringin/master去了！</p>
<p>首先，使用git fetch和git rebase origin/master命令，确保本地有远端主代码仓的最新代码。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>&gt; git fetch
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>&gt; git rebase origin/master
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>Current branch master is up to date.
</code></pre></div>
<p>然后，使用git rebase -i，在B1’’’’ 处暂停：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>&gt; git rebase -i origin/master
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>## 修改第一行开头：pick -&gt; edit
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>edit 29c8249 Add getRandom endpoint
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>pick 2c66fe9 Add README.md file
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>pick ae38d9e [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>## 保存退出结果
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>Stopped at 29c8249...  Add getRandom endpoint
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>You can amend the commit now, with
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>  git commit --amend
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>Once you are satisfied with your changes, run
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>  git rebase --continue
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>## 查看提交链
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>* 29c8249 (HEAD) Add getRandom endpoint
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>* 7b6ea30 (origin/master) Add a new endpoint to return timestamp
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>...
</code></pre></div>
<p>这时，origin/master和HEAD之间只有B1’’’’ 一个提交。<br />
<img alt="" src="https://static001.geekbang.org/resource/image/0d/66/0db95ca7cd433baaffe5771636cf7166.png?wh=541%2A145" /></p>
<p>图13 提交链状态第13步</p>
<p>我终于可以运行git push origin HEAD:master，去推送B1’’’’ 了。</p>
<p>注意，当前HEAD不在任何分支上，master分支仍然指向B2’’’’，所以push命令需要明确指向远端代码仓origin和远端分支maser，以及本地要推送的分支HEAD。推送完成之后，再运行git rebase --continue完成rebase操作，把master分支重新指向B2’’’’。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>## 直接推送。因为当前HEAD不在任何分支上，推送失败。
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>&gt; git push
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>fatal: You are not currently on a branch.
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>To push the history leading to the current (detached HEAD)
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>state now, use
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    git push origin HEAD:&lt;name-of-remote-branch&gt;
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>## 再次推送，指定远端代码仓origin和远端分支maser，以及本地要推送的分支HEAD。推送成功
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>&gt; git push origin HEAD:master
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>Enumerating objects: 5, done.
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>Counting objects: 100% (5/5), done.
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>Delta compression using up to 8 threads
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>Compressing objects: 100% (3/3), done.
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>Writing objects: 100% (3/3), 392 bytes | 392.00 KiB/s, done.
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>Total 3 (delta 2), reused 0 (delta 0)
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>To github.com:jungejason/git-atomic-demo.git
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>   7b6ea30..29c8249  HEAD -&gt; master
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>&gt; git rebase --continue
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>Successfully rebased and updated refs/heads/master.
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a>
<a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>## 查看提交链
<a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a>&gt; git log --oneline --graph
<a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a>* ae38d9e (HEAD -&gt; master) [DO NOT PUSH] Add documentation for getRandom endpoint
<a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a>* 2c66fe9 Add README.md file
<a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a>* 29c8249 (origin/master) Add getRandom endpoint
<a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a>* 7b6ea30 Add a new endpoint to return timestamp
</code></pre></div>
<p>这时，origin/master已经指向了B1’’’’，提交链现在只剩下了A1’’’ 和B2’’’’。<br />
<img alt="" src="https://static001.geekbang.org/resource/image/5a/b3/5a1a47e2750cdcecfc764bf2d6deeab3.png?wh=772%2A197" /></p>
<p>图14 提交链状态第14步</p>
<p>至此，我们完成了在一个分支上同时开发两个需求A和B、把提交拆分为原子性提交，并尽早把完成的提交推送到远端代码仓共享分支的全过程！</p>
<p>这个过程看起来比较复杂，但实际上就是根据上面列举的“单分支工作流”的4个步骤执行而已。</p>
<p>接下来，我们再看看使用多个分支，每个分支支持一个需求的开发方式。</p>
<h2 id="_3">用本地多分支实现多个需求的提交的原子性</h2>
<p>在这种开发工作流下，每个需求都拥有独享的分支。同样的，跟单分支实现提交原子性的方式一样，这些分支都是本地分支，并不是主代码仓上的功能分支。</p>
<p>需要注意的是，在下面的分析中，我只描述每个分支上只有一个提交的简单形式，而至于每个分支上使用多个提交的形式，操作流程与单分支提交链中的描述一样，就不再重复表述了。</p>
<h3 id="_4">多分支工作流具体步骤</h3>
<p>分支工作流的具体步骤，大致包括以下4步：</p>
<ol>
<li>切换到某一个分支对某需求进行开发，产生提交。</li>
<li>提交完成后，将其发送到代码审查系统Phabricator上进行质量检查。在等待质量检查结果的同时，切换到其他分支，继续其他需求的开发。</li>
<li>如果第2步的提交没有通过质量检查，则切换回这个提交所在分支，对提交进行修改，修改之后返回第2步。</li>
<li>如果第2步的提交通过了质量检查，则切换回这个提交所在分支，把这个提交推送到远端代码仓中，然回到第1步进行其他需求的开发。</li>
</ol>
<p>接下来，我们看一个开发两个需求C和D的场景吧。</p>
<p>在这个场景中，我首先开发需求C，并把它的提交C1发送到质量检查中心；然后开始开发需求D，等到C1通过质量检查之后，我立即将其推送到远程共享代码仓中去。</p>
<h3 id="1c">阶段1：开发需求C</h3>
<p>需求C是一个简单的重构，把index.js中所有的var都改成const。</p>
<p>首先，使用git checkout -b feature-c origin/master产生本地分支feature-c，并跟踪origin/master。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>&gt; git checkout -b feature-c origin/master
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>Branch &#39;feature-c&#39; set up to track remote branch &#39;master&#39; from &#39;origin&#39;.
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>Switched to a new branch &#39;feature-c&#39;
</code></pre></div>
<p>然后，进行C的开发，产生提交C1，并把提交发送到Phabricator进行检查。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>## 修改代码，产生提交
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>&gt; vim index.js
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>&gt; git diff
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>diff --git a/index.js b/index.js
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>index cc92a42..e5908f0 100644
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>--- a/index.js
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>+++ b/index.js
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>@@ -1,6 +1,6 @@
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>-var port = 3000
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>-var express = require(&#39;express&#39;)
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>-var app = express()
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a>+const port = 3000
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>+const express = require(&#39;express&#39;)
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a>+const app = express()
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a> app.get(&#39;/timestamp&#39;, function (req, res) {
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>   res.send(&#39;&#39; + Date.now())
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>20:54:10 (feature-c) jasonge@Juns-MacBook-Pro-2.local:~/jksj-repo/git-atomic-demo
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a>&gt; git add .
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a>20:54:16 (feature-c) jasonge@Juns-MacBook-Pro-2.local:~/jksj-repo/git-atomic-demo
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a>
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a>&gt; git commit
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a>
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a>## 填写详细Commit Message
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a>Refactor to use const instead of var
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a>Summary: const provides more info about a variable. Use it when possible.
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>Test: ran `node index.js` and verifeid it by visiting localhost:3000.
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a>Endpoints still work.
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a>
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a>
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a>## 以下是Commit Message保存后退出，git commit的输出结果
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a>[feature-c 2122faa] Refactor to use const instead of var
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a> 1 file changed, 3 insertions(+), 3 deletions(-)
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a>
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a>
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a>## 使用Phabricator的客户端，arc，把当前提交发送给Phabricator进行检查
<a id="__codelineno-24-41" name="__codelineno-24-41" href="#__codelineno-24-41"></a>&gt; arc diff
<a id="__codelineno-24-42" name="__codelineno-24-42" href="#__codelineno-24-42"></a>
<a id="__codelineno-24-43" name="__codelineno-24-43" href="#__codelineno-24-43"></a>
<a id="__codelineno-24-44" name="__codelineno-24-44" href="#__codelineno-24-44"></a>## 查看提交链
<a id="__codelineno-24-45" name="__codelineno-24-45" href="#__codelineno-24-45"></a>* 2122faa (HEAD -&gt; feature-c, multi-branch-step-1) Refactor to use const instead of var
<a id="__codelineno-24-46" name="__codelineno-24-46" href="#__codelineno-24-46"></a>* 5055c14 (origin/master) Add documentation for getRandom endpoint
<a id="__codelineno-24-47" name="__codelineno-24-47" href="#__codelineno-24-47"></a>...
</code></pre></div>
<p>这时，origin/master之上只有feature-c一个分支，上面有C1一个提交。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/69/b3/6953532b8a3600bbc1753dd274faafb3.png?wh=542%2A197" /></p>
<p>图15 多分支提交状态第1步</p>
<h3 id="2d">阶段2：开发需求D</h3>
<p>C1发出去进行质量检查后，我开始开发需求D。需求D是在README.md中，添加所有endpoint的文档。</p>
<p>首先，也是使用git checkout -b feature-d origin/master产生一个分支feature-d并跟踪origin/master。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>&gt; git checkout -b feature-d origin/master
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>Branch &#39;feature-d&#39; set up to track remote branch &#39;master&#39; from &#39;origin&#39;.
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>Switched to a new branch &#39;feature-d&#39;
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>Your branch is up to date with &#39;origin/master&#39;.
</code></pre></div>
<p>然后，开始开发D，产生提交D1，并把提交发送到Phabricator进行检查。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>## 进行修改
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>&gt; vim README.md
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>## 添加，产生修改，过程中有输入Commit Message
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>&gt; git add README.md
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>&gt; git commit
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>## 查看修改
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>&gt; git show
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>commit 97047a33071420dce3b95b89f6d516e5c5b59ec9 (HEAD -&gt; feature-d, multi-branch-step-2)
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>Author: Jason Ge &lt;gejun_1978@yahoo.com&gt;
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>Date:   Tue Oct 15 21:12:54 2019
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a>    Add spec for all endpoints
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a>    Summary: We are missing the spec for the endpoints. Adding them.
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a>    Test: none
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a>diff --git a/README.md b/README.md
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a>index 983cb1e..cbefdc3 100644
<a id="__codelineno-26-24" name="__codelineno-26-24" href="#__codelineno-26-24"></a>--- a/README.md
<a id="__codelineno-26-25" name="__codelineno-26-25" href="#__codelineno-26-25"></a>+++ b/README.md
<a id="__codelineno-26-26" name="__codelineno-26-26" href="#__codelineno-26-26"></a>@@ -1,4 +1,8 @@
<a id="__codelineno-26-27" name="__codelineno-26-27" href="#__codelineno-26-27"></a> # This project is for demoing atomic commit in git
<a id="__codelineno-26-28" name="__codelineno-26-28" href="#__codelineno-26-28"></a>
<a id="__codelineno-26-29" name="__codelineno-26-29" href="#__codelineno-26-29"></a>-You can visit endpoint getRandom to get a random real number.
<a id="__codelineno-26-30" name="__codelineno-26-30" href="#__codelineno-26-30"></a>-The end endpoint is `/getRandom`.
<a id="__codelineno-26-31" name="__codelineno-26-31" href="#__codelineno-26-31"></a>+## endpoints
<a id="__codelineno-26-32" name="__codelineno-26-32" href="#__codelineno-26-32"></a>+
<a id="__codelineno-26-33" name="__codelineno-26-33" href="#__codelineno-26-33"></a>+* /getRandom: get a random real number.
<a id="__codelineno-26-34" name="__codelineno-26-34" href="#__codelineno-26-34"></a>+* /timestamp: get the current timestamp.
<a id="__codelineno-26-35" name="__codelineno-26-35" href="#__codelineno-26-35"></a>+* /: get a &quot;hello world&quot; message.
<a id="__codelineno-26-36" name="__codelineno-26-36" href="#__codelineno-26-36"></a>
<a id="__codelineno-26-37" name="__codelineno-26-37" href="#__codelineno-26-37"></a>
<a id="__codelineno-26-38" name="__codelineno-26-38" href="#__codelineno-26-38"></a>## 将提交发送到Phabricator进行审查
<a id="__codelineno-26-39" name="__codelineno-26-39" href="#__codelineno-26-39"></a>&gt; arc diff
<a id="__codelineno-26-40" name="__codelineno-26-40" href="#__codelineno-26-40"></a>
<a id="__codelineno-26-41" name="__codelineno-26-41" href="#__codelineno-26-41"></a>
<a id="__codelineno-26-42" name="__codelineno-26-42" href="#__codelineno-26-42"></a>## 查看提交历史
<a id="__codelineno-26-43" name="__codelineno-26-43" href="#__codelineno-26-43"></a>&gt; git log --oneline --graph feature-c feature-d
<a id="__codelineno-26-44" name="__codelineno-26-44" href="#__codelineno-26-44"></a>* 97047a3 (HEAD -&gt; feature-d Add spec for all endpoints
<a id="__codelineno-26-45" name="__codelineno-26-45" href="#__codelineno-26-45"></a>| * 2122faa (feature-c) Refactor to use const instead of var
<a id="__codelineno-26-46" name="__codelineno-26-46" href="#__codelineno-26-46"></a>|/
<a id="__codelineno-26-47" name="__codelineno-26-47" href="#__codelineno-26-47"></a>* 5055c14 (origin/master) Add documentation for getRandom endpoint
</code></pre></div>
<p>这时，origin/master之上有feature-c和feature-d两个分支，分别有C1和D1两个提交。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/07/cc/072e1088fd35c6afa757e01ee8819acc.png?wh=563%2A394" /></p>
<p>图16 多分支提交状态第2步</p>
<h3 id="3c1">阶段3：推送提交C1到远端代码仓共享分支</h3>
<p>这时，我收到Phabricator的通知，C1通过了检查，可以推送了！首先，我使用git checkout把分支切换回分支feature-c：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>&gt; git checkout feature-c
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>Switched to branch &#39;feature-c&#39;
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>Your branch is ahead of &#39;origin/master&#39; by 1 commit.
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>  (use &quot;git push&quot; to publish your local commits)
</code></pre></div>
<p>然后，运行git fetch; git rebase origin/master，确保我的分支上有最新的远程共享分支代码：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>&gt; git fetch
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>&gt; git rebase origin/master
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>Current branch feature-c is up to date.
</code></pre></div>
<p>接下来，运行git push推送C1：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>&gt; git push
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>Enumerating objects: 5, done.
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>Counting objects: 100% (5/5), done.
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>Delta compression using up to 8 threads
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>Compressing objects: 100% (3/3), done.
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>Writing objects: 100% (3/3), 460 bytes | 460.00 KiB/s, done.
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>Total 3 (delta 2), reused 0 (delta 0)
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>remote: Resolving deltas: 100% (2/2), completed with 2 local objects.
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>To github.com:jungejason/git-atomic-demo.git
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a>   5055c14..2122faa  feature-c -&gt; master
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a>## 查看提交状态
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>* 97047a3 (feature-d) Add spec for all endpoints
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a>| * 2122faa (HEAD -&gt; feature-c, origin/master, multi-branch-step-1) Refactor to use const instead of var
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a>|/
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a>* 5055c14 Add documentation for getRandom endpoint
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a>...
</code></pre></div>
<p>这时，origin/master指向C1。分支feature-d从origin/master的父提交上分叉，上面只有D1一个提交。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/07/24/0794c35efb4d17fc4a2bff67d9e83524.png?wh=563%2A446" /></p>
<p>图17 多分支提交状态第3步</p>
<h3 id="4d1">阶段4：继续开发D1</h3>
<p>完成C1的推送后，我继续开发D1。首先，用git checkout命令切换回分支feature-d；然后，运行git fetch和git rebase，确保当前代码D1是包含了远程代码仓最新的代码，以减少将来合并代码产生冲突的可能性。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>&gt; git checkout feature-d
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>Switched to branch &#39;feature-d&#39;
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>Your branch and &#39;origin/master&#39; have diverged,
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>and have 1 and 1 different commits each, respectively.
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>  (use &quot;git pull&quot; to merge the remote branch into yours)
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>21:38:22 (feature-d) jasonge@Juns-MacBook-Pro-2.local:~/jksj-repo/git-atomic-demo
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>&gt; git fetch
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>&gt; git rebase origin/master
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>First, rewinding head to replay your work on top of it...
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>Applying: Add spec for all endpoints
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>## 查看提交状态
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>&gt; git log --oneline --graph feature-c feature-d
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>* a8f92f5 (HEAD -&gt; feature-d) Add spec for all endpoints
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>* 2122faa (origin/master,) Refactor to use const instead of var
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>...
</code></pre></div>
<p>这时，当前分支为feature-d，上面有唯一一个提交D1’，而且D1’已经变基到了origin/master上。</p>
<p>需要注意的是，因为使用的是git rebase，没有使用git merge产生和并提交，所以提交历史是线性的。我在<a href="https://time.geekbang.org/column/article/132499">第7篇文章</a>中提到过，线性的提交历史对Facebook的CI自动化意义重大。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/6a/5b/6af5e952f4846983e05a04b44a0db65b.png?wh=890%2A230" /></p>
<p>图18 多分支提交状态第4步</p>
<p>至此，我们完成了在两个分支上同时开发C和D两个需求，并尽早把完成了的提交推送到远端代码仓中的全过程。</p>
<p>虽然在这个例子中，我简化了这两个需求开发的情况，每个需求只有一个提交并且一次就通过了质量检查，但结合在一个分支上完成所有开发需求的流程，相信你也可以推导出每个需求有多个提交，以及质量检查没有通过时的处理方法了。如果这中间还有什么问题的话，那就直接留言给我吧。</p>
<p>接下来，我与你对比下这两种工作流。</p>
<h2 id="_5">两种工作流的对比</h2>
<p>如果我们要对比这两工作流的话，那就是各有利弊。</p>
<p>单分支开发方式的好处是，不需要切换分支，可以顺手解决一些缺陷修复，但缺点是rebase操作多，产生冲突的可能性大。</p>
<p>而多分支方式的好处是，一个分支只对应一个需求，相对比较简单、清晰，rebase操作较少，产生冲突的可能性小，但缺点是不如单分支开发方式灵活。</p>
<p>无论是采用哪一种工作流，都有几个需要注意的地方：</p>
<ul>
<li>不要同时开发太多的需求，否则分支管理花销太大；</li>
<li>有了可以推送的提交就尽快推送到远端代码仓，从而减少在本地的管理成本，以及推送时产生冲突的可能性；</li>
<li>经常使用git fetch和git rebase，确保自己的代码在本地持续与远程共享分支的代码在做集成，降低推送时冲突的可能性</li>
</ul>
<p>最后，我想说的是，如果你对Git不是特别熟悉，我推荐你先尝试第二种工作流。这种情况rebase操作较少，相对容易上手一些。</p>
<h2 id="_6">小结</h2>
<p>今天，我与你详细讲述了，在Facebook开发人员借助Git的强大功能，实现代码提交的原子性的两种工作流。</p>
<p>第一种工作流是，在一个单独的分支上进行多个需求的开发。总结来讲，具体的工作方法是：把每一个需求的提交都拆分为比较小的原子提交，并使用git rebase -i的功能，把可以进行质量检查的提交，放到提交链的最底部，也就是最接近origin/master的地方，然后发送到代码检查系统进行检查，之后继续在提交链的其他提交处工作。如果提交没有通过检查，就对它进行修改再提交检查；如果检查通过，就马上把它推送到远端代码仓的共享分支去。在等待代码检察时，继续在提交链的其他提交处工作。</p>
<p>第二种工作流是，使用多个分支来开发多个需求，每个分支对应一个需求。与单分支开发流程类似，我们尽快把当前可以进行代码检查的提交，放到离origin/master最近的地方；然后在代码审查时，继续开发其他提交。与单分支开发流程不同的是，切换工作任务时，需要切换分支。</p>
<p>这两种工作流，无论哪一种都能大大促进代码提交的原子性，从而同时提高个人及团队的研发效能。</p>
<p>我把今天的案例放到了GitHub上的<a href="https://github.com/jungejason/git-atomic-demo">git-atomic-demo</a>代码仓里，并标注出了各个提交状态产生的分支。比如，single-branch-step-14就是单分支流程中的第14个状态，multi-branch-step-4就是多分支流程中的第4个状态。</p>
<h2 id="_7">思考题</h2>
<ol>
<li>在对提交链的非当前提交，比如HEAD^，进行修改时，除了使用git rebase -i，在它暂停的时候进行修改，你还其他办法吗？你觉得这种方法的利弊是什么？</li>
<li>Git和文字编排系统LaTex有一个有趣的共同点，你知道是什么吗？</li>
</ol>
<p>感谢你的收听，欢迎你在评论区给我留言分享你的观点，也欢迎你把这篇文章分享给更多的朋友一起阅读。我们下期再见！</p>
<div><strong>精选留言（7）</strong></div>
<ul>
<li><span>Johnson</span> 👍（5） 💬（4）<p>第一种太烧脑了，对开发人员的git技能要求太高了，大部分的开发人员都不能正确驾驭，感觉工作中更多的是以第二种为主，然后在某个branch内部结合第一种的情况比较容易驾驭。很头疼的问题是很多老同事没有深入学习git的主动性和激情，稍微复杂点儿的操作就让别人帮忙操作。</p>2019-10-23</li><br/><li><span>于小咸</span> 👍（3） 💬（1）<p>葛老师，请问提交代码的原子性，除了提高git技巧外，在工程上有什么需要注意的点吗？比如软件架构，设计模式。这方面应该随着语言和项目的不同会有较大的差异，有没有什么通用的原则？</p>2019-11-03</li><br/><li><span>Weining Cao</span> 👍（2） 💬（1）<p>从来不用rebase, 一直用merge，看来要好好学习下rebase了</p>2019-10-23</li><br/><li><span>我来也</span> 👍（2） 💬（2）<p>学习了，这两种方式我都会，也经常用。
我比较喜欢线性的提交历史，不喜欢merge。

但有个比较纠结的是。
比如采用第二种方式：
单独开发某个功能，也是采用小步走的方式，这样一个功能分支开发完后，可能有很多小的commit。
如果这些commit都线性的推到远程，感觉也不好。
目前只能先自己用rebase合并一些分支，然后再推。

如果是使用git merge —no-ff的方式，这些小commit就可以保留，在历史中可以看到完整的开发过程。
但是这样分支看上去就临时分叉了。
不知道老师推荐用哪种方法。

课后思考题一
我能想到的笨办法：
1。先备份当前分支，比如git branch temp
2。git reset —hard HEAD^
3。修改并git commit —amend —no-edit
4。git cherry-pick 后面的commit 😄
或者git checkout temp ；git rebase xxx 刚才修改后的commit （不知道可不可行）</p>2019-10-23</li><br/><li><span>LearnAndTry</span> 👍（0） 💬（0）<p>单分支那个是给人用的吗？？？</p>2024-11-30</li><br/><li><span>浇了汁鸡</span> 👍（0） 💬（0）<p>还有一种合并方式叫做&#39;半线性历史记录&#39;，(https:&#47;&#47;stackoverflow.com&#47;questions&#47;59714347&#47;semi-linear-merge)，先把特性分支基于master做rebase，再merge --no-ff，既可以看到每次合并引入点，又能近似拥有线性历史的定位问题的便捷性</p>2021-11-29</li><br/><li><span>巫山老妖</span> 👍（0） 💬（0）<p>第一种虽然能够不切换分支完成原子性提交，但感觉复杂性也变高了，要求所有人都能掌握还是比较困难，目前我们团队还是以第二种为主，不过有些同学还是习惯用merge来合并分支</p>2021-04-18</li><br/>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../25%20-%20%E7%8E%A9%E8%BD%ACGit%EF%BC%9A%E4%BA%94%E7%A7%8D%E6%8F%90%E9%AB%98%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E5%8E%9F%E5%AD%90%E6%80%A7%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 25   玩转Git：五种提高代码提交原子性的基本操作">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                25   玩转Git：五种提高代码提交原子性的基本操作
              </div>
            </div>
          </a>
        
        
          
          <a href="../27%20-%20%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%9A%E4%B8%8D%E5%8F%AA%E6%98%AF%E9%85%B7%EF%BC%8C%E6%9B%B4%E9%87%8D%E8%A6%81%E7%9A%84%E6%98%AF%E8%83%BD%E6%8F%90%E9%AB%98%E4%B8%AA%E4%BA%BA%E6%95%88%E8%83%BD/" class="md-footer__link md-footer__link--next" aria-label="下一页: 27   命令行：不只是酷，更重要的是能提高个人效能">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                27   命令行：不只是酷，更重要的是能提高个人效能
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2025-Present zkep
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "toc.follow", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.footer", "navigation.tracking", "navigation.instant", "navigation.instant.progress", "navigation.indexes", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../../javascript/extra.js"></script>
      
        <script src="../../../javascript/giscus.js"></script>
      
    
  </body>
</html>