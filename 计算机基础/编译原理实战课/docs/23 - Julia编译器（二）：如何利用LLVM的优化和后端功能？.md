ä½ å¥½ï¼Œæˆ‘æ˜¯å®«æ–‡å­¦ã€‚

ä¸Šä¸€è®²ï¼Œæˆ‘ç»™ä½ æ¦‚è¦åœ°ä»‹ç»äº†ä¸€ä¸‹Juliaè¿™é—¨è¯­è¨€ï¼Œå¸¦ä½ ä¸€èµ·è§£æäº†å®ƒçš„ç¼–è¯‘å™¨çš„ç¼–è¯‘è¿‡ç¨‹ã€‚å¦å¤–æˆ‘ä¹Ÿè®²åˆ°ï¼ŒJuliaåˆ›é€ æ€§åœ°ä½¿ç”¨äº†LLVMï¼Œå†åŠ ä¸Šå®ƒé«˜æ•ˆçš„åˆ†æ´¾æœºåˆ¶ï¼Œè¿™å°±è®©ä¸€é—¨è„šæœ¬è¯­è¨€çš„è¿è¡Œé€Ÿåº¦ï¼Œå¯ä»¥è·ŸCã€Javaè¿™ç§è¯­è¨€åª²ç¾ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ ç”¨Juliaæœ¬èº«ï¼Œå°±å¯ä»¥ç¼–å†™éœ€è¦é«˜æ€§èƒ½çš„æ•°å­¦å‡½æ•°åŒ…ï¼Œè€Œä¸ç”¨åƒPythoné‚£æ ·ï¼Œéœ€è¦ç”¨å¦å¤–çš„è¯­è¨€æ¥ç¼–å†™ï¼ˆå¦‚Cè¯­è¨€ï¼‰é«˜æ€§èƒ½çš„ä»£ç ã€‚

é‚£ä¹ˆä»Šå¤©è¿™ä¸€è®²ï¼Œæˆ‘å°±å¸¦ä½ æ¥äº†è§£ä¸€ä¸‹Juliaè¿ç”¨LLVMçš„ä¸€äº›ç»†èŠ‚ã€‚åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒè¦ç‚¹ï¼š

- **å¦‚ä½•ç”ŸæˆLLVM IRï¼Ÿ**
- **å¦‚ä½•åŸºäºLLVM IRåšä¼˜åŒ–ï¼Ÿ**
- **å¦‚ä½•åˆ©ç”¨å†…å»ºï¼ˆIntrinsicsï¼‰å‡½æ•°å®ç°æ€§èƒ½ä¼˜åŒ–å’Œè¯­ä¹‰ä¸ªæ€§åŒ–ï¼Ÿ**

è¿™æ ·ï¼Œåœ¨æ·±å…¥è§£è¯»äº†è¿™äº›é—®é¢˜å’ŒçŸ¥è¯†ç‚¹ä»¥åï¼Œä½ å¯¹å¦‚ä½•æ­£ç¡®åœ°åˆ©ç”¨LLVMï¼Œå°±èƒ½å»ºç«‹ä¸€ä¸ªç›´è§‚çš„è®¤è¯†äº†ï¼Œä»è€Œä¸ºè‡ªå·±ä½¿ç”¨LLVMæ‰“ä¸‹å¾ˆå¥½çš„åŸºç¡€ã€‚

å¥½ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹Juliaåšå³æ—¶ç¼–è¯‘çš„è¿‡ç¨‹ã€‚

## å³æ—¶ç¼–è¯‘çš„è¿‡ç¨‹

æˆ‘ä»¬ç”¨LLDBæ¥è·Ÿè¸ªä¸€ä¸‹ç”ŸæˆIRçš„è¿‡ç¨‹ã€‚

```
$ lldb                      #å¯åŠ¨lldb
(lldb)attach --name julia   #é™„åŠ åˆ°juliaè¿›ç¨‹
c                           #è®©juliaè¿›ç¨‹ç»§ç»­è¿è¡Œ
```

é¦–å…ˆï¼Œåœ¨Juliaçš„REPLä¸­ï¼Œè¾“å…¥ä¸€ä¸ªç®€å•çš„addå‡½æ•°çš„å®šä¹‰ï¼š

```
julia> function add(a, b)
            x = a+b
            x
       end
```

æ¥ç€ï¼Œåœ¨LLDBæˆ–GDBä¸­è®¾ç½®ä¸€ä¸ªæ–­ç‚¹â€œbr emit\_funcitonâ€ï¼Œè¿™ä¸ªæ–­ç‚¹æ˜¯åœ¨codegen.cppä¸­ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ2ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/fd/83/b432b125.jpg" width="30px"><span>é±¼_XueTr</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>jinpeng.d@Mac$î‚° lldb
(lldb) attach --name julia
error: attach failed: could not find a process named julia
(lldb) ^D</div>2020-07-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ğŸ˜‚</div>2022-01-17</li><br/>
</ul>