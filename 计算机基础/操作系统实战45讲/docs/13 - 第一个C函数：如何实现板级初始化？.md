ä½ å¥½ï¼Œæˆ‘æ˜¯LMOSã€‚

å‰é¢ä¸‰èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¸ºè°ƒç”¨Cosmosçš„**ç¬¬ä¸€ä¸ªCå‡½æ•°hal\_startåšäº†å¤§é‡å·¥ä½œã€‚**è¿™èŠ‚è¯¾æˆ‘ä»¬è¦è®©æ“ä½œç³»ç»ŸCosmosé‡Œçš„ç¬¬ä¸€ä¸ªCå‡½æ•°çœŸæ­£è·‘èµ·æ¥å•¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¼šçœŸæ­£è¿›å…¥åˆ°æˆ‘ä»¬çš„å†…æ ¸ä¸­ã€‚

ä»Šå¤©æˆ‘ä»¬ä¼šç»§ç»­åœ¨è¿™ä¸ªhal\_startå‡½æ•°é‡Œï¼Œé¦–å…ˆæ‰§è¡Œæ¿çº§åˆå§‹åŒ–ï¼Œå…¶å®å°±æ˜¯halå±‚ï¼ˆç¡¬ä»¶æŠ½è±¡å±‚ï¼Œä¸‹åŒï¼‰åˆå§‹åŒ–ï¼Œå…¶ä¸­æ‰§è¡Œäº†å¹³å°åˆå§‹åŒ–ï¼Œhalå±‚çš„å†…å­˜åˆå§‹åŒ–ï¼Œä¸­æ–­åˆå§‹åŒ–ï¼Œæœ€åè¿›å…¥åˆ°å†…æ ¸å±‚çš„åˆå§‹åŒ–ã€‚

è¿™èŠ‚è¯¾çš„é…å¥—ä»£ç ï¼Œä½ å¯ä»¥ä»[è¿™é‡Œ](https://gitee.com/lmos/cosmos/tree/master/lesson13/Cosmos)ä¸‹è½½ã€‚

## ç¬¬ä¸€ä¸ªCå‡½æ•°

ä»»ä½•è½¯ä»¶å·¥ç¨‹ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°æ€»æ˜¯ç®€å•çš„ï¼Œå› ä¸ºå®ƒæ˜¯æ€»è°ƒç”¨è€…ï¼Œåƒæ˜¯ä¸€ä¸ªç®¡ç†è€…ï¼Œååœ¨é‚£é‡Œå‘å·æ–½ä»¤ï¼Œè‡ªå·±å´æ˜¯å•¥æ´»ä¹Ÿä¸å¹²ã€‚

ç”±äºè¿™æ˜¯ç¬¬ä¸€ä¸ªCå‡½æ•°ï¼Œä¹Ÿæ˜¯åˆå§‹åŒ–å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ä¸ºå®ƒå•ç‹¬å»ºç«‹ä¸€ä¸ªæ–‡ä»¶ï¼Œä»¥æ˜¾ç¤ºå¯¹å®ƒçš„å°Šé‡ï¼Œä¾ç„¶åœ¨Cosmos/hal/x86/ä¸‹å»ºç«‹ä¸€ä¸ªhal\_start.cæ–‡ä»¶ã€‚å†™ä¸Šè¿™æ ·ä¸€ä¸ªå‡½æ•°ã€‚

```
void hal_start()
{
    //ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–halå±‚
    //ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–å†…æ ¸å±‚
    for(;;);
    return;
}
```

æ ¹æ®å‰é¢çš„è®¾è®¡ï¼ŒCosmosæ˜¯æœ‰halå±‚å’Œå†…æ ¸å±‚ä¹‹åˆ†ï¼Œæ‰€ä»¥åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè¦åˆ†ä¸¤æ­¥èµ°ã€‚ç¬¬ä¸€æ­¥æ˜¯åˆå§‹åŒ–halå±‚ï¼›ç¬¬äºŒæ­¥ï¼Œåˆå§‹åŒ–å†…æ ¸å±‚ã€‚åªæ˜¯è¿™ä¸¤æ­¥çš„å‡½æ•°æˆ‘ä»¬è¿˜æ²¡æœ‰å†™ã€‚

ç„¶è€Œæœ€åçš„æ­»å¾ªç¯å´æœ‰ç‚¹å¥‡æ€ªï¼Œå…¶å®å®ƒçš„ç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯é¿å…è¿™ä¸ªå‡½æ•°è¿”å›ï¼Œå› ä¸ºè¿™ä¸ªè¿”å›äº†å°±æ— å¤„å¯å»ï¼Œé¿å…èµ°å›å¤´è·¯ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/09/5c/b5d79d20.jpg" width="30px"><span>æäº®äº®</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å½•äº†ä¸€ä¸ª win11+virtualboxçš„æ“ä½œè§†é¢‘ https:&#47;&#47;www.bilibili.com&#47;video&#47;BV1yb4y1N7ya&#47;?share_source=copy_web&amp;vd_source=2e2d7d5fe4bfed959537727318688414</div>2024-01-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/46/6b/e766c18d.jpg" width="30px"><span>è€ç‹</span> ğŸ‘ï¼ˆ44ï¼‰ ğŸ’¬ï¼ˆ10ï¼‰<div>æœ‰äº†å‰é¢åŸºç¡€å®éªŒå¾ˆå¿«å°±åšé€šäº†ï¼Œåªæ˜¯å®éªŒæ­¥éª¤è¯¾ç¨‹æ²¡æœ‰è¯´
1.ä¸‹è½½æœ€æ–°æºç 
git clone https:&#47;&#47;gitee.com&#47;lmos&#47;cosmos.git
2 è¿›å…¥è¯¾ç¨‹çš„ç›®å½• 
cd   cosmos&#47;lesson13&#47;Cosmos 
3 ç¼–è¯‘
make all
è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæŠ¥å‘Šé”™è¯¯
..&#47;hal&#47;x86&#47;kernel.asm:6: fatal: unable to open include file `kernel.inc&#39;
krnlbuidrule.mk:14: recipe for target &#39;kernel.o&#39; failed
make[2]: *** [kernel.o] Error 1
Makefile.x86:28: recipe for target &#39;all&#39; failed
make[1]: *** [all] Error 2
Makefile:59: recipe for target &#39;all&#39; failed
make: *** [all] Error 2
è­¦å‘Šä¸ç®¡
è§£å†³é”™è¯¯å³å¯
ä½¿ç”¨ find -name &quot;kernel.inc&quot; æœç´¢å¤´æ–‡ä»¶çš„ä½ç½®
.&#47;include&#47;halinc&#47;kernel.inc
æŠŠè¿™ä¸ªå¤´æ–‡ä»¶æ‹·è´åˆ°å’Œkernel.asmç›¸åŒçš„ç›®å½•ã€‚æˆ–è€…æ˜¯æ›´æ”¹..&#47;hal&#47;x86&#47;kernel.asm
ç¬¬6è¡Œ æ”¹ä¸º%include &quot;..&#47;include&#47;halinc&#47;kernel.inc&quot;
å†æ¬¡make å¯ä»¥æ­£å¸¸ç¼–è¯‘
4.ç”Ÿæˆå†…æ ¸é•œåƒæ–‡ä»¶
make cplmildr    ï¼ˆè¿™ä¸€æ­¥ä¼šæ‹·è´  initldrimh.bin  initldrkrl.bin initldrsve.bin åˆ°æºç é¡¶å±‚ç›®å½•çš„releaseä¸‹ ï¼‰
make cprelease   ï¼ˆè¿™ä¸€æ­¥ä¼šæ‹·è´ Cosmos.bin åˆ°æºç é¡¶å±‚ç›®å½•çš„releaseä¸‹ ï¼‰
make KIMG ï¼ˆè¿™ä¸€æ­¥ä¼šè°ƒç”¨lmoskrlimg æŠŠinitldrimh.bin initldrkrl.bin initldrsve.bin 
Cosmos.bin logo.bmp background.bmp   font.fntæŒ‰ä¸€å®šçš„æ ¼å¼æ‰“åŒ…æˆCosmos.ekié•œåƒæ–‡ä»¶ ï¼‰
5.æ‹·è´Cosmos.ekié•œåƒæ–‡ä»¶åˆ°è™šæ‹Ÿç£ç›˜
æºç ç›®å½•å·²ç»åˆ›å»ºäº†ç£ç›˜æ–‡ä»¶hd.imgï¼ˆå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¯ä»¥æŒ‰ç…§å‰é¢çš„è¯¾ç¨‹è‡ªå·±åˆ›å»ºï¼‰
sudo mount -o loop .&#47;hd.img .&#47;hdisk&#47; (æŒ‚è½½è™šæ‹Ÿç£ç›˜åˆ°hidskç›®å½•ï¼Œhd.img hidskç›®å½•å·²ç»å­˜åœ¨)
sudo cp release&#47;Cosmos.eki  hdisk&#47;boot  (æ‹·è´ç¼–è¯‘å¥½çš„é•œåƒCosmos.eki åˆ°è™šæ‹Ÿç£ç›˜ä¸­)
sudo umount hdisk  (å¸è½½æŒ‚è½½ç›®å½•&#47;æˆ–è€…æ˜¯ç›®å½•å’Œç£ç›˜ä¸­çš„å†…å®¹)
VBoxManage convertfromraw .&#47;hd.img --format VDI .&#47;hd.vdi (æŠŠhd.imgè½¬ä¸ºhd.vdiæ ¼å¼ï¼Œå› ä¸ºè¯¾ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿæœºæ˜¯VirtualBox)
6.å‚è€ƒå‰é¢è¯¾ç¨‹ä½¿ç”¨hd.vdiå¯åŠ¨ç³»ç»Ÿ
 
æ€»ç»“ï¼š
è¦æƒ³ææ¸…æ¥šæ•´ä¸ªç¨‹åºçš„æµç¨‹ï¼Œé™¤äº†åˆ†æä»£ç æœ¬èº«ï¼Œè¿˜éœ€è¦æ·±å…¥åˆ†æMakefileå’Œå„ä¸ªé“¾æ¥è„šæœ¬</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg" width="30px"><span>neohope</span> ğŸ‘ï¼ˆ22ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>ç¨å¾®æ•´ç†äº†ä¸€ä¸‹ï¼š

ä¸€ã€HALå±‚è°ƒç”¨é“¾
hal_start()

Aã€å…ˆå»å¤„ç†HALå±‚çš„åˆå§‹åŒ–
-&gt;init_hal()

-&gt;-&gt;init_halplaltform()åˆå§‹åŒ–å¹³å°
-&gt;-&gt;-&gt;init_machbstart()
ä¸»è¦æ˜¯æŠŠäºŒçº§å¼•å¯¼å™¨å»ºç«‹çš„æœºå™¨ä¿¡æ¯ç»“æ„ï¼Œå¤åˆ¶åˆ°äº†halå±‚ä¸€ä»½ç»™å†…æ ¸ä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿä¸ºé‡Šæ”¾äºŒçº§å¼•å¯¼å™¨å ç”¨å†…å­˜åšå¥½å‡†å¤‡ã€‚
å…¶åšæ³•å°±æ˜¯æ‹·è´äº†ä¸€ä»½mbspåˆ°kmbspï¼Œå…¶ä¸­ç”¨åˆ°äº†è™šæ‹Ÿåœ°å€è½¬æ¢hyadr_to_viradr
-&gt;-&gt;-&gt;init_bdvideo()
åˆå§‹åŒ–å›¾å½¢æœºæ„
åˆå§‹åŒ–BGAæ˜¾å¡ æˆ– VBEå›¾å½¢æ˜¾å¡ä¿¡æ¯ã€å‡½æ•°æŒ‡é’ˆçš„ä½¿ç”¨ã€‘
æ¸…ç©ºå±å¹•
æ‰¾åˆ°&quot;background.bmp&quot;ï¼Œå¹¶æ˜¾ç¤ºèƒŒæ™¯å›¾ç‰‡
-&gt;-&gt;-&gt;-&gt;hal_dspversionï¼ˆï¼‰
è¾“å‡ºç‰ˆæœ¬å·ç­‰ä¿¡æ¯ã€vsprintfkã€‘
å…¶ä¸­ï¼Œç”¨ret_charsinfoæ ¹æ®å­—ä½“æ–‡ä»¶è·å–å­—ç¬¦åƒç´ ä¿¡æ¯

-&gt;-&gt;move_img2maxpadr()
å°†ç§»åŠ¨initldrsve.binåˆ°æœ€å¤§åœ°å€

-&gt;-&gt;init_halmm()åˆå§‹åŒ–å†…å­˜
-&gt;-&gt;-&gt;init_phymmarge
ç”³è¯·phymmarge_tå†…å­˜
æ ¹æ® e820map_t ç»“æ„æ•°ç»„ï¼Œå¤åˆ¶æ•°æ®åˆ°phymmarge_t ç»“æ„æ•°ç»„
æŒ‰å†…å­˜å¼€å§‹åœ°å€è¿›è¡Œæ’åº

-&gt;-&gt;init_halintupt();åˆå§‹åŒ–ä¸­æ–­
-&gt;-&gt;-&gt;init_descriptor();åˆå§‹åŒ–GDTæè¿°ç¬¦x64_gdt
-&gt;-&gt;-&gt;init_idt_descriptor();åˆå§‹åŒ–IDTæè¿°ç¬¦x64_idtï¼Œç»‘å®šäº†ä¸­æ–­ç¼–å·åŠä¸­æ–­å¤„ç†å‡½æ•°
-&gt;-&gt;-&gt;init_intfltdsc();åˆå§‹åŒ–ä¸­æ–­å¼‚å¸¸è¡¨machintfltï¼Œæ‹·è´äº†ä¸­æ–­ç›¸å…³ä¿¡æ¯
-&gt;-&gt;-&gt;init_i8259();åˆå§‹åŒ–8529èŠ¯ç‰‡ä¸­æ–­
-&gt;-&gt;-&gt;i8259_enabled_line(0);å¥½åƒæ˜¯å–æ¶ˆmaskï¼Œå¼€å¯ä¸­æ–­è¯·æ±‚

æœ€åï¼Œè·³è½¬å»å¤„ç†å†…æ ¸åˆå§‹åŒ–
-&gt;init_krl()

äºŒã€ä¸­æ–­è°ƒç”¨é“¾ï¼Œä»¥ç¡¬ä»¶ä¸­æ–­ä¸ºä¾‹
Aã€kernel.incä¸­ï¼Œé€šè¿‡å®å®šä¹‰ï¼Œè¿›è¡Œäº†ä¸­æ–­å®šä¹‰ã€‚ä»¥ç¡¬ä»¶ä¸­æ–­ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨kernel.incä¸­çœ‹åˆ°ï¼š
å®ä¸ºHARWINTï¼Œç¡¬ä»¶ä¸­æ–­åˆ†å‘å™¨å‡½æ•°ä¸ºhal_hwint_allocator
%macro  HARWINT 1
    ä¿å­˜ç°åœº......
    mov   rdi, %1
    mov   rsi,rsp
    call    hal_hwint_allocator
    æ¢å¤ç°åœº......
%endmacro

Bã€è€Œåœ¨kernel.asmä¸­ï¼Œå®šä¹‰äº†å„ç§ç¡¬ä»¶ä¸­æ–­ç¼–å·ï¼Œæ¯”å¦‚hxi_hwint00ï¼Œä½œä¸ºä¸­æ–­å¤„ç†å…¥å£
ALIGN   16
hxi_hwint00:
    HARWINT (INT_VECTOR_IRQ0+0)

Cã€æœ‰ç¡¬ä»¶ä¸­æ–­æ—¶ï¼Œä¼šå…ˆåˆ°è¾¾ä¸­æ–­å¤„ç†å…¥å£ï¼Œç„¶åè°ƒç”¨åˆ°ç¡¬ä»¶ä¸­æ–­åˆ†å‘å™¨å‡½æ•°hal_hwint_allocator
ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸­æ–­ç¼–å·ï¼Œåœ¨rdi
ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸­æ–­å‘ç”Ÿæ—¶çš„æ ˆæŒ‡é’ˆï¼Œåœ¨rsi
ç„¶åè°ƒç”¨å¼‚å¸¸å¤„ç†å‡½æ•°hal_do_hwint

Dã€hal_do_hwint
åŠ é”
è°ƒç”¨ä¸­æ–­å›è°ƒå‡½æ•°hal_run_intflthandle
é‡Šæ”¾é”

Eã€hal_run_intflthandle
å…ˆè·å–ä¸­æ–­å¼‚å¸¸è¡¨machintflt
ç„¶åè°ƒç”¨i_serlist é“¾è¡¨ä¸Šæ‰€æœ‰æŒ‚è½½intserdsc_t ç»“æ„ä¸­çš„ä¸­æ–­å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œæ˜¯å¦å¤„ç†ç”±å‡½æ•°è‡ªå·±åˆ¤æ–­

Fã€ä¸­æ–­å¤„ç†å®Œæ¯•

Gã€å¼‚å¸¸å¤„ç†ç±»ä¼¼ï¼Œåªæ˜¯è§¦å‘æºå¤´ä¸å¤ªä¸€æ ·è€Œå·²</div>2021-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/52/40/e57a736e.jpg" width="30px"><span>pedro</span> ğŸ‘ï¼ˆ16ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>[ hal_start ] --&gt; [ init_hal ] --&gt; [ init_krl ]
[ init_hal ] --&gt; [ init_halplaltform ] --&gt; [ move_img2maxpadr ] --&gt; [ init_halmm ] --&gt; [ init_halintupt ]
[ init_krl ] --&gt; [ die ]
[ init_halplaltform ] --&gt; [ init_machbstart ] --&gt; [ init_bdvideo ]
[ init_halmm ] --&gt; [ init_phymmarge ]
[ init_halintupt ] --&gt; [ init_descriptor ] --&gt; [ init_idt_descriptor ] --&gt; [ init_intfltdsc ] --&gt; [ init_i8259 ] --&gt; [ i8259_enabled_line ]


å¦‚æœæœ‰ graph-easy çš„åŒå­¦ï¼Œç›´æ¥ CVï¼Œç„¶åï¼š
```sh
graph-easy calltree.txt
```</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/49/11/75a31d88.jpg" width="30px"><span>LunaElf</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Cosmos hal å±‚å‡½æ•°è°ƒç”¨å…³ç³»ï¼š

1. `hal_start()`
    1. `init_hal()`
        1. `init_halplatform()`
            1. `init_machbstart()`
                1. `machbstart_t_init()`
            2. `init_bdvideo()`
        2. `init_halmm()`
            1. `init_phymmarge()`
                1. `initpmrge_core()`
        3. `init_halintupt()`
            1. `init_idt_descriptor()`
                1. `set_idt_desc()`
            2. `init_intfltdsc()`
            3. `init_i8259()`
    2. `init_krl()`

1. `hal_fault_allocator()`
    1. `hal_do_hwint()`
        1. `hal_run_intflthandle()`

1. `hal_hwint_allocator()`
    1. `hal_do_hwint()`
        1. `hal_run_intflthandle()`</div>2021-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/84/4a/50940078.jpg" width="30px"><span>å¢æ‰¿ç</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå›è¿‡å¤´æ¥äºŒåˆ·çš„æ—¶å€™æ²¡æƒ³æ˜ç™½ï¼Œå¦‚æœä¸­æ–­ä¼ é€’çš„åªæ˜¯ä¸€ä¸ªä¸­æ–­å·ï¼Œç„¶åä¸­æ–­å·æ˜¯è¿›è¡Œå…±ç”¨çš„ï¼Œé‚£åœ¨hal_run_intflthandle ä¸­çš„list_for_each ä¸­ï¼Œæ¯ä¸ªè®¾å¤‡æ³¨å†Œçš„handleræ–¹æ³•ï¼Œæ€ä¹ˆåˆ¤æ–­è‡ªå·±éœ€ä¸éœ€è¦æ‰§è¡Œå‘¢ï¼Ÿ handlerä¼ å…¥çš„s-&gt;device ä¹Ÿæ˜¯ä»å¾ªç¯ä¸­çš„æ¯ä¸€ä¸ªintserdsc_tå–å‡ºï¼Œå’Œæœ€å¼€å§‹çš„ä¸­æ–­å·çœ‹ä¸å‡ºä¸­ä»€ä¹ˆå…³è”ã€‚è¿˜å¸Œæœ›å¤§ç¥ä»¬è§£ç­”</div>2021-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/66/11/f7408e3e.jpg" width="30px"><span>äº‘å¸ˆå…„</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¤ªç¡¬äº†å•Šï¼Œæœ‰ç‚¹ç£•ç‰™ï¼Œä¸è¿‡å†å’¬ä¸¤å£è¯•è¯•ğŸ˜¬</div>2021-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/f4/48/2242bed9.jpg" width="30px"><span>å´å»ºå¹³</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä»£ç èµ°æŸ¥å‡ºä¸€ä¸ªå®‰å…¨é—®é¢˜ï¼Œä¸‹é¢è¿™ä¸ªå‡½æ•°é‡Œï¼Œå¦‚æœforé‡Œä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„éƒ½æ²¡æ‰¾åˆ°ï¼Œé‚£ä¹ˆåé¢æ ¡éªŒçš„æ—¶å€™
retemp-&gt;saddr å°±ç©ºæŒ‡é’ˆäº†ã€‚
e820map_t *ret_kmaxmpadrcmpsz_e820map(machbstart_t *mbsp, u64_t mappadr, u64_t cpsz)
{
    if (NULL == mbsp)
    {
        return NULL;
    }
    u64_t enr = mbsp-&gt;mb_e820nr;
    e820map_t *emp = (e820map_t *)phyadr_to_viradr((adr_t)mbsp-&gt;mb_e820padr);
    e820map_t *retemp = NULL;
    u64_t maxadr = emp[0].saddr;
    for (u64_t i = 0; i &lt; enr; i++)
    {
        if (emp[i].type == RAM_USABLE)
        {
            if (emp[i].saddr &gt;= maxadr &amp;&amp;                              &#47;&#47;å†…å­˜åŒºé¦–åœ°å€å¤§äºå·²çŸ¥æœ€å¤§åŒºåŸŸèµ·å§‹åœ°å€ï¼ˆåˆå§‹åŒ–ä½ç¬¬ä¸€ä¸ªåŒºé¦–åœ°å€
               (mappadr &gt; (emp[i].saddr + emp[i].lsize)) &amp;&amp;            &#47;&#47;å†…å­˜åŒºå°¾åœ°å€å°äºå†…å­˜æ˜ å°„æœ€å¤§åœ°å€
               (emp[i].lsize &gt;= cpsz))                                 &#47;&#47;å†…å­˜åŒºå¤§å°å¤§äºé•œåƒæ–‡ä»¶å¤§å°
            {
                maxadr = emp[i].saddr;                                 &#47;&#47;å·²çŸ¥æœ€å¤§åŒºåŸŸèµ·å§‹åœ°å€
                retemp = &amp;emp[i];                                      &#47;&#47;æ›´æ–°æœ€åæ»¡è¶³æ¡ä»¶å†…å­˜åŒºåŸŸ
            }
        }
    }
    if ((mappadr &gt; (retemp-&gt;saddr + retemp-&gt;lsize)) &amp;&amp; (retemp-&gt;lsize &gt;= cpsz)) &#47;&#47;æ ¡éªŒï¼Œä½†é™¤éä¸€ä¸ªéƒ½ä¸æ»¡è¶³æ¡ä»¶
    {
        return retemp;
    }
    return NULL;
}
</div>2021-07-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/ae/64/98ef557d.jpg" width="30px"><span>ç„¶</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¾ˆå¥½å¥‡move_img2maxpadr(&amp;kmachbsp);è¿™ä¸ªå‡½æ•°
åŠŸèƒ½ï¼šmove_img2maxpadr(&amp;kmachbsp);è¿™ä¸ªå‡½æ•°æ˜¯æŠŠé•œåƒæ–‡ä»¶æ¬åˆ°æœ€å¤§çš„ç‰©ç†åœ°å€å¤„ã€‚
ä½œç”¨ï¼šæˆ‘æ„Ÿè§‰æ˜¯å› ä¸ºé•œåƒæ–‡ä»¶æ˜¯åŠ è½½åœ¨0x4000000å¤„ï¼Œè€Œç©ºé—²åœ°å€æ˜¯ä»å†…æ ¸æ–‡ä»¶åŠ è½½å¤„å¼€å§‹è®¡ç®—çš„ï¼ˆ0x2000000+å†…æ ¸å¤§å°ï¼‰,éšç€å†…å­˜çš„åˆ†é…ï¼Œç©ºé—²åœ°å€ä¸æ–­å‘ä¸Šå¢é•¿ï¼Œè¿Ÿæ—©ä¼šè¦†ç›–é•œåƒæ–‡ä»¶ï¼Œæ‰€ä»¥æå‰æŠŠé•œåƒæ–‡ä»¶æ¬èµ°äº†ã€‚</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/34/1d/405b113e.jpg" width="30px"><span>Victor</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>åœ¨ubuntu 18.04ç¯å¢ƒä¸‹makeæ—¶æŠ¥é”™ï¼š
root@ubuntu1804:~&#47;LMOS&#47;cosmos&#47;lesson13&#47;Cosmos# make all
Initldr:æ¸…ç†å…¨éƒ¨å·²æ„å»ºæ–‡ä»¶... ^_^
*********æ­£åœ¨å¼€å§‹ç¼–è¯‘æ„å»ºç³»ç»Ÿ*************
AS -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;imginithead.asm
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;inithead.c
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;vgastr.c
AS -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;ldrkrl32.asm
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;ldrkrlentry.c
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;fs.c
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;chkcpmm.c
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;graph.c
CC -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;bstartparm.c
AS -[M] æ­£åœ¨æ„å»º... ..&#47;ldrkrl&#47;realintsve.asm
OBJCOPY -[M] æ­£åœ¨æ„å»º... initldrimh.bin
OBJCOPY -[M] æ­£åœ¨æ„å»º... initldrkrl.bin
OBJCOPY -[M] æ­£åœ¨æ„å»º... initldrsve.bin
æ­å–œæˆ‘ï¼ŒInitldrç¼–è¯‘æ„å»ºå®Œæˆï¼ ^_^
..&#47;hal&#47;x86&#47;kernel.asm:6: fatal: unable to open include file `kernel.inc&#39;
krnlbuidrule.mk:14: recipe for target &#39;kernel.o&#39; failed
make[2]: *** [kernel.o] Error 1
Makefile.x86:28: recipe for target &#39;all&#39; failed
make[1]: *** [all] Error 2
Makefile:59: recipe for target &#39;all&#39; failed
make: *** [all] Error 2</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/9f/be/14b2ad2e.jpg" width="30px"><span>å–è–ªæ²½é…’</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ç®€å•ï¼Œ æ¥æ¥å›å›æ¥åˆ°äº†13è¯¾ç¨‹ï¼Œ å…³äºè¯¾åé—®é¢˜ï¼Œ ä¹ æƒ¯ç”¨ximd æ¢³ç†ï¼Œ æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ï¼Œä¸€èµ·åŠ æ²¹https:&#47;&#47;www.cnblogs.com&#47;iwssea&#47;p&#47;16383412.html</div>2022-06-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/06/30/c26ea06a.jpg" width="30px"><span>è‰¾æ©å‡</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ç»ˆäºå¿«èµ°åˆ°å†…æ ¸äº†ï¼Œä¸Šä¸ªæœˆ24å·åˆ°ç°åœ¨ï¼Œè¿›åº¦æœ‰ç‚¹æ…¢ï¼Œå…ˆæ”¾ä¸‹è„šæ­¥ï¼Œæœ‰äº›å°åœ°æ–¹ç†è§£ä¸é€ï¼Œçœ‹åˆ°è¯„è®ºè¶Šæ¥è¶Šå°‘ï¼Œæˆ‘å°±çŸ¥é“ï¼Œèƒ½åšæŒä¸‹æ¥çš„äººçœŸçš„ä¸å¤šï¼Œå¯èƒ½è‡ªå·±èœï¼Œæˆ‘ä¸€ä¸ªç§‘ç­å‡ºèº«çš„æ„Ÿè§‰éƒ½æœ‰ç‚¹åƒåŠ›ï¼Œåº•å±‚é‚£äº›ä¸œè¥¿è¿˜æ˜¯å¾ˆç”Ÿç–ï¼Œè¿™é—¨è¯¾çœŸçš„æ— æ•Œï¼Œå¹²è´§çœŸçš„å¾ˆå¤šï¼Œéœ€è¦è‡ªå·±æ…¢æ…¢ä½“ä¼šï¼Œç†è§£+å®æˆ˜ yyds</div>2022-04-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/58/dc/7334e6ef.jpg" width="30px"><span>é€æ°´</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>init_idt_descriptor æœ€åä¼šè°ƒç”¨ load_x64_idtï¼Œé€šè¿‡æ±‡ç¼–è°ƒç”¨ lidt æ–¹æ³•ï¼Œå°† x64_idt çš„åœ°å€åˆ° IDTR å¯„å­˜å™¨ï¼Œä½¿å¾—ä¸­æ–­é—¨æè¿°ç¬¦å‘æŒ¥ä½œç”¨ã€‚
æƒ³äº†åŠå¤©å†…å­˜ä¸­çš„ x64_idt æ˜¯æ€ä¹ˆå‘æŒ¥ä½œç”¨çš„ï¼ŒåŸæ¥è¿™é‡Œè°ƒç”¨äº†æ±‡ç¼–ã€‚</div>2021-12-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/67/94/cc1cbccd.jpg" width="30px"><span>å¯»é“å®¢å°æ—</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ—¥æ‹±ä¸€å’-Day04 
æœ‰ç§æœ¬ç§‘æ—¶å­¦8051ï¼Œlpc1114çš„æ„Ÿè§‰ï¼Œç¬¬ä¸€éè¿˜æ˜¯ææ¸…æ¥šæµç¨‹ï¼Œä¸è¦åœ¨ä¹ç»†èŠ‚ï¼Œå…ˆå»ºç«‹ä¸€ä¸ªæ•´ä½“çš„æ¡†æ¶ã€‚</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/f8/20/10a13d3f.jpg" width="30px"><span>momo_å¦æ ¼åˆ©å®‰</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç•™è¨€è‚‰çœ¼å¯è§çš„å‡å°‘äº†å“ˆå“ˆå“ˆã€‚æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œå¾—å¤šçœ‹å‡ é</div>2024-09-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/09/97/a13db556.jpg" width="30px"><span>å¾æ—­</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å¯åŠ¨æŠ¥é”™ INITKLDR DIE ERROR:S  ,ä¸çŸ¥é“æ˜¯ä¸æ˜¯ å’Œ ç‰©ç†æœºcpu(Intel(R) Core(TM) i7-10700F CPU @ 2.90GHz   2.90 GHz)æœ‰å…³ (è¯¦æƒ…è§æˆªå›¾:  http:&#47;&#47;t.csdn.cn&#47;tN2Vz)</div>2022-07-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/5f/09/2ec44412.jpg" width="30px"><span>Qfeng</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>hal_start()
    init_hal()    &#47;&#47; åˆå§‹åŒ–ç¡¬ä»¶æŠ½è±¡å±‚
        init_halplaltform()    &#47;&#47;åˆå§‹åŒ–å¹³å°ç›¸å…³
            init_machbstart()    &#47;&#47; å°†grubå¯åŠ¨é˜¶æ®µå¾—åˆ°çš„æœºå™¨ä¿¡æ¯ç»“æ„ä½“machbstart_tæ‹·è´ä¸€ä»½åˆ°halå…¨å±€machbstart_tä¸­ï¼Œä»¥ä¾¿åç»­halä½¿ç”¨
            init_bdvideo()    &#47;&#47;åˆå§‹åŒ–æ˜¾å¡é©±åŠ¨ï¼ˆåŸºäºhalå…¨å±€machbstart_té‡Œé¢çš„ä¿¡æ¯ï¼‰
        move_img2maxpadr()
        init_halmm()    &#47;&#47;åˆå§‹åŒ–å†…å­˜ç®¡ç†
            init_phymmarge()  &#47;&#47;æ ¹æ®å¼•å¯¼é˜¶æ®µè·å¾—çš„å†…å­˜ä¿¡æ¯ -- e820map_t ç»“æ„æ•°ç»„ï¼Œhalæ‰©å¼ å»ºç«‹äº†è‡ªå·±çš„å†…å­˜ç®¡ç†ç»“æ„ -- phymmarge_t ç»“æ„æ•°ç»„ï¼Œå°†e820map_t ç»“æ„æ•°ç»„çš„ä¿¡æ¯æ‹·è´äº†è¿‡æ¥
        init_halintupt()    &#47;&#47;halä¸­æ–­åˆå§‹åŒ–
            init_descriptor()    &#47;&#47;è®¾ç½®ä¸­æ–­GDTæè¿°ç¬¦
            init_idt_descriptor()    &#47;&#47;è®¾ç½®ä¸­æ–­IDTæè¿°ç¬¦ï¼šå°†ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ä¸å¯¹åº”çš„ä¸­æ–­&#47;å¼‚å¸¸ç±»å‹vectorç»‘å®š
            init_intfltdsc()    &#47;&#47;åˆå§‹åŒ–ä¸­æ–­ç®¡ç†ç»“æ„ä½“ï¼šç®¡ç†ä¸­æ–­çš„ç±»å‹ï¼Œåˆ†å‘ï¼Œå¤„ç†ä¼˜å…ˆçº§ç­‰
            init_i8259()    &#47;&#47;åˆå§‹åŒ–ä¸­æ–­æ§åˆ¶å™¨ i8259
            i8259_enabled_line()
    init_krl()    &#47;&#47;åˆå§‹åŒ–å†…æ ¸: æ­»å¾ªç¯

è¿™èŠ‚å†…å®¹ç¡®å®å¾ˆå¤šï¼Œä¸è¿‡æœ‰ä¸€æ¡ä¸»çº¿ï¼Œå°±æ˜¯å‰é¢å¼•å¯¼å™¨é˜¶æ®µæ”¶é›†å‡†å¤‡å¥½çš„æœºå™¨ä¿¡æ¯ç»“æ„ä½“ -- MBSPADR ((machbstart_t*)(0x100000))ï¼Œè¿™é‡Œçš„halåˆå§‹åŒ–çš„ä¿¡æ¯éƒ½æ˜¯æ¥è‡ªäºæ­¤ï¼Œæˆ‘ç†è§£è¿™æ˜¯å¼•å¯¼å™¨å¦‚æ­¤ä¸å¯æˆ–ç¼ºçš„åŸå› ä¹‹ä¸€ï¼Œä»–åšäº†å¿…ä¸å¯å°‘çš„å‡†å¤‡å·¥ä½œã€‚</div>2022-05-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/9f/be/14b2ad2e.jpg" width="30px"><span>å–è–ªæ²½é…’</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>æˆ‘è¿˜åœ¨</div>2022-05-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/ea/82/f44cbd20.jpg" width="30px"><span>ç”³é¾™é’</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>hal å±‚å¯ä»¥éš”ç¦»ä¸åŒèŠ¯ç‰‡å¹³å°æ¶æ„ï¼Œé‚£ä¸åŒèŠ¯ç‰‡å¹³å°æ¶æ„ä¸‹BIOSæœ‰åŒºåˆ«ï¼Œå¯¼è‡´çš„GRUB2è¿™å¥—äºŒçº§å¼•å¯¼å™¨æ˜¯ä¸æ˜¯ä¹Ÿä¸åŒï¼Ÿ</div>2021-12-31</li><br/><li><img src="" width="30px"><span>Geek_03885e</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å…¶ä»–çš„éƒ½å¥½ç†è§£ï¼Œ å°±æ˜¯ä¸ºä»€ä¹ˆå‡ºå»æ—…æ¸¸ä¸å¸¦å¥³æœ‹å‹å‘¢ï¼Ÿ</div>2021-12-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/a2/1b/7426e629.jpg" width="30px"><span>178</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>halå±‚çš„åˆå§‹åŒ–å’ŒäºŒçº§å¼•å¯¼å™¨çš„åˆå§‹åŒ–ï¼Œä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Œæ„šè ¢çš„æˆ‘å±…ç„¶è®¤ä¸ºæ˜¯æ˜¯åŒæ ·çš„äº‹åšäº†ä¸¤éï¼Ÿ</div>2021-12-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/a2/1b/7426e629.jpg" width="30px"><span>178</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>1. æ–°å»ºCosmosè™šæ‹Ÿæœºï¼ˆä¸ç¬¬10è¯¾ï¼ŒåŒæ ·ç±»å‹çš„è™šæ‹Ÿæœºï¼Œåªæ˜¯åä¸åŒï¼‰
2. æ‰§è¡Œmake vboxtest
é—®é¢˜ï¼šåªå‡ºç°é»‘åº•ç™¾èŠ±çš„Cosmosï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰èƒŒæ™¯å›¾ç‰‡å’Œæ‰“å°æœºå™¨ä¿¡æ¯å‘¢ï¼Œç™¾æ’•ä¸å¾—éª‘å§</div>2021-11-28</li><br/><li><img src="" width="30px"><span>Geek_260041</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸€è·¯è¯»ä»£ç åˆ°äº†åˆå§‹åŒ–ä¸­æ–­é‚£é‡Œï¼Œæœ‰ä¸€ç‚¹ä¸æ˜ç™½ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨è¿›å…¥halå±‚é‡ç½®GDTçš„æ—¶å€™åœ¨init_entry.asmé‡Œå®šä¹‰äº†ä»£ç æ®µGDTæè¿°ç¬¦ä¸ºtypeçš„å€¼ä¸º0x8, è¿™ä¸ªtypeå¹¶ä¸å¯ä»¥æ‰§è¡Œ, è€Œåˆ°åˆå§‹åŒ–ä¸­æ–­åˆšå¼€å§‹çš„init_descriptor()å‡½æ•°é‡Œä¿å­˜çš„typeå€¼åˆä¸º0xaäº†ã€‚è¿™æ ·è®¾è®¡æ˜¯æœ‰ç‰¹æ®Šçš„åŸå› å—</div>2021-10-27</li><br/><li><img src="" width="30px"><span>Geek_1a537e</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>make[2]: execvp: .&#47;lmkfbuild: Permission denied
pretreatment.mkf:41: recipe for target &#39;krnlobjs.mk&#39; failed
make[2]: *** [krnlobjs.mk] Error 127
Makefile.x86:28: recipe for target &#39;all&#39; failed
make[1]: *** [all] Error 2
Makefile:59: recipe for target &#39;all&#39; failed
make: *** [all] Error 2
è€å¸ˆå¸®æˆ‘çœ‹çœ‹å•Š ä»Šå¤©è¿˜ç”¨äº†ä½ é‚£æœ¬æ·±åº¦ç†è§£åµŒå…¥å¼çš„ä¹¦çš„æºä»£ç ä¹Ÿæ˜¯å·®ä¸å¤šçš„é”™è¯¯ï¼Œé‚£ä¸ªmkæ–‡ä»¶ä¸€ç›´åœ¨æŠ¥é”™ï¼Œæˆ‘éƒ½è¦ç–¯äº†ï¼Œè¿™ä¸ªè¦æ€ä¹ˆè§£å†³å•Š ã€‚å®Œå…¨copyçš„ä½ çš„æºç ï¼Œï¼Œ</div>2021-10-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/56/3c/f9ff3ed8.jpg" width="30px"><span>æ¨å†›</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åˆå§‹åŒ–è¿™æ®µè·Ÿè¸ªä¸‹æ¥ï¼Œè€å¸ˆè¯¾ç¨‹å†…å®¹ä¿¡æ¯é‡å¾ˆå¤§ï¼Œä»å·¥ç¨‹çš„è§’åº¦å¯¹å„ç§åº•å±‚ç¡¬ä»¶è¿›è¡Œäº†æ•°æ®ç»“æ„æŠ½è±¡ï¼Œè®¾è®¡çš„å¾ˆç²¾å·§ã€ä¼˜é›…ï¼Œä»¤äººå‡»èŠ‚å«èµï¼Œè¿™å—å¯¹äºäº†è§£ç¡¬ä»¶åº•å±‚ï¼Œæœ‰è¿‡å†…æ ¸è®¾è®¡ç»éªŒçš„è€æ‰‹ç”˜ä¹‹å¦‚é¥´ï¼Œä½†æ˜¯å¯¹äºæ“ä½œç³»ç»Ÿå…¥é—¨çš„åˆå­¦è€…æ¥è¯´ï¼Œè¦æ±‚å°±æœ‰ç‚¹è¿‡é«˜äº†ï¼Œä¸æ˜“æŠŠæ¡æ•´ä½“çš„è„‰ç»œï¼Œæ¯”å¦‚å¯åŠ¨å„é˜¶æ®µå†…å­˜å¦‚ä½•å¸ƒå±€ã€å†…æ ¸å¦‚ä½•é€šè¿‡é“¾æ¥æ”¾ç½®åˆ°è®¾è®¡çš„å†…å­˜ä¸Šç­‰ç»†èŠ‚ï¼Œè€å¸ˆèƒ½å¦å¯¹è¿™å—ç»™å‡ºç›¸åº”çš„å‚è€ƒèµ„æ–™ã€é“¾æ¥å‘¢ï¼Ÿå°¤å…¶æ˜¯å†…æ ¸æ€ä¹ˆé“¾æ¥å®‰æ’åˆ°ç‰¹å®šå†…å­˜è¿™å—</div>2021-09-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/f8/2c/92969c48.jpg" width="30px"><span>é’ç‰ç™½éœ²</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¹²è´§å¤ªå¤šï¼Œæ™šä¸Šå»å†™ä¸€ä¸ªåšå®¢æ€»ç»“ä¸€ä¸‹ã€‚</div>2021-07-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/02/5b/ce326cfc.jpg" width="30px"><span>äºŒä¸‰å­ä¹Ÿ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>..&#47;hal&#47;x86&#47;kernel.asm:6: fatal: unable to open include file `kernel.inc&#39;
çœ‹äº†åŒå­¦ä»¬çš„è§£å†³åŠæ³•ã€‚è¿™é‡Œåœ¨è¯´ä¸€ä¸ªè§£å†³åŠæ³•ã€‚ä¿®æ”¹Makefileè¦ä¼˜é›…ä¸€ç‚¹ã€‚
ä¿®æ”¹script&#47;hal.Sæ–‡ä»¶
å°†HEADFILE_PATH è¿™ä¸ªå˜é‡çš„å€¼-I ..&#47;include&#47;halinc ä¿®æ”¹ä¸º-I ..&#47;include&#47;halinc&#47;å³å¯ã€‚</div>2021-06-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/2d/75/4936ecc2.jpg" width="30px"><span>çš„æ˜¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ5ï¼‰<div>macos Bigsur  :make all
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;krnlobjs.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;cosmoslink.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;krnlbuidcmd.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;krnlbuidrule.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;hal.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;krl.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;drv.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;lib.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;task.S
CC -[M] æ­£åœ¨ç”Ÿæˆmakefile... ..&#47;script&#47;link.S
.&#47;lmkfbuild: .&#47;lmkfbuild: cannot execute binary file
make[2]: *** [krnlobjs.mk] Error 126
make[1]: *** [all] Error 2
make: *** [all] Error 2</div>2021-06-08</li><br/><li><img src="" width="30px"><span>springXu</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™è¯¾çš„ä¿¡æ¯é‡å¾ˆå¤§ã€‚æœ‰äº›æ„çŠ¹æœªå°½çš„å‘³é“ã€‚</div>2021-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/51/f3/5e993de8.jpg" width="30px"><span>aagu</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å‡½æ•°åå’Œç»“æ„ä½“å­—æ®µè¿™ç§ç®€å†™å‘½åçœ‹å¾—å¾ˆè¿·ç³Šï¼Œè¿˜å¾—è¦åŠ æ³¨é‡Šè¡¥å……è¯´æ˜ï¼Œè€å¸ˆèƒ½è¯´ä¸€ä¸‹è¿™æ ·åšçš„ç”¨æ„å—ï¼Ÿ</div>2021-06-07</li><br/>
</ul>