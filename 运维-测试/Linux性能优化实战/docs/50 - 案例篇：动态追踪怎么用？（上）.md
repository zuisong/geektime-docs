ä½ å¥½ï¼Œæˆ‘æ˜¯å€ªæœ‹é£ã€‚

ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¥ ksoftirqd CPU ä½¿ç”¨ç‡é«˜çš„é—®é¢˜ä¸ºä¾‹ï¼Œå¸¦ä½ ä¸€èµ·å­¦ä¹ äº†å†…æ ¸çº¿ç¨‹ CPU ä½¿ç”¨ç‡é«˜æ—¶çš„åˆ†ææ–¹æ³•ã€‚å…ˆç®€å•å›é¡¾ä¸€ä¸‹ã€‚

å½“ç¢°åˆ°å†…æ ¸çº¿ç¨‹çš„èµ„æºä½¿ç”¨å¼‚å¸¸æ—¶ï¼Œå¾ˆå¤šå¸¸ç”¨çš„è¿›ç¨‹çº§æ€§èƒ½å·¥å…·ï¼Œå¹¶ä¸èƒ½ç›´æ¥ç”¨åˆ°å†…æ ¸çº¿ç¨‹ä¸Šã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å†…æ ¸è‡ªå¸¦çš„ perf æ¥è§‚å¯Ÿå®ƒä»¬çš„è¡Œä¸ºï¼Œæ‰¾å‡ºçƒ­ç‚¹å‡½æ•°ï¼Œè¿›ä¸€æ­¥å®šä½æ€§èƒ½ç“¶é¢ˆã€‚ä¸è¿‡ï¼Œperf äº§ç”Ÿçš„æ±‡æ€»æŠ¥å‘Šå¹¶ä¸ç›´è§‚ï¼Œæ‰€ä»¥æˆ‘é€šå¸¸ä¹Ÿæ¨èç”¨ç«ç„°å›¾æ¥ååŠ©æ’æŸ¥ã€‚

å…¶å®ï¼Œä½¿ç”¨ perf å¯¹ç³»ç»Ÿå†…æ ¸çº¿ç¨‹è¿›è¡Œåˆ†ææ—¶ï¼Œå†…æ ¸çº¿ç¨‹ä¾ç„¶è¿˜åœ¨æ­£å¸¸è¿è¡Œä¸­ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºåŠ¨æ€è¿½è¸ªæŠ€æœ¯ã€‚

**åŠ¨æ€è¿½è¸ªæŠ€æœ¯ï¼Œé€šè¿‡æ¢é’ˆæœºåˆ¶ï¼Œæ¥é‡‡é›†å†…æ ¸æˆ–è€…åº”ç”¨ç¨‹åºçš„è¿è¡Œä¿¡æ¯ï¼Œä»è€Œå¯ä»¥ä¸ç”¨ä¿®æ”¹å†…æ ¸å’Œåº”ç”¨ç¨‹åºçš„ä»£ç ï¼Œå°±è·å¾—ä¸°å¯Œçš„ä¿¡æ¯ï¼Œå¸®ä½ åˆ†æã€å®šä½æƒ³è¦æ’æŸ¥çš„é—®é¢˜ã€‚**

ä»¥å¾€ï¼Œåœ¨æ’æŸ¥å’Œè°ƒè¯•æ€§èƒ½é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å…ˆä¸ºåº”ç”¨ç¨‹åºè®¾ç½®ä¸€ç³»åˆ—çš„æ–­ç‚¹ï¼ˆæ¯”å¦‚ä½¿ç”¨ GDBï¼‰ï¼Œç„¶åä»¥æ‰‹åŠ¨æˆ–è€…è„šæœ¬ï¼ˆæ¯”å¦‚ GDB çš„ Python æ‰©å±•ï¼‰çš„æ–¹å¼ï¼Œåœ¨è¿™äº›æ–­ç‚¹å¤„åˆ†æåº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚æˆ–è€…ï¼Œå¢åŠ ä¸€ç³»åˆ—çš„æ—¥å¿—ï¼Œä»æ—¥å¿—ä¸­å¯»æ‰¾çº¿ç´¢ã€‚

ä¸è¿‡ï¼Œæ–­ç‚¹å¾€å¾€ä¼šä¸­æ–­åº”ç”¨çš„æ­£å¸¸è¿è¡Œï¼›è€Œå¢åŠ æ–°çš„æ—¥å¿—ï¼Œå¾€å¾€éœ€è¦é‡æ–°ç¼–è¯‘å’Œéƒ¨ç½²ã€‚è¿™äº›æ–¹æ³•è™½ç„¶åœ¨ä»Šå¤©ä¾ç„¶å¹¿æ³›ä½¿ç”¨ï¼Œä½†åœ¨æ’æŸ¥å¤æ‚çš„æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¾€å¾€è€—æ—¶è€—åŠ›ï¼Œæ›´ä¼šå¯¹åº”ç”¨çš„æ­£å¸¸è¿è¡Œé€ æˆå·¨å¤§å½±å“ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/64/05/6989dce6.jpg" width="30px"><span>æˆ‘æ¥ä¹Ÿ</span> ğŸ‘ï¼ˆ47ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>[D50æ‰“å¡]
è¯¾åæ€è€ƒé¢˜,æˆ‘çš„æ€è€ƒ,ä¸ä¸€å®šå‡†ç¡®.
æˆ‘è§‰å¾—æ˜¨å¤©çš„perfå’Œç«ç„°å›¾,æ˜¯é‡‡æ ·. è€Œä»Šå¤©çš„ftraceæ˜¯å®å®åœ¨åœ¨çš„åˆ†ææ¯æ¬¡ä¸€çš„è°ƒç”¨.
è™½ç„¶éƒ½å¯ä»¥çœ‹è°ƒç”¨å †æ ˆå’Œè€—æ—¶æ¯”ä¾‹. ä½†æ˜¯ftraceåº”è¯¥æ˜¯éå¸¸å‡†ç¡®,è€Œperfåªæ˜¯ä¸€ä¸ªé‡‡æ ·,æ¯”å¦‚é‡‡æ ·é¢‘ç‡1%.

æˆ‘è§‰å¾—æ‰¾å¤§æ–¹å‘æ—¶,ä½¿ç”¨perfå’Œç«ç„°å›¾, æ‰¾å…·ä½“é—®é¢˜æ—¶,ç”¨ftrace.æ¯•ç«Ÿftraceéœ€è¦çŸ¥é“è°ƒç”¨çš„ç³»ç»Ÿå‡½æ•°.
ftraceéœ€è¦è¿½è¸ªçš„ä¿¡æ¯å¯ä»¥æ¥æºäºperfçš„åˆ†æç»“æœ.</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/2c/51/fdf460ba.jpg" width="30px"><span>underhood</span> ğŸ‘ï¼ˆ31ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ—©äº›æ—¶é—´æ•´ç†è¿‡çš„ä¸€ç¯‡æ–‡ç« ï¼Œå’Œè¿™ä¸ªä¸»é¢˜å¾ˆmatchï¼Œåˆ†äº«åœ¨è¿™é‡Œ^_^ã€‚https:&#47;&#47;leezhenghui.github.io&#47;linux&#47;2019&#47;03&#47;05&#47;exploring-usdt-on-linux.html</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/bd/ac/c9154dfe.jpg" width="30px"><span>Huayra</span> ğŸ‘ï¼ˆ20ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å°†æ€§èƒ½ä¼˜åŒ–å¤§å¸ˆBrendan Greggçš„blogé˜…è¯»ä¸€éï¼Œå°±èƒ½å¤Ÿæ›´æ·±åˆ»åœ°ç†è§£è¿™ä¸€ç« ã€‚æ®è¯´ï¼ŒOpenRestyçš„ä½œè€…å¼ äº¦æ˜¥ä¹Ÿé˜…è¯»è¿‡Brendan Greggçš„æ‰€æœ‰åšå®¢ï¼Œä»–ç°åœ¨æ›´è¿›ä¸€æ­¥åœ°å¼€å‘äº†ä¸€ä¸ªå°†é«˜çº§ç¼–ç¨‹è¯­è¨€ç¼–è¯‘æˆåŠ¨æ€è¿½è¸ªè„šæœ¬çš„å·¥å…·</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/5b/ae/3d639ea4.jpg" width="30px"><span>ä½³</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åœ¨å’ŒåŒäº‹è®¨è®ºnodejsä½¿ç”¨ä»thriftè½¬åŒ–åˆ°grpcæ—¶å€™ä¼šæ€§èƒ½ä¸‹é™é—®é¢˜å°±ç”¨è€å¸ˆä»‹ç»

strace -T -ttt -p pid

æ‰¾åˆ°æ ¹æºã€‚

grpc -nodeç‰ˆæœ¬å‘é€åˆ†ä¸¤æ¬¡writevç³»ç»Ÿè°ƒç”¨ï¼Œç¬¬ä¸€æ¬¡å‘é€ grpcè·¯å¾„ï¼Œç¬¬äºŒæ¬¡å‘é€å‚æ•°ã€‚æ¯”thriftåè®®ä¸€æ¬¡æ•ˆç‡ä¸€äº›ã€‚

å†å‘ç°nodeå¹¶å‘æ¬¡æ•°å¤šï¼Œå›è°ƒç®—æ—¶é—´å¾€å¾€æ˜¯å¤šä¸ªè°ƒç”¨æ‰€èŠ±çš„æ—¶é—´ã€‚è¿™äº›æ•ˆç‡éƒ½ç”¨straceçœ‹åˆ°ï¼Œåœ¨å‰é¢æ—¶é—´</div>2019-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9b/ba/333b59e5.jpg" width="30px"><span>Linuxer</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œç¢°åˆ°ä¸€ä¸ªé—®é¢˜æ€ä¹ˆé€‰æ‹©tracepointå’Œtracefunctionå‘¢ï¼Ÿç„¶åæ€ä¹ˆç»“åˆè¾“å‡ºåˆ†æé—®é¢˜å‘¢ï¼Ÿ</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/05/7f/a7df049a.jpg" width="30px"><span>Standly</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·æ•™ä¸‹javaé‡Œå¸¸ç”¨çš„btraceå’Œä»Šå¤©è®²çš„å‡ ä¸ªå·¥å…·æ˜¯ä»€ä¹ˆå…³ç³»å•Š</div>2019-04-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/8c/2b/3ab96998.jpg" width="30px"><span>é’çŸ³</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>#echo function_graph &gt; current_trace
-bash: current_trace: Permission denied

æŠ¥ä¸Šé¢é”™è¯¯çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•ä¸‹é¢çš„å‘½ä»¤ï¼Œç¯å¢ƒæ˜¯CentOS 7.6
$ echo function_graph &gt; current_tracer
$ echo funcgraph-proc &gt; trace_options</div>2019-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/14/2e/400913b1.jpg" width="30px"><span>é‡‘æ³¢</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·æ•™è€å¸ˆä¸ªé—®é¢˜ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜æ˜¯ï¼ŒåµŒå…¥å¼linuxç³»ç»Ÿä¸Šï¼Œå‡ ç§’é’Ÿä¹‹å†…æŸä¸ªè¿›åŸçªç„¶å¯¼è‡´OOMã€‚
      è¯·é—®æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•è°ƒæŸ¥æˆ–è€…æ•æ‰è°çŸ­æ—¶é—´å ç”¨å¤§é‡å†…å­˜å—ï¼Ÿ è„šæœ¬å‡ ç§’æ£€æµ‹mapsè¯•è¿‡ï¼Œæ•æ‰ä¸åˆ°ã€‚å†…å­˜é’©å­ä¸€æ˜¯ä¸çº¿ç¨‹å®‰å…¨ï¼Œå†å°±æ˜¯åº”è¯¥ç”¨äº†tcmallocï¼Œåº”è¯¥ä¹Ÿä¸è¡Œã€‚ valgrindå¤ªé‡é‡çº§ï¼Œå¤§ç¨‹åºè·‘ä¸åŠ¨ã€‚å¤šè°¢</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/11/4b/fa64f061.jpg" width="30px"><span>xfan</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘çš„æœºå™¨ä¸€è¿è¡Œ
echo function_graph &gt; current_traceæˆ–trace-cmdçš„å‘½ä»¤å°±å¡æ­»ï¼Œtty1ä¹Ÿè¾“å…¥ä¸äº†ï¼Œæˆ‘ç°åœ¨æ˜¯ubuntu18.04 åŒå¤„ç†å™¨ 1Gå†…å­˜ 
</div>2019-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/9c/47/50cf2cab.jpg" width="30px"><span>Chn.K</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œè¯·æ•™ä¸ªé—®é¢˜ï¼Œå¯¹äºè¸©å†…å­˜å¯¼è‡´çš„coredumpé—®é¢˜ï¼ˆä»coreæ–‡ä»¶å¤§è‡´èƒ½çœ‹å‡ºæ¥å†…å­˜å·²ç»ä¹±äº†ï¼Œä½†æ˜¯çœ‹ä¸å‡ºæ¥æ˜¯å“ªé‡ŒæŠŠå†…å­˜æä¹±äº†ï¼‰ï¼Œæœ‰æ²¡æœ‰å¥½çš„å®šä½æ–¹æ³•ï¼Ÿ</div>2019-03-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJLm7IbU8V19ENfAnAaeibr4X5zQDw2yI8pHy1xtRgVC7S0YjdqI6jKlcQ0ueicuCaIkebSTNelRibsA/132" width="30px"><span>å…¨å¤§ç¥å•Š</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ä¸ªä¸“æ å¾ˆä¸é”™ï¼Œå­¦äº†å¾ˆå¤šå¹²è´§ï¼Œè€å¸ˆæŒºè´Ÿè´£ä»»çš„ï¼Œå¸Œæœ›è€å¸ˆä»¥åå¤šå¤šå¼€ç‚¹ä¸“æ ï¼Œåˆ†äº«æ–°çŸ¥è¯†ï¼Œå¼€äº†è®°å¾—é€šçŸ¥ğŸ˜™</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/58/4d/fec92a8d.jpg" width="30px"><span>arron</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ‰§è¡Œç¬¬äºŒæ­¥æŠ¥é”™ï¼š
#echo function_graph &gt; current_trace
-bash: current_trace: Permission denied

ç”¨rootç”¨æˆ·æ“ä½œçš„ï¼Œè¿™æ˜¯ä¸ºä½•ï¼Ÿ</div>2019-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/58/4d/fec92a8d.jpg" width="30px"><span>arron</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ‰§è¡Œç¬¬äºŒæ­¥æ˜¯æŠ¥é”™ï¼š
#echo function_graph &gt; current_trace
-bash: current_trace: Permission denied

rootç”¨æˆ·æ‰§è¡Œçš„ï¼Œä¸ºä½•æ²¡æƒé™ï¼Œä½•è§£ï¼Ÿ</div>2019-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/5c/cb/3ebdcc49.jpg" width="30px"><span>æ€€ç‰¹</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ä¸€èŠ‚æœ‰äº›è·Ÿä¸ä¸Šäº†ã€‚è¶Šæ¥è¶Šæ·±å…¥å†…æ ¸äº†ã€‚</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/42/76/256bbd43.jpg" width="30px"><span>æ¾èŠ±çš®è›‹me</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è¿™ç¯‡å®Œå…¨å¬ä¸æ‡‚</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/22/7e/cc/bab7c820.jpg" width="30px"><span>æ˜“æ°´</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æˆ‘çš„ç”¨çš„ç³»ç»Ÿå†…æ ¸è¾ƒæ–°,  echo do_sys_open &gt; set_graph_function çœ‹ä¸åˆ°ç»“æœ,æ¢æˆ
do_sys_openat2 å°±å¯ä»¥äº†,strace lsçœ‹äº†ä¸‹ æ–°kerneléƒ½ç”¨ openat æ‰“å¼€, è€kernelä½¿ç”¨openæ‰“å¼€</div>2020-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/04/ae/0118c132.jpg" width="30px"><span>è¾‰æ™–</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ‰§è¡Œè¿™å¥æœºå™¨å¡æ­»ï¼Œåªèƒ½å¼ºåˆ¶é‡å¯ï¼š
echo funcgraph-proc &gt; trace_options
æ‰§è¡Œè¿™å¥æŠ¥é”™ï¼š
# trace-cmd record -p function_graph -g do_sys_open -O funcgraph-proc ls
  plugin &#39;function_graph&#39;
trace-cmd: Permission denied
  can&#39;t create recorder
trace-cmd: Permission denied
  can&#39;t create recorder
trace-cmd: Permission denied
  can&#39;t create recorder
trace-cmd: Permission denied
  can&#39;t create recorder
available_events	    events		      options		   set_ftrace_notrace  trace_clock	    tracing_thresh
available_filter_functions  free_buffer		      per_cpu		   set_ftrace_pid      trace_marker	    uprobe_events
available_tracers	    function_profile_enabled  printk_formats	   set_graph_function  trace_options	    uprobe_profile
buffer_size_kb		    hwlat_detector	      README		   snapshot	       trace_pipe
buffer_total_size_kb	    instances		      saved_cmdlines	   stack_max_size      trace_stat
current_tracer		    kprobe_events	      saved_cmdlines_size  stack_trace	       tracing_cpumask
dyn_ftrace_total_info	    kprobe_profile	      set_event		   stack_trace_filter  tracing_max_latency
enabled_functions	    max_graph_depth	      set_ftrace_filter    trace	       tracing_on
trace-cmd: Permission denied
  Error creating output file</div>2019-11-25</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKQMM4m7NHuicr55aRiblTSEWIYe0QqbpyHweaoAbG7j2v7UUElqqeP3Ihrm3UfDPDRb1Hv8LvPwXqA/132" width="30px"><span>ninuxer</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ‰“å¡day53
ä¸ªäººè®¤ä¸ºperfçš„åŠŸèƒ½å…¨é¢ï¼Œå¯ç”¨äºç³»ç»Ÿå’Œå†…æ ¸çš„åˆ†æï¼Œftraceç”¨äºå†…æ ¸çº§åˆ«çš„åˆ†æï½</div>2019-03-20</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/sm5IXHKibVUAloJG9EIp7x49f5BttGhsibzgpo1ILyH1VA3cRVib2ewKE7evcZ98cExKLDD4aXNJvqlmVoh5FdYAg/132" width="30px"><span>Geek_c53032</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆæˆ‘æ‰§è¡Œè¿™é‡Œ$ echo function_graph &gt; current_tracerï¼Œè™šæ‹Ÿæœºå°±æ²¡ååº”äº†ï¼Œxshellä¹Ÿè‡ªåŠ¨é€€äº†ï¼Œè¿ä¸ä¸Šï¼Œè‡ªèƒ½é‡å¯äº†</div>2023-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg" width="30px"><span>piboye</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆ, æˆ‘è¿˜æƒ³é—®ä¸€ä¸ªä¸œè¥¿,  openrest xray è¿™ä¸ªäº§å“è€å¸ˆè§‰å¾—æ€ä¹ˆæ ·,  å¯ä»¥æ›¿ä»£æˆ‘ä»¬çš„äººå·¥åˆ†æå—?</div>2023-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg" width="30px"><span>piboye</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è¿™é‡Œçš„æ—¶é—´æ˜¯å…·ä½“æŸæ¬¡è¿è¡Œçš„æ—¶é—´ï¼Œè¿˜æ˜¯ç»Ÿè®¡åå–å’Œçš„æ—¶é—´ï¼Ÿ</div>2023-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/fa/03/eba78e43.jpg" width="30px"><span>é£æ¸…æ‰¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ºå•¥ubuntué‡Œtrace-cmdæ˜¾ç¤ºcpu x is empty.
root@52coder:~# trace-cmd record -p function_graph -g do_sys_open -O funcgraph-proc ls
  plugin &#39;function_graph&#39;
52coder      docker		    incubator-brpc  perf      redis-5.0.8  trace.dat	   trace.dat.cpu1  trace.dat.cpu3  yolanda
cpp-reflect  geektime_distrib_perf  k8s_study	    protobuf  snap	   trace.dat.cpu0  trace.dat.cpu2  workspace
CPU0 data recorded at offset=0x905000
    0 bytes in size
CPU1 data recorded at offset=0x905000
    0 bytes in size
CPU2 data recorded at offset=0x905000
    0 bytes in size
CPU3 data recorded at offset=0x905000
    0 bytes in size
root@52coder:~#
root@52coder:~# trace-cmd report
CPU 0 is empty
CPU 1 is empty
CPU 2 is empty
CPU 3 is empty
cpus=4
root@52coder:~#</div>2023-01-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/b7/24/17f6c240.jpg" width="30px"><span>janey</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Uprobeã€kprobeã€tracepointã€USDTè¿™4ç§æ¢é’ˆæœ‰ä¸¤ç§å½’ç±»æ–¹æ³•ï¼š
ä¸€æ˜¯æŒ‰ç…§åŠ¨é™åˆ†ï¼Œé™æ€è·Ÿè¸ªæœ‰tracepointå’ŒUSDTï¼›åŠ¨æ€è·Ÿè¸ªæœ‰kprobeå’ŒUprobeã€‚
äºŒæ˜¯æŒ‰ç…§ç”¨æˆ·æ€å†…æ ¸æ€åˆ†ï¼Œå†…æ ¸æ€æœ‰kprobeã€tracepointï¼›ç”¨æˆ·æ€æœ‰USDTå’ŒUprobeã€‚
è¿™æ ·ç†è§£å¯¹å—ï¼Ÿ</div>2022-07-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7a/81/69874318.jpg" width="30px"><span>ding</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>trace-cmdæŠ¥æ²¡æœ‰æƒé™

root@jamesdvm:&#47;sys&#47;kernel&#47;debug&#47;tracing# trace-cmd record -p function_graph -g do_sys_open -O funcgraph-proc ls
  plugin &#39;function_graph&#39;
trace-cmd: Permission denied
  can&#39;t create recorder
trace-cmd: Permission denied
  can&#39;t create recorder
available_events            buffer_total_size_kb   events                    instances        options         saved_cmdlines       set_event_pid       set_graph_function  stack_trace         trace_marker      trace_stat           tracing_thresh
available_filter_functions  current_tracer         free_buffer               kprobe_events    per_cpu         saved_cmdlines_size  set_ftrace_filter   set_graph_notrace   stack_trace_filter  trace_marker_raw  tracing_cpumask      uprobe_events
available_tracers           dyn_ftrace_total_info  function_profile_enabled  kprobe_profile   printk_formats  saved_tgids          set_ftrace_notrace  snapshot            trace               trace_options     tracing_max_latency  uprobe_profile
buffer_size_kb              enabled_functions      hwlat_detector            max_graph_depth  README          set_event            set_ftrace_pid      stack_max_size      trace_clock         trace_pipe        tracing_on
trace-cmd: Permission denied
  Error creating output file</div>2021-08-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/14/bc/74bdef48.jpg" width="30px"><span>crystal</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆï¼Œéº»çƒ¦é—®ä¸‹ä½ å“¦ï¼Œå†è¿™èŠ‚è¯¾ç¨‹ä¸­æˆ‘æ‰§è¡Œtrace-cmd report ç•Œé¢ä¸ºä»€ä¹ˆæ²¡æœ‰ä»»ä½•è¾“å‡ºå‘¢ï¼Ÿæ²¡æœ‰æŠ¥é”™ä¹Ÿæ²¡æœ‰è¾“å‡ºå‘¢</div>2021-03-01</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep92Vogxvtnl4UsKiaj5LIHZo5dL0IdpgysKWFGJp1PeZiaUDkKJUicakXOFkLvKPzZ6BYClKHromSzA/132" width="30px"><span>Tom</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æˆ‘ä¹Ÿæ‰“ä¸ªå¡ï¼Œç»™è€å¸ˆç‚¹ä¸ªèµï¼Œå¹²è´§å¤šå¤šï¼ï¼æœ‰äº›å†…å®¹ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œéœ€è¦å¤šå¬å‡ éã€‚</div>2020-08-18</li><br/><li><img src="" width="30px"><span>201200986</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åŸºäºtraceçš„æ–¹æ³•æ˜¯ä¸æ˜¯ä¼šå¯¹ç¨‹åºæœ¬èº«çš„æ€§èƒ½é€ æˆå¾ˆå¤§å½±å“ï¼Ÿä¸é€‚åˆåœ¨çº¿åˆ†æå‘¢</div>2020-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/3e/87/ff97c31e.jpg" width="30px"><span>Li. Mr</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ‚¨å¥½ï¼Œè¯·é—®æ‰“å¼€debugfså¯¹ç³»ç»Ÿæ€§èƒ½æœ‰å½±å“ä¹ˆï¼Ÿ</div>2020-02-27</li><br/><li><img src="" width="30px"><span>å¦‚æœ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>DAY50ï¼Œæ‰“å¡</div>2019-04-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/3a/6e/e39e90ca.jpg" width="30px"><span>å¤§åç‹ç‹¸</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>$ trace-cmd record -p function_graph -g do_sys_open -O funcgraph-proc ls  è¿™ä¸ªæ‰§è¡Œä¹‹åå°±å¼¹å‡ºä¸€ä¸ªæ¡†ï¼Œè¯´å®¿ä¸»æœºCPUå·´æ‹‰å·´æ‹‰ï¼Œå°±æŠŠæˆ‘æœºå™¨å¡æ­»äº†ã€‚ã€‚ã€‚åªèƒ½ç”¨ç½‘ç®¡é‡å¯å¤§æ³•ã€‚ã€‚ã€‚</div>2019-04-12</li><br/>
</ul>