åœ¨å‰é¢çš„ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ç»™ä½ è®²äº†å†³ç­–æ ‘ç®—æ³•ã€‚å†³ç­–æ ‘ç®—æ³•æ˜¯ç»å¸¸ä½¿ç”¨çš„æ•°æ®æŒ–æ˜ç®—æ³•ï¼Œè¿™æ˜¯å› ä¸ºå†³ç­–æ ‘å°±åƒä¸€ä¸ªäººè„‘ä¸­çš„å†³ç­–æ¨¡å‹ä¸€æ ·ï¼Œå‘ˆç°å‡ºæ¥éå¸¸ç›´è§‚ã€‚åŸºäºå†³ç­–æ ‘è¿˜è¯ç”Ÿäº†å¾ˆå¤šæ•°æ®æŒ–æ˜ç®—æ³•ï¼Œæ¯”å¦‚éšæœºæ£®æ—ï¼ˆRandom forestï¼‰ã€‚

ä»Šå¤©æˆ‘æ¥å¸¦ä½ ç”¨å†³ç­–æ ‘è¿›è¡Œé¡¹ç›®çš„å®æˆ˜ã€‚

å†³ç­–æ ‘åˆ†ç±»çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œåœ¨å„è¡Œå„ä¸šéƒ½æœ‰åº”ç”¨ï¼Œæ¯”å¦‚åœ¨é‡‘èè¡Œä¸šå¯ä»¥ç”¨å†³ç­–æ ‘åšè´·æ¬¾é£é™©è¯„ä¼°ï¼ŒåŒ»ç–—è¡Œä¸šå¯ä»¥ç”¨å†³ç­–æ ‘ç”Ÿæˆè¾…åŠ©è¯Šæ–­ï¼Œç”µå•†è¡Œä¸šå¯ä»¥ç”¨å†³ç­–æ ‘å¯¹é”€å”®é¢è¿›è¡Œé¢„æµ‹ç­‰ã€‚

åœ¨äº†è§£å†³ç­–æ ‘çš„åŸç†åï¼Œä»Šå¤©æˆ‘ä»¬ç”¨sklearnå·¥å…·è§£å†³ä¸€ä¸ªå®é™…çš„é—®é¢˜ï¼šæ³°å¦å°¼å…‹å·ä¹˜å®¢çš„ç”Ÿå­˜é¢„æµ‹ã€‚

## sklearnä¸­çš„å†³ç­–æ ‘æ¨¡å‹

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡sklearnä¸­è‡ªå¸¦çš„å†³ç­–æ ‘åˆ†ç±»å™¨DecisionTreeClassifierï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š

```
clf = DecisionTreeClassifier(criterion='entropy')
```

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œsklearnä¸­åªå®ç°äº†ID3ä¸CARTå†³ç­–æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æš‚æ—¶åªèƒ½ä½¿ç”¨è¿™ä¸¤ç§å†³ç­–æ ‘ï¼Œåœ¨æ„é€ DecisionTreeClassifierç±»æ—¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°æ˜¯criterionï¼Œæ„ä¸ºæ ‡å‡†ã€‚å®ƒå†³å®šäº†æ„é€ çš„åˆ†ç±»æ ‘æ˜¯é‡‡ç”¨ID3åˆ†ç±»æ ‘ï¼Œè¿˜æ˜¯CARTåˆ†ç±»æ ‘ï¼Œå¯¹åº”çš„å–å€¼åˆ†åˆ«æ˜¯entropyæˆ–è€…giniï¼š

- entropy: åŸºäºä¿¡æ¯ç†µï¼Œä¹Ÿå°±æ˜¯ID3ç®—æ³•ï¼Œå®é™…ç»“æœä¸C4.5ç›¸å·®ä¸å¤§ï¼›
- giniï¼šé»˜è®¤å‚æ•°ï¼ŒåŸºäºåŸºå°¼ç³»æ•°ã€‚CARTç®—æ³•æ˜¯åŸºäºåŸºå°¼ç³»æ•°åšå±æ€§åˆ’åˆ†çš„ï¼Œæ‰€ä»¥criterion=giniæ—¶ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯CARTç®—æ³•ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/18/43/dc/4f70c936.jpg" width="30px"><span>ä¸€åªçœ¼çœ‹ä¸–ç•Œ</span> ğŸ‘ï¼ˆ50ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿˜æœ‰ä¸ªé—®é¢˜ å†³ç­–æ ‘æ€ä¹ˆè¯»ï¼Ÿ  å°±æ˜¯æ¯ä¸ªæ–¹æ¡†å†…çš„æ•°æ®éƒ½ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</div>2019-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/2f/e2/3640e491.jpg" width="30px"><span>å°ç†ŠçŒ«</span> ğŸ‘ï¼ˆ29ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>fit ä»ä¸€ä¸ªè®­ç»ƒé›†ä¸­å­¦ä¹ æ¨¡å‹å‚æ•°ï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†å½’ä¸€åŒ–æ—¶ç”¨åˆ°çš„å‡å€¼ï¼Œæ ‡å‡†åå·®ç­‰ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè®­ç»ƒè¿‡ç¨‹ã€‚
transform: åœ¨fitçš„åŸºç¡€ä¸Šï¼Œå¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ï¼Œé™ç»´ï¼Œå½’ä¸€åŒ–ç­‰æ•°æ®è½¬æ¢æ“ä½œ
fit_transform: å°†æ¨¡å‹è®­ç»ƒå’Œè½¬åŒ–åˆå¹¶åˆ°ä¸€èµ·ï¼Œè®­ç»ƒæ ·æœ¬å…ˆåšfitï¼Œå¾—åˆ°meanï¼Œstandard deviationï¼Œç„¶åå°†è¿™äº›å‚æ•°ç”¨äºtransformï¼ˆå½’ä¸€åŒ–è®­ç»ƒæ•°æ®ï¼‰ï¼Œä½¿å¾—åˆ°çš„è®­ç»ƒæ•°æ®æ˜¯å½’ä¸€åŒ–çš„ï¼Œè€Œæµ‹è¯•æ•°æ®åªéœ€è¦åœ¨åŸå…ˆfitå¾—åˆ°çš„meanï¼Œstdä¸Šæ¥åšå½’ä¸€åŒ–å°±è¡Œäº†ï¼Œæ‰€ä»¥ç”¨transformå°±è¡Œäº†ã€‚</div>2019-02-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/54/9a/76c0af70.jpg" width="30px"><span>æ¯å¤©æ™’ç™½ç‰™</span> ğŸ‘ï¼ˆ26ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div># ä¾èµ–åŒ…ä» cmdä¸­ pip installå³å¯
import pandas as pd
import numpy as np
from sklearn.feature_extraction import DictVectorizer
from sklearn.tree import DecisionTreeClassifier
from sklearn.model_selection import cross_val_score
from sklearn import tree
import graphviz
# æ•°æ®åŠ è½½
train_data = pd.read_csv(&#39;D:&#47;workspace&#47;study&#47;python&#47;Titanic_Data&#47;train.csv&#39;)
test_data = pd.read_csv(&#39;D:&#47;workspace&#47;study&#47;python&#47;Titanic_Data&#47;test.csv&#39;)
# æ•°æ®æ¢ç´¢
print(train_data.info())
print(&#39;-&#39;*30)
print(train_data.describe())
print(&#39;-&#39;*30)
print(train_data.describe(include=[&#39;O&#39;]))
print(&#39;-&#39;*30)
print(train_data.head())
print(&#39;-&#39;*30)
print(train_data.tail())
# æ•°æ®æ¸…æ´—
# ä½¿ç”¨å¹³å‡å¹´é¾„æ¥å¡«å……å¹´é¾„ä¸­çš„ nan å€¼
train_data[&#39;Age&#39;].fillna(train_data[&#39;Age&#39;].mean(), inplace=True)
test_data[&#39;Age&#39;].fillna(test_data[&#39;Age&#39;].mean(), inplace=True)
# ä½¿ç”¨ç¥¨ä»·çš„å‡å€¼å¡«å……ç¥¨ä»·ä¸­çš„ nan å€¼
train_data[&#39;Fare&#39;].fillna(train_data[&#39;Fare&#39;].mean(), inplace=True)
test_data[&#39;Fare&#39;].fillna(test_data[&#39;Fare&#39;].mean(), inplace=True)
# ä½¿ç”¨ç™»å½•æœ€å¤šçš„æ¸¯å£æ¥å¡«å……ç™»å½•æ¸¯å£çš„ nan å€¼
train_data[&#39;Embarked&#39;].fillna(&#39;S&#39;, inplace=True)
test_data[&#39;Embarked&#39;].fillna(&#39;S&#39;, inplace=True)
# ç‰¹å¾é€‰æ‹©
features = [&#39;Pclass&#39;, &#39;Sex&#39;, &#39;Age&#39;, &#39;SibSp&#39;, &#39;Parch&#39;, &#39;Fare&#39;, &#39;Embarked&#39;]
train_features = train_data[features]
train_labels = train_data[&#39;Survived&#39;]
test_features = test_data[features]
dvec = DictVectorizer(sparse=False)
train_features = dvec.fit_transform(train_features.to_dict(orient=&#39;record&#39;))
print(dvec.feature_names_)
# å†³ç­–æ ‘æ¨¡å‹
# æ„é€  ID3 å†³ç­–æ ‘
clf = DecisionTreeClassifier(criterion=&#39;entropy&#39;)
# å†³ç­–æ ‘è®­ç»ƒ
clf.fit(train_features, train_labels)
# æ¨¡å‹é¢„æµ‹ &amp; è¯„ä¼°
test_features=dvec.transform(test_features.to_dict(orient=&#39;record&#39;))
# å†³ç­–æ ‘é¢„æµ‹
pred_labels = clf.predict(test_features)
# å†³ç­–æ ‘å‡†ç¡®ç‡
acc_decision_tree = round(clf.score(train_features, train_labels), 6)
print(u&#39;score å‡†ç¡®ç‡ä¸º %.4lf&#39; % acc_decision_tree)
#  K æŠ˜äº¤å‰éªŒè¯ç»Ÿè®¡å†³ç­–æ ‘å‡†ç¡®ç‡
print(u&#39;cross_val_score å‡†ç¡®ç‡ä¸º %.4lf&#39; % np.mean(cross_val_score(clf, train_features, train_labels, cv=10)))
# å†³ç­–æ ‘å¯è§†åŒ–
dot_data = tree.export_graphviz(clf, out_file=None)
graph = graphviz.Source(dot_data)
graph.view()</div>2019-01-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9d/93/945393c1.jpg" width="30px"><span>ä¸åšé”®ç›˜ä¾ </span> ğŸ‘ï¼ˆ17ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>Fareä¼¼ä¹æ²¡æœ‰ç¼ºå¤±å€¼ï¼Ÿ</div>2019-02-05</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJnryDfaYkQh7mTgVIQqk4vdeuY2oa82w0yxOVNfsz4qfSMqEqPFE9gKFvlhS53xY6YOrib86Z6vPA/132" width="30px"><span>Lambert</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div># å†³ç­–æ ‘å¯è§†åŒ–
from sklearn import tree
import graphviz
dot_data = tree.export_graphviz(clf, out_file=None)
graph = graphviz.Source(dot_data)
graph.render(&quot;tree&quot;)
graph.view(&#39;graph&#39;)</div>2019-02-27</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI45zO9GOMquk9JymTibN9sC25Sy4WtsDGRQzIRVIoIzPnaJGKmGe3jXqxP0zKZyTYazrXHBGYjBzw/132" width="30px"><span>æŸšå­</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å…³äºgraphvizï¼šæˆ‘ç”¨çš„æ˜¯anacondaï¼Œé€šè¿‡åœ¨anaconda promptç•Œé¢è¾“å…¥ conda install python-graphviz å¯ä»¥ç›´æ¥å®‰è£…graphviz</div>2019-02-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAeZ2VCia2y3bW9N7EMfgBqX8WClXUydwaXDPcK7Bm3XaMnMKx7q5ffA0UuTeJmEusxtQAibf8djCA/132" width="30px"><span>ä¸Šå®˜</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Carbinç¼ºå¤±ç‡åˆ†åˆ«ä¸º 77% å’Œ 78%ï¼Œ Age\Fareæœ‰ç¼ºå¤±å€¼ï¼Œè¿™éƒ½æ˜¯åœ¨å“ªå„¿åˆ¤æ–­å‡ºæ¥çš„ï¼Ÿ
</div>2019-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/50/91/0dd2b8ce.jpg" width="30px"><span>å¬å¦ˆå¦ˆçš„è¯</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>https:&#47;&#47;github.com&#47;apachecn&#47;kaggle&#47;tree&#47;master&#47;competitions&#47;getting-started&#47;titanic
æˆ‘ä¸ªäººè®¤ä¸ºè¿™é‡Œçš„é¢„æµ‹æ–¹æ¡ˆå†™çš„æ›´åŠ è¯¦ç»†ä¸€ç‚¹ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸€ä¸‹</div>2019-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/e8/d7/9209f511.jpg" width="30px"><span>hh</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆçš„è¯¾å¤ªå€¼äº†ï¼Œè¯·é—®è€å¸ˆè¿˜æœ‰å…¶ä»–è¯¾å—ï¼ŒçœŸæ˜¯å¹²è´§æ»¡æ»¡</div>2019-02-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg" width="30px"><span>å»ºå¼º</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>      transform()å’Œfit_transform()äºŒè€…çš„åŠŸèƒ½éƒ½æ˜¯å¯¹æ•°æ®è¿›è¡ŒæŸç§ç»Ÿä¸€å¤„ç†ï¼ˆæ¯”å¦‚æ ‡å‡†åŒ–~N(0,1)ï¼Œå°†æ•°æ®ç¼©æ”¾(æ˜ å°„)åˆ°æŸä¸ªå›ºå®šåŒºé—´ï¼Œå½’ä¸€åŒ–ï¼Œæ­£åˆ™åŒ–ç­‰ï¼‰ã€‚
      fit_transform(trainData)å¯¹éƒ¨åˆ†è®­ç»ƒæ•°æ®å…ˆæ‹Ÿåˆfitï¼Œæ‰¾åˆ°éƒ¨åˆ†è®­ç»ƒæ•°æ®çš„æ•´ä½“æŒ‡æ ‡ï¼Œå¦‚å‡å€¼ã€æ–¹å·®ã€æœ€å¤§å€¼æœ€å°å€¼ç­‰ç­‰ï¼ˆæ ¹æ®å…·ä½“è½¬æ¢çš„ç›®çš„ï¼‰ï¼Œç„¶åå¯¹è®­ç»ƒæ•°æ®è¿›è¡Œè½¬æ¢transformï¼Œä»è€Œå®ç°æ•°æ®çš„æ ‡å‡†åŒ–ã€å½’ä¸€åŒ–ç­‰ç­‰ã€‚
       æ ¹æ®å¯¹ä¹‹å‰éƒ¨åˆ†è®­ç»ƒæ•°æ®è¿›è¡Œfitçš„æ•´ä½“æŒ‡æ ‡ï¼Œå¯¹æµ‹è¯•æ•°æ®é›†ä½¿ç”¨åŒæ ·çš„å‡å€¼ã€æ–¹å·®ã€æœ€å¤§ã€æœ€å°å€¼ç­‰æŒ‡æ ‡è¿›è¡Œè½¬æ¢transform(testData)ï¼Œä»è€Œä¿è¯trainã€testå¤„ç†æ–¹å¼ç›¸åŒã€‚
</div>2019-09-10</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqyhBcYwcW0049zCvImcuiaKoKovSZUpoAbzCjiaEBc2vuuUWtuBDjt63sg37mSMNUVVndpGKBCcLpQ/132" width="30px"><span>ç¬”è½æƒŠé£é›¨</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘è¡¨ç¤ºçœŸçš„æ²¡çœ‹æ˜ç™½ æ¥å›æ¥çœ‹5éäº†</div>2019-02-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg" width="30px"><span>mickey</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div># encoding=utf-8
import pandas as pd
from sklearn.feature_extraction import DictVectorizer
from sklearn.tree import DecisionTreeClassifier
import numpy as np
from sklearn.model_selection import cross_val_score

# æ•°æ®åŠ è½½
train_data = pd.read_csv(&#39;.&#47;Titanic_Data&#47;train.csv&#39;)
test_data = pd.read_csv(&#39;.&#47;Titanic_Data&#47;test.csv&#39;)

# æ•°æ®æ¢ç´¢
print(train_data.info())
print(train_data.describe())
print(train_data.describe(include=[&#39;O&#39;]))
print(train_data.head())
print(train_data.tail())

# æ•°æ®æ¸…æ´—
# ä½¿ç”¨å¹³å‡å¹´é¾„æ¥å¡«å……å¹´é¾„ä¸­çš„Nanå€¼
train_data[&#39;Age&#39;].fillna(train_data[&#39;Age&#39;].mean(), inplace=True)
test_data[&#39;Age&#39;].fillna(test_data[&#39;Age&#39;].mean(),inplace=True)
# ä½¿ç”¨ç¥¨ä»·çš„å‡å€¼å¡«å……ç¥¨ä»·ä¸­çš„Nanå€¼
train_data[&#39;Fare&#39;].fillna(train_data[&#39;Fare&#39;].mean(), inplace=True)
test_data[&#39;Fare&#39;].fillna(test_data[&#39;Fare&#39;].mean(),inplace=True)

# ä½¿ç”¨ç™»å½•æœ€å¤šçš„æ¸¯å£æ¥å¡«å……ç™»å½•æ¸¯å£çš„nanå€¼
# print(train_data[&#39;Embarked&#39;].value_counts())
train_data[&#39;Embarked&#39;].fillna(&#39;S&#39;, inplace=True)
test_data[&#39;Embarked&#39;].fillna(&#39;S&#39;,inplace=True)

# ç‰¹å¾é€‰æ‹©
features = [&#39;Pclass&#39;, &#39;Sex&#39;, &#39;Age&#39;, &#39;SibSp&#39;, &#39;Parch&#39;, &#39;Fare&#39;, &#39;Embarked&#39;]
train_features = train_data[features]
train_labels = train_data[&#39;Survived&#39;]
test_features = test_data[features]

dvec = DictVectorizer(sparse=False)
train_features = dvec.fit_transform(train_features.to_dict(orient=&#39;record&#39;))

# æ„é€ ID3å†³ç­–æ ‘
clf = DecisionTreeClassifier(criterion=&#39;entropy&#39;)

# å†³ç­–æ ‘è®­ç»ƒ
clf.fit(train_features, train_labels)

# å¾—åˆ°å†³ç­–æ ‘å‡†ç¡®ç‡
acc_decision_tree = round(clf.score(train_features, train_labels), 6)
print(u&#39;scoreå‡†ç¡®ç‡ä¸º %.4lf&#39; % acc_decision_tree)

# ä½¿ç”¨KæŠ˜äº¤å‰éªŒè¯ ç»Ÿè®¡å†³ç­–æ ‘å‡†ç¡®ç‡
print(u&#39;cross_val_scoreå‡†ç¡®ç‡ä¸º %.4lf&#39; % np.mean(cross_val_score(clf, train_features, train_labels, cv=10)))</div>2019-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/79/9a/4f907ad6.jpg" width="30px"><span>Python</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ä¸¤ä¸ªå‡½æ•°æœ€åå¾—å‡ºçš„ç»“æœå®Œå…¨ä¸€æ ·ï¼Œä½†å®é™…ä¸Šç”¨æ³•æœ‰æ‰€ä¸åŒã€‚å¦‚æœä¸€å®šè¦ä¸¤ä¸ªä¸€èµ·ç”¨ï¼Œé‚£è‚¯å®šæ˜¯å¾—å…ˆ
fit_transforms,å†transformsï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚fit_transformså®é™…ä¸Šæ˜¯fit()å’Œtransformsï¼ˆï¼‰è¿™ä¸¤ä¸ªå‡½æ•°çš„é›†åˆ</div>2019-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/ca/83/684361be.jpg" width="30px"><span>æ°¸é™ä¸æ¯ä¹‹é›¨</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è‡ªå·±å†™äº†ä¸€éä»£ç ï¼Œè¯´æ€ä¹ˆä¸€ç›´æŠ¥é”™ï¼ŒåŸæ¥æ˜¯æµ‹è¯•é›†çš„fareæœ‰ç¼ºå¤±å•Šï¼
</div>2019-06-28</li><br/><li><img src="" width="30px"><span>0256</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ºä»€ä¹ˆæœ€åç®—å‡†ç¡®ç‡çš„æ—¶å€™ï¼Œæ˜¯ç”¨çš„trainï¼Œè€Œä¸æ˜¯testå‘¢ï¼Ÿ</div>2020-09-12</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJYEdMwBDUC6gYrUoI7092ocWJPyw1aP8xNOFXxOv7LEw1xj5a4icDibV7pd9vN45lXicXYjB7oYXVqg/132" width="30px"><span>ç¾Šå°çœ‹</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œä½ å¥½ï¼æƒ³é—®ä¸‹ï¼Œåšåˆ†ç±»æ—¶ï¼Œæ ·æœ¬çš„æ­£è´Ÿç±»åˆ«çš„æ•°é‡å¯¹æ¯”ï¼Œæœ‰é™åˆ¶å—ï¼Ÿæ­£ç±»æ¯”è¾ƒå°‘ï¼Œå æ¯”åªæœ‰5%ï¼Œå¯ä»¥å—ï¼Ÿä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å—ï¼Ÿè°¢è°¢ï¼</div>2019-05-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/1f/71/ad9de027.jpg" width="30px"><span>pythonzwd</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å’¨è¯¢ä¸€ä¸‹ï¼Œå°±æ˜¯é‚£ä¸ªæ˜¯å¦ç”Ÿå­˜çš„ç»“æœå¦‚ä½•ç”Ÿæˆå‡ºæ¥</div>2019-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/56/65/22a37a8e.jpg" width="30px"><span>Yezhiwei</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ˜¯å¦å¯ä»¥å°†æ–‡ç« ä¸­çš„è®­ç»ƒé›†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†è¿›è¡Œæ¨¡å‹è®­ç»ƒå’Œè¯„ä¼°ï¼Œæ–‡ç« ä¸­çš„æµ‹è¯•é›†æ¨¡æ‹ŸæœªçŸ¥çš„çœŸå®æ•°æ®ï¼Ÿ</div>2019-01-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/17/01/1c5309a3.jpg" width="30px"><span>McKee Chen</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™èŠ‚è¯¾å¬å®Œä¸€éä¹‹åï¼Œå¯¹æ•´ä¸ªè§£å†³å†³ç­–æ ‘é¢„æµ‹é—®é¢˜çš„æµç¨‹æœ‰äº†æ¸…æ™°ã€æ˜ç¡®çš„äº†è§£ä¸è®¤çŸ¥ï¼Œè€å¸ˆè®²è§£çš„ç‰¹åˆ«å¥½ï¼Œè®©æˆ‘ä¸€ä¸‹å­å°±å¬æ˜ç™½äº†ã€‚å‡†å¤‡å¼€å§‹ä¸Šæ‰‹å†™è¿™èŠ‚è¯¾çš„ä»£ç ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚</div>2020-11-27</li><br/><li><img src="" width="30px"><span>freedomwl</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼ŒkæŠ˜äº¤å‰éªŒè¯é™¤äº†å‘Šè¯‰æˆ‘ä»¬å®é™…çš„å‡†ç¡®ç‡ï¼Œç”¨è¿™ç§æ–¹æ³•è®­ç»ƒæ¨¡å‹æ˜¯å¦èƒ½æé«˜æ¨¡å‹å®é™…ç²¾åº¦ï¼Ÿ</div>2020-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/eb/2f/baad4b9d.jpg" width="30px"><span>wei</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>fit_transformæ˜¯å…ˆfitå†transformè¿˜æ˜¯å…ˆtransformå†fitï¼Ÿæˆ‘çš„ç†è§£æ˜¯å…ˆtransformï¼Œå› ä¸ºtransformåçš„dataæ‰æ˜¯ç”¨æ¥fitçš„è¾“å…¥ï¼Œè¿™æ ·ç†è§£å¯¹ä¹ˆï¼Ÿ</div>2020-06-29</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/ziaN7rOONp15HJm6A9JoAYicJL8VA59x10DX4JZyvcfqmmpCnumXgAkNn37aFoALftyTaQNlUF7te54LibvVm20TQ/132" width="30px"><span>Geek_c9fa4e</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>fit_transformæ˜¯è¾“å…¥åŠ è½¬æ¢ï¼Œè€Œtransformè¡¨ç¤ºè½¬æ¢ã€‚</div>2020-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/a0/b7/1327ae60.jpg" width="30px"><span>hellojd_gk</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç»“åˆè€å¸ˆçš„è®²è§£ï¼Œé…åˆè€å¸ˆä»£ç ï¼Œå†åŠ ä¸Šè°·æ­Œæœç´¢ã€‚ å¯¹æˆ‘pythonå°ç™½ï¼Œçœ‹æ˜ç™½äº†ã€‚</div>2020-04-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/a0/b7/1327ae60.jpg" width="30px"><span>hellojd_gk</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>é€šè¿‡æ•°æ®æ¢ç´¢ï¼Œæˆ‘ä»¬å‘ç° Ageã€Fare å’Œ Cabin è¿™ä¸‰ä¸ªå­—æ®µçš„æ•°æ®æœ‰æ‰€ç¼ºå¤±ã€‚ æˆ‘çœ‹åˆ°ç»“æœæ˜¯ï¼šEmbarkedï¼ŒCabinï¼ŒAgeè¿™ä¸‰ä¸ªå­—æ®µæœ‰æ‰€ç¼ºå¤±ã€‚ ä¸çŸ¥é“æ˜¯æˆ‘ç†è§£æœ‰é—®é¢˜ï¼Œè¿˜æ˜¯è€å¸ˆçš„å†…å®¹æœ‰é—®é¢˜ã€‚æ±‚ç¡®è®¤ã€‚</div>2020-04-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/e6/08/87a6f32b.jpg" width="30px"><span>qdnjqfch</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å®é™…å·¥ä½œä¸­ä»¥K æŠ˜äº¤å‰éªŒè¯å‡†ç¡®ç‡ä¸ºå‡†å§ï¼Ÿå‡†ç¡®ç‡ä¸€èˆ¬å¤šé«˜æ‰èƒ½ç®—æ¨¡å‹æ•ˆæœä¸é”™ã€‚</div>2020-03-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e8/ba/6d318c08.jpg" width="30px"><span>GS</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å…ˆmarkä¸‹ï¼Œæ²¡å¤ªçœ‹æ‡‚ã€‚è°¢è°¢å¤§å®¶çš„ç•™è¨€ï¼Œåœ¨ç•™è¨€å¸å–å¾ˆå¤šå‰äººç»éªŒã€‚
ç…§ç€æ¬ä¸€éå…ˆ
https:&#47;&#47;github.com&#47;leledada&#47;jupyter&#47;blob&#47;master&#47;titanic_analysis.ipynb</div>2019-12-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/4d/62/0fe9cbb3.jpg" width="30px"><span>Williamï½Zhang</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>carbinçš„å€¼æ— æ³•è¡¥é½ï¼Œé‚£åº”è¯¥å¯¹è¿™ä¸ªå±æ€§å¦‚ä½•å¤„ç†ï¼Ÿ</div>2019-11-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/ad/e9/5c51e32c.jpg" width="30px"><span>eleven</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>https:&#47;&#47;github.com&#47;cystanford&#47;Titanic_Data   æ— æ³•è®¿é—®
ç»™çš„ä¸¤ä¸ªé“¾æ¥éƒ½æ‰“ä¸å¼€ã€‚</div>2019-11-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/43/dc/4f70c936.jpg" width="30px"><span>ä¸€åªçœ¼çœ‹ä¸–ç•Œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œ è®­ç»ƒå‡ºçš„æ¨¡å‹è¦æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ æˆ‘ç†è§£çš„è®­ç»ƒå‡ºçš„æ¨¡å‹ï¼Œ å½“æˆ‘ç»™å®ƒä¼ ä¸€è¡Œæ•°æ® æ˜¯ä¸æ˜¯å°±èƒ½åˆ¤æ–­å‡ºèƒ½æ´»ä¸èƒ½æ´»äº†ï¼Ÿ è¦æ€ä¹ˆä¼ å‘¢ï¼Ÿ </div>2019-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/8e/76/6d55e26f.jpg" width="30px"><span>å¼ æ™“è¾‰</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>fit_transform: å…¶å®åšäº†ä¸¤ä»¶äº‹æƒ…ã€‚ä¸€æ˜¯å­¦ä¹ æ‰€æœ‰çš„ç‰¹å¾åå­—ã€‚äºŒæ˜¯æŠŠç‰¹å¾åå­—å’Œç‰¹å¾å€¼çš„Mapå…³ç³»è½¬åŒ–ä¸ºå‘é‡ã€‚
transformï¼šåªæ˜¯æŠŠç‰¹å¾åå­—å’Œç‰¹å¾å€¼çš„Mapå…³ç³»è½¬åŒ–ä¸ºå‘é‡ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨è°ƒç”¨transformä¹‹å‰éœ€è¦è°ƒç”¨fit å‡½æ•°ã€‚å¦åˆ™ï¼Œä¼šæœ‰å¼‚å¸¸æŠ›å‡ºã€‚

#encoding:UTF-8
import pandas as pd 
import numpy as np 
from sklearn.model_selection import cross_val_score
from sklearn.feature_extraction import DictVectorizer
from sklearn.tree import DecisionTreeClassifier
import graphviz
from sklearn import tree

#Data Explore
train_data = pd.read_csv(&#39;train.csv&#39;)
test_data = pd.read_csv(&#39;test.csv&#39;)
print(train_data.info())

#Data clean
train_data[&#39;Age&#39;].fillna(train_data[&#39;Age&#39;].mean(), inplace=True)
test_data[&#39;Age&#39;].fillna(test_data[&#39;Age&#39;].mean(), inplace=True)
train_data[&#39;Fare&#39;].fillna(train_data[&#39;Fare&#39;].mean(), inplace=True)
test_data[&#39;Fare&#39;].fillna(test_data[&#39;Fare&#39;].mean(), inplace=True)
print(train_data[&#39;Embarked&#39;].value_counts())
train_data[&#39;Embarked&#39;].fillna(&#39;S&#39;, inplace=True)
test_data[&#39;Embarked&#39;].fillna(&#39;S&#39;, inplace=True)

#Feature Selection
features = [&#39;Pclass&#39;, &#39;Sex&#39;, &#39;Age&#39;, &#39;SibSp&#39;, &#39;Parch&#39;, &#39;Fare&#39;, &#39;Embarked&#39;]
train_features = train_data[features]
train_labels = train_data[&#39;Survived&#39;]
test_features = test_data[features]

dvec = DictVectorizer(sparse=False)
train_features = dvec.fit_transform(train_features.to_dict(orient=&#39;record&#39;))
test_features = dvec.transform(test_features.to_dict(orient=&#39;record&#39;))

#Construct and train ID3 clf
clf = DecisionTreeClassifier(criterion=&#39;entropy&#39;)
clf.fit(train_features, train_labels)

#Predict
pred_labels = clf.predict(test_features)

#Evaluate
acc_decision_tree = round(clf.score(train_features, train_labels), 6)
print(&#39;Score accuracy %.4lf&#39; % acc_decision_tree)
print(&#39;cross_val_score accuracy %.4lf&#39; % np.mean(cross_val_score(clf, train_features, train_labels, cv=10)))

#Visualize the tree
dot_data = tree.export_graphviz(clf, out_file=None)
graph = graphviz.Source(dot_data)
graph</div>2019-05-11</li><br/>
</ul>