ä¸ŠèŠ‚è¯¾æˆ‘ä»¬è®²åˆ°PageRankç®—æ³•ç»å¸¸è¢«ç”¨åˆ°ç½‘ç»œå…³ç³»çš„åˆ†æä¸­ï¼Œæ¯”å¦‚åœ¨ç¤¾äº¤ç½‘ç»œä¸­è®¡ç®—ä¸ªäººçš„å½±å“åŠ›ï¼Œè®¡ç®—è®ºæ–‡çš„å½±å“åŠ›æˆ–è€…ç½‘ç«™çš„å½±å“åŠ›ç­‰ã€‚

ä»Šå¤©æˆ‘ä»¬å°±æ¥åšä¸€ä¸ªå…³äºPageRankç®—æ³•çš„å®æˆ˜ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œä½ éœ€è¦æ€è€ƒä¸‰ä¸ªé—®é¢˜ï¼š

1. å¦‚ä½•ä½¿ç”¨å·¥å…·å®ŒæˆPageRankç®—æ³•ï¼ŒåŒ…æ‹¬ä½¿ç”¨å·¥å…·åˆ›å»ºç½‘ç»œå›¾ï¼Œè®¾ç½®èŠ‚ç‚¹ã€è¾¹ã€æƒé‡ç­‰ï¼Œå¹¶é€šè¿‡åˆ›å»ºå¥½çš„ç½‘ç»œå›¾è®¡ç®—èŠ‚ç‚¹çš„PRå€¼ï¼›
2. å¯¹äºä¸€ä¸ªå®é™…çš„é¡¹ç›®ï¼Œæ¯”å¦‚å¸Œæ‹‰é‡Œçš„9306å°é‚®ä»¶ï¼ˆå·¥å…·åŒ…ä¸­é‚®ä»¶çš„æ•°é‡ï¼‰ï¼Œå¦‚ä½•ä½¿ç”¨PageRankç®—æ³•æŒ–æ˜å‡ºæœ‰å½±å“åŠ›çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”ç»˜åˆ¶ç½‘ç»œå›¾ï¼›
3. å¦‚ä½•å¯¹åˆ›å»ºå¥½çš„ç½‘ç»œå›¾è¿›è¡Œå¯è§†åŒ–ï¼Œå¦‚æœç½‘ç»œä¸­çš„èŠ‚ç‚¹æ•°è¾ƒå¤šï¼Œå¦‚ä½•ç­›é€‰é‡è¦çš„èŠ‚ç‚¹è¿›è¡Œå¯è§†åŒ–ï¼Œä»è€Œå¾—åˆ°ç²¾ç®€çš„ç½‘ç»œå…³ç³»å›¾ã€‚

## å¦‚ä½•ä½¿ç”¨å·¥å…·å®ç°PageRankç®—æ³•

PageRankç®—æ³•å·¥å…·åœ¨sklearnä¸­å¹¶ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ–°çš„å·¥å…·åŒ…ã€‚å®é™…ä¸Šæœ‰ä¸€ä¸ªå…³äºå›¾è®ºå’Œç½‘ç»œå»ºæ¨¡çš„å·¥å…·å«NetworkXï¼Œå®ƒæ˜¯ç”¨Pythonè¯­è¨€å¼€å‘çš„å·¥å…·ï¼Œå†…ç½®äº†å¸¸ç”¨çš„å›¾ä¸ç½‘ç»œåˆ†æç®—æ³•ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œç½‘ç»œæ•°æ®åˆ†æã€‚

ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä¸¾äº†ä¸€ä¸ªç½‘é¡µæƒé‡çš„ä¾‹å­ï¼Œå‡è®¾ä¸€å…±æœ‰4ä¸ªç½‘é¡µAã€Bã€Cã€Dï¼Œå®ƒä»¬ä¹‹é—´çš„é“¾æ¥ä¿¡æ¯å¦‚å›¾æ‰€ç¤ºï¼š

![](https://static001.geekbang.org/resource/image/47/ea/47e5f21d16b15a98d4a32a73ebd477ea.png?wh=1711%2A1171)  
é’ˆå¯¹è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹ä¸‹ç”¨NetworkXå¦‚ä½•è®¡ç®—Aã€Bã€Cã€Då››ä¸ªç½‘é¡µçš„PRå€¼ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```
import networkx as nx
# åˆ›å»ºæœ‰å‘å›¾
G = nx.DiGraph() 
# æœ‰å‘å›¾ä¹‹é—´è¾¹çš„å…³ç³»
edges = [("A", "B"), ("A", "C"), ("A", "D"), ("B", "A"), ("B", "D"), ("C", "A"), ("D", "B"), ("D", "C")]
for edge in edges:
    G.add_edge(edge[0], edge[1])
pagerank_list = nx.pagerank(G, alpha=1)
print("pagerankå€¼æ˜¯ï¼š", pagerank_list)
```

NetworkXå·¥å…·æŠŠä¸­é—´çš„è®¡ç®—ç»†èŠ‚éƒ½å·²ç»å°è£…èµ·æ¥äº†ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨PageRankå‡½æ•°å°±å¯ä»¥å¾—åˆ°ç»“æœï¼š

```
pagerankå€¼æ˜¯ï¼š {'A': 0.33333396911621094, 'B': 0.22222201029459634, 'C': 0.22222201029459634, 'D': 0.22222201029459634}
```

æˆ‘ä»¬é€šè¿‡NetworkXåˆ›å»ºäº†ä¸€ä¸ªæœ‰å‘å›¾ä¹‹åï¼Œè®¾ç½®äº†èŠ‚ç‚¹ä¹‹é—´çš„è¾¹ï¼Œç„¶åä½¿ç”¨PageRankå‡½æ•°å°±å¯ä»¥æ±‚å¾—èŠ‚ç‚¹çš„PRå€¼ï¼Œç»“æœå’Œä¸ŠèŠ‚è¯¾ä¸­æˆ‘ä»¬äººå·¥æ¨¡æ‹Ÿçš„ç»“æœä¸€è‡´ã€‚

å¥½äº†ï¼Œè¿è¡Œå®Œè¿™ä¸ªä¾‹å­ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹NetworkXå·¥å…·éƒ½æœ‰å“ªäº›å¸¸ç”¨çš„æ“ä½œã€‚

**1.å…³äºå›¾çš„åˆ›å»º**

å›¾å¯ä»¥åˆ†ä¸ºæ— å‘å›¾å’Œæœ‰å‘å›¾ï¼Œåœ¨NetworkXä¸­åˆ†åˆ«é‡‡ç”¨ä¸åŒçš„å‡½æ•°è¿›è¡Œåˆ›å»ºã€‚æ— å‘å›¾æŒ‡çš„æ˜¯ä¸ç”¨èŠ‚ç‚¹ä¹‹é—´çš„è¾¹çš„æ–¹å‘ï¼Œä½¿ç”¨nx.Graph() è¿›è¡Œåˆ›å»ºï¼›æœ‰å‘å›¾æŒ‡çš„æ˜¯èŠ‚ç‚¹ä¹‹é—´çš„è¾¹æ˜¯æœ‰æ–¹å‘çš„ï¼Œä½¿ç”¨nx.DiGraph()æ¥åˆ›å»ºã€‚åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­˜åœ¨Aâ†’Dçš„è¾¹ï¼Œä½†ä¸å­˜åœ¨Dâ†’Açš„è¾¹ã€‚

**2.å…³äºèŠ‚ç‚¹çš„å¢åŠ ã€åˆ é™¤å’ŒæŸ¥è¯¢**

å¦‚æœæƒ³åœ¨ç½‘ç»œä¸­å¢åŠ èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨G.add\_node(â€˜Aâ€™)æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨G.add\_nodes\_from(\[â€˜Bâ€™,â€˜Câ€™,â€˜Dâ€™,â€˜Eâ€™])æ·»åŠ èŠ‚ç‚¹é›†åˆã€‚å¦‚æœæƒ³è¦åˆ é™¤èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨G.remove\_node(node)åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨G.remove\_nodes\_from(\[â€˜Bâ€™,â€˜Câ€™,â€˜Dâ€™,â€˜Eâ€™])åˆ é™¤é›†åˆä¸­çš„èŠ‚ç‚¹ã€‚

é‚£ä¹ˆè¯¥å¦‚ä½•æŸ¥è¯¢èŠ‚ç‚¹å‘¢ï¼Ÿ

å¦‚æœä½ æƒ³è¦å¾—åˆ°å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå°±å¯ä»¥ä½¿ç”¨G.nodes()ï¼Œä¹Ÿå¯ä»¥ç”¨G.number\_of\_nodes()å¾—åˆ°å›¾ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚

**3.å…³äºè¾¹çš„å¢åŠ ã€åˆ é™¤ã€æŸ¥è¯¢**

å¢åŠ è¾¹ä¸æ·»åŠ èŠ‚ç‚¹çš„æ–¹å¼ç›¸åŒï¼Œä½¿ç”¨G.add\_edge(â€œAâ€, â€œBâ€)æ·»åŠ æŒ‡å®šçš„â€œä»Aåˆ°Bâ€çš„è¾¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨add\_edges\_fromå‡½æ•°ä»è¾¹é›†åˆä¸­æ·»åŠ ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åšä¸€ä¸ªåŠ æƒå›¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¾¹æ˜¯å¸¦æœ‰æƒé‡çš„ï¼Œä½¿ç”¨add\_weighted\_edges\_fromå‡½æ•°ä»å¸¦æœ‰æƒé‡çš„è¾¹çš„é›†åˆä¸­æ·»åŠ ã€‚åœ¨è¿™ä¸ªå‡½æ•°çš„å‚æ•°ä¸­æ¥æ”¶çš„æ˜¯1ä¸ªæˆ–å¤šä¸ªä¸‰å…ƒç»„\[u,v,w]ä½œä¸ºå‚æ•°ï¼Œuã€vã€wåˆ†åˆ«ä»£è¡¨èµ·ç‚¹ã€ç»ˆç‚¹å’Œæƒé‡ã€‚

å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨remove\_edgeå‡½æ•°å’Œremove\_edges\_fromå‡½æ•°åˆ é™¤æŒ‡å®šè¾¹å’Œä»è¾¹é›†åˆä¸­åˆ é™¤ã€‚

å¦å¤–å¯ä»¥ä½¿ç”¨edges()å‡½æ•°è®¿é—®å›¾ä¸­æ‰€æœ‰çš„è¾¹ï¼Œä½¿ç”¨number\_of\_edges()å‡½æ•°å¾—åˆ°å›¾ä¸­è¾¹çš„ä¸ªæ•°ã€‚

ä»¥ä¸Šæ˜¯å…³äºå›¾çš„åŸºæœ¬æ“ä½œï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå›¾ï¼Œå¹¶ä¸”å¯¹èŠ‚ç‚¹å’Œè¾¹è¿›è¡Œäº†è®¾ç½®ï¼Œå°±å¯ä»¥æ‰¾åˆ°å…¶ä¸­æœ‰å½±å“åŠ›çš„èŠ‚ç‚¹ï¼ŒåŸç†å°±æ˜¯é€šè¿‡PageRankç®—æ³•ï¼Œä½¿ç”¨nx.pagerank(G)è¿™ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¸­çš„å‚æ•°Gä»£è¡¨åˆ›å»ºå¥½çš„å›¾ã€‚

## å¦‚ä½•ç”¨PageRankæ­ç§˜å¸Œæ‹‰é‡Œé‚®ä»¶ä¸­çš„äººç‰©å…³ç³»

äº†è§£äº†NetworkXå·¥å…·çš„åŸºç¡€ä½¿ç”¨ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…çš„æ¡ˆä¾‹ï¼šå¸Œæ‹‰é‡Œé‚®ä»¶äººç‰©å…³ç³»åˆ†æã€‚

å¸Œæ‹‰é‡Œé‚®ä»¶äº‹ä»¶ç›¸ä¿¡ä½ ä¹Ÿæœ‰è€³é—»ï¼Œå¯¹è¿™ä¸ªæ•°æ®çš„èƒŒæ™¯æˆ‘ä»¬å°±ä¸åšä»‹ç»äº†ã€‚ä½ å¯ä»¥ä»GitHubä¸Šä¸‹è½½è¿™ä¸ªæ•°æ®é›†ï¼š[https://github.com/cystanford/PageRank](https://github.com/cystanford/PageRank)ã€‚

æ•´ä¸ªæ•°æ®é›†ç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼šAliases.csvï¼ŒEmails.csvå’ŒPersons.csvï¼Œå…¶ä¸­Emailsæ–‡ä»¶è®°å½•äº†æ‰€æœ‰å…¬å¼€é‚®ä»¶çš„å†…å®¹ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…çš„ä¿¡æ¯ã€‚Personsè¿™ä¸ªæ–‡ä»¶ç»Ÿè®¡äº†é‚®ä»¶ä¸­æ‰€æœ‰äººç‰©çš„å§“ååŠå¯¹åº”çš„IDã€‚å› ä¸ºå§“åå­˜åœ¨åˆ«åçš„æƒ…å†µï¼Œä¸ºäº†å°†é‚®ä»¶ä¸­çš„äººç‰©è¿›è¡Œç»Ÿä¸€ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨Aliasesæ–‡ä»¶æ¥æŸ¥è¯¢åˆ«åå’Œäººç‰©çš„å¯¹åº”å…³ç³»ã€‚

æ•´ä¸ªæ•°æ®é›†åŒ…æ‹¬äº†9306å°é‚®ä»¶å’Œ513ä¸ªäººåï¼Œæ•°æ®é›†è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ã€‚ä¸è¿‡è¿™ä¸€æ¬¡æˆ‘ä»¬ä¸éœ€è¦å¯¹é‚®ä»¶çš„å†…å®¹è¿›è¡Œåˆ†æï¼Œåªéœ€è¦é€šè¿‡é‚®ä»¶ä¸­çš„å‘é€è€…å’Œæ¥æ”¶è€…ï¼ˆå¯¹åº”Emails.csvæ–‡ä»¶ä¸­çš„MetadataFromå’ŒMetadataToå­—æ®µï¼‰æ¥ç»˜åˆ¶æ•´ä¸ªå…³ç³»ç½‘ç»œã€‚å› ä¸ºæ¶‰åŠåˆ°çš„äººç‰©å¾ˆå¤šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡PageRankç®—æ³•è®¡ç®—æ¯ä¸ªäººç‰©åœ¨é‚®ä»¶å…³ç³»ç½‘ç»œä¸­çš„æƒé‡ï¼Œæœ€åç­›é€‰å‡ºæ¥æœ€æœ‰ä»·å€¼çš„äººç‰©æ¥è¿›è¡Œå…³ç³»ç½‘ç»œå›¾çš„ç»˜åˆ¶ã€‚

äº†è§£äº†æ•°æ®é›†å’Œé¡¹ç›®èƒŒæ™¯ä¹‹åï¼Œæˆ‘ä»¬æ¥è®¾è®¡åˆ°æ‰§è¡Œçš„æµç¨‹æ­¥éª¤ï¼š

![](https://static001.geekbang.org/resource/image/72/c9/72132ffbc1209301f0876178c75927c9.jpg?wh=2411%2A1106)

1. é¦–å…ˆæˆ‘ä»¬éœ€è¦åŠ è½½æ•°æ®æºï¼›
2. åœ¨å‡†å¤‡é˜¶æ®µï¼šæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ¢ç´¢ï¼Œåœ¨æ•°æ®æ¸…æ´—è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºé‚®ä»¶ä¸­å­˜åœ¨åˆ«åçš„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»Ÿä¸€äººç‰©åç§°ã€‚å¦å¤–é‚®ä»¶çš„æ­£æ–‡å¹¶ä¸åœ¨æˆ‘ä»¬è€ƒè™‘çš„èŒƒå›´å†…ï¼Œåªç»Ÿè®¡é‚®ä»¶ä¸­çš„å‘é€è€…å’Œæ¥æ”¶è€…ï¼Œå› æ­¤æˆ‘ä»¬ç­›é€‰MetadataFromå’ŒMetadataToè¿™ä¸¤ä¸ªå­—æ®µä½œä¸ºç‰¹å¾ã€‚åŒæ—¶ï¼Œå‘é€è€…å’Œæ¥æ”¶è€…å¯èƒ½å­˜åœ¨å¤šæ¬¡é‚®ä»¶å¾€æ¥ï¼Œéœ€è¦è®¾ç½®æƒé‡æ¥ç»Ÿè®¡ä¸¤äººé‚®ä»¶å¾€æ¥çš„æ¬¡æ•°ã€‚æ¬¡æ•°è¶Šå¤šä»£è¡¨è¿™ä¸ªè¾¹ï¼ˆä»å‘é€è€…åˆ°æ¥æ”¶è€…çš„è¾¹ï¼‰çš„æƒé‡è¶Šé«˜ï¼›
3. åœ¨æŒ–æ˜é˜¶æ®µï¼šæˆ‘ä»¬ä¸»è¦æ˜¯å¯¹å·²ç»è®¾ç½®å¥½çš„ç½‘ç»œå›¾è¿›è¡ŒPRå€¼çš„è®¡ç®—ï¼Œä½†é‚®ä»¶ä¸­çš„äººç‰©æœ‰500å¤šäººï¼Œæœ‰äº›äººçš„æƒé‡å¯èƒ½ä¸é«˜ï¼Œæˆ‘ä»¬éœ€è¦ç­›é€‰PRå€¼é«˜çš„äººç‰©ï¼Œç»˜åˆ¶å‡ºä»–ä»¬ä¹‹é—´çš„å¾€æ¥å…³ç³»ã€‚åœ¨å¯è§†åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡èŠ‚ç‚¹çš„PRå€¼æ¥ç»˜åˆ¶èŠ‚ç‚¹çš„å¤§å°ï¼ŒPRå€¼è¶Šå¤§ï¼ŒèŠ‚ç‚¹çš„ç»˜åˆ¶å°ºå¯¸è¶Šå¤§ã€‚

è®¾ç½®å¥½æµç¨‹ä¹‹åï¼Œå®ç°çš„ä»£ç å¦‚ä¸‹ï¼š

```
# -*- coding: utf-8 -*-
# ç”¨ PageRank æŒ–æ˜å¸Œæ‹‰é‡Œé‚®ä»¶ä¸­çš„é‡è¦ä»»åŠ¡å…³ç³»
import pandas as pd
import networkx as nx
import numpy as np
from collections import defaultdict
import matplotlib.pyplot as plt
# æ•°æ®åŠ è½½
emails = pd.read_csv("./input/Emails.csv")
# è¯»å–åˆ«åæ–‡ä»¶
file = pd.read_csv("./input/Aliases.csv")
aliases = {}
for index, row in file.iterrows():
    aliases[row['Alias']] = row['PersonId']
# è¯»å–äººåæ–‡ä»¶
file = pd.read_csv("./input/Persons.csv")
persons = {}
for index, row in file.iterrows():
    persons[row['Id']] = row['Name']
# é’ˆå¯¹åˆ«åè¿›è¡Œè½¬æ¢        
def unify_name(name):
    # å§“åç»Ÿä¸€å°å†™
    name = str(name).lower()
    # å»æ‰, å’Œ @åé¢çš„å†…å®¹
    name = name.replace(",","").split("@")[0]
    # åˆ«åè½¬æ¢
    if name in aliases.keys():
        return persons[aliases[name]]
    return name
# ç”»ç½‘ç»œå›¾
def show_graph(graph, layout='spring_layout'):
    # ä½¿ç”¨ Spring Layout å¸ƒå±€ï¼Œç±»ä¼¼ä¸­å¿ƒæ”¾å°„çŠ¶
    if layout == 'circular_layout':
        positions=nx.circular_layout(graph)
    else:
        positions=nx.spring_layout(graph)
    # è®¾ç½®ç½‘ç»œå›¾ä¸­çš„èŠ‚ç‚¹å¤§å°ï¼Œå¤§å°ä¸ pagerank å€¼ç›¸å…³ï¼Œå› ä¸º pagerank å€¼å¾ˆå°æ‰€ä»¥éœ€è¦ *20000
    nodesize = [x['pagerank']*20000 for v,x in graph.nodes(data=True)]
    # è®¾ç½®ç½‘ç»œå›¾ä¸­çš„è¾¹é•¿åº¦
    edgesize = [np.sqrt(e[2]['weight']) for e in graph.edges(data=True)]
    # ç»˜åˆ¶èŠ‚ç‚¹
    nx.draw_networkx_nodes(graph, positions, node_size=nodesize, alpha=0.4)
    # ç»˜åˆ¶è¾¹
    nx.draw_networkx_edges(graph, positions, edge_size=edgesize, alpha=0.2)
    # ç»˜åˆ¶èŠ‚ç‚¹çš„ label
    nx.draw_networkx_labels(graph, positions, font_size=10)
    # è¾“å‡ºå¸Œæ‹‰é‡Œé‚®ä»¶ä¸­çš„æ‰€æœ‰äººç‰©å…³ç³»å›¾
    plt.show()
# å°†å¯„ä»¶äººå’Œæ”¶ä»¶äººçš„å§“åè¿›è¡Œè§„èŒƒåŒ–
emails.MetadataFrom = emails.MetadataFrom.apply(unify_name)
emails.MetadataTo = emails.MetadataTo.apply(unify_name)
# è®¾ç½®éçš„æƒé‡ç­‰äºå‘é‚®ä»¶çš„æ¬¡æ•°
edges_weights_temp = defaultdict(list)
for row in zip(emails.MetadataFrom, emails.MetadataTo, emails.RawText):
    temp = (row[0], row[1])
    if temp not in edges_weights_temp:
        edges_weights_temp[temp] = 1
    else:
        edges_weights_temp[temp] = edges_weights_temp[temp] + 1
# è½¬åŒ–æ ¼å¼ (from, to), weight => from, to, weight
edges_weights = [(key[0], key[1], val) for key, val in edges_weights_temp.items()]
# åˆ›å»ºä¸€ä¸ªæœ‰å‘å›¾
graph = nx.DiGraph()
# è®¾ç½®æœ‰å‘å›¾ä¸­çš„è·¯å¾„åŠæƒé‡ (from, to, weight)
graph.add_weighted_edges_from(edges_weights)
# è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹ï¼ˆäººï¼‰çš„ PR å€¼ï¼Œå¹¶ä½œä¸ºèŠ‚ç‚¹çš„ pagerank å±æ€§
pagerank = nx.pagerank(graph)
# å°† pagerank æ•°å€¼ä½œä¸ºèŠ‚ç‚¹çš„å±æ€§
nx.set_node_attributes(graph, name = 'pagerank', values=pagerank)
# ç”»ç½‘ç»œå›¾
show_graph(graph)

# å°†å®Œæ•´çš„å›¾è°±è¿›è¡Œç²¾ç®€
# è®¾ç½® PR å€¼çš„é˜ˆå€¼ï¼Œç­›é€‰å¤§äºé˜ˆå€¼çš„é‡è¦æ ¸å¿ƒèŠ‚ç‚¹
pagerank_threshold = 0.005
# å¤åˆ¶ä¸€ä»½è®¡ç®—å¥½çš„ç½‘ç»œå›¾
small_graph = graph.copy()
# å‰ªæ‰ PR å€¼å°äº pagerank_threshold çš„èŠ‚ç‚¹
for n, p_rank in graph.nodes(data=True):
    if p_rank['pagerank'] < pagerank_threshold: 
        small_graph.remove_node(n)
# ç”»ç½‘ç»œå›¾,é‡‡ç”¨circular_layoutå¸ƒå±€è®©ç­›é€‰å‡ºæ¥çš„ç‚¹ç»„æˆä¸€ä¸ªåœ†
show_graph(small_graph, 'circular_layout')
```

è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

![](https://static001.geekbang.org/resource/image/41/b1/419f7621392045f07bcd03f9e4c7c8b1.png?wh=1728%2A1028)  
![](https://static001.geekbang.org/resource/image/3f/e1/3f08f61360e8a82a23a16e44d2b973e1.png?wh=519%2A376)  
é’ˆå¯¹ä»£ç ä¸­çš„å‡ ä¸ªæ¨¡å—æˆ‘åšä¸ªç®€å•çš„è¯´æ˜ï¼š

**1.å‡½æ•°å®šä¹‰**

äººç‰©çš„åç§°éœ€è¦ç»Ÿä¸€ï¼Œå› æ­¤æˆ‘è®¾ç½®äº†unify\_nameå‡½æ•°ï¼ŒåŒæ—¶è®¾ç½®äº†show\_graphå‡½æ•°å°†ç½‘ç»œå›¾å¯è§†åŒ–ã€‚NetworkXæä¾›äº†å¤šç§å¯è§†åŒ–å¸ƒå±€ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨spring\_layoutå¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯å‘ˆä¸­å¿ƒæ”¾å°„çŠ¶ã€‚

é™¤äº†spring\_layoutå¤–ï¼ŒNetworkXè¿˜æœ‰å¦å¤–ä¸‰ç§å¯è§†åŒ–å¸ƒå±€ï¼Œcircular\_layoutï¼ˆåœ¨ä¸€ä¸ªåœ†ç¯ä¸Šå‡åŒ€åˆ†å¸ƒèŠ‚ç‚¹ï¼‰ï¼Œrandom\_layoutï¼ˆéšæœºåˆ†å¸ƒèŠ‚ç‚¹ ï¼‰ï¼Œshell\_layoutï¼ˆèŠ‚ç‚¹éƒ½åœ¨åŒå¿ƒåœ†ä¸Šï¼‰ã€‚

**2.è®¡ç®—è¾¹æƒé‡**

é‚®ä»¶çš„å‘é€è€…å’Œæ¥æ”¶è€…çš„é‚®ä»¶å¾€æ¥å¯èƒ½ä¸æ­¢ä¸€æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸¤è€…ä¹‹é—´é‚®ä»¶å¾€æ¥çš„æ¬¡æ•°è®¡ç®—è¿™ä¸¤è€…ä¹‹é—´è¾¹çš„æƒé‡ï¼Œæ‰€ä»¥æˆ‘ç”¨edges\_weights\_tempæ•°ç»„å­˜å‚¨æƒé‡ã€‚è€Œä¸Šé¢ä»‹ç»è¿‡åœ¨NetworkXä¸­æ·»åŠ æƒé‡è¾¹ï¼ˆå³ä½¿ç”¨add\_weighted\_edges\_fromå‡½æ•°ï¼‰çš„æ—¶å€™ï¼Œæ¥å—çš„æ˜¯uã€vã€wçš„ä¸‰å…ƒæ•°ç»„ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦å¯¹æ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œå…·ä½“è½¬æ¢æ–¹å¼è§ä»£ç ã€‚

**3.PRå€¼è®¡ç®—åŠç­›é€‰**

æˆ‘ä½¿ç”¨nx.pagerank(graph)è®¡ç®—äº†èŠ‚ç‚¹çš„PRå€¼ã€‚ç”±äºèŠ‚ç‚¹æ•°é‡å¾ˆå¤šï¼Œæˆ‘ä»¬è®¾ç½®äº†PRå€¼é˜ˆå€¼ï¼Œå³pagerank\_threshold=0.005ï¼Œç„¶åéå†èŠ‚ç‚¹ï¼Œåˆ é™¤å°äºPRå€¼é˜ˆå€¼çš„èŠ‚ç‚¹ï¼Œå½¢æˆæ–°çš„å›¾small\_graphï¼Œæœ€åå¯¹small\_graphè¿›è¡Œå¯è§†åŒ–ï¼ˆå¯¹åº”è¿è¡Œç»“æœçš„ç¬¬äºŒå¼ å›¾ï¼‰ã€‚

## æ€»ç»“

åœ¨ä¸ŠèŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡çŸ©é˜µä¹˜æ³•æ±‚å¾—ç½‘é¡µçš„æƒé‡ï¼Œè¿™èŠ‚è¯¾æˆ‘ä»¬ä½¿ç”¨NetworkXå¯ä»¥å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚

å¦å¤–æˆ‘å¸¦ä½ ç”¨PageRankç®—æ³•åšäº†ä¸€æ¬¡å®æˆ˜ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå¤æ‚çš„ç½‘ç»œå›¾ï¼Œé€šè¿‡PRå€¼çš„è®¡ç®—ã€ç­›é€‰ï¼Œæœ€ç»ˆå¾—åˆ°äº†ä¸€å¼ ç²¾ç®€çš„ç½‘ç»œå›¾ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å­¦ä¹ äº†NetworkXå·¥å…·çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬åˆ›å»ºå›¾ã€èŠ‚ç‚¹ã€è¾¹åŠPRå€¼çš„è®¡ç®—ã€‚

å®é™…ä¸ŠæŒæ¡äº†PageRankçš„ç†è®ºä¹‹åï¼Œåœ¨å®æˆ˜ä¸­å¾€å¾€å°±æ˜¯ä¸€è¡Œä»£ç çš„äº‹ã€‚ä½†é¡¹ç›®ä¸ç†è®ºä¸åŒï¼Œé¡¹ç›®ä¸­æ¶‰åŠåˆ°çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œä½ ä¼šèŠ±80%çš„æ—¶é—´ï¼ˆæˆ–80%çš„ä»£ç é‡ï¼‰åœ¨é¢„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚ä»Šå¤©çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯¹åˆ«åè¿›è¡Œäº†ç»Ÿä¸€ï¼Œå¯¹è¾¹çš„æƒé‡è¿›è¡Œè®¡ç®—ï¼ŒåŒæ—¶è¿˜éœ€è¦æŠŠè®¡ç®—å¥½çš„ç»“æœä»¥å¯è§†åŒ–çš„æ–¹å¼å‘ˆç°ã€‚

![](https://static001.geekbang.org/resource/image/30/42/307055050e005ba5092028a074a5c142.png?wh=1636%2A794)  
ä»Šå¤©æˆ‘ä¸¾äº†ä¸€ä¸ªç½‘é¡µæƒé‡çš„ä¾‹å­ï¼Œå‡è®¾ä¸€å…±æœ‰4ä¸ªç½‘é¡µAã€Bã€Cã€Dã€‚å®ƒä»¬ä¹‹é—´çš„é“¾æ¥ä¿¡æ¯å¦‚æ–‡ç« ä¸­çš„å›¾ç¤ºã€‚æˆ‘ä»¬å‡è®¾ç”¨æˆ·æœ‰15%çš„æ¦‚ç‡éšæœºè·³è½¬ï¼Œè¯·ä½ ç¼–å†™ä»£ç é‡æ–°è®¡ç®—è¿™4ä¸ªèŠ‚ç‚¹çš„PRå€¼ã€‚

æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºä¸æˆ‘åˆ†äº«ä½ çš„ç­”æ¡ˆï¼Œä¹Ÿæ¬¢è¿ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>third</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>pagerank å€¼æ˜¯ï¼š {&#39;C&#39;: 0.22514635472743896, &#39;A&#39;: 0.3245609358176832, &#39;D&#39;: 0.22514635472743894, &#39;B&#39;: 0.22514635472743896}

import networkx as nx
# åˆ›å»ºæœ‰å‘å›¾
G = nx.DiGraph()
# æœ‰å‘å›¾ä¹‹é—´è¾¹çš„å…³ç³»
edges = [(&quot;A&quot;, &quot;B&quot;), (&quot;A&quot;, &quot;C&quot;), (&quot;A&quot;, &quot;D&quot;), (&quot;B&quot;, &quot;A&quot;), (&quot;B&quot;, &quot;D&quot;), (&quot;C&quot;, &quot;A&quot;), (&quot;D&quot;, &quot;B&quot;), (&quot;D&quot;, &quot;C&quot;)]
for edge in edges:
    G.add_edge(edge[0], edge[1])
pagerank_list = nx.pagerank(G, alpha=0.85)
print(&quot;pagerank å€¼æ˜¯ï¼š&quot;, pagerank_list)
</p>2019-02-27</li><br/><li><span>æ°¸é™ä¸æ¯ä¹‹é›¨</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<p>è€å¸ˆå…³äºå¸Œæ‹‰é‡Œé‚®ä»¶çš„æ¡ˆä¾‹ï¼Œè¿™ä¸€æ®µä¸€ç›´çœ‹ä¸æ‡‚ã€‚
æˆ‘print(temp)åªæœ‰å¾—åˆ°ä¸¤ä¸ªäººåï¼Œ
ä½†æ˜¯æˆ‘print(edges_weights_temp)å
é™¤äº†äººåï¼Œåé¢è¿˜å¤šäº†ä¸€ä¸ªæ•°å­—ï¼Œ
è€å¸ˆè¿™æ•°å­—æ˜¯æ€ä¹ˆæ¥çš„ï¼Œè¿™æ®µè¯­æ³•èƒ½å¸®å¿™è§£é‡Šä¸€ä¸‹å—ï¼Ÿ
    temp=(rew[0],row[1])
if temp not in edges_weights_temp:
        edges_weights_temp[temp] = 1
    else:
        edges_weights_temp[temp] = edges_weights_temp[temp] + 1
</p>2019-07-03</li><br/><li><span>szm</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æœ‰2ä¸ªé—®é¢˜ï¼š
ç¬¬ä¸€ä¸ªï¼špagerankå·²ç»æ˜¯å­—å…¸ç±»å‹äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨pagerank_list = {node: rank for node, rank in pagerank.items()}å°†å…¶è½¬æ¢ä¸ºå­—å…¸å‘¢ï¼Ÿæ˜¯ä¸æ˜¯åˆ æ‰è¿™ä¸ªè¯­å¥ä¹Ÿæ²¡å…³ç³»ï¼Ÿ
ç¬¬äºŒä¸ªï¼šé˜ˆå€¼å¤§äº0.005çš„å›¾ä»æœ‰å¾ˆå¤šé‡å åœ¨ä¸€èµ·ï¼Œæ— æ³•è§‚çœ‹ï¼Œè¯·é—®æ€æ ·æ‰èƒ½è®©ç”»å‡ºæ¥çš„å›¾åƒç¾è§‚å‘¢ï¼Ÿ</p>2019-03-04</li><br/><li><span>WS</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œæ€ä¹ˆç­›é€‰å‡ºæŸä¸ªäººç‰©çš„æœ‰å‘å›¾ï¼Ÿ</p>2019-08-05</li><br/><li><span>mickey</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>import networkx as nx
# åˆ›å»ºæœ‰å‘å›¾
G = nx.DiGraph()
# æœ‰å‘å›¾ä¹‹é—´è¾¹çš„å…³ç³»
edges = [(&quot;A&quot;, &quot;B&quot;), (&quot;A&quot;, &quot;C&quot;), (&quot;A&quot;, &quot;D&quot;), (&quot;B&quot;, &quot;A&quot;), (&quot;B&quot;, &quot;D&quot;), (&quot;C&quot;, &quot;A&quot;), (&quot;D&quot;, &quot;B&quot;), (&quot;D&quot;, &quot;C&quot;)]
for edge in edges:
    G.add_edge(edge[0], edge[1])
pagerank_list = nx.pagerank(G) #alphaä¸ºé˜»å°¼å› å­ï¼Œé»˜è®¤å€¼ï¼š0.85
print(&quot;pagerankå€¼æ˜¯ï¼š&quot;, pagerank_list)

pagerankå€¼æ˜¯ï¼š {&#39;A&#39;: 0.3245609358176831, &#39;B&#39;: 0.22514635472743894, &#39;C&#39;: 0.22514635472743894, &#39;D&#39;: 0.22514635472743894}</p>2019-03-05</li><br/><li><span>Geek_hve78z</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>1ã€pagerank_list=nx.pagerank(G,alpha=1)ç†è§£
å‚è€ƒé“¾æ¥ï¼šhttps:&#47;&#47;networkx.github.io&#47;documentation&#47;networkx-1.10&#47;reference&#47;generated&#47;networkx.algorithms.link_analysis.pagerank_alg.pagerank.html
alphaæŒ‡çš„æ˜¯é˜»å°¼å› å­ã€‚æ ¹æ®å…¬å¼äº†è§£åˆ°ï¼Œè¿™å› å­ä»£è¡¨ç”¨æˆ·æŒ‰ç…§è·³è½¬é“¾æ¥æ¥ä¸Šç½‘çš„æ¦‚ç‡ã€‚
é¢˜ç›®è¯´15%çš„æ¦‚ç‡éšæœºè·³è½¬ï¼Œæ‰€ä»¥é˜»å°¼å› å­ä¸º0.85

2ã€ä»£ç 
import networkx as nx
# åˆ›å»ºæœ‰å‘å›¾
G=nx.DiGraph()
# æœ‰å‘å›¾ä¹‹é—´è¾¹çš„å…³ç³»
edges = [(&quot;A&quot;, &quot;B&quot;), (&quot;A&quot;, &quot;C&quot;), (&quot;A&quot;, &quot;D&quot;), (&quot;B&quot;, &quot;A&quot;), (&quot;B&quot;, &quot;D&quot;), (&quot;C&quot;, &quot;A&quot;), (&quot;D&quot;, &quot;B&quot;), (&quot;D&quot;, &quot;C&quot;)]
for edge in edges:
    G.add_edge(edge[0],edge[1])
pagerank_list=nx.pagerank(G,alpha=0.85)
print(&#39;pagerank å€¼æ˜¯: &#39;, pagerank_list)

3ã€ç»“æœ
pagerank å€¼æ˜¯:  {&#39;A&#39;: 0.3245609358176831, &#39;B&#39;: 0.22514635472743894, &#39;C&#39;: 0.22514635472743894, &#39;D&#39;: 0.22514635472743894}

</p>2019-03-01</li><br/><li><span>ç™½å¤œ</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>é»˜è®¤é˜»å°¼å°±æ˜¯0.85ï¼Œalphaå»æ‰å®Œäº‹ã€ã€
pagerank å€¼æ˜¯ï¼š {&#39;A&#39;: 0.3245609358176831, &#39;B&#39;: 0.22514635472743894, &#39;C&#39;: 0.22514635472743894, &#39;D&#39;: 0.22514635472743894}</p>2019-02-27</li><br/><li><span>å°æ™¨</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>#!&#47;usr&#47;bin&#47;env python
# -*- coding:utf-8 -*-
# Author:Peter

import networkx as nx
import matplotlib.pyplot as plt

def show_graph(graph):
    # ä½¿ç”¨Sprint Layoutå¸ƒå±€ï¼Œç±»ä¼¼ä¸­å¿ƒæ”¾å°„çŠ¶

    positions = nx.spring_layout(graph)
    # è®¾ç½®ç½‘æ ¼å›¾ä¸­çš„èŠ‚ç‚¹å¤§å°ï¼Œå¤§å°ä¸pagerankæ— å…³ï¼Œå› ä¸ºpagerankå€¼å¾ˆå°æ‰€ä»¥éœ€è¦*20000
    nodesize = [x[&#39;pagerank&#39;] * 20000 for v , x in graph.nodes(data=True)]
    # è®¾ç½®ç½‘ç»œå›¾ä¸­çš„è¾¹é•¿åº¦
    # edgesize = [np.sqrt(e[2][&#39;weight&#39;]) for e in graph.edges(data=True)]
    # ç»˜åˆ¶èŠ‚ç‚¹
    nx.draw_networkx_nodes(graph , positions , node_size=nodesize , alpha=0.4)
    # ç»˜åˆ¶è¾¹
    nx.draw_networkx_edges(graph , positions  , alpha=0.2)
    # ç»˜åˆ¶èŠ‚ç‚¹çš„ label
    nx.draw_networkx_labels(graph , positions , font_size=10)
    #æ‰€æœ‰äººç‰©å…³ç³»çš„å…³ç³»å›¾
    plt.show()

# åˆ›å»ºæœ‰å‘å›¾
G = nx.DiGraph()
# æœ‰å‘å›¾ä¹‹é—´è¾¹çš„å…³ç³»
edges = [(&quot;A&quot;, &quot;B&quot;), (&quot;A&quot;, &quot;C&quot;), (&quot;A&quot;, &quot;D&quot;), (&quot;B&quot;, &quot;A&quot;), (&quot;B&quot;, &quot;D&quot;), (&quot;C&quot;, &quot;A&quot;), (&quot;D&quot;, &quot;B&quot;), (&quot;D&quot;, &quot;C&quot;)]
for edge in edges:
    G.add_edge(edge[0],edge[1])
pagerank = nx.pagerank(G)
print(&#39;Pagerankå€¼ï¼š&#39;,pagerank)
# è·å–æ¯ä¸ªèŠ‚ç‚¹çš„pagerankæ•°å€¼
pagerank_list = {node: rank for node, rank in pagerank.items()}
# å°† pagerank æ•°å€¼ä½œä¸ºèŠ‚ç‚¹çš„å±æ€§
nx.set_node_attributes(G, name = &#39;pagerank&#39;, values = pagerank)
# ç”»ç½‘ç»œå›¾
show_graph(G)</p>2021-02-26</li><br/><li><span>å°åŒš</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆå¥½ï¼Œæˆ‘åœ¨è·‘çš„æ—¶å€™å‘ç°æç¤ºæ²¡æœ‰è¿™ä¸ª edge_size å‚æ•°ï¼Œæˆ‘ç›´æ¥å»æ‰äº†ä¹Ÿè·‘å‡ºäº†å’Œæ–‡ç« ä¸­ç›¸åŒçš„ç»“æœã€‚nx.draw_networkx_edges(graph, positions, alpha=0.2)</p>2021-02-20</li><br/><li><span>ç­‰å¾…</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<p>è€å¸ˆæ‚¨å¥½ï¼Œæƒ³è¯¢é—®ä»¥ä¸‹å°±æ˜¯ï¼Œåœ¨åˆ†æå¸Œæ‹‰é‡Œçš„é‚®ä»¶äººç‰©å…³ç³»çš„è¿‡ç¨‹ä¸­ï¼Œé˜»å°¼å› å­ä¸º0.85æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä»€ä¹ˆæƒ…å†µä¹‹ä¸‹æ‰è¦é˜»å°¼å› å­ä¸º1å‘¢ï¼Ÿ
éº»çƒ¦è€å¸ˆäº†</p>2020-03-30</li><br/><li><span>æ»¢</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>%15è·³è½¬æ¦‚ç‡ï¼Œå¯¹åº”çš„é˜»å°¼å› å­æ˜¯0.85 ï¼Œ é˜»å°¼å› å­é»˜è®¤å°±æ˜¯0.85ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™å¯ä»¥ç›´æ¥çœç•¥å•Šalphaå‚æ•°çš„è®¾å®šã€‚
import networkx
#åˆ›å»ºæœ‰å‘å›¾
digraph = networkx.DiGraph()
#æœ‰å‘å›¾ä¹‹é—´è¾¹çš„å…³ç³»
edges = [(&quot;A&quot;, &quot;B&quot;), (&quot;A&quot;, &quot;C&quot;), (&quot;A&quot;, &quot;D&quot;), (&quot;B&quot;, &quot;A&quot;), (&quot;B&quot;, &quot;D&quot;), (&quot;C&quot;, &quot;A&quot;), (&quot;D&quot;, &quot;B&quot;), (&quot;D&quot;, &quot;C&quot;)]
for edge in edges:
    digraph.add_edge(edge[0],edge[1])
pagerank_list = networkx.pagerank(digraph)
print(&#39;PageRank å€¼æ˜¯ï¼š&#39;,pagerank_list)
è¾“å‡ºç»“æœï¼š
PageRank å€¼æ˜¯ï¼š {&#39;A&#39;: 0.3245609358176831, &#39;B&#39;: 0.22514635472743894, &#39;C&#39;: 0.22514635472743894, &#39;D&#39;: 0.22514635472743894}</p>2019-04-21</li><br/><li><span>åšç§¯è–„å‘</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œé—®ä¸€ä¸‹å“ˆï¼Œedges_weights_temp = defaultdict(list)è¿™è¡Œä»£ç  ä½¿ç”¨list æ˜¯ä¸æ˜¯å¯ä»¥æ¢æˆint,æ¢æˆint,æˆ‘è¯•äº†ä¸€ä¸‹ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½¿ç”¨defaultdict(list) æœ‰ä»€ä¹ˆç‰¹æ®Šçš„ç”¨å—ï¼Ÿ</p>2020-10-29</li><br/><li><span>Ronnyz</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å°†alpha=0.85
pagerankå€¼ä¸ºï¼š {&#39;A&#39;: 0.3245609358176831, &#39;B&#39;: 0.22514635472743894, &#39;C&#39;: 0.22514635472743894, &#39;D&#39;: 0.22514635472743894}</p>2019-11-23</li><br/><li><span>third</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æé—®ï¼š
 UserWarning: Pandas doesn&#39;t allow columns to be created via a new attribute name - see https:&#47;&#47;pandas.pydata.org&#47;pandas-docs&#47;stable&#47;indexing.html#attribute-access

ä¸å…è®¸åˆ—è¢«æ–°å±æ€§åˆ›å»ºï¼Ÿï¼Ÿï¼Ÿ

ç‚¹å‡»ç½‘é¡µè¿›å»ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªè­¦å‘Šã€‚
éœ€è¦ä¿®æ”¹æˆ–è€…åˆ«çš„ä»€ä¹ˆä¸œè¥¿å—ï¼Ÿ</p>2019-02-27</li><br/><li><span>éåŒå‡¡æƒ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>import networkx as nx


def test_page_rank():
    G = nx.DiGraph()
    edges = [(&quot;A&quot;, &quot;B&quot;), (&quot;A&quot;, &quot;C&quot;), (&quot;A&quot;, &quot;D&quot;), (&quot;B&quot;, &quot;A&quot;), (&quot;B&quot;, &quot;D&quot;), (&quot;C&quot;, &quot;A&quot;), (&quot;D&quot;, &quot;B&quot;), (&quot;D&quot;, &quot;C&quot;)]

    for edge in edges:
        G.add_edge(edge[0], edge[1])
    pagerank_list = nx.pagerank(G, alpha=0.85)
    print(pagerank_list)

test_page_rank()

{&#39;A&#39;: 0.3245609358176831, &#39;B&#39;: 0.22514635472743894, &#39;C&#39;: 0.22514635472743894, &#39;D&#39;: 0.22514635472743894}</p>2020-11-25</li><br/>
</ul>