ä»Šå¤©æˆ‘å¸¦ä½ ç”¨æ•°æ®æŒ–æ˜å¯¹æ¯”ç‰¹å¸çš„èµ°åŠ¿è¿›è¡Œé¢„æµ‹å’Œåˆ†æã€‚

æˆ‘ä»¬ä¹‹å‰ä»‹ç»äº†æ•°æ®æŒ–æ˜ç®—æ³•ä¸­çš„åˆ†ç±»ã€èšç±»ã€å›å½’å’Œå…³è”åˆ†æç®—æ³•ï¼Œé‚£ä¹ˆå¯¹äºæ¯”ç‰¹å¸èµ°åŠ¿çš„é¢„æµ‹ï¼Œé‡‡ç”¨å“ªç§æ–¹æ³•æ¯”è¾ƒå¥½å‘¢ï¼Ÿ

å¯èƒ½æœ‰äº›äººä¼šè®¤ä¸ºé‡‡ç”¨å›å½’åˆ†æä¼šå¥½ä¸€äº›ï¼Œå› ä¸ºé¢„æµ‹çš„ç»“æœæ˜¯è¿ç»­çš„æ•°å€¼ç±»å‹ã€‚å®é™…ä¸Šï¼Œæ•°æ®æŒ–æ˜ç®—æ³•è¿˜æœ‰ä¸€ç§å«æ—¶é—´åºåˆ—åˆ†æçš„ç®—æ³•ï¼Œæ—¶é—´åºåˆ—åˆ†ææ¨¡å‹å»ºç«‹äº†è§‚å¯Ÿç»“æœä¸æ—¶é—´å˜åŒ–çš„å…³ç³»ï¼Œèƒ½å¸®æˆ‘ä»¬é¢„æµ‹æœªæ¥ä¸€æ®µæ—¶é—´å†…çš„ç»“æœå˜åŒ–æƒ…å†µã€‚

é‚£ä¹ˆæ—¶é—´åºåˆ—åˆ†æå’Œå›å½’åˆ†ææœ‰å“ªäº›åŒºåˆ«å‘¢ï¼Ÿ

é¦–å…ˆï¼Œåœ¨é€‰æ‹©æ¨¡å‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šç»“æœä¸å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚å›å½’åˆ†æè®­ç»ƒå¾—åˆ°çš„æ˜¯ç›®æ ‡å˜é‡yä¸è‡ªå˜é‡xï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰çš„ç›¸å…³æ€§ï¼Œç„¶åé€šè¿‡æ–°çš„è‡ªå˜é‡xæ¥é¢„æµ‹ç›®æ ‡å˜é‡yã€‚è€Œæ—¶é—´åºåˆ—åˆ†æå¾—åˆ°çš„æ˜¯ç›®æ ‡å˜é‡yä¸æ—¶é—´çš„ç›¸å…³æ€§ã€‚

å¦å¤–ï¼Œå›å½’åˆ†ææ“…é•¿çš„æ˜¯å¤šå˜é‡ä¸ç›®æ ‡ç»“æœä¹‹é—´çš„åˆ†æï¼Œå³ä¾¿æ˜¯å•ä¸€å˜é‡ï¼Œä¹Ÿå¾€å¾€ä¸æ—¶é—´æ— å…³ã€‚è€Œæ—¶é—´åºåˆ—åˆ†æå»ºç«‹åœ¨æ—¶é—´å˜åŒ–çš„åŸºç¡€ä¸Šï¼Œå®ƒä¼šåˆ†æç›®æ ‡å˜é‡çš„è¶‹åŠ¿ã€å‘¨æœŸã€æ—¶æœŸå’Œä¸ç¨³å®šå› ç´ ç­‰ã€‚è¿™äº›è¶‹åŠ¿å’Œå‘¨æœŸéƒ½æ˜¯åœ¨æ—¶é—´ç»´åº¦çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¦è§‚å¯Ÿçš„é‡è¦ç‰¹å¾ã€‚

é‚£ä¹ˆé’ˆå¯¹ä»Šå¤©è¦è¿›è¡Œçš„é¢„æµ‹æ¯”ç‰¹å¸èµ°åŠ¿çš„é¡¹ç›®ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æŒæ¡å“ªäº›ç›®æ ‡å‘¢ï¼Ÿ

1. äº†è§£æ—¶é—´åºåˆ—é¢„æµ‹çš„æ¦‚å¿µï¼Œä»¥åŠå¸¸ç”¨çš„æ¨¡å‹ç®—æ³•ï¼ŒåŒ…æ‹¬ARã€MAã€ARMAã€ARIMAæ¨¡å‹ç­‰ï¼›
2. æŒæ¡å¹¶ä½¿ç”¨ARMAæ¨¡å‹å·¥å…·ï¼Œå¯¹ä¸€ä¸ªæ—¶é—´åºåˆ—æ•°æ®è¿›è¡Œå»ºæ¨¡å’Œé¢„æµ‹ï¼›
3. å¯¹æ¯”ç‰¹å¸çš„å†å²æ•°æ®è¿›è¡Œæ—¶é—´åºåˆ—å»ºæ¨¡ï¼Œå¹¶é¢„æµ‹æœªæ¥6ä¸ªæœˆçš„èµ°åŠ¿ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/15/4b/68/a6198a59.jpg" width="30px"><span>Geek_2a6093</span> ğŸ‘ï¼ˆ17ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆèƒ½ä¸èƒ½è®²ä¸€ä¸‹LSTM
</div>2019-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg" width="30px"><span>Geek_hve78z</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è¿è¡Œæ²ªå¸‚æŒ‡æ•°æ•°æ®ç»“æœä¸ºï¼š
å‚æ•°é”™è¯¯: (0, 2)
æœ€ä¼˜æ¨¡å‹: ARMA Model Results  
é¢„æµ‹æ•°æ®ï¼š
2019-03-31		2841.753594
2019-04-30		2862.532373
2019-05-31		2816.252354
2019-06-30		2801.829572
2019-07-31		2773.588278
2019-08-31		2752.587602
2019-09-30		2729.086661
2019-10-31		2707.560415
2019-11-30		2685.923215
2019-12-31		2665.117874
-----------
df_month2[&#39;forecast&#39;]=best_model.predict(start=0,end=348)ç†è§£
start=0è¡¨ç¤ºä»ç¬¬0è¯¾æ•°æ®å¼€å§‹è®¡ç®—
end=348æ˜¯æŒ‡éœ€è¦è®¡ç®—348ä¸ªæ•°æ®ï¼Œå³ä»1990-12-19åˆ°2019-12-31ä¸€å…±æœ‰348ä¸ªæœˆï¼Œæ‰€ä»¥æœ‰348ä¸ªæ•°æ®</div>2019-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg" width="30px"><span>Geek_hve78z</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div># -*- coding:utf-8 -*-
# ç¼–ç ä½¿ç”¨ ARMA æ¨¡å‹å¯¹æ²ªå¸‚æŒ‡æ•°æœªæ¥ 10 ä¸ªæœˆï¼ˆæˆªæ­¢åˆ° 2019 å¹´ 12 æœˆ 31 æ—¥ï¼‰çš„å˜åŒ–è¿›è¡Œé¢„æµ‹
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from statsmodels.tsa.arima_model import ARMA
import warnings
from itertools import product
from datetime import datetime
warnings.filterwarnings(&#39;ignore&#39;)

# æ•°æ®åŠ è½½
df=pd.read_csv(&#39;.&#47;bitcoin-master&#47;shanghai_1990-12-19_to_2019-2-28.csv&#39;)
# å°†æ—¶é—´ä½œä¸º df çš„ç´¢å¼•
df.Timestamp=pd.to_datetime(df.Timestamp)
df.index=df.Timestamp

# æ•°æ®æ¢ç´¢
print(df.head())

# æŒ‰ç…§æœˆæ¥ç»Ÿè®¡
df_month=df.resample(&#39;M&#39;).mean()

# æŒ‰ç…§æœˆæ¥æ˜¾ç¤ºæ²ªå¸‚æŒ‡æ•°çš„èµ°åŠ¿
fig=plt.figure(figsize=[15,7])
plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;]
plt.suptitle(&#39;æ²ªå¸‚æŒ‡æ•°&#39;,fontsize=20)

plt.plot(df_month.Price,&#39;-&#39;,label=&#39;æŒ‰æœˆ&#39;)
plt.legend()
plt.show()

# è®¾ç½®å‚æ•°èŒƒå›´
ps=range(0,3)
qs=range(0,3)
parameters=product(ps,qs)
parameters_list=list(parameters)

# å¯»æ‰¾æœ€ä¼˜ ARMA æ¨¡å‹å‚æ•°ï¼Œå³ best_aic æœ€å°
results=[]
best_aic=float(&#39;inf&#39;)# æ­£æ— ç©·
for param in parameters_list:
    try:
        model=ARMA(df_month.Price,order=(param[0],param[1])).fit()
    except ValueError:
        print(&#39;å‚æ•°é”™è¯¯:&#39;,param)
        continue
    aic=model.aic
    if aic&lt;best_aic:
        best_model=model
        best_aic=aic
        best_param=param
    results.append([param,model.aic])
# è¾“å‡ºæœ€ä¼˜æ¨¡å‹
result_table=pd.DataFrame(results)
result_table.columns=[&#39;parameters&#39;,&#39;aic&#39;]
print(&#39;æœ€ä¼˜æ¨¡å‹:&#39;,best_model.summary())

# æ²ªå¸‚æŒ‡æ•°é¢„æµ‹
df_month2=df_month[[&#39;Price&#39;]]
date_list= [datetime(2019, 3, 31), datetime(2019, 4, 30), datetime(2019, 5, 31), datetime(2019, 6, 30), datetime(2019, 7, 31),
             datetime(2019, 8, 31), datetime(2019, 9, 30), datetime(2019, 10, 31),datetime(2019, 11, 30),datetime(2019, 12, 31)]
future=pd.DataFrame(index=date_list,columns=df_month.columns)
df_month2=pd.concat([df_month2,future])
df_month2[&#39;forecast&#39;]=best_model.predict(start=0,end=348)
# æ²ªå¸‚æŒ‡æ•°é¢„æµ‹ç»“æœæ˜¾ç¤º
plt.figure(figsize=(20,7))
df_month2.Price.plot(label=&#39;å®é™…æŒ‡æ•°&#39;)
df_month2.forecast.plot(color=&#39;r&#39;,ls=&#39;--&#39;,label=&#39;é¢„æµ‹æŒ‡æ•°&#39;)
plt.legend()
plt.title(&#39;æ²ªå¸‚æŒ‡æ•°ï¼ˆæœˆï¼‰&#39;)
plt.xlabel(&#39;æ—¶é—´&#39;)
plt.ylabel(&#39;æŒ‡æ•°&#39;)
plt.show()</div>2019-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/66/a6/abb7bfe3.jpg" width="30px"><span>å¼ ä¸½æ–Œ</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™æ˜¯åˆšå¥½æ’å¯¹äº†å§ï¼Œæ¯”ç‰¹å¸ã€è‚¡å¸‚ä»€ä¹ˆçš„é¢„æµ‹å—å„ç§å› ç´ å½±å“å¤ªå¤§äº†ã€‚æ›´å¤šæ˜¯è€ƒè™‘åŠ¨æ€å› ç´ </div>2019-04-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e5/43/7bc7cfe3.jpg" width="30px"><span>è·³è·³</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ä¸€ã€ARã€MAã€ARMAã€ARIMAçš„åŒºåˆ«
ARçš„æ ¸å¿ƒæ€æƒ³æ˜¯è¿‡å»è‹¥å¹²ç‚¹çš„çº¿æ€§ç»„åˆï¼Œå†åŠ ä¸Šç™½å™ªå£°é¢„æµ‹æœªæ¥æ—¶åˆ»ç‚¹çš„å€¼ã€‚
MAçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å†å²ç™½å™ªå£°çº¿æ€§ç»„åˆæ¥å½±å“å½“å‰çš„æ—¶åˆ»ç‚¹ã€‚
ARMAï¼šç»“åˆARã€MAçš„æ€æƒ³ï¼Œç»¼åˆè€ƒè™‘å†å²ç™½å™ªå£°å’Œå½“å‰ç™½å™ªå£°ï¼Œé¢„æµ‹æœªæ¥æ—¶åˆ»ç‚¹ã€‚
ARIMAï¼šè¾ƒARMAå¤šäº†å·®åˆ†è¿‡ç¨‹ï¼Œå¯¹ä¸å¹³è¡¡æ•°æ®è¿›è¡Œäº†å·®åˆ†å¹³ç¨³ã€‚
äºŒã€æ²ªå¸‚æŒ‡æ•°é¢„æµ‹ç»“æœå¦‚ä¸‹ï¼š
å‚æ•°é”™è¯¯: (0, 2)
æœ€ä¼˜æ¨¡å‹:                                ARMA Model Results                              
==============================================================================
Dep. Variable:                  Price   No. Observations:                  339
Model:                     ARMA(2, 2)   Log Likelihood               -2208.110
Method:                       css-mle   S.D. of innovations            162.159
Date:                Mon, 18 Mar 2019   AIC                           4428.219
Time:                        10:59:23   BIC                           4451.175
Sample:                    12-31-1990   HQIC                          4437.367
                         - 02-28-2019                                         
</div>2019-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/7e/a6/4e331ef4.jpg" width="30px"><span>éª‘è¡Œçš„æŒæŸœJ</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>æˆ‘ç”¨ARIMAæ¨¡å‹å¯¹è€å¸ˆä¸€å¼€å§‹çš„é‚£ç»„æ—¶é—´åºåˆ—è¿›è¡Œäº†åˆ†æé¢„æµ‹ï¼Œå› ä¸ºå­—æ•°é™åˆ¶ï¼šçœç•¥ä¸€å¼€å§‹çš„æ•°æ®åŠ è½½å’Œæœ€åçš„é¢„æµ‹æ­¥éª¤ï¼Œä½†æ˜¯åŠ å…¥å¯¹å·®åˆ†æ¬¡æ•°dçš„æŸ¥æ‰¾ã€æ‰¾ARIMAæ¨¡å‹çš„pã€qå€¼å’Œæ¨¡å‹æ£€éªŒä¸‰ä¸ªæ­¥éª¤ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ç”¨ï¼Œè°¢è°¢
# -*- coding: utf-8 -*-
# ç”¨ ARIMA è¿›è¡Œæ—¶é—´åºåˆ—é¢„æµ‹
import numpy as np
from statsmodels.graphics.tsaplots import acf,pacf,plot_acf,plot_pacf
#2.ä¸‹é¢æˆ‘ä»¬å…ˆå¯¹éå¹³ç¨³æ—¶é—´åºåˆ—è¿›è¡Œæ—¶é—´åºåˆ—çš„å·®åˆ†ï¼Œæ‰¾å‡ºé€‚åˆçš„å·®åˆ†æ¬¡æ•°
#fig = plt.figure(figsize=(12, 8))
#ax1 = fig.add_subplot(111)
#diff1 = data.diff(1)
#diff1.plot(ax=ax1)
#è¿™é‡Œæ˜¯åšäº†1é˜¶å·®åˆ†ï¼Œå¯ä»¥çœ‹å‡ºæ—¶é—´åºåˆ—çš„å‡å€¼å’Œæ–¹å·®åŸºæœ¬å¹³ç¨³ï¼Œ
#è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€é˜¶å·®åˆ†çš„æ—¶é—´åºåˆ—ï¼ŒæŠŠä¸Šé¢ä»£ç æ³¨é‡Šæ‰
#3.æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ‰¾åˆ°ARIMAæ¨¡å‹ä¸­åˆé€‚çš„på’Œqå€¼ï¼š
data = data.diff(1)
data.dropna(inplace=True)
#ç¬¬ä¸€æ­¥ï¼šå…ˆæ£€æŸ¥å¹³ç¨³åºåˆ—çš„è‡ªç›¸å…³å›¾å’Œåè‡ªç›¸å…³å›¾
fig = plt.figure(figsize=(12, 8))
ax1 = fig.add_subplot(211)
fig = sm.graphics.tsa.plot_acf(data,lags=40,ax=ax1)
#lags è¡¨ç¤ºæ»åçš„é˜¶æ•°ï¼Œä¸‹é¢åˆ†åˆ«å¾—åˆ°acf å›¾å’Œpacf å›¾
ax2 = fig.add_subplot(212)
fig = sm.graphics.tsa.plot_pacf(data, lags=40,ax=ax2)
#ç”±ä¸‹å›¾æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ç”¨ARMA(0,1)æ¨¡å‹ã€ARMA(7,0)æ¨¡å‹ã€ARMA(7,1)æ¨¡å‹ç­‰æ¥æ‹Ÿåˆæ‰¾å‡ºæœ€ä½³æ¨¡å‹ï¼š
#ç¬¬ä¸‰æ­¥:æ‰¾å‡ºæœ€ä½³æ¨¡å‹ARMA
arma_mod1 = sm.tsa.ARMA(data,(7,0)).fit()
print(arma_mod1.aic, arma_mod1.bic, arma_mod1.hqic)
arma_mod2 = sm.tsa.ARMA(data,(0,1)).fit()
print(arma_mod2.aic, arma_mod2.bic, arma_mod2.hqic)
arma_mod3 = sm.tsa.ARMA(data,(7,1)).fit()
print(arma_mod3.aic, arma_mod3.bic, arma_mod3.hqic)
arma_mod4 = sm.tsa.ARMA(data,(8,0)).fit()
print(arma_mod4.aic, arma_mod4.bic, arma_mod4.hqic)
#ç”±ä¸Šé¢å¯ä»¥çœ‹å‡ºARMA(7,0)æ¨¡å‹æœ€ä½³
#ç¬¬å››æ­¥ï¼šè¿›è¡Œæ¨¡å‹æ£€éªŒï¼Œé¦–å…ˆå¯¹ARMA(7,0)æ¨¡å‹æ‰€äº§ç”Ÿçš„æ®‹å·®åšè‡ªç›¸å…³å›¾
resid = arma_mod1.resid
#ä¸€å®šè¦åŠ ä¸Šè¿™ä¸ªå˜é‡èµ‹å€¼è¯­å¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™resid is not defined 
fig = plt.figure(figsize=(12, 8))
ax1 = fig.add_subplot(211)
fig = sm.graphics.tsa.plot_acf(resid.values.squeeze(),lags=40,ax=ax1)
ax2 = fig.add_subplot(212)
fig = sm.graphics.tsa.plot_pacf(resid, lags=40,ax=ax2)
#æ¥ç€åšå¾·å®¾-æ²ƒæ£®ï¼ˆD-Wï¼‰æ£€éªŒ
print(sm.stats.durbin_watson(arma_mod1.resid.values))
#å¾—å‡ºæ¥ç»“æœæ˜¯ä¸å­˜åœ¨è‡ªç›¸å…³æ€§çš„
#å†è§‚å¯Ÿæ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒ,è¿™é‡Œç”¨qqå›¾
fig = plt.figure(figsize=(12,8))
ax = fig.add_subplot(111)
fig = qqplot(resid, line=&#39;q&#39;,ax=ax, fit=True)
#æœ€åç”¨Ljung-Boxæ£€éªŒ:æ£€éªŒçš„ç»“æœå°±æ˜¯çœ‹æœ€åä¸€åˆ—å‰åäºŒè¡Œçš„æ£€éªŒæ¦‚ç‡ï¼ˆä¸€èˆ¬è§‚å¯Ÿæ»å1~12é˜¶ï¼‰
r,q,p = sm.tsa.acf(resid.values.squeeze(),qstat=True)
data1 = np.c_[range(1,41), r[1:], q, p]
table= pd.DataFrame(data1, columns=[ &#39;lag&#39;,&#39;AC&#39;,&#39;Q&#39;,&#39;Prob(&gt;Q)&#39;])
print(table.set_index(&#39;lag&#39;))
</div>2019-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg" width="30px"><span>æ»¢</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æƒ³é—®ä¸‹è€å¸ˆï¼Œï¼ˆ1ï¼‰å¯¹äºç±»ä¼¼äºå½©ç¥¨è¿™ç§ç±»å‹çš„æ•°æ®è¯¥ç”¨ä»€ä¹ˆç®—æ³•åˆ†æï¼Ÿï¼ˆ2ï¼‰å¯¹äºARMAçš„æœ€ä¼˜åªèƒ½äººä¸ºèµ‹å€¼ï¼Œå¾ªç¯æ£€æµ‹æœ€å¤§å€¼å—ï¼Ÿè‹¥æ•°æ®å¤šçš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿ </div>2019-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/42/5f/349b57f2.jpg" width="30px"><span>å</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘è§‰å¾—ç¡®å®æœ‰äº›é—®é¢˜ï¼Œåœ¨æ˜¯åŒarmaæ¨¡å‹ä¹‹å‰æ²¡æœ‰å¯¹æ•°æ®å¹³ç¨³æ€§æ£€éªŒï¼Œæ¯•ç«Ÿæ¨¡å‹æ˜¯åŸºäºå¹³ç¨³æ€§çš„ã€‚</div>2019-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg" width="30px"><span>Geek_hve78z</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ARã€MAã€ARMAå’ŒARIMAæ¨¡å‹åŒºåˆ«

1ã€AR ï¼ˆAuto Regressiveï¼‰ï¼Œä¸­æ–‡å«è‡ªå›å½’æ¨¡å‹ï¼Œå®ƒè®¤ä¸ºè¿‡å»è‹¥å¹²æ—¶åˆ»çš„ç‚¹é€šè¿‡çº¿æ€§ç»„åˆï¼Œå†åŠ ä¸Šç™½å™ªå£°å°±å¯ä»¥é¢„æµ‹æœªæ¥æŸä¸ªæ—¶åˆ»çš„ç‚¹ã€‚AR æ¨¡å‹è¿˜å­˜åœ¨ä¸€ä¸ªé˜¶æ•°ï¼Œç§°ä¸º ARï¼ˆpï¼‰æ¨¡å‹ï¼Œä¹Ÿå«ä½œ p é˜¶è‡ªå›å½’æ¨¡å‹ã€‚å®ƒæŒ‡çš„æ˜¯é€šè¿‡è¿™ä¸ªæ—¶åˆ»ç‚¹çš„å‰ p ä¸ªç‚¹ï¼Œé€šè¿‡çº¿æ€§ç»„åˆå†åŠ ä¸Šç™½å™ªå£°æ¥é¢„æµ‹å½“å‰æ—¶åˆ»ç‚¹çš„å€¼ã€‚

2ã€MA ï¼ˆ Moving Averageï¼‰ï¼Œä¸­æ–‡å«åšæ»‘åŠ¨å¹³å‡æ¨¡å‹ã€‚MA æ¨¡å‹å­˜åœ¨ä¸€ä¸ªé˜¶æ•°ï¼Œç§°ä¸º MA(q) æ¨¡å‹ï¼Œä¹Ÿå«ä½œ q é˜¶ç§»åŠ¨å¹³å‡æ¨¡å‹ã€‚MA æ¨¡å‹æ˜¯é€šè¿‡å°†ä¸€æ®µæ—¶é—´åºåˆ—ä¸­ç™½å™ªå£°åºåˆ—è¿›è¡ŒåŠ æƒå’Œã€‚

3ã€ARMA ï¼ˆ Auto Regressive Moving Averageï¼‰ï¼Œä¸­æ–‡å«åšè‡ªå›å½’æ»‘åŠ¨å¹³å‡æ¨¡å‹ï¼Œ ARMA æ¨¡å‹å­˜åœ¨ p å’Œ q ä¸¤ä¸ªé˜¶æ•°ï¼Œç§°ä¸º ARMA(p,q) æ¨¡å‹ã€‚

4ã€ARIMAï¼ˆ Auto Regressive Integrated Moving Average ï¼‰ï¼Œä¸­æ–‡å«å·®åˆ†è‡ªå›å½’æ»‘åŠ¨å¹³å‡æ¨¡å‹ï¼Œä¹Ÿå«æ±‚åˆè‡ªå›å½’æ»‘åŠ¨å¹³å‡æ¨¡å‹ã€‚ç›¸æ¯”äº ARMAï¼ŒARIMA å¤šäº†ä¸€ä¸ªå·®åˆ†çš„è¿‡ç¨‹ï¼Œä½œç”¨æ˜¯å¯¹ä¸å¹³ç¨³æ•°æ®è¿›è¡Œå·®åˆ†å¹³ç¨³ï¼Œåœ¨å·®åˆ†å¹³ç¨³åå†è¿›è¡Œå»ºæ¨¡ã€‚ARIMA æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„çš„é˜¶æ•° (p,d,q)ï¼Œç§°ä¸º ARIMA(p,d,q) æ¨¡å‹ã€‚å…¶ä¸­ d æ˜¯å·®åˆ†é˜¶æ•°ã€‚</div>2019-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg" width="30px"><span>JustDoDT</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>äº¤ä½œä¸šï¼šå¿«å­¦å®Œç¬¬ä¸€éäº†ï¼Œå¥¥åˆ©ç»™å¹²äº†ã€‚
https:&#47;&#47;github.com&#47;LearningChanging&#47;Data-analysis-in-action&#47;tree&#47;master&#47;41-%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E5%AE%9E%E6%88%98%EF%BC%883%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AF%B9%E6%AF%94%E7%89%B9%E5%B8%81%E8%B5%B0%E5%8A%BF%E8%BF%9B%E8%A1%8C%E9%A2%84%E6%B5%8B%EF%BC%9F</div>2020-04-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/b5/98/ffaf2aca.jpg" width="30px"><span>Ronnyz</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>AR 
éšæœºå˜é‡çš„å–å€¼æ˜¯å‰pæœŸçš„å¤šå…ƒçº¿æ€§å›å½’ï¼Œè®¤ä¸ºä¸»è¦å—è¿‡å»pæœŸçš„åºåˆ—å€¼å½±å“ã€‚è¯¯å·®é¡¹æ˜¯å½“å‰çš„éšæœºå¹²æ‰°ï¼Œä¸ºé›¶å‡å€¼ç™½å™ªå£°åºåˆ—
MA
åœ¨tæ—¶åˆ»çš„éšæœºå˜é‡çš„å–å€¼æ˜¯å‰qæœŸçš„éšæœºæ‰°åŠ¨çš„å¤šå…ƒçº¿æ€§å‡½æ•°ã€‚è¯¯å·®é¡¹æ˜¯å½“æœŸçš„éšæœºå¹²æ‰°,ä¸ºé›¶å‡å€¼ç™½å™ªå£°åºåˆ—ï¼Œæ˜¯åºåˆ—çš„å‡å€¼ã€‚è®¤ä¸ºä¸»è¦å—è¿‡å»qæœŸçš„è¯¯å·®é¡¹å½±å“ã€‚
ARMA
éšæœºå˜é‡çš„å–å€¼ä¸ä»…ä¸ä»¥å‰pæœŸçš„åºåˆ—å€¼æœ‰å…³è¿˜ä¸å‰qæœŸçš„éšæœºæ‰°åŠ¨æœ‰å…³ã€‚
ARIMA
å°†ARMAå’Œå·®åˆ†æ³•ç»“åˆï¼Œå¾—åˆ°ARIMA(p,d,q)ï¼Œå…¶ä¸­dæ˜¯éœ€è¦å¯¹æ•°æ®è¿›è¡Œå·®åˆ†çš„é˜¶æ•°ã€‚


#è®¾ç½®å‚æ•°è°ƒæ•´èŒƒå›´
p_scope=range(0,3)
q_scope=range(0,3)
æœ€ä¼˜æ¨¡å‹ï¼š
Model: 	ARMA(2, 2)
AIC 	4428.219</div>2019-12-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/62/a5/43aa0c27.jpg" width="30px"><span>TKbook</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
from statsmodels.tsa.arima_model import ARMA
import warnings
from itertools import product
from datetime import datetime
warnings.filterwarnings(&#39;ignore&#39;)
df = pd.read_csv(&#39;shanghai_1990-12-19_to_2019-2-28.csv&#39;)
df.index = pd.to_datetime(df.Timestamp)
df_month = df.resample(&#39;M&#39;).mean()
# è®¾ç½®å‚æ•°èŒƒå›´
ps = range(0, 3)
qs = range(0, 3)
parameters = product(ps, qs)
parameters_list = list(parameters)
# å¯»æ‰¾æœ€ä¼˜ARMAæ¨¡å‹å‚æ•°ï¼Œå³best_aicæœ€å°
results = []
best_aic = float(&#39;inf&#39;) # æ­£æ— ç©·
for param in parameters_list:
    try:
        model = ARMA(df_month.Price, order=(param[0], param[1])).fit()
    except ValueError:
        print(&#39;å‚æ•°é”™è¯¯ï¼š&#39;, param)
        continue
    aic = model.aic
    if aic &lt; best_aic:
        best_model = model
        best_aic = aic
        best_param = param
    results.append([param, model.aic])
# è¾“å‡ºæœ€ä¼˜æ¨¡å‹
result_table = pd.DataFrame(results)
result_table.columns = [&#39;parameters&#39;, &#39;aic&#39;]
print(&#39;æœ€ä¼˜æ¨¡å‹ï¼š&#39;, best_model.summary())
# è‚¡å¸‚é¢„æµ‹
date_list = [datetime(2019, 3, 31), datetime(2019, 4, 30), datetime(2019, 5, 31), datetime(2019, 6, 30),
             datetime(2019, 7, 31), datetime(2019, 8, 31), datetime(2019, 9, 30), datetime(2019, 10, 31),
             datetime(2019, 11, 30), datetime(2019, 12, 31)]
future = pd.DataFrame(index=date_list, columns=df_month.columns)
df_month = pd.concat([df_month, future])
df_month[&#39;forecast&#39;] = best_model.predict(start=0, end=348)
# é¢„æµ‹ç»“æœæ˜¾ç¤º
plt.figure(figsize=(20, 7))
df_month.Price.plot(label=&#39;å®é™…æŒ‡æ•°&#39;)
df_month.forecast.plot(color=&#39;r&#39;, ls=&#39;--&#39;, label=&#39;é¢„æµ‹æŒ‡æ•°&#39;)
plt.legend()
plt.title(&#39;é‡‘é¢ï¼ˆæœˆï¼‰&#39;)
plt.xlabel(&#39;TIME&#39;)
plt.ylabel(&#39;RMB&#39;)
plt.show()</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/86/79/066a062a.jpg" width="30px"><span>éåŒå‡¡æƒ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>### best param (4,3)

import pandas as pd
from datetime import datetime
from statsmodels.tsa.arima_model import ARMA
import warnings
import matplotlib.pyplot as  plt
from itertools import product

warnings.filterwarnings(&#39;ignore&#39;)
data = pd.read_csv(&#39;~&#47;Documents&#47;bitcoin&#47;shanghai_1990-12-19_to_2019-2-28.csv&#39;)
print(data.head())
print(data.info())

data[&#39;Timestamp&#39;] = pd.to_datetime(data[&#39;Timestamp&#39;])
data.index = data[&#39;Timestamp&#39;]
print(data.head())
data_m = data.resample(&#39;M&#39;).mean()

q_range = range(0, 5)
p_range = range(0, 5)
params = product(q_range, p_range)
param_list = list(params)
# print(param_list)
results = []
best_aic = float(&#39;inf&#39;)

for param in param_list:
    try:
        model = ARMA(data_m[&#39;Price&#39;], order=(param[0], param[1])).fit()
    except ValueError:
        print(&quot;å‚æ•°é”™è¯¯&quot;, param)
        continue
    aic = model.aic
    if aic &lt; best_aic:
        best_model = model
        best_aic = aic
        best_param = param
    results.append([param, model.aic])

result_table = pd.DataFrame(results)
result_table.columns = [&#39;parameters&#39;, &#39;aic&#39;]

print(&quot;best model:&quot;, best_model.summary())
print(&quot;best param:&quot;, best_param)
data_month2 = data_m[[&#39;Price&#39;]]
date_list = [datetime(2019, 3, 31), datetime(2019, 4, 30), datetime(2019, 5, 31), datetime(2019, 6, 30),
             datetime(2019, 7, 31),
             datetime(2019, 8, 31), datetime(2019, 9, 30), datetime(2019, 10, 31), datetime(2019, 11, 30),
             datetime(2019, 12, 31)]
future = pd.DataFrame(index=date_list, columns=data_m.columns)
data_month2 = pd.concat([data_month2, future])
data_month2[&#39;forecast&#39;] = best_model.predict(start=0, end=384)
#start=0è¡¨ç¤ºä»ç¬¬0ä¸ªæ•°æ®å¼€å§‹è®¡ç®—
#end=348æ˜¯æŒ‡éœ€è¦è®¡ç®—348ä¸ªæ•°æ®ï¼Œå³ä»1990-12-19åˆ°2019-12-31ä¸€å…±æœ‰348ä¸ªæœˆï¼Œæ‰€ä»¥æœ‰348ä¸ªæ•°æ®
print(data_month2.head())
plt.figure(figsize=(20, 7))
plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;SimHei&#39;]
data_month2[&#39;Price&#39;].plot(label=&#39;å®é™…æŒ‡æ•°&#39;)
data_month2[&#39;forecast&#39;].plot(label=&#39;é¢„æµ‹æŒ‡æ•°&#39;, ls=&#39;--&#39;, color=&#39;r&#39;)
plt.legend()
plt.title(&#39;æ²ªå¸‚æŒ‡æ•°ï¼ˆæœˆï¼‰&#39;)
plt.xlabel(&#39;æ—¶é—´&#39;)
plt.ylabel(&#39;æŒ‡æ•°&#39;)
plt.show()</div>2020-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg" width="30px"><span>å»ºå¼º</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®è€å¸ˆï¼Œæˆ‘ç”¨æ‚¨çš„æ–¹æ³•å¯»æ‰¾æœ€ä¼˜æ¨¡å‹æ—¶ï¼Œæœ€åå¾—åˆ°çš„æ¨¡å‹AICæ˜¯å°äº0çš„ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿæ˜¯ä¸æ˜¯å› ä¸ºæˆ‘çš„æ•°æ®åºåˆ—å€¼éƒ½æ˜¯å°äº1çš„åŸå› ï¼Ÿæœ€ç»ˆçš„è¾“å‡ºç»“æœæ˜¯è¿™æ ·çš„ï¼š
æœ€ä¼˜æ¨¡å‹:                                ARMA Model Results                              
==============================================================================
Dep. Variable:                   é£é™©ç³»æ•°   No. Observations:                  216
Model:                     ARMA(1, 1)   Log Likelihood                 364.911
Method:                       css-mle   S.D. of innovations              0.044
Date:                Tue, 30 Jun 2020   AIC                           -721.823
Time:                        17:37:35   BIC                           -708.322
Sample:                             0   HQIC                          -716.368
                                                                              
==============================================================================
                 coef    std err          z      P&gt;|z|      [0.025      0.975]
------------------------------------------------------------------------------
const          0.4613      0.072      6.415      0.000       0.320       0.602
ar.L1.é£é™©ç³»æ•°     0.9773      0.023     42.940      0.000       0.933       1.022
ma.L1.é£é™©ç³»æ•°    -0.4586      0.070     -6.583      0.000      -0.595      -0.322
                                    Roots                                    
=============================================================================
                  Real          Imaginary           Modulus         Frequency
-----------------------------------------------------------------------------
AR.1            1.0232           +0.0000j            1.0232            0.0000
MA.1            2.1805           +0.0000j            2.1805            0.0000
-----------------------------------------------------------------------------</div>2020-06-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg" width="30px"><span>æ»¢</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Aè‚¡é¢„æµ‹ï¼Œè¯­è¨€Python3.6 ï¼Œæœ€ä½³æ¨¡å‹ARMA(5, 4)ï¼Œè®¾ç½®çš„èŒƒå›´ç¨å¤§ï¼Œå¾—åˆ°çš„ç»“æœè¿˜è›®æ¥è¿‘ï¼Œå¯ä»¥è®¾ç½®çš„å†å¤§ä¸€äº›ï¼Œä¸è¿‡æ•°æ®ä¼˜ç‚¹å¤šè·‘èµ·æ¥æ—¶é—´è¾ƒé•¿ã€‚
#æ•°æ®åŠ è½½
path = &#39;&#47;Users&#47;apple&#47;Desktop&#47;GitHubProject&#47;Read mark&#47;æ•°æ®åˆ†æ&#47;geekTime&#47;data&#47;&#39;
df = pd.read_csv(path + &#39;shanghai_1990-12-19_to_2019-2-28.csv&#39;)
#å°†æ—¶é—´ä½œä¸ºdfçš„ç´¢å¼•
df.Timestamp = pd.to_datetime(df.Timestamp)
df.index = df.Timestamp
#æ•°æ®æ¢ç´¢
print(df.head())
df_month = df.resample(&#39;M&#39;).mean()
print(df_month.head())

#æŒ‰ç…§å¤©ã€æœˆã€å­£åº¦ã€å¹´æ˜¾ç¤ºAè‚¡èµ°åŠ¿
fig = plt.figure(figsize=[15,7])
plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;]
plt.suptitle(&#39;Aè‚¡æŒ‡æ•°&#39;,fontsize = 18.0)
plt.plot(df_month.Price, &#39;-&#39;, label =&#39;æŒ‰æœˆ&#39;)
plt.legend()
plt.show()

#è®¾ç½®å‚æ•°èŒƒå›´
ps = range(0,7)
qs = range(0,7)
parameters = product(ps,qs)
parameters_list = list(parameters)
#å¯»æ‰¾æœ€ä¼˜ARMAæ¨¡å‹å‚æ•°ï¼Œaicæœ€å°
results = []
best_aic = float(&quot;inf&quot;)
for param in parameters_list:
    try:
        model = ARMA(df_month.Price,order=(param[0],param[1])).fit()
    except ValueError:
        print(&#39;å‚æ•°é”™è¯¯:&#39;,param)
        continue
    aic = model.aic
    if aic &lt; best_aic:
        best_model = model
        best_aic=aic
        best_param = param
    results.append([param,model.aic])

#è¾“å‡ºæœ€ä¼˜æ¨¡å‹
result_table = pd.DataFrame(results)
result_table.columns = [&#39;parameters&#39;,&#39;aic&#39;]
print(&#39;æœ€ä½³æ¨¡å‹:&#39;,best_model.summary())
#Aè‚¡é¢„æµ‹
df_month_value = df_month[[&#39;Price&#39;]]
date_list = [datetime(2019,3,31),datetime(2019,4,30),datetime(2019,5,31),
             datetime(2019,6,30),datetime(2019,7,31),datetime(2019,8,31),
             datetime(2019,9,30),datetime(2019,10,31),datetime(2019,11,30),
             datetime(2019,12,31)]
future = pd.DataFrame(index=date_list,columns=df_month.columns)
df_month_value = pd.concat([df_month_value,future])
df_month_value[&#39;forecast&#39;]=best_model.predict(start=0, end=348)
#Aè‚¡é¢„æµ‹ç»“æœå±•ç¤º
plt.figure(figsize=(20,7))
df_month_value.Price.plot(label=&#39;å®é™…é‡‘é¢&#39;)
df_month_value.forecast.plot(color=&#39;r&#39;, ls=&#39;--&#39;, label=&#39;é¢„æµ‹é‡‘é¢&#39;)
plt.legend()
plt.title(&#39;Aè‚¡é‡‘é¢ï¼ˆæœˆï¼‰&#39;)
plt.xlabel(&#39;æ—¶é—´&#39;)
plt.ylabel(&#39;æŒ‡æ•°&#39;)
plt.show()</div>2019-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/fb/31/f0a884a3.jpg" width="30px"><span>Geek_dancer</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼ŒARMAæ˜¯å®Œå…¨æ ¹æ®è¿‡å»æ—¶åºä¸­çš„æ•°æ®èµ°åŠ¿è§„å¾‹æ¥è¿›è¡Œé¢„æµ‹çš„å—ï¼Ÿä½†æ˜¯å¤§éƒ¨åˆ†é¢„æµ‹è¿˜æ˜¯ä¼šå—å…¶ä»–ç‰¹å¾å±æ€§çš„å½±å“ï¼Œä»è€Œå½±å“å…¶èµ°åŠ¿è¿˜æœ‰æ³¢åŠ¨ã€‚æˆ‘ç”¨ARMAåšäº†ç”µåŠ›ç³»ç»Ÿçš„è´Ÿè·é¢„æµ‹ï¼Œå¯¹æ¯”äº†ä¹‹å‰ç”¨SVMåšçš„é¢„æµ‹ï¼Œæ„Ÿè§‰ARMAçš„é¢„æµ‹æµ‹ç²¾åº¦ç›¸å½“ä½ï¼Œé¢„æµ‹æ›²çº¿åŸºæœ¬å°±æ˜¯ä¸€ä¸ªä¸€æ¬¡çº¿æ€§æ›²çº¿ï¼Œæœ‰ä¸€ä¸ªå¤§æ¦‚çš„è¶‹åŠ¿ï¼Œè´Ÿè·çš„å‘¨æœŸæ³¢åŠ¨æ€§å®Œå…¨æ²¡æœ‰ä½“ç°ã€‚è¯·é—®è¿™æ˜¯ARMAçš„å±€é™æ€§å†³å®šçš„ï¼Œè¿˜æ˜¯æˆ‘æ²¡æœ‰è®­ç»ƒå¥½å•Šã€‚</div>2019-03-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/a3/f9/9180d6d1.jpg" width="30px"><span>szm</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘çœ‹è€å¸ˆåœ¨æŒ‘é€‰æœ€æœ‰å‚æ•°æ—¶ç”¨çš„æ˜¯è½®è¯¢åŠæ³•ï¼Œ39ç« ä¿¡ç”¨å¡è¿çº¦ç‡åˆ†æä¸­è®²çš„GridSearchå¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨å—ï¼Ÿè¿˜æ˜¯GridSearchåªèƒ½ç”¨äºsklearnåº“ä¸­çš„åˆ†ç±»ç®—æ³•ï¼Ÿ</div>2019-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/aa/d1/076482f3.jpg" width="30px"><span>ç™½å¤œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>2019-03-31    2808.787904
2019-04-30    2881.416121
2019-05-31    2875.788248
2019-06-30    2885.653128
2019-07-31    2959.346386
2019-08-31    3003.165403
2019-09-30    2991.057003
2019-10-31    2995.312025
2019-11-30    3016.652431
2019-12-31    2997.065752
è¿™æ˜¯çœ‹æ¶¨å•Š</div>2019-03-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/a9/32/eb71b457.jpg" width="30px"><span>Grandia_Z</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æé—®:å¯¹æœªæ¥åä¸ªæœˆçš„å˜åŒ–è¿›è¡Œç»Ÿè®¡,å¦‚æœæŒ‰æ—¥ç»Ÿè®¡çš„è¯:
date_list= [datetime(2019, 3, 31), datetime(2019, 4, 30), datetime(2019, 5, 31), datetime(2019, 6, 30), datetime(2019, 7, 31),
             datetime(2019, 8, 31), datetime(2019, 9, 30), datetime(2019, 10, 31),datetime(2019, 11, 30),datetime(2019, 12, 31)]
ä¸Šé¢è¿™æ®µæ€ä¹ˆå†™èƒ½åŒ…å«ä»(2019.3.1-2019.12.31)çš„æ•°æ®å‘¢,ä¸ä¼šæŠŠæ¯ä¸€å¤©éƒ½å†™è¿›å»å§</div>2019-03-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/b0/89/2c3d5d7a.jpg" width="30px"><span>é’Ÿæœ—ğŸ¾</span> ğŸ‘ï¼ˆ19ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªæ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œå•ä½æ ¹æ£€éªŒå’Œç™½å™ªå£°æ£€éªŒï¼Œè¿™æ ·ä¼šä¸ä¼šç²—æš´äº†ç‚¹å°¼</div>2019-04-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/b5/ab/30e1531e.jpg" width="30px"><span>å ‚å‰è¯ƒå¾·</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>1. parameters = product(ps, qs) 
parametersä¸ºå¯è¿­ä»£å¯¹è±¡, ç›´æ¥ä½¿ç”¨
for param in parameters:  
ä¸ç”¨å†è½¬ä¸ºåˆ—è¡¨å§?

2. å›ç­”ä¸€ä¸‹ @Grandia_Z 
æ—¶é—´åºåˆ—æ“ä½œ
date_list = pd.date_range(&#39;2019-03-31&#39;, &#39;2019-12-31&#39;, periods=None, freq=&#39;D&#39;)
å¸Œæœ›ä½ èƒ½çœ‹åˆ°</div>2019-03-18</li><br/><li><img src="" width="30px"><span>yanyu-xin</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>é‡åˆ°çš„ NotImplementedError å¼‚å¸¸æç¤ºæ­£åœ¨ä½¿ç”¨çš„ statsmodels (0.14.1) ç‰ˆæœ¬ä¸­å·²ç»ç§»é™¤äº† ARMA å’Œ ARIMA æ¨¡å‹ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ statsmodels.tsa.arima.model.ARIMA å’Œ statsmodels.tsa.SARIMAXã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°† ARMA æ›¿æ¢ä¸º ARIMAï¼Œæ³¨æ„ç±»åçš„å˜åŒ–ã€‚ä½¿ç”¨æ–°çš„ ARIMA ç±»æ¥æ‹Ÿåˆæ¨¡å‹ã€‚
å°†ä»£ç ï¼š
from statsmodels.tsa.arma.model import ARMA 
model = ARMA(df_month.Weighted_Price, order=(param[0], param[1])).fit()
æ”¹ä¸ºï¼š
from statsmodels.tsa.arima.model import ARIMA
model = ARIMA(df_month.Weighted_Price, order=(param[0], 0, param[1])).fit()

æ³¨æ„ï¼šARIMA éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼špï¼ˆARçš„é˜¶æ•°ï¼‰ï¼Œdï¼ˆå·®åˆ†æ¬¡æ•°ï¼‰ï¼Œqï¼ˆMAçš„é˜¶æ•°ï¼‰
åœ¨ ARMA æ¨¡å‹ä¸­ï¼Œd é€šå¸¸è®¾ç½®ä¸º 0ï¼Œå› ä¸º ARMA ä¸æ¶‰åŠå·®åˆ†
è¯·æ³¨æ„ï¼ŒARIMA æ¨¡å‹å®é™…ä¸ŠåŒ…å«äº† ARMA æ¨¡å‹çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¢åŠ äº†å·®åˆ†ï¼ˆdï¼‰çš„é€‰é¡¹ï¼Œå…è®¸æ‚¨å¤„ç†éå¹³ç¨³æ—¶é—´åºåˆ—ã€‚åœ¨æ‚¨çš„ä»£ç ä¸­ï¼Œå¦‚æœæ‚¨çš„æ•°æ®å·²ç»æ˜¯å¹³ç¨³çš„ï¼Œé‚£ä¹ˆ d åº”è¯¥è®¾ç½®ä¸º 0ã€‚
å¦‚æœæ‚¨æƒ³è¦ç»§ç»­ä½¿ç”¨ ARMA æ¨¡å‹è€Œä¸è€ƒè™‘å·®åˆ†ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ ARIMA ç±»ï¼Œå¹¶å°† d å‚æ•°è®¾ç½®ä¸º 0ã€‚å¦‚æœéœ€è¦ä½¿ç”¨å·®åˆ†ï¼Œè¯·ç¡®ä¿åœ¨å»ºæ¨¡ä¹‹å‰å¯¹æ•°æ®è¿›è¡Œé€‚å½“çš„å·®åˆ†å¤„ç†ã€‚</div>2024-04-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/d7/23/d195075d.jpg" width="30px"><span>Casper</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è¿™ä¸ªä»£ç éƒ½è€äº† ç°åœ¨éƒ½è¿è¡Œä¸äº†äº†</div>2023-05-22</li><br/><li><img src="" width="30px"><span>Geek_3e33b6</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>import pandas as pd
df=pd.read_excel(&quot;D:\\pycharm\\anaconda3\\ä¸Šæµ·æŒ‡æ•°.xlsx&quot;)
df.index = df.Timestamp
df_M = df.resample(&#39;M&#39;).mean() #æŒ‰æœˆ
import matplotlib.pyplot as plt
plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;] #ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾
fig = plt.figure(figsize=[15,7])
plt.title(&#39;ä¸Šæµ·æŒ‡æ•°&#39;,fontsize=12)
plt.plot(df.Price,&#39;-&#39;,label=&#39;æŒ‰æœˆ&#39;)
plt.legend()
plt.show()
from itertools import  product
ps = range(0,3)
qs = range(0,3)
parameters = product(ps,qs)
parameters_list = list(parameters)
from statsmodels.tsa.arima_model import ARMA
# æ‰¾æœ€ä¼˜å‚æ•°
results = []
best_aic = float(&quot;inf&quot;) #æ­£æ— ç©·
for param in  parameters_list:
    try:
        model = ARMA(df_M.Price,order=(param[0],param[1])).fit()
    except ValueError:
        print(&#39;å‚æ•°é”™è¯¯&#39;,param)
    aic = model.aic
    if aic &lt; best_aic:
        best_model = model
        best_aic = aic
        best_param = param
    results.append([param,model.aic])
results_table = pd.DataFrame(results)
results_table.columns = [&#39;parameters&#39;,&#39;aic&#39;]
from datetime import  datetime
date_list = [datetime(2019, 3, 31), datetime(2019, 4, 30),datetime(2019, 5, 31), datetime(2019, 6, 30),
             datetime(2019,7,31),datetime(2019,8,31),datetime(2019,9,30),datetime(2019,10,31)]
future = pd.DataFrame(index=date_list, columns= df_M.columns)
df_M = pd.concat([df_M,future])
df_M[&#39;forecast&#39;] = best_model.predict(start=0,end=347)
print(df_M.tail(12))
# æ¯”ç‰¹å¸é¢„æµ‹ç»“æœæ˜¾ç¤º
plt.figure(figsize=(20,7))
df_M.Price.plot(label=&#39;å®é™…æŒ‡æ•°&#39;)
df_M.forecast.plot(color=&#39;r&#39;, ls=&#39;--&#39;, label=&#39;é¢„æµ‹æŒ‡æ•°&#39;)
plt.legend()
plt.title(&#39;ä¸Šæµ·æŒ‡æ•°ï¼ˆæœˆï¼‰&#39;)
plt.xlabel(&#39;æ—¶é—´&#39;)
plt.ylabel(&#39;æŒ‡æ•°&#39;)
plt.show()</div>2023-01-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg" width="30px"><span>piboye</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>TSLMä¹Ÿæ˜¯å—ï¼Ÿ</div>2022-01-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/69/92/69c2c135.jpg" width="30px"><span>åšç§¯è–„å‘</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>1.AR,MA,ARMA,ARIMAçš„åŒºåˆ«
       1.1ARæ¨¡å‹ Auto Regressive  è‡ªå›å½’æ¨¡å‹ è¿‡å»ä¸€æ®µæ—¶é—´çš„ç‚¹çº¿æ€§ç»„åˆå†åŠ ä¸Šç™½å™ªå£°é¢„æµ‹æœªæ¥æŸæ—¶åˆ»çš„ç‚¹  AR(p)
       1.2.MA æ¨¡å‹ Moving Average ç§»åŠ¨å¹³å‡æ¨¡å‹ å†å²ç™½å™ªå£°çš„çº¿æ€§ç»„åˆå½±å“å½“å‰æ—¶åˆ»çš„ç‚¹  MA(q)
        1.3.ARMA æ¨¡å‹ Auto Regressive Moving Average è‡ªå›å½’å¹³å‡æ»‘åŠ¨æ¨¡å‹  ARæ¨¡å‹å’ŒMAæ¨¡å‹çš„æ··åˆ  ARMA(p,q)
         1.4.ARIMA æ¨¡å‹  Auto Regressive Integrated Moving Average å·®åˆ†è‡ªå›å½’å¹³å‡æ»‘åŠ¨æ¨¡å‹ ARIMA(p,d,q)   è¦æ±‚æ•°æ®æ˜¯å¹³ç¨³çš„

         é¢„æµ‹æŒ‡æ ‡AIC   AIC è¶Šå°è¶Šå¥½
2.ä»€ä¹ˆæ—¶å€™ä½¿ç”¨çº¿æ€§å›å½’ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ—¶é—´åºåˆ—åˆ†æ
          å¯¹ä¸€ä¸ªæ•°å€¼è¿›è¡Œé¢„æµ‹æ—¶ï¼Œå¦‚æœè€ƒè™‘çš„æ˜¯å•ä¸ªæ—¶é—´ç»´åº¦ä¸ç»“æœçš„å…³ç³»ï¼Œå¯ä»¥ä½¿ç”¨æ—¶é—´åºåˆ—åˆ†æ
         å¦‚æœè€ƒè™‘çš„æ˜¯å¤šä¸ªå˜é‡ä¸ç»“æœä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥é‡‡ç”¨å›å½’åˆ†æ
3.ä¸Šè¯æŒ‡æ•°é¢„æµ‹
   ä»£ç ï¼šgit@github.com:houjibofa2050&#47;sequentially.git
   
</div>2020-11-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/af/59/84aedd2f.jpg" width="30px"><span>å°ç‹®å­(*Â¯ï¸¶Â¯*)</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸åšå¹³ç¨³æ€§æ£€æµ‹å°±èƒ½ç›´æ¥ç”¨ARMAæ¨¡å‹ï¼Ÿ
</div>2020-02-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/f9/5e/947d77f6.jpg" width="30px"><span>æ¬ å„¿ç™»</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®æ—¶é—´åºåˆ—å¿…é¡»æ˜¯è¿ç»­ä¸æ–­çš„ä¹ˆï¼Œæ¯”å¦‚æŒ‰å‘¨ç»Ÿè®¡å°±å¿…é¡»æ¯å‘¨éƒ½æœ‰æ•°æ®ï¼Ÿ</div>2021-12-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/b6/66/5d2be1ee.jpg" width="30px"><span>ä¸œæ—­</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸çŸ¥é“è¿˜æœ‰äººçœ‹è¿™ä¸ªè¯¾ç¨‹ä¸ï¼Œæˆ‘çš„é¢„æµ‹éƒ½æ˜¯å¹³çš„ï¼Œæ²¡æœ‰ä¸€ç‚¹å¯å‚è€ƒè¶‹åŠ¿ï¼Œæˆ‘ç”¨çš„python3.9ï¼ŒARMAå·²ç»åœç”¨äº†ï¼Œæ‰€æœ‰æˆ‘æ¨¡ä»¿ç€ç”¨äº†statsmodels.tsa.arima.model.ARIMAï¼Œä¸çŸ¥é“é—®é¢˜å‡ºåœ¨äº†å“ªé‡Œ</div>2021-10-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/fc/69/02953435.jpg" width="30px"><span>å¤§æ‡’è™«</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆï¼Œæˆ‘ç”¨armaæ¨¡å‹å»é¢„æµ‹cpuç›‘æ§æ•°æ®çš„æ—¶å€™ï¼Œå‘ç°è®­ç»ƒæ•°æ®æ‹Ÿåˆçš„å¾ˆå¥½ï¼Œä½†æ˜¯é¢„æµ‹çš„æ—¶å€™ï¼Œè¶‹åŠ¿å´æ˜¯ç›¸åçš„ï¼Œè¯·é—®ä¸‹è¿™ä¸ªé—®é¢˜ä¸€èˆ¬è¦æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</div>2020-07-17</li><br/>
</ul>