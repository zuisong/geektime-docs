ä¸Šæ¬¡æˆ‘ç»™ä½ è®²äº†å…³è”è§„åˆ™æŒ–æ˜çš„åŸç†ã€‚å…³è”è§„åˆ™æŒ–æ˜åœ¨ç”Ÿæ´»ä¸­æœ‰å¾ˆå¤šä½¿ç”¨åœºæ™¯ï¼Œä¸ä»…æ˜¯å•†å“çš„æ†ç»‘é”€å”®ï¼Œç”šè‡³åœ¨æŒ‘é€‰æ¼”å‘˜å†³ç­–ä¸Šï¼Œä½ ä¹Ÿèƒ½é€šè¿‡å…³è”è§„åˆ™æŒ–æ˜çœ‹å‡ºæ¥æŸä¸ªå¯¼æ¼”é€‰æ‹©æ¼”å‘˜çš„å€¾å‘ã€‚

ä»Šå¤©æˆ‘æ¥å¸¦ä½ ç”¨Aprioriç®—æ³•åšä¸€ä¸ªé¡¹ç›®å®æˆ˜ã€‚ä½ éœ€è¦æŒæ¡çš„æ˜¯ä»¥ä¸‹å‡ ç‚¹ï¼š

1. ç†Ÿæ‚‰ä¸ŠèŠ‚è¯¾è®²åˆ°çš„å‡ ä¸ªé‡è¦æ¦‚å¿µï¼šæ”¯æŒåº¦ã€ç½®ä¿¡åº¦å’Œæå‡åº¦ï¼›
2. ç†Ÿæ‚‰ä¸æŒæ¡Aprioriå·¥å…·åŒ…çš„ä½¿ç”¨ï¼›
3. åœ¨å®é™…é—®é¢˜ä¸­ï¼Œçµæ´»è¿ç”¨ã€‚åŒ…æ‹¬æ•°æ®é›†çš„å‡†å¤‡ç­‰ã€‚

## å¦‚ä½•ä½¿ç”¨Aprioriå·¥å…·åŒ…

Aprioriè™½ç„¶æ˜¯åå¤§ç®—æ³•ä¹‹ä¸€ï¼Œä¸è¿‡åœ¨sklearnå·¥å…·åŒ…ä¸­å¹¶æ²¡æœ‰å®ƒï¼Œä¹Ÿæ²¡æœ‰FP-Growthç®—æ³•ã€‚è¿™é‡Œæ•™ä½ ä¸ªæ–¹æ³•ï¼Œæ¥é€‰æ‹©Pythonä¸­å¯ä»¥ä½¿ç”¨çš„å·¥å…·åŒ…ï¼Œä½ å¯ä»¥é€šè¿‡[https://pypi.org/](https://pypi.org/) æœç´¢å·¥å…·åŒ…ã€‚

![](https://static001.geekbang.org/resource/image/76/c7/76a3b34beccbe7b69a11951b4efd80c7.png?wh=1726%2A767)  
è¿™ä¸ªç½‘ç«™æä¾›çš„å·¥å…·åŒ…éƒ½æ˜¯Pythonè¯­è¨€çš„ï¼Œä½ èƒ½æ‰¾åˆ°8ä¸ªPythonè¯­è¨€çš„Aprioriå·¥å…·åŒ…ï¼Œå…·ä½“é€‰æ‹©å“ªä¸ªå‘¢ï¼Ÿå»ºè®®ä½ ä½¿ç”¨ç¬¬äºŒä¸ªå·¥å…·åŒ…ï¼Œå³efficient-aprioriã€‚åé¢æˆ‘ä¼šè®²åˆ°ä¸ºä»€ä¹ˆæ¨èè¿™ä¸ªå·¥å…·åŒ…ã€‚

é¦–å…ˆä½ éœ€è¦é€šè¿‡pip install efficient-apriori å®‰è£…è¿™ä¸ªå·¥å…·åŒ…ã€‚

ç„¶åçœ‹ä¸‹å¦‚ä½•ä½¿ç”¨å®ƒï¼Œæ ¸å¿ƒçš„ä»£ç å°±æ˜¯è¿™ä¸€è¡Œï¼š

```
itemsets, rules = apriori(data, min_support,  min_confidence)
```

å…¶ä¸­dataæ˜¯æˆ‘ä»¬è¦æä¾›çš„æ•°æ®é›†ï¼Œå®ƒæ˜¯ä¸€ä¸ªlistæ•°ç»„ç±»å‹ã€‚min\_supportå‚æ•°ä¸ºæœ€å°æ”¯æŒåº¦ï¼Œåœ¨efficient-aprioriå·¥å…·åŒ…ä¸­ç”¨0åˆ°1çš„æ•°å€¼ä»£è¡¨ç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚0.5ä»£è¡¨æœ€å°æ”¯æŒåº¦ä¸º50%ã€‚min\_confidenceæ˜¯æœ€å°ç½®ä¿¡åº¦ï¼Œæ•°å€¼ä¹Ÿä»£è¡¨ç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚1ä»£è¡¨100%ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg" width="30px"><span>mickey</span> ğŸ‘ï¼ˆ13ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æœ€å°æ”¯æŒåº¦ä¸º0.1ï¼š
{  1: {(&#39;å€ªå¤§çº¢&#39;,): 2, (&#39;åˆ˜å¾·å&#39;,): 2, (&#39;å§œæ–‡&#39;,): 2, (&#39;å·©ä¿&#39;,): 5, (&#39;æé›ªå¥&#39;,): 2, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 2, (&#39;éƒ­æ¶›&#39;,): 2, (&#39;é™ˆé“æ˜&#39;,): 2}, 
   2: {(&#39;å€ªå¤§çº¢&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å·©ä¿&#39;, &#39;éƒ­æ¶›&#39;): 2}}
[{å€ªå¤§çº¢} -&gt; {å·©ä¿}, {éƒ­æ¶›} -&gt; {å·©ä¿}]

æœ€å°æ”¯æŒåº¦ä¸º0.05ï¼š
å¤ªå¤šäº†ã€‚ã€‚ã€‚ã€‚

ç»“è®ºï¼šä¸ç®¡ç”·ä¸€å·é€‰è°ï¼Œå¥³ä¸€å·å¿…é¡»æ˜¯å·©ä¿ã€‚</div>2019-03-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a4/5a/e708e423.jpg" width="30px"><span>third</span> ğŸ‘ï¼ˆ11ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ªäººçš„ç›´è§‰æ„Ÿè§‰ï¼Œè¿™ä¸ªåº”è¯¥è·Ÿæ•°æ®é›†çš„å¤§å°å’Œç‰¹ç‚¹æœ‰å…³ã€‚

</div>2019-02-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg" width="30px"><span>æ»¢</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>é€‰çš„å¼ è‰ºè°‹çˆ¬å–æ•°æ®ï¼Œå¼€å§‹çš„æ—¶å€™è®¾ç½®min_support = 0.5 æ²¡æœ‰åˆ†æå‡ºé¡¹é›†ï¼Œè¿˜ä»¥ä¸ºæ˜¯æ•°æ®æœ‰é”™ï¼Œç»“æœå‘ç°æ˜¯æ”¯æŒåº¦è®¾çš„å¤ªé«˜æ¥ï¼Œæ²¡æœ‰è¾¾åˆ°æ¡ä»¶çš„ã€‚å¥½å°´å°¬~ 
#ç¬¬äºŒæ­¥ï¼šç”¨Aprioriç®—æ³•è¿›è¡Œå…³è”åˆ†æ
#æ•°æ®åŠ è½½
director = &#39;å¼ è‰ºè°‹&#39;
#å†™CSVæ–‡ä»¶
path = &#39;&#47;Users&#47;apple&#47;Desktop&#47;GitHubProject&#47;Read mark&#47;æ•°æ®åˆ†æ&#47;geekTime&#47;data&#47;&#39;
file_name = path + director +&#39;.csv&#39;
print(file_name)
lists = csv.reader(open(file_name, &#39;r&#39;, encoding=&#39;utf-8-sig&#39;))
data =[]
for names in lists:
    name_new = []
    for name in names:
        name_new.append(name.strip())
    if len(name_new[1:]) &gt;0:
        data.append(name_new[1:])
print(&#39;data--&#39;,data)

#æŒ–æ˜é¢‘ç¹é¡¹é›†åˆå…³è”è§„åˆ™
items,rules = apriori(data,min_support=0.05,min_confidence=1)
print(items)
print(rules)
è¾“å‡ºç»“æœï¼š
{1: {(&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å‚…å½ª&#39;,): 2, (&#39;åˆ˜ä½©ç¦&#39;,): 2, (&#39;åˆ˜å¾·å&#39;,): 2, (&#39;å§œæ–‡&#39;,): 2, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;æä¿ç”°&#39;,): 3, (&#39;ææ›¼&#39;,): 2, (&#39;æé›ªå¥&#39;,): 5, (&#39;æ¨å‡¤è‰¯&#39;,): 2, (&#39;ç‰›çŠ‡&#39;,): 2, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3, (&#39;èµµæœ¬å±±&#39;,): 2, (&#39;éƒ­æ¶›&#39;,): 2, (&#39;é—«å¦®&#39;,): 2, (&#39;é™ˆé“æ˜&#39;,): 2}, 2: {(&#39;å€ªå¤§çº¢&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å‚…å½ª&#39;, &#39;æé›ªå¥&#39;): 2, (&#39;åˆ˜ä½©ç¦&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å­™çº¢é›·&#39;, &#39;èµµæœ¬å±±&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æä¿ç”°&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æ¨å‡¤è‰¯&#39;): 2, (&#39;å·©ä¿&#39;, &#39;è‘›ä¼˜&#39;): 2, (&#39;å·©ä¿&#39;, &#39;éƒ­æ¶›&#39;): 2, (&#39;æä¿ç”°&#39;, &#39;æé›ªå¥&#39;): 2}}
[{å‚…å½ª} -&gt; {æé›ªå¥}, {åˆ˜ä½©ç¦} -&gt; {å·©ä¿}, {èµµæœ¬å±±} -&gt; {å­™çº¢é›·}, {æ¨å‡¤è‰¯} -&gt; {å·©ä¿}, {éƒ­æ¶›} -&gt; {å·©ä¿}]</div>2019-04-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/WRgI4eibxaZkRzOO7zBp49JcraBZIOQO9HNicYsxSV3yPZYeBAsG9m0j4wRJWfGBaDdw5Teiaibn6xhmyf43DmfjYg/132" width="30px"><span>ä¸€ é’(à¹‘â€¢ . â€¢à¹‘)ã‚</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼ŒFP-growth åœ¨pythonæœ‰é›†æˆå—ï¼Œï¼Œæƒ³ç”¨fp-growthè¯•è¯•</div>2019-10-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/3d/b6/e4a72acc.jpg" width="30px"><span>Geeky_Ben</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®ä¸€ä¸‹å„ä½å¤§ç¥ï¼Œä¸ºä»€ä¹ˆæˆ‘è¿™ä¸ªä»£ç åªæŠŠæ¯ä¸€é¡µçš„ç¬¬ä¸€ä¸ªç”µå½±çš„èµ„æ–™ä¸‹è½½ä¸‹æ¥ã€‚æˆ‘åå¤æ ¸å¯¹äº†å¾ˆå¤šæ¬¡ï¼Œè·Ÿå¯¼å¸ˆçš„ä¸€æ ·... è‹¦æ¼~~@@
from efficient_apriori import apriori
from lxml import etree
import time
from selenium import webdriver
from webdriver_manager.chrome import ChromeDriverManager
import csv
driver = webdriver.Chrome(ChromeDriverManager().install())
director = u&#39;å®æµ©&#39;
file_name = &#39;.&#47;&#39; + director + &#39;.csv&#39;
base_url = &#39;https:&#47;&#47;movie.douban.com&#47;subject_search?search_text=&#39;+director+&#39;&amp;cat=1002&amp;start=&#39;
out = open(file_name,&#39;w&#39;,newline = &#39;&#39;,encoding=&#39;utf-8-sig&#39;)
csv_write = csv.writer(out,dialect=&#39;excel&#39;)
flags = []

def download(request_url):
    driver.get(request_url)
    time.sleep(1)
    html = driver.find_element_by_xpath(&quot;&#47;&#47;*&quot;).get_attribute(&quot;outerHTML&quot;)
    html = etree.HTML(html)
    movie_lists = html.xpath(&quot;&#47;html&#47;body&#47;div[@id=&#39;wrapper&#39;]&#47;div[@id=&#39;root&#39;]&#47;div[1]&#47;&#47;div[@class=&#39;item-root&#39;]&#47;div[@class=&#39;detail&#39;]&#47;div[@class=&#39;title&#39;]&#47;a[@class=&#39;title-text&#39;]&quot;)
    name_lists = html.xpath(&quot;&#47;html&#47;body&#47;div[@id=&#39;wrapper&#39;]&#47;div[@id=&#39;root&#39;]&#47;div[1]&#47;&#47;div[@class=&#39;item-root&#39;]&#47;div[@class=&#39;detail&#39;]&#47;div[@class=&#39;meta abstract_2&#39;]&quot;)
    num = len(movie_lists)
    if num &gt; 15:
        movie_lists = movie_lists[1:]
        name_lists = name_lists[1:]
    for (movie,name_list) in zip(movie_lists,name_lists):
        if name_list.text is None:
            continue
        print(name_list.text)
        names = name_list.text.split(&#39;&#47;&#39;)
        if names[0].strip() == director and movie.text not in flags:
            names[0] = movie.text
            flags.append(movie.text)
            csv_write.writerow(names)
        print(&#39;OK&#39;)
        print(num)
        if num &gt;= 14:
            return True
        else:
            return False
start = 0
while start &lt;10000:
    request_url = base_url + str(start)
    flag = download(request_url)
    if flag:
        start = start + 15
    else:
        break
out.close()
print(&#39;Finished&#39;)
</div>2020-07-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg" width="30px"><span>JustDoDT</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Python3.6 é‡åˆ°å¦‚ä¸‹é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š
è¿è¡Œæ—¶æŠ¥é”™ï¼š
ModuleNotFoundError: No module named &#39;dataclasses&#39;
æ˜¯å› ä¸ºefficient_apriori ä¾èµ– dataclasses å®‰è£… dataclasses å³å¯
pip install dataclasses</div>2020-04-08</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTID6xcHMMQdvZGvMMVHA2Y6xYpOyFO2VR2GTyFMbGS9BuWvZcEqHz62icGF6I4X6OCpokLeiaHo560A/132" width="30px"><span>æ™®ç½—ç±³ä¿®æ–¯</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœè¦ä½¿ç”¨FP-Growthè¿™ä¸ªç®—æ³•ï¼Œæ˜¯ç›´æ¥ä½¿ç”¨FP-Growthè¿™ä¸ªåŒ…å—ï¼Ÿ</div>2019-04-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg" width="30px"><span>æ»¢</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆèƒ½æ¨èå‡ æœ¬æœ‰å…³ æ¦‚ç‡è®ºã€ç»Ÿè®¡å­¦ã€è¿ç­¹å­¦çš„ä¹¦å˜› ï¼Œæ„Ÿè§‰å¤§å­¦çš„è¯¾æœ¬æ¯”è¾ƒæ¯ç‡¥</div>2019-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a4/5a/e708e423.jpg" width="30px"><span>third</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ„Ÿè§‰ï¼š1ï¼Œå¼ è‰ºè°‹å–œæ¬¢ç”¨é‚£äº›ç»„åˆçš„äºº
2.æŸäº›ç»„åˆå‡ºç°çš„åŒ¹é…ç‡

æœ€å°æ”¯æŒåº¦ä¸º0.1ï¼Œ{1: {(&#39; å·©ä¿ &#39;,): 9, (&#39; æé›ªå¥ &#39;,): 5}}

æœ€å°æ”¯æŒåº¦ä¸º0.05ï¼Œ{1: {(&#39; è‘›ä¼˜ &#39;,): 3, (&#39; å·©ä¿ &#39;,): 9, (&#39; å§œæ–‡ &#39;,): 2, (&#39; éƒ­æ¶› &#39;,): 2, (&#39; æé›ªå¥ &#39;,): 5, (&#39; é™ˆç»´äºš &#39;,): 2, (&#39; å¼ ç»§é’¢ &#39;,): 2, (&#39; åˆ˜å¾·å &#39;,): 2, (&#39; å€ªå¤§çº¢ &#39;,): 3, (&#39; å‚…å½ª &#39;,): 2, (&#39; ç‰›çŠ‡ &#39;,): 2, (&#39; å­™çº¢é›· &#39;,): 2, (&#39; é—«å¦® &#39;,): 2, (&#39; é™ˆé“æ˜ &#39;,): 2, (&#39; èµµæœ¬å±± &#39;,): 2, (&#39; æ¨å‡¤è‰¯ &#39;,): 2, (&#39; ç« å­æ€¡ &#39;,): 3, (&#39; æä¿ç”° &#39;,): 3, (&#39; åˆ˜ä½©ç¦ &#39;,): 2}, 2: {(&#39; å·©ä¿ &#39;, &#39; æä¿ç”° &#39;): 2, (&#39; å·©ä¿ &#39;, &#39; åˆ˜ä½©ç¦ &#39;): 2, (&#39; è‘›ä¼˜ &#39;, &#39; å·©ä¿ &#39;): 2, (&#39; æé›ªå¥ &#39;, &#39; å‚…å½ª &#39;): 2, (&#39; æé›ªå¥ &#39;, &#39; æä¿ç”° &#39;): 2, (&#39; å·©ä¿ &#39;, &#39; éƒ­æ¶› &#39;): 2, (&#39; é™ˆç»´äºš &#39;, &#39; å¼ ç»§é’¢ &#39;): 2, (&#39; å·©ä¿ &#39;, &#39; æ¨å‡¤è‰¯ &#39;): 2, (&#39; å·©ä¿ &#39;, &#39; å€ªå¤§çº¢ &#39;): 2}}
[{ åˆ˜ä½©ç¦ } -&gt; { å·©ä¿ }, { å‚…å½ª } -&gt; { æé›ªå¥ }, { éƒ­æ¶› } -&gt; { å·©ä¿ }, { å¼ ç»§é’¢ } -&gt; { é™ˆç»´äºš }, { é™ˆç»´äºš } -&gt; { å¼ ç»§é’¢ }, { æ¨å‡¤è‰¯ } -&gt; { å·©ä¿ }]</div>2019-02-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/50/91/0dd2b8ce.jpg" width="30px"><span>å¬å¦ˆå¦ˆçš„è¯</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘è§‰å¾—mtimeç½‘ä¸Šçš„ç”µå½±ä¿¡æ¯æ›´åŠ å…¨é¢ï¼Œå°±ä»ä¸Šé¢çˆ¬å–çš„ä¿¡æ¯
æœ€å°æ”¯æŒåº¦ä¸º0.1:
{1: {(&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;æä¿ç”°&#39;,): 4, (&#39;æé›ªå¥&#39;,): 4, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3, (&#39;èµµæœ¬å±±&#39;,): 3}, 2: {(&#39;å·©ä¿&#39;, &#39;æä¿ç”°&#39;): 3}}
[]
æœ€å°æ”¯æŒåº¦ä¸º0.05:
{1: {(&#39;ä¸å˜‰ä¸½&#39;,): 2, (&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å‚…å½ª&#39;,): 2, (&#39;åˆ˜ä½©ç¦&#39;,): 2, (&#39;åˆ˜å¾·å&#39;,): 2, (&#39;å§œæ–‡&#39;,): 2, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;å¼ è‰ºè°‹&#39;,): 2, (&#39;æä¿ç”°&#39;,): 4, (&#39;æé›ªå¥&#39;,): 4, (&#39;ç‰›çŠ‡&#39;,): 2, (&#39;çª¦éª&#39;,): 2, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3, (&#39;è‘£ç«‹èŒƒ&#39;,): 2, (&#39;èµµæœ¬å±±&#39;,): 3, (&#39;éƒ‘æº&#39;,): 2, (&#39;éƒ­æ¶›&#39;,): 2, (&#39;é—«å¦®&#39;,): 2, (&#39;é™ˆé“æ˜&#39;,): 2, (&#39;é½è¾¾å†…Â·è‹é˜¿å†…&#39;,): 2}, 2: {(&#39;å€ªå¤§çº¢&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å‚…å½ª&#39;, &#39;æé›ªå¥&#39;): 2, (&#39;åˆ˜ä½©ç¦&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å­™çº¢é›·&#39;, &#39;èµµæœ¬å±±&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æä¿ç”°&#39;): 3, (&#39;å·©ä¿&#39;, &#39;è‘›ä¼˜&#39;): 

2, (&#39;å·©ä¿&#39;, &#39;éƒ­æ¶›&#39;): 2, (&#39;æä¿ç”°&#39;, &#39;æé›ªå¥&#39;): 2, (&#39;æé›ªå¥&#39;, &#39;èµµæœ¬å±±&#39;): 2, (&#39;ç‰›çŠ‡&#39;, &#39;è‘£ç«‹èŒƒ&#39;): 2}}
[{å‚…å½ª} -&gt; {æé›ªå¥}, {åˆ˜ä½©ç¦} -&gt; {å·©ä¿}, {éƒ­æ¶›} -&gt; {å·©ä¿}, {è‘£ç«‹èŒƒ} -&gt; {ç‰›çŠ‡}, {ç‰›çŠ‡} -&gt; {è‘£ç«‹èŒƒ}]</div>2019-03-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg" width="30px"><span>mickey</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å®‰è£…å·¥å…·åŒ…æŠ¥é”™ï¼Œè¯·é—®æ€æ ·è§£å†³ï¼Ÿ
E:\DevelopTool\Python\Python27\Scripts&gt;pip install efficient-apriori
DEPRECATION: Python 2.7 will reach the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 won&#39;t be maintained after that date. A future versio
ill drop support for Python 2.7.
Collecting efficient-apriori
  Using cached https:&#47;&#47;files.pythonhosted.org&#47;packages&#47;d2&#47;7b&#47;71c12582b2e1b561e76cf52239bcece4ced6aac9c93974b7fdede5f407e7&#47;efficient_apriori-0.4.5.tar.gz
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
      File &quot;c:\users\wujian\appdata\local\temp\pip-install-p5k8a3\efficient-apriori\setup.py&quot;, line 15, in &lt;module&gt;
        from efficient_apriori import __version__
      File &quot;c:\users\wujian\appdata\local\temp\pip-install-p5k8a3\efficient-apriori\efficient_apriori\__init__.py&quot;, line 9, in &lt;module&gt;
        from efficient_apriori.apriori import apriori
      File &quot;c:\users\wujian\appdata\local\temp\pip-install-p5k8a3\efficient-apriori\efficient_apriori\apriori.py&quot;, line 12
        def apriori(transactions: typing.List[tuple], min_support: float=0.5,
                                ^
    SyntaxError: invalid syntax

    ----------------------------------------
Command &quot;python setup.py egg_info&quot; failed with error code 1 in c:\users\wujian\appdata\local\temp\pip-install-p5k8a3\efficient-apriori\</div>2019-03-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg" width="30px"><span>Geek_hve78z</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>1ï¼‰æœ€å°æ”¯æŒåº¦è®¾ç½®ä¸º0.1
{1: {(&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;æä¿ç”°&#39;,): 3, (&#39;æé›ªå¥&#39;,): 4, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3}}
[]
2ï¼‰æœ€å°æ”¯æŒåº¦è®¾ç½®ä¸º0.05
{1: {(&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å‚…å½ª&#39;,): 2, (&#39;åˆ˜ä½©ç¦&#39;,): 2, (&#39;åˆ˜å¾·å&#39;,): 2, (&#39;å§œæ–‡&#39;,): 2, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;æä¿ç”°&#39;,): 3, (&#39;æé›ªå¥&#39;,): 4, (&#39;æ¨å‡¤è‰¯&#39;,): 2, (&#39;ç‰›çŠ‡&#39;,): 2, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3, (&#39;èµµæœ¬å±±&#39;,): 2, (&#39;éƒ­æ¶›&#39;,): 2, (&#39;é—«å¦®&#39;,): 2, (&#39;é™ˆé“æ˜&#39;,): 2}, 2: {(&#39;å€ªå¤§çº¢&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å‚…å½ª&#39;, &#39;æé›ªå¥&#39;): 2, (&#39;åˆ˜ä½©ç¦&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å­™çº¢é›·&#39;, &#39;èµµæœ¬å±±&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æä¿ç”°&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æ¨å‡¤è‰¯&#39;): 2, (&#39;å·©ä¿&#39;, &#39;è‘›ä¼˜&#39;): 2, (&#39;å·©ä¿&#39;, &#39;éƒ­æ¶›&#39;): 2, (&#39;æä¿ç”°&#39;, &#39;æé›ªå¥&#39;): 2}}
[{å‚…å½ª} -&gt; {æé›ªå¥}, {åˆ˜ä½©ç¦} -&gt; {å·©ä¿}, {èµµæœ¬å±±} -&gt; {å­™çº¢é›·}, {æ¨å‡¤è‰¯} -&gt; {å·©ä¿}, {éƒ­æ¶›} -&gt; {å·©ä¿}]</div>2019-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/a4/5a/e708e423.jpg" width="30px"><span>third</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å¯¹äºXpathçš„queryçš„åˆ é™¤ï¼Œæ¥æ‰¾åˆ°éœ€è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œè¡¨ç¤ºè‰°éš¾ã€‚

è‡ªå·±æ€»ç»“çš„æ˜¯ï¼Œ
1.ä¿ç•™div[1]
2.åˆ é™¤åå­—æ¯”è¾ƒé•¿çš„class
3.ä¿ç•™&#47;&#47;
4.æ³¨æ„çœ‹å³è¾¹çš„ç»“æœ

ä¸çŸ¥é“è¯¥æ€ä¹ˆåˆ ï¼Œæœ‰ä»€ä¹ˆæŠ€å·§å—ï¼Ÿ</div>2019-02-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/aa/d1/076482f3.jpg" width="30px"><span>ç™½å¤œ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æœ€å°æ”¯æŒåº¦å¯ä»¥è®¾ç½®çš„å°ï¼Œè€Œå¦‚æœæœ€å°æ”¯æŒåº¦å°ï¼Œç½®ä¿¡åº¦å°±è¦è®¾ç½®çš„ç›¸å¯¹å¤§ä¸€ç‚¹ï¼Œä¸ç„¶å³ä½¿æå‡åº¦é«˜ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å·§åˆã€‚è¿™ä¸ªå‚æ•°è·Ÿæ•°æ®é‡ä»¥åŠé¡¹çš„æ•°é‡æœ‰å…³ã€‚
ç†è§£å¯¹å—ï¼Ÿ


# -*- coding: utf-8 -*-
from efficient_apriori import apriori
import csv
import pprint
director = u&#39;å¼ è‰ºè°‹&#39;
file_name = &#39;.&#47;&#39;+director+&#39;.csv&#39;
lists = csv.reader(open(file_name, &#39;r&#39;, encoding=&#39;utf-8-sig&#39;))
# æ•°æ®åŠ è½½
data = []
for names in lists:
     name_new = []
     for name in names:
           # å»æ‰æ¼”å‘˜æ•°æ®ä¸­çš„ç©ºæ ¼
           name_new.append(name.strip())
     data.append(name_new[1:])
# æŒ–æ˜é¢‘ç¹é¡¹é›†å’Œå…³è”è§„åˆ™
itemsets, rules = apriori(data, min_support=0.05,  min_confidence=0.5)
#data æ˜¯æˆ‘ä»¬è¦æä¾›çš„æ•°æ®é›†ï¼Œå®ƒæ˜¯ä¸€ä¸ª list æ•°ç»„ç±»å‹ã€‚min_support å‚æ•°ä¸ºæœ€å°æ”¯æŒåº¦ï¼Œåœ¨ efficient-apriori å·¥å…·åŒ…ä¸­ç”¨ 0 åˆ° 1 çš„æ•°å€¼ä»£è¡¨ç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚ 0.5 ä»£è¡¨æœ€å°æ”¯æŒåº¦ä¸º 50%ã€‚min_confidence æ˜¯æœ€å°ç½®ä¿¡åº¦ï¼Œæ•°å€¼ä¹Ÿä»£è¡¨ç™¾åˆ†æ¯”ï¼Œæ¯”å¦‚ 1 ä»£è¡¨ 100%ã€‚
pprint.pprint(itemsets)
print(rules)
</div>2019-02-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/ef/23/1f192e21.jpg" width="30px"><span>jion</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä½ å¥½ï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹æ–‡ä¸­è®¡ç®—çš„ç»“æœæ ¼å¼ï¼Œ1:ä»£è¡¨å•¥ç„¶åå­—å…¸é‡Œé¢(&#39;å¾å³¥&#39;,): 5ä»£è¡¨å•¥ï¼Œå¯å¦å¯¹ç»“æœåˆ†æä¸€ä¸‹ï¼Ÿ
{1: {(&#39;å¾å³¥&#39;,): 5, (&#39;é»„æ¸¤&#39;,): 6}, 2: {(&#39;å¾å³¥&#39;, &#39;é»„æ¸¤&#39;): 5}}
[{å¾å³¥} -&gt; {é»„æ¸¤}]</div>2021-03-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg" width="30px"><span>JustDoDT</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>äº¤ä½œä¸š
https:&#47;&#47;github.com&#47;LearningChanging&#47;Data-analysis-in-action&#47;tree&#47;master&#47;31-%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99%E6%8C%96%E6%8E%98%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E5%AF%BC%E6%BC%94%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E6%BC%94%E5%91%98%EF%BC%9F</div>2020-04-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f4/52/10c4d863.jpg" width="30px"><span>FeiFei</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¼ è‰ºè°‹çš„ç”µå½±å¤ªå‘æ•£ï¼Œå¹¶ä¸åƒå®æµ©ï¼Œé‡å°‘ã€‚å¹¶ä¸”ä¹Ÿåªé›†ä¸­åœ¨é‚£ä¹ˆå‡ ä¸ªæ¼”å‘˜èº«ä¸Šã€‚</div>2019-08-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/d2/ab/55015ae6.jpg" width="30px"><span>é™ˆå¥‡</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>çœ‹äº†å‡ éï¼Œç»ˆäºç®—æ˜¯çœ‹æ‡‚äº†</div>2019-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/0c/0f/93d1c8eb.jpg" width="30px"><span>mickey</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Efficient-Apriori
An efficient pure Python implementation of the Apriori algorithm.Works with Python 3.6 and 3.7.

efficient-aprioriåœ¨2.7ä¸‹ä¸èƒ½ç”¨ï¼Œåªèƒ½ç”¨äº3.6å’Œ3.7ã€‚è€å¸ˆåº”è¯¥å‘ŠçŸ¥ä¸€ä¸‹ç¯å¢ƒæœ‰æ‰€å˜åŒ–ã€‚</div>2019-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/d4/47/6d9f2da6.jpg" width="30px"><span>Miracle</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>é€šè¿‡ä¸€å¤©çš„å­¦ä¹ ï¼Œç»“åˆè€å¸ˆçš„è®²è§£ï¼Œç®—æ˜¯å…³è”è§„åˆ™å…¥äº†ä¸€ä¸ªé—¨å§ã€‚ è€å¸ˆè®²çš„çœŸçš„å¾ˆæ¸…æ™°äº†ï¼Œå¹¶ä¸”å®æˆ˜ä¹Ÿå¾ˆå¥½ï¼Œå¤§èµä¸€ä¸ªï¼Œ æŠŠç¬”è®°æ•´ç†åˆ°åšå®¢äº†ï¼Œåˆè¡¥å……äº†å‡ ä¸ªå®æˆ˜é¡¹ç›®ï¼Œå¹¶ä¸”è¡¥å……äº†ä¸€ä¸ªmlxtendåŒ…å®ç°aprioriç®—æ³•ï¼Œå¹¶åˆ†æäº†ä¸åŒã€‚ https:&#47;&#47;blog.csdn.net&#47;wuzhongqiang&#47;article&#47;details&#47;104196194</div>2020-02-06</li><br/><li><img src="" width="30px"><span>å‘¨å¿—ç¿”</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ä¸ºä»€ä¹ˆmin_supportåªæœ‰è®¾ç½®æˆ0.3æ‰èƒ½å¾—åˆ°è€å¸ˆçš„ç»“æœï¼š
{1: {(&#39;å¾å³¥&#39;,): 5, (&#39;é»„æ¸¤&#39;,): 6}, 2: {(&#39;å¾å³¥&#39;, &#39;é»„æ¸¤&#39;): 5}}
[{å¾å³¥} -&gt; {é»„æ¸¤}]
å¦‚æœæ˜¯0.5ï¼Œåªæœ‰{1: {(&#39;é»„æ¸¤&#39;,): 6}}</div>2019-07-16</li><br/><li><img src="" width="30px"><span>yanyu-xin</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æŠ“å–ç¨‹åºç”Ÿæˆå®æµ©å¯¼æ¼”çš„æ•°æ®é›†çš„ä»£ç ï¼Œå‘ç”Ÿå¼‚å¸¸: AttributeError &#39;WebDriver&#39; object has no attribute &#39;find_element_by_xpath&#39; File &quot;D:\31.py&quot;, line 21, in download html = driver.find_element_by_xpath(&quot;&#47;&#47;*&quot;).get_attribute(&quot;outerHTML&quot;) ^ File &quot;D:\31.py&quot;, line 59, in &lt;module&gt; flag = download(request_url) ^ã€€AttributeError: &#39;WebDriver&#39; object has no attribute &#39;find_element_by_xpath&#39;ã€€Pro Searchã€€ã€€4 steps completed
è¿™ä¸ªå¼‚å¸¸AttributeError: &#39;WebDriver&#39; object has no attribute &#39;find_element_by_xpath&#39;å‘ç”Ÿçš„åŸå› æ˜¯åœ¨Selenium 4.3.0ç‰ˆæœ¬ä¸­ï¼Œfind_element_by_*å’Œfind_elements_by_*æ–¹æ³•è¢«å¼ƒç”¨å¹¶ç§»é™¤äº†ã€‚è¿™æ„å‘³ç€ä¸èƒ½å†ä½¿ç”¨find_element_by_xpathè¿™æ ·çš„æ–¹æ³•æ¥æŸ¥æ‰¾é¡µé¢å…ƒç´ äº†34ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨æ–°çš„æ–¹æ³•æ¥æŸ¥æ‰¾å…ƒç´ ã€‚æ ¹æ®Selenium 4.3.0çš„å˜æ›´æ—¥å¿—ï¼Œåº”è¯¥ä½¿ç”¨find_elementæ–¹æ³•ï¼Œé…åˆByç±»æ¥æŒ‡å®šæŸ¥æ‰¾å…ƒç´ çš„æ–¹å¼ã€‚åŸæ¥ä½¿ç”¨driver.find_element_by_xpath(&quot;&#47;&#47;a&quot;)çš„æ–¹å¼ç°åœ¨åº”è¯¥æ›¿æ¢ä¸ºdriver.find_element(By.XPATH, &quot;&#47;&#47;a&quot;)34ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªä¿®æ­£åçš„ä»£ç ï¼š

from selenium.webdriver.common.by import By
 # ä¹‹å‰çš„å†™æ³• 
# html = driver.find_element_by_xpath(&quot;&#47;&#47;*&quot;).get_attribute(&quot;outerHTML&quot;) 
# æ–°çš„å†™æ³• 
html = driver.find_element(By.XPATH, &quot;&#47;&#47;*&quot;).get_attribute(&quot;outerHTML&quot;)</div>2024-04-13</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/wJphZ3HcvhjVUyTWCIsCugzfQY5NAy6VJ0XoPLibDlcHWMswFmFe678zd0lUjFETia80NQhyQcVnGDlKgKPcRGyw/132" width="30px"><span>JingZ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div># å…³è”è§„åˆ™æŒ–æ˜
å‡ºç°é”™è¯¯ selenium.common.exceptions.WebDriverException: Message: &#39;chromedriver&#39; executable needs to be in PATH. å‚è€ƒhttps:&#47;&#47;blog.csdn.net&#47;liaoningxinmin&#47;article&#47;details&#47;82686185 æŒ‰æ­£å¸¸çš„å¥—è·¯Macä¸‹è½½äº†Chromedriverï¼Œå°†è§£å‹å¥½çš„æ–‡ä»¶æ”¾å…¥&#47;usr&#47;local&#47;binç›®å½•ä¸­ï¼Œç”±äºmacçš„å¾ˆå¤šç›®å½•éƒ½æ˜¯éšè—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‰å¿«æ·é”®command+shift+gå°±å¯ä»¥æ‰“å¼€è¿™ä¸ªç›®å½•ï¼Œæ¥ç€å°†è§£å‹å¥½çš„é©±åŠ¨æ”¾å…¥æ­¤ç›®å½•å³å¯

min_support=0.1
é¢‘ç¹é¡¹é›†ï¼š {1: {(&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;æä¿ç”°&#39;,): 3, (&#39;æé›ªå¥&#39;,): 4, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3}}
å…³è”è§„åˆ™ï¼š []

min_support=0.05
é¢‘ç¹é¡¹é›†ï¼š {1: {(&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å‚…å½ª&#39;,): 2, (&#39;åˆ˜ä½©ç¦&#39;,): 2, (&#39;åˆ˜å¾·å&#39;,): 2, (&#39;å§œæ–‡&#39;,): 2, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;æä¿ç”°&#39;,): 3, (&#39;æé›ªå¥&#39;,): 4, (&#39;æ¨å‡¤è‰¯&#39;,): 2, (&#39;ç‰›çŠ‡&#39;,): 2, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3, (&#39;èµµæœ¬å±±&#39;,): 2, (&#39;éƒ­æ¶›&#39;,): 2, (&#39;é—«å¦®&#39;,): 2, (&#39;é™ˆé“æ˜&#39;,): 2}, 2: {(&#39;å€ªå¤§çº¢&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å‚…å½ª&#39;, &#39;æé›ªå¥&#39;): 2, (&#39;åˆ˜ä½©ç¦&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å­™çº¢é›·&#39;, &#39;èµµæœ¬å±±&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æä¿ç”°&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æ¨å‡¤è‰¯&#39;): 2, (&#39;å·©ä¿&#39;, &#39;è‘›ä¼˜&#39;): 2, (&#39;å·©ä¿&#39;, &#39;éƒ­æ¶›&#39;): 2, (&#39;æä¿ç”°&#39;, &#39;æé›ªå¥&#39;): 2}}
å…³è”è§„åˆ™ï¼š [{å‚…å½ª} -&gt; {æé›ªå¥}, {åˆ˜ä½©ç¦} -&gt; {å·©ä¿}, {èµµæœ¬å±±} -&gt; {å­™çº¢é›·}, {æ¨å‡¤è‰¯} -&gt; {å·©ä¿}, {éƒ­æ¶›} -&gt; {å·©ä¿}]</div>2019-02-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/38/4f/61/018352d4.jpg" width="30px"><span>é™é™å‘€</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>selenium.common.exceptions.InvalidArgumentException: Message: invalid argument: invalid locator
  (Session info: chrome=109.0.5414.120) è€å¸ˆæŠ¥é”™æ€ä¹ˆè§£å†³</div>2023-10-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/06/57/11f1dffd.jpg" width="30px"><span>ç«¹æ¢¦</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>{1: {(&#39;å°¿å¸ƒ&#39;,): 5, (&#39;ç‰›å¥¶&#39;,): 4, (&#39;é¢åŒ…&#39;,): 4, (&#39;å•¤é…’&#39;,): 3}, 2: {(&#39;å°¿å¸ƒ&#39;, &#39;ç‰›å¥¶&#39;): 4, (&#39;å°¿å¸ƒ&#39;, &#39;é¢åŒ…&#39;): 4, (&#39;ç‰›å¥¶&#39;, &#39;é¢åŒ…&#39;): 3, (&#39;å•¤é…’&#39;, &#39;å°¿å¸ƒ&#39;): 3}, 3: {(&#39;å°¿å¸ƒ&#39;, &#39;ç‰›å¥¶&#39;, &#39;é¢åŒ…&#39;): 3}}ï¼Œè¯·é—®è€å¸ˆè¿™é‡Œé¢çš„æ•°å­—ä»£è¡¨ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ</div>2021-07-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/33/7b/9e012181.jpg" width="30px"><span>Soul of the Dragon</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>åˆšå¼€å§‹æŠŠæ”¯æŒåº¦è®¾ä¸º0.5ï¼Œå‘ç°æ²¡æœ‰æ•°æ®å‡ºç°ï¼Œå¯èƒ½æ˜¯å¤ªé«˜äº†ï¼Œåæ¥é™ä½æ”¯æŒåº¦æ‰å‡ºç°æ•°æ®ã€‚è€è°‹å­æ˜¯ä¸æ˜¯ä»¥å‰å–œæ¬¢å·©ä¿ï¼Œç°åœ¨å–œæ¬¢åˆ˜æµ©å­˜ï¼Ÿ
å¦å¤–é—®ä¸ªé—®é¢˜ï¼Œè¯·é—®é™ˆè€å¸ˆï¼ŒXpathçš„ç¼–å†™åˆ°åº•æœ‰ä»€ä¹ˆæ ·çš„è§„å¾‹ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥å¤åˆ¶ç½‘é¡µä¸­çš„XPathå‘¢ï¼Ÿ</div>2021-04-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/4a/35/66caeed9.jpg" width="30px"><span>å®Œç¾åšæŒ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å“ˆå“ˆï¼Œè¿™é‡ŒæŠŠæœ€å°æ”¯æŒåº¦çš„å‚æ•°è°ƒä½äº†ï¼ŒçœŸçš„éå¸¸æœ‰å¿…è¦ã€‚
åˆšå¼€å§‹æ²¡æœ‰çœ‹åˆ°è¿™ä¸ªæ€è€ƒé¢˜ï¼Œæˆ‘è‡ªå·±æƒ³åˆ°çš„å°±æ˜¯å¼ è‰ºè°‹ï¼Œå°±ç›´æ¥åšäº†ã€‚
æˆ‘åˆšå¼€å§‹è®¾ç½® min_support=0.5,  min_confidence=1 è·‘å‡ºæ¥çš„ç»“æœæ˜¯ç©ºçš„ï¼Œå› ä¸ºè¿™ä¸ªæ”¯æŒåº¦è®¾ç½®å¾—å¤ªé«˜äº†ã€‚
é€šè¿‡é™ä½é˜ˆå€¼ï¼Œå¯ä»¥å‘ç°ï¼Œå¼ è‰ºè°‹å’Œå·©ä¿çš„åˆä½œéå¸¸å¤šï¼Œä½†æ˜¯å…¶å®ƒç”·æ˜æ˜Ÿå°±æ²¡æœ‰è¿™ä¹ˆé«˜é¢‘ç¹åˆä½œçš„ï¼Œè®°å¾—æœ‰ä¸€å¥ç©ç¬‘è¯è®²ï¼Œâ€œé“æ‰“çš„å·©ä¿ï¼Œæµæ°´çš„ç”·æ˜æ˜Ÿâ€ï¼Œå¾ˆå¥½åœ°è§£é‡Šäº†è¿™ä¸€ç‚¹ã€‚</div>2021-04-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/86/79/066a062a.jpg" width="30px"><span>éåŒå‡¡æƒ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>äº¤ä½œä¸šï¼š

from selenium import webdriver
from lxml import etree
import time
import csv
import pandas as pd
from efficient_apriori import apriori
director = &#39;å¼ è‰ºè°‹&#39;
file_name = director + &quot;.csv&quot;

def fetch_data(file_name):
    already_deal_movies = set()

    out = open(file_name, &#39;w&#39;, newline=&#39;&#39;, encoding=&#39;utf-8&#39;)
    csv_writer = csv.writer(out)
    for i in range(0, 151, 15):
        url = &#39;https:&#47;&#47;search.douban.com&#47;movie&#47;subject_search?search_text=&#39; + director + &#39;&amp;cat=1002&amp;start=&#39; + str(i)
        driver = webdriver.Chrome()
        driver.get(url)
        time.sleep(1)
        html = etree.HTML(driver.page_source)
        movie_name_pattern = &quot;&#47;&#47;div[@class=&#39;item-root&#39;]&#47;div[@class=&#39;detail&#39;]&#47;div[@class=&#39;title&#39;]&#47;a&quot;
        movie_actors_pattern = &quot;&#47;&#47;div[@class=&#39;item-root&#39;]&#47;div[@class=&#39;detail&#39;]&#47;div[@class=&#39;meta abstract_2&#39;]&quot;

        movie_list = html.xpath(movie_name_pattern)
        actor_list = html.xpath(movie_actors_pattern)
        movie_count = len(movie_list)
        if (movie_count == 0): break
        if (i == 0):
            movie_list = movie_list[1:]
            actor_list = actor_list[1:]
        for movie, actors in zip(movie_list, actor_list):
            if (actors.text is None or movie.text in already_deal_movies): continue
            actor = actors.text.split(&#39;&#47;&#39;)
            if (actor[0].strip() != director): continue
            actor[0] = movie.text.strip()
            csv_writer.writerow(actor)
            already_deal_movies.add(movie.text)
        driver.close()
    out.close()

#fetch_data(file_name)

lists = csv.reader(open(file_name, &#39;r&#39;, encoding=&#39;utf-8&#39;))

# æ•°æ®åŠ è½½
data = []
for names in lists:
    name_new = []
    for name in names:
        # å»æ‰æ¼”å‘˜æ•°æ®ä¸­çš„ç©ºæ ¼
        name_new.append(name.strip())
    data.append(name_new[1:])
# æŒ–æ˜é¢‘ç¹é¡¹é›†å’Œå…³è”è§„åˆ™
# print(data)
itemsets, rules = apriori(data, min_support=0.05)
print(itemsets)
print(rules)

</div>2020-11-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/dc/68/006ba72c.jpg" width="30px"><span>Untitled</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div># å¼ è‰ºè°‹ æœ€å°æ”¯æŒåº¦=0.1çš„é¢‘ç¹é¡¹é›†ï¼š{1: {(&#39;å·©ä¿&#39;,): 9, (&#39;æé›ªå¥&#39;,): 5}}ï¼Œæ²¡æœ‰å…³è”è§„åˆ™ï¼›
æœ€å°æ”¯æŒåº¦=0.05çš„é¢‘ç¹é¡¹é›†ï¼š
{1: {(&#39;äºå’Œä¼Ÿ&#39;,): 2, (&#39;å€ªå¤§çº¢&#39;,): 3, (&#39;å‚…å½ª&#39;,): 2, (&#39;åˆ˜ä½©ç¦&#39;,): 2, (&#39;åˆ˜å¾·å&#39;,): 2, (&#39;å‘¨å†¬é›¨&#39;,): 2, (&#39;å§œæ–‡&#39;,): 2, (&#39;å­™çº¢é›·&#39;,): 3, (&#39;å·©ä¿&#39;,): 9, (&#39;å¼ æ¶µäºˆ&#39;,): 2, (&#39;å¼ è¯‘&#39;,): 2, (&#39;æä¿ç”°&#39;,): 3, (&#39;ææ›¼&#39;,): 2, (&#39;æé›ªå¥&#39;,): 5, (&#39;æ¨å‡¤è‰¯&#39;,): 2, (&#39;ç‰›çŠ‡&#39;,): 2, (&#39;ç« å­æ€¡&#39;,): 3, (&#39;è‘›ä¼˜&#39;,): 3, (&#39;èµµæœ¬å±±&#39;,): 2, (&#39;éƒ­æ¶›&#39;,): 2, (&#39;é—«å¦®&#39;,): 2, (&#39;é™ˆé“æ˜&#39;,): 2}, 2: {(&#39;å€ªå¤§çº¢&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å‚…å½ª&#39;, &#39;æé›ªå¥&#39;): 2, (&#39;åˆ˜ä½©ç¦&#39;, &#39;å·©ä¿&#39;): 2, (&#39;å­™çº¢é›·&#39;, &#39;èµµæœ¬å±±&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æä¿ç”°&#39;): 2, (&#39;å·©ä¿&#39;, &#39;æ¨å‡¤è‰¯&#39;): 2, (&#39;å·©ä¿&#39;, &#39;è‘›ä¼˜&#39;): 2, (&#39;å·©ä¿&#39;, &#39;éƒ­æ¶›&#39;): 2, (&#39;æä¿ç”°&#39;, &#39;æé›ªå¥&#39;): 2}}
å…³è”è§„åˆ™ï¼š
[{å‚…å½ª} -&gt; {æé›ªå¥}, {åˆ˜ä½©ç¦} -&gt; {å·©ä¿}, {èµµæœ¬å±±} -&gt; {å­™çº¢é›·}, {æ¨å‡¤è‰¯} -&gt; {å·©ä¿}, {éƒ­æ¶›} -&gt; {å·©ä¿}]
</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/9e/64/df8f1d4e.jpg" width="30px"><span>é™ˆæ˜æ™º</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä½ å¥½ï¼Œæƒ³è¯·é—®ä¸€ä¸ªé—®é¢˜ï¼Œç”¨Efficient-Apriori è¿è¡Œåçš„è®°è¿‡ï¼Œé™¤äº†æ”¯æŒåº¦å’Œæ‰§è¡Œåº¦ä»¥å¤–ï¼Œä»–çš„è¿”å›ç»“æœè¿˜åŒ…æ‹¬liftå’Œconvictionï¼Œå…¶ä¸­liftæŒ‡çš„æ˜¯p(x,y)&#47;(p(x) * p(y))ï¼Œxå’ŒyåŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡é™¤ä»¥xå‘ç”Ÿçš„æ¦‚ç‡å†é™¤ä»¥yå‘ç”Ÿçš„æ¦‚ç‡ï¼Œè¿™ä¸ªå€¼liftçš„å€¼ä»£è¡¨çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿè¿˜æœ‰convictionå€¼å¾—æ˜¯P(not Y) &#47; P(not Y | X)ä»£è¡¨çš„åˆæ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿè°¢è°¢</div>2019-06-11</li><br/>
</ul>