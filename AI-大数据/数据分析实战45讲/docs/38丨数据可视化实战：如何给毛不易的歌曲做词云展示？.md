ä»Šå¤©æˆ‘ä»¬åšä¸€ä¸ªæ•°æ®å¯è§†åŒ–çš„é¡¹ç›®ã€‚

æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹åˆ†æçš„æ•°æ®æå–å¸¸ç”¨è¯ï¼Œåšè¯äº‘å±•ç¤ºã€‚æ¯”å¦‚ä¸€äº›äº’è”ç½‘å…¬å¸ä¼šæŠ“å–ç”¨æˆ·çš„ç”»åƒï¼Œæˆ–è€…æ¯æ—¥è®¨è®ºè¯é¢˜çš„å…³é”®è¯ï¼Œå½¢æˆè¯äº‘å¹¶è¿›è¡Œå±•ç¤ºã€‚å†æˆ–è€…ï¼Œå‡å¦‚ä½ å–œæ¬¢æŸä¸ªæ­Œæ‰‹ï¼Œæƒ³äº†è§£è¿™ä¸ªæ­Œæ‰‹åˆ›ä½œçš„æ­Œæ›²ä¸­ç»å¸¸ç”¨åˆ°å“ªäº›è¯è¯­ï¼Œè¯äº‘å°±æ˜¯ä¸ªå¾ˆå¥½çš„å·¥å…·ã€‚æœ€åï¼Œåªéœ€è¦å°†è¯äº‘ç”Ÿæˆä¸€å¼ å›¾ç‰‡å°±å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°ç»“æœã€‚

é‚£ä¹ˆåœ¨ä»Šå¤©çš„å®æˆ˜é¡¹ç›®é‡Œï¼Œæœ‰3ä¸ªç›®æ ‡éœ€è¦æŒæ¡ï¼š

1. æŒæ¡è¯äº‘åˆ†æå·¥å…·ï¼Œå¹¶è¿›è¡Œå¯è§†åŒ–å‘ˆç°ï¼›
2. æŒæ¡Pythonçˆ¬è™«ï¼Œå¯¹ç½‘é¡µçš„æ•°æ®è¿›è¡Œçˆ¬å–ï¼›
3. æŒæ¡XPathå·¥å…·ï¼Œåˆ†ææå–æƒ³è¦çš„å…ƒç´  ã€‚

## å¦‚ä½•åˆ¶ä½œè¯äº‘

é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ä»€ä¹ˆæ˜¯è¯äº‘ã€‚è¯äº‘ä¹Ÿå«æ–‡å­—äº‘ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ç»Ÿè®¡æ–‡æœ¬ä¸­é«˜é¢‘å‡ºç°çš„è¯ï¼Œè¿‡æ»¤æ‰æŸäº›å¸¸ç”¨è¯ï¼ˆæ¯”å¦‚â€œä½œæ›²â€â€œä½œè¯â€ï¼‰ï¼Œå°†æ–‡æœ¬ä¸­çš„é‡è¦å…³é”®è¯è¿›è¡Œå¯è§†åŒ–ï¼Œæ–¹ä¾¿åˆ†æè€…æ›´å¥½æ›´å¿«åœ°äº†è§£æ–‡æœ¬çš„é‡ç‚¹ï¼ŒåŒæ—¶è¿˜å…·æœ‰ä¸€å®šçš„ç¾è§‚åº¦ã€‚

Pythonæä¾›äº†è¯äº‘å·¥å…·WordCloudï¼Œä½¿ç”¨pip install wordcloudå®‰è£…åï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªè¯äº‘ï¼Œæ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š

```
wc = WordCloud(
    background_color='white',# è®¾ç½®èƒŒæ™¯é¢œè‰²
    mask=backgroud_Image,# è®¾ç½®èƒŒæ™¯å›¾ç‰‡
    font_path='./SimHei.ttf',  # è®¾ç½®å­—ä½“ï¼Œé’ˆå¯¹ä¸­æ–‡çš„æƒ…å†µéœ€è¦è®¾ç½®ä¸­æ–‡å­—ä½“ï¼Œå¦åˆ™æ˜¾ç¤ºä¹±ç 
    max_words=100, # è®¾ç½®æœ€å¤§çš„å­—æ•°
    stopwords=STOPWORDS,# è®¾ç½®åœç”¨è¯
	max_font_size=150,# è®¾ç½®å­—ä½“æœ€å¤§å€¼
	width=2000,# è®¾ç½®ç”»å¸ƒçš„å®½åº¦
	height=1200,# è®¾ç½®ç”»å¸ƒçš„é«˜åº¦
    random_state=30# è®¾ç½®å¤šå°‘ç§éšæœºçŠ¶æ€ï¼Œå³å¤šå°‘ç§é¢œè‰²
)
```

å®é™…ä¸ŠWordCloudè¿˜æœ‰æ›´å¤šçš„æ„é€ å‚æ•°ï¼Œä»£ç é‡Œå±•ç¤ºçš„æ˜¯ä¸€äº›ä¸»è¦å‚æ•°ï¼Œæˆ‘åœ¨ä»£ç ä¸­éƒ½æœ‰æ³¨é‡Šï¼Œä½ å¯ä»¥è‡ªå·±çœ‹ä¸‹ã€‚

åˆ›å»ºå¥½WordCloudç±»ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨wordcloud=generate(text)æ–¹æ³•ç”Ÿæˆè¯äº‘ï¼Œä¼ å…¥çš„å‚æ•°textä»£è¡¨ä½ è¦åˆ†æçš„æ–‡æœ¬ï¼Œæœ€åä½¿ç”¨wordcloud.tofile(â€œa.jpgâ€)å‡½æ•°ï¼Œå°†å¾—åˆ°çš„è¯äº‘å›¾åƒç›´æ¥ä¿å­˜ä¸ºå›¾ç‰‡æ ¼å¼æ–‡ä»¶ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ27ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/a4/5a/e708e423.jpg" width="30px"><span>third</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>from wordcloud import WordCloud
import matplotlib.pyplot as plt
import requests

headers = {
    &#39;Referer&#39;: &#39;http:&#47;&#47;music.163.com&#39;,
    &#39;Host&#39;: &#39;music.163.com&#39;,
    &#39;Accept&#39;: &#39;text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;webp,image&#47;apng,*&#47;*;q=0.8&#39;,
    &#39;User-Agent&#39;: &#39;Chrome&#47;10&#39;
}


def getsong(headers):
    url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=753776811&#39;
    res = requests.request(&#39;GET&#39;, url, headers=headers)
    page = res.json()
    tracks=page[&#39;result&#39;][&#39;tracks&#39;]
    list = []
    for i in range(len(tracks)):
        Name = tracks[i][&quot;name&quot;]
        list.append(Name)
    return list


def create_WordCloud(list):
    print(&quot;æ ¹æºè¯é¢‘è®¡ç®—è¯äº‘&quot;)

    wc = WordCloud(
        font_path=&quot;simhei.ttf&quot;,
        max_words=100,  # è®¾ç½®æœ€å¤§å­—æ•°
        width=2000,  # è®¾ç½®ç”»å¸ƒå®½åº¦
        height=1200,  # è®¾ç½®ç”»å¸ƒé«˜åº¦
        random_state=100
    )
    wordcloud = wc.generate(list)
    # å†™è¯äº‘å›¾ç‰‡
    wordcloud.to_file(&quot;ä½œä¸š.jpg&quot;)
    # æ˜¾ç¤ºè¯äº‘æ–‡ä»¶
    plt.imshow(wordcloud)
    # ä¸éœ€è¦æ˜¾ç¤ºX&#47;Yè½´ï¼Œç”¨offå°†åæ ‡è½´å…³é—­
    plt.axis(&quot;off&quot;)
    plt.show()


# å»æ‰åœç”¨è¯ä»¥åŠä¸­è‹±æ–‡æ··åˆçš„è¯
def remove_stop_words(f):
    stop_words = [&#39;(ä¼´å¥)&#39;, &#39;(Demoç‰ˆ)&#39;, &#39;(å¿…èƒœå®¢æ–°æ˜¥ç‰ˆ)&#39;]
    mixed_words = [&#39;Bonus Trackï¼šä¸€è¤ä¸€ç´ &#39;, &#39;Bonus Trackï¼šç»™ä½ ç»™æˆ‘&#39;]
    for stop_word in stop_words:
        f = f.replace(stop_word, &#39;&#39;)
    for mixed_word in mixed_words:
        f = f.replace(mixed_word, mixed_word[12:])
    return f

gerlists = getsong(headers)
# è·å–æ­Œå•æ˜¯listç±»å‹ç›´æ¥è½¬åŒ–ä¸ºè½¬æ¢ä¸ºstr
lists_str = &quot; &quot;.join(gerlists)

lists = remove_stop_words(lists_str)
create_WordCloud(lists)</div>2019-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg" width="30px"><span>Geek_hve78z</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>
ï¼ˆ2ï¼‰å°†æ­Œå•çš„æ­Œæ›²å¯¹åº”çš„æ­Œè¯ä½œè¯äº‘å±•ç¤º
import requests
import jieba
from wordcloud import WordCloud
import matplotlib.pyplot as plt


#å¾—åˆ°æŒ‡å®šæ­Œå•é¡µé¢çš„ å…¨éƒ¨æ­Œæ›²çš„æ­Œæ›²IDï¼Œæ­Œæ›²å
def get_songs(playlist_id):
    page_url=&#39;http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=&#39;+playlist_id
    #è·å–ç½‘é¡µHTML
    res=requests.request(&#39;GET&#39;,page_url,headers=headers)
    # è¾“å‡ºæ­Œå•ä¸­æ­Œæ›²æ•°é‡
    print(len(res.json()[&#39;result&#39;][&#39;tracks&#39;]))

    # è®¾ç½®çƒ­é—¨æ­Œæ›²çš„IDï¼Œæ­Œæ›²åç§°
    song_ids=[]
    song_names=[]

    for i in range(len(res.json()[&#39;result&#39;][&#39;tracks&#39;])):
        names=res.json()[&#39;result&#39;][&#39;tracks&#39;][i][&#39;name&#39;]
        ids=res.json()[&#39;result&#39;][&#39;tracks&#39;][i][&#39;id&#39;]
        song_names.append(names)
        song_ids.append(ids)
        print(names,&#39; &#39;,ids)
    return song_names,song_ids
 
# å¾—åˆ°æŸä¸€é¦–æ­Œçš„æ­Œè¯
def get_song_lyric(headers,lyric_url):
    res = requests.request(&#39;GET&#39;, lyric_url, headers=headers)
    if &#39;lrc&#39; in res.json():
       lyric = res.json()[&#39;lrc&#39;][&#39;lyric&#39;]
       new_lyric = re.sub(r&#39;[\d:.[\]]&#39;,&#39;&#39;,lyric)
       return new_lyric
    else:
       return &#39;&#39;
       print(res.json())



#ç”Ÿæˆè¯äº‘
def create_word_cloud(f):
    print(&#39;æ ¹æ®è¯é¢‘ ç”Ÿæˆè¯äº‘&#39;)
    f=remove_stop_words(f)
    cut_text=&#39; &#39;.join(jieba.cut(f,cut_all=False,HMM=True))
    wc = WordCloud(
       font_path=&quot;.&#47;wc.ttf&quot;,
       max_words=100,
       width=2000,
       height=1200,
    )
    print(cut_text)
    wordcloud = wc.generate(cut_text)
    # å†™è¯äº‘å›¾ç‰‡
    wordcloud.to_file(&quot;wordcloud.jpg&quot;)
    # æ˜¾ç¤ºè¯äº‘æ–‡ä»¶
    plt.imshow(wordcloud)
    plt.axis(&quot;off&quot;)
    plt.show()
    

# è®¾ç½®æ­Œå•IDï¼Œã€æ¯›ä¸æ˜“ | ä¸å–„è¨€è¾çš„æ·±æƒ…ã€‘ä¸º753776811
playlist_id=&#39;753776811&#39;
[song_names,song_ids]=get_songs(playlist_id)

#æ‰€æœ‰æ­Œè¯
all_word=&#39;&#39;
# è·å–æ¯é¦–æ­Œæ­Œè¯
for (song_id, song_name) in zip(song_ids, song_names):
    # æ­Œè¯ API URL
    lyric_url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;song&#47;lyric?os=pc&amp;id=&#39; + str(song_id) + &#39;&amp;lv=-1&amp;kv=-1&amp;tv=-1&#39;
    lyric = get_song_lyric(headers, lyric_url)
    all_word = all_word + &#39; &#39; + lyric
    print(song_name)

#æ ¹æ®è¯é¢‘ï¼Œç”Ÿæˆè¯äº‘
create_word_cloud(all_word)
</div>2019-03-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a3/87/c415e370.jpg" width="30px"><span>æ»¢</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯¾åä½œä¸šï¼šè¯­è¨€Python3.6
import requests
import matplotlib.pyplot as plt
from wordcloud import WordCloud

#åˆ›å»ºè¯·æ±‚å¤´
headers = {
    &#39;Referer&#39;:&#39;http:&#47;&#47;music.163.com&#39;,
    &#39;Host&#39;:&#39;music.163.com&#39;,
    &#39;Accept&#39;:&#39;text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;Webp,image&#47;apng,*&#47;*;q=0.8&#39;,
    &#39;User-Agent&#39;:&#39;Chrome&#47;10&#39;
}

#è·å–æ­Œå•
def get_song_name(req_url):
    res = requests.request(&#39;GET&#39;,req_url,headers=headers)
    if &#39;tracks&#39; in res.json()[&#39;result&#39;]:
        tracks = res.json()[&#39;result&#39;][&#39;tracks&#39;]
        names = []
        for i in  range(len(tracks)):
            name = tracks[i][&#39;name&#39;]
            names.append(name)
        return names
    else:
        return &#39;&#39;

#è¿‡æ»¤åœç”¨è¯
def remove_stop_words(text):
    stop_words = [&#39;(ä¼´å¥)&#39;,&#39;Bonus Trackï¼š&#39;,&#39;(Demoç‰ˆ)&#39;]
    for stop_word in stop_words:
        text = text.replace(stop_word,&#39;&#39;)
    return text

path = &#39;&#47;Users&#47;apple&#47;Desktop&#47;GitHubProject&#47;Read mark&#47;æ•°æ®åˆ†æ&#47;geekTime&#47;data&#47;&#39;
#è·å¾—è¯äº‘
def create_wordcloud(text):
    #ç§»é™¤è¿‡æ»¤è¯
    text = remove_stop_words(text)
    wc = WordCloud(
        font_path = &quot;&#47;Library&#47;Fonts&#47;Arial Unicode.ttf&quot;,
        max_words = 100,
        width = 2000,
        height = 1200
    )
    wordcloud = wc.generate(text)
    wordcloud.to_file(path + &#39;wordcloud_homework.jpg&#39;)
    plt.imshow(wordcloud)
    plt.axis(&#39;off&#39;)
    plt.show()

#å¤„ç†æ­Œå•ï¼Œå½¢æˆè¯äº‘
request_url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=753776811&#39;
content_list = get_song_name(request_url)
content = &quot; &quot;.join(content_list)
print(&#39;æ­Œå•ä¿¡æ¯---&#39;,content)
create_wordcloud(content)

--------------
æ­Œå•ä¿¡æ¯--- åˆ«å†é—¹äº† åœ¨æ— é£æ—¶ é‚£æ—¶çš„æˆ‘ä»¬ ä»æ— åˆ°æœ‰ ä¸€æ±Ÿæ°´ å€Ÿ æ¶ˆæ„ ä¸æŸ“ ç››å¤ å“å“Ÿ æ— é—® ä¸€è¤ä¸€ç´  å—ä¸€é“è¡— èŠ¬èŠ³ä¸€ç”Ÿ è¯·è®°ä½æˆ‘ é¡¹ç¾½è™å§¬ ç»™ä½ ç»™æˆ‘ æƒ³ä½ æƒ³ä½  æ„æ–™ä¹‹ä¸­ å¹³å‡¡çš„ä¸€å¤© åƒæˆ‘è¿™æ ·çš„äºº æ„Ÿè§‰è‡ªå·±æ˜¯å·¨æ˜Ÿ å¦‚æœæœ‰ä¸€å¤©æˆ‘å˜å¾—å¾ˆæœ‰é’± å€Ÿ (ä¼´å¥) æ¶ˆæ„ (ä¼´å¥) ç››å¤ (ä¼´å¥) å“å“Ÿ (ä¼´å¥) æƒ³ä½ æƒ³ä½  (ä¼´å¥) å—ä¸€é“è¡— (ä¼´å¥) ç»™ä½ ç»™æˆ‘ (ä¼´å¥) èŠ¬èŠ³ä¸€ç”Ÿ (ä¼´å¥) ä¸€è¤ä¸€ç´  (ä¼´å¥) å¹³å‡¡çš„ä¸€å¤© (ä¼´å¥) åƒæˆ‘è¿™æ ·çš„äºº (ä¼´å¥) å¦‚æœæœ‰ä¸€å¤©æˆ‘å˜å¾—å¾ˆæœ‰é’± (ä¼´å¥) å¦‚æœæœ‰ä¸€å¤©æˆ‘å˜å¾—å¾ˆæœ‰é’± (å¿…èƒœå®¢æ–°æ˜¥ç‰ˆ) Bonus Trackï¼šä¸€è¤ä¸€ç´  (Demoç‰ˆ) Bonus Trackï¼šç»™ä½ ç»™æˆ‘ (Demoç‰ˆ)
---------------
å›¾ç‰‡æ— æ³•å±•ç¤ºï¼Œå¸Œæœ›æå®¢å®è·µçš„PMèƒ½æå‡ºæ”¹è¿›æ–¹æ¡ˆï¼Œå‰ç«¯å’Œåå°å®ç°ä¸€ä¸‹ï¼ˆğŸ˜‚ğŸ˜‚ï¼‰ï¼Œç¥ä¸“æ è¶Šåšè¶Šå¥½</div>2019-04-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/24/b0/a6e0b03a.jpg" width="30px"><span>ä¸€è¯­ä¸­çš„</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä»¥http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=753776811ä¸­æ­Œå•ä¸ºä¾‹åšè¯äº‘å±•ç¤º
#-*- coding:utf-8 -*-
from wordcloud import WordCloud
import matplotlib.pyplot as plt
import requests

def getSonglists(url, headers):
    #æ ¹æ®æ­Œå•APIè·å–æ­Œæ›²åˆ—è¡¨
	#å°†é¡µé¢ä¿¡æ¯è½¬æ¢ä¸ºjsonæ ¼å¼ä¾¿äºé€šè¿‡å­—å…¸å–å€¼
    r = requests.get(url, headers=headers)
    page_json = r.json()
    tracks = page_json[&quot;result&quot;][&quot;tracks&quot;]
    lists = []
    for i in  range(len(tracks)):
        listName = tracks[i][&quot;name&quot;]
        lists.append(listName)
    return lists

#ç”Ÿæˆè¯äº‘
def create_WordCloud(lists):
    print(&quot;æ ¹æºè¯é¢‘è®¡ç®—è¯äº‘&quot;)
 
    wc = WordCloud(
        font_path = &quot;C:\Windows\Fonts\simhei.ttf&quot;,  #è®¾ç½®ä¸­æ–‡å­—ä½“
        max_words = 100,             #è®¾ç½®æœ€å¤§å­—æ•°
        width = 2000,                #è®¾ç½®ç”»å¸ƒå®½åº¦
        height = 1200,                #è®¾ç½®ç”»å¸ƒé«˜åº¦
        random_state = 100
    )
    wordcloud = wc.generate(lists)
    #å†™è¯äº‘å›¾ç‰‡
    wordcloud.to_file(&quot;wordcloud.jpg&quot;)
    #æ˜¾ç¤ºè¯äº‘æ–‡ä»¶
    plt.imshow(wordcloud)
    #ä¸éœ€è¦æ˜¾ç¤ºX&#47;Yè½´ï¼Œç”¨offå°†åæ ‡è½´å…³é—­
    plt.axis(&quot;off&quot;)
    plt.show()

#å»æ‰åœç”¨è¯ä»¥åŠä¸­è‹±æ–‡æ··åˆçš„è¯
def remove_stop_words(f):
    stop_words = [&#39;(ä¼´å¥)&#39;, &#39;(Demoç‰ˆ)&#39;, &#39;(å¿…èƒœå®¢æ–°æ˜¥ç‰ˆ)&#39;]
    mixed_words = [&#39;Bonus Trackï¼šä¸€è¤ä¸€ç´ &#39;, &#39;Bonus Trackï¼šç»™ä½ ç»™æˆ‘&#39;]
    for stop_word in stop_words:
        f = f.replace(stop_word, &#39;&#39;)
    for mixed_word in mixed_words:
        f = f.replace(mixed_word, mixed_word[12:])
    return  f

if __name__ == &quot;__main__&quot;:

    headers = {
        &#39;Referer&#39;: &#39;http:&#47;&#47;music.163.com&#39;,
        &#39;Host&#39;: &#39;music.163.com&#39;,
        &#39;Accept&#39;: &#39;text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;webp,image&#47;apng,*&#47;*;q=0.8&#39;,
        &#39;User-Agent&#39;: &#39;Chrome&#47;10&#39;
    }
    url = &quot;http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=753776811&quot;
    gerLists = getSonglists(url, headers)
	#è·å–æ­Œå•æ˜¯listç±»å‹ï¼Œè½¬æ¢ä¸ºstrï¼Œé‚£ä¹ˆå°±ä¸å†éœ€è¦ç”¨jiebaåˆ†è¯
    lists_str = &quot; &quot;.join(gerLists)
	
    lists = remove_stop_words(lists_str)
    create_WordCloud(lists)</div>2019-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/3d/b6/e4a72acc.jpg" width="30px"><span>Geeky_Ben</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è€å¸ˆï¼Œä¸ºä»€ä¹ˆæˆ‘çš„ç»“æœæ˜¾ç¤º cannot open resource</div>2020-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/32/3a/2d8a2c67.jpg" width="30px"><span>Geek_l0anid</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div># -*- coding:utf-8 -*-
# ç½‘æ˜“äº‘éŸ³ä¹ é€šè¿‡æ­Œæ‰‹IDï¼Œç”Ÿæˆè¯¥æ­Œæ‰‹çš„è¯äº‘
import requests
import os
import re
import sys
from wordcloud import WordCloud
import matplotlib.pyplot as plt
from PIL import Image
import numpy as np
import jieba
from lxml import etree

headers = {
    &#39;Referer&#39;: &#39;http:&#47;&#47;music.163.com&#39;,
    &#39;Host&#39;: &#39;music.163.com&#39;,
    &#39;Accept&#39;: &#39;text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;webp,image&#47;apng,*&#47;*;q=0.8&#39;,
    &#39;User-Agent&#39;: &#39;Chrome&#47;10&#39;
}

# è·å–åˆ°æ­Œå•çš„ä¿¡æ¯
def get_song_list(headers,song_list_url):
    res = requests.request(&quot;GET&quot;,song_list_url,headers=headers)
    if &#39;result&#39; in res.json():
        all_song_list = &quot;&quot;
        for song_list in res.json()[&#39;result&#39;][&#39;tracks&#39;]:
            all_song_list = all_song_list + song_list[&#39;name&#39;]
            print(all_song_list)
        return all_song_list
    else:
        return &#39;&#39;

# åˆ›å»ºè¯äº‘å±•ç¤º
def wordcloud(f):
    print(&quot;æ ¹æ®è¯é¢‘ç»“æœè¿›è¡Œè¯äº‘å±•ç¤ºï¼&quot;)
    cut_text = &quot; &quot;.join(jieba.cut(f,cut_all=False,HMM=True))
    wc = WordCloud(
        font_path=&quot;.&#47;wc.ttf&quot;,
        max_words=100,
        width=2000,
        height=1200,
    )
    wordcloud = wc.generate(cut_text)
    wordcloud.to_file(&quot;song_list_wordcloud.jpg&quot;)
    # è¯äº‘å±•ç¤º
    plt.imshow(wordcloud)
    plt.axis(&quot;off&quot;)
    plt.show()

# è·å–æ­Œå•
song_list_id = &#39;753776811&#39;
song_list_url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=&#39; + song_list_id
all_song_list_new = get_song_list(headers,song_list_url)
wordcloud(all_song_list_new)</div>2019-09-22</li><br/><li><img src="" width="30px"><span>é™ˆç‚«å®</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>APIæ˜¯æ€ä¹ˆæ‰¾åˆ°çš„ï¼Ÿ</div>2021-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/0c/2c/e905e970.jpg" width="30px"><span>å¦‚æœ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆä½ å¥½ï¼Œè¯·é—®ä¸‹headeré‡Œçš„Acceptå‚æ•°æ˜¯æ€ä¹ˆæ¥çš„</div>2020-06-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e8/ba/6d318c08.jpg" width="30px"><span>GS</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>https:&#47;&#47;github.com&#47;leledada&#47;jupyter&#47;tree&#47;master&#47;wordcloud</div>2019-12-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e8/ba/6d318c08.jpg" width="30px"><span>GS</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div> if &#39;lrc&#39; in res.json():
        try:
            lyric = res.json()[&#39;lrc&#39;][&#39;lyric&#39;]
            new_lyric = re.sub(r&#39;[\d:.[\]]&#39;,&#39;&#39;,lyric)
            return new_lyric
        except:
            print(&#39;å‘ç”Ÿäº†å¼‚å¸¸-----------------------------------&#39;,lyric_url)
            return &#39;&#39;
    else:
        return &#39;&#39;</div>2019-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e8/ba/6d318c08.jpg" width="30px"><span>GS</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è§£ææ­Œè¯çš„æ—¶å€™æœ€å¥½æ˜¯ç”¨try except åŒ…èµ·æ¥ï¼Œä¸ç„¶é‡åˆ°å¼‚å¸¸å°±ä¸èµ°äº†</div>2019-12-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/b1/44/a0ccff54.jpg" width="30px"><span>#Yema</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>lyric_url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;song&#47;lyric?os=pc&amp;id=&#39; + str(song_id) + &#39;&amp;lv=-1&amp;kv=-1
è€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹è¿™ä¸ªurlæ˜¯ä»å“ªæ‰¾åˆ°çš„å—ï¼Ÿä¸ºä»€ä¹ˆåœ¨æµè§ˆå™¨æŠ“åŒ…é‡Œé¢æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªapiï¼Œæˆ‘æ‰¾åˆ°çš„apiæ˜¯ä¸€ä¸ªå¼‚æ­¥éœ€è¦å‘apiä¼ csrf_tokenæ‰èƒ½æ‹¿åˆ°æ­Œè¯</div>2019-12-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/f5/12/a5383fff.jpg" width="30px"><span>å¿—</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ€è€ƒé¢˜å…³é”®ä»£ç éƒ¨åˆ†ï¼š

import time
id_list = []
name_list = []
# å¾—åˆ°æŸä¸€æ­Œå•é‡Œçš„æ¯ä¸€é¦–æ­ŒIDå’Œæ­Œå
def get_song_list(headers,list_url):
    res = requests.request(&#39;GET&#39;, list_url, headers=headers)
    if &#39;result&#39; in res.json():
        for item in res.json()[&#39;result&#39;][&#39;tracks&#39;]:   # è¯»å–jsonæ•°æ®ä¸­çš„æ¯ä¸€ä¸ªIDå’Œname
            id_list.append(item[&#39;id&#39;]) 
            name_list.append(item[&#39;name&#39;])
            print(item[&#39;id&#39;],&quot; &quot;,item[&#39;name&#39;])
            time.sleep(1)      # è®¾ç½®åœç•™æ—¶é—´ï¼Œé˜²æ­¢â€œbad handshakeâ€
        return id_list,name_list
    else:
        return &#39;&#39;
        print(res.json())
        
# è®¾ç½®æ­Œå•é“¾æ¥
list_url = &#39;https:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=753776811&#39;
# è·å¾—æ­Œå•æ¯ä¸€é¦–æ­Œçš„IDå’Œname
get_song_list(headers,list_url)   
     
all_word_list = &#39;&#39;
# è·å–æ¯é¦–æ­Œæ­Œè¯
for (song_id, song_name) in zip(id_list, name_list):
    # æ­Œè¯ API URL
    lyric_url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;song&#47;lyric?os=pc&amp;id=&#39; + str(song_id) + &#39;&amp;lv=-1&amp;kv=-1&amp;tv=-1&#39;
    lyric = get_song_lyric(headers, lyric_url)
    all_word_list = all_word_list + &#39; &#39; + lyric
    print(song_name)
    
# å»æ‰åœç”¨è¯
remove_stop_words(all_word_list)

# æ ¹æ®è¯é¢‘ ç”Ÿæˆè¯äº‘
create_word_cloud(all_word_list)   </div>2019-03-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e5/43/7bc7cfe3.jpg" width="30px"><span>è·³è·³</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>#éœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹
#1.æ­Œå•è¿”å›çš„æ˜¯jsonæ–‡ä»¶ï¼Œget_songséœ€è¦å‚è€ƒget_songs_lyriè·å–
#2.list_urlä¸­é—´æ˜¯strç±»å‹ï¼Œæ³¨æ„ç±»å‹è½¬æ¢
#emmmï¼Œä»£ç å¤ªé•¿æ”¾ä¸ä¸‹äº†ï¼Œåˆ é™¤äº†ä¸€éƒ¨åˆ†å’Œè€å¸ˆä¸€æ ·çš„å‡½æ•°
# -*- coding:utf-8 -*-
# ç½‘æ˜“äº‘éŸ³ä¹ é€šè¿‡æ­Œå•IDï¼Œç”Ÿæˆè¯¥æ­Œå•çš„è¯äº‘
import requests
import sys
import re
import os
from wordcloud import WordCloud
import matplotlib.pyplot as plt
import jieba
from PIL import Image
import numpy as np
from lxml import etree
def get_songs(songlist):
    list_url=&#39;https:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=&#39;+songlist
    res = requests.request(&#39;GET&#39;, list_url, headers=headers)
    if &#39;result&#39; in res.json():
        for item in res.json()[&#39;result&#39;][&#39;tracks&#39;]: # è¯»å–jsonæ•°æ®ä¸­çš„æ¯ä¸€ä¸ªIDå’Œname
            song_ids.append(item[&#39;id&#39;]) 
            song_names.append(item[&#39;name&#39;])
            print(item[&#39;id&#39;],&quot; &quot;,item[&#39;name&#39;])
            time.sleep(1) # è®¾ç½®åœç•™æ—¶é—´ï¼Œé˜²æ­¢â€œbad handshakeâ€
        return song_ids,song_names
    else:
        return &#39;&#39;
        print(res.json())
# è®¾ç½®æ­Œå•
songlist = &#39;753776811&#39;
[song_ids, song_names] = get_songs(songlist)
# æ‰€æœ‰æ­Œè¯
all_word = &#39;&#39;
# è·å–æ¯é¦–æ­Œæ­Œè¯
for (song_id, song_name) in zip(song_ids, song_names):
    # æ­Œè¯ API URL
    list_url = &#39;http:&#47;&#47;music.163.com&#47;api&#47;song&#47;lyric?os=pc&amp;id=&#39; + str(song_id) + &#39;&amp;lv=-1&amp;kv=-1&amp;tv=-1&#39;
    lyric = get_song_lyric(headers, list_url)
    all_word = all_word + &#39; &#39; + lyric
    print(song_name)
# æ ¹æ®è¯é¢‘ ç”Ÿæˆè¯äº‘
create_word_cloud(all_word)</div>2019-03-13</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/RxZc4ZGUwpUp5grZqJEtjg3epwsLDU0vPibUN6richJmkrGT91IvsTadwibLxiaRKT0hSVN9Oo1ZQbc5IvFJAqibiaeA/132" width="30px"><span>èµµæ™“å¶</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>print(len(res.json()[&#39;result&#39;][&#39;tracks&#39;]))
KeyError: &#39;result&#39;
æ€»æ˜¯æŠ¥è¿™ä¸ªé”™</div>2023-09-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/47/00/3202bdf0.jpg" width="30px"><span>piboye</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æœ‰åœç”¨è¯çš„åº“å—ï¼Ÿ</div>2022-01-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/93/31/abb7bfe3.jpg" width="30px"><span>picoasis</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>åœ¨åˆ¶ä½œæ­Œè¯äº‘çš„ç¨‹åºä¸­ï¼Œget_song_lyricå‡½æ•°ï¼Œå¢åŠ äº†ä¸€ä¸ªæ­£åˆ™ä¿®æ”¹ï¼Œå»é™¤å¤§éƒ¨åˆ†çš„å·¥ä½œäººå‘˜çš„ä¿¡æ¯ã€‚
new_lyric1 = re.sub(r&#39;[\d:.[\]]&#39;,&#39;&#39;,lyric) #å»é™¤æ—¶é—´
new_lyric = re.sub(r&#39;\s?.*[(byï¼š)ï¼š:ã€ã€‘@]+.*\n?&#39;,&#39;&#39;,new_lyric1) #å»é™¤å·¥ä½œäººå‘˜

å› ä¸ºæ‰“å°æ­Œè¯å¯ä»¥å‘ç°ï¼Œæœ‰å¤§é‡çš„å·¥ä½œäººå‘˜ä¿¡æ¯ï¼ŒåŒºåˆ«äºæ­Œè¯ä¿¡æ¯ï¼Œç¬¦åˆæŸç§æ¨¡å¼ï¼Œè€Œä¸”å·¥ä½œäººå‘˜ä¿¡æ¯å¯¹æ­Œè¯äº‘å±•ç¤ºå½±å“ä¹Ÿå¾ˆå¤§ã€‚

å·¥ä½œäººå‘˜çš„ä¿¡æ¯ç¤ºä¾‹å¦‚ä¸‹ï¼š
             é¼“Drums byï¼šè’äº•åä¸€
             è´æ–¯ Bass byï¼šè®¸é’§
             å‰ä»– Guitars by  è®¸é’§
             é”®ç›˜ï¼†åˆæˆå™¨ Keysï¼†Synth by è®¸é’§
             å¼¦ä¹ç¼–å†™ Strings Arranged byï¼šèƒ¡é™æˆã€è®¸é’§
             å¼¦ä¹ç›‘åˆ¶ Strings Directed byï¼šèƒ¡é™æˆ
         </div>2021-10-18</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/rZ4LbfVYHpVxdibIvO5EyLwHDicm3R8EkjeibXTv91kMGP7hkNFbZ7NibPjEibVqRO2rXWkTLB96jNUM70RhuyD15GA/132" width="30px"><span>Siyige2727</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Traceback (most recent call last):
  File &quot;&lt;input&gt;&quot;, line 58, in &lt;module&gt;
  File &quot;&lt;input&gt;&quot;, line 17, in get_song_name
KeyError: &#39;result&#39;</div>2021-08-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/51/86/b5fd8dd8.jpg" width="30px"><span>å»ºå¼º</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div># ç½‘æ˜“äº‘æ­Œå•è¯äº‘å›¾
import requests
import sys
import re
import os
from wordcloud import WordCloud
import matplotlib.pyplot as plt
import jieba
from PIL import Image
import numpy as np
from lxml import etree
 
headers = {
       &#39;Referer&#39;  :&#39;http:&#47;&#47;music.163.com&#39;,
       &#39;Host&#39;     :&#39;music.163.com&#39;,
       &#39;Accept&#39;   :&#39;text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;webp,image&#47;apng,*&#47;*;q=0.8&#39;,
       &#39;User-Agent&#39;:&#39;Chrome&#47;10&#39;
    }

# è·å–æ­Œå•
def get_songlist(artist_id):
#BEGIN
    page_url = &#39;https:&#47;&#47;music.163.com&#47;playlist?id=&#39; + artist_id
    # è·å–ç½‘é¡µHTML
    res = requests.request(&#39;GET&#39;, page_url, headers=headers)

    # ç”¨XPathä»ç½‘é¡µä¸­è§£ææ­Œå•
    html = etree.HTML(res.text)
    href_xpath = &quot;&#47;&#47;*[@id=&#39;song-list-pre-cache&#39;]&#47;&#47;a&#47;@href&quot;
    name_xpath = &quot;&#47;&#47;*[@id=&#39;song-list-pre-cache&#39;]&#47;&#47;a&#47;text()&quot;
    hrefs = html.xpath(href_xpath)
    names = html.xpath(name_xpath)

    # è·å–æ­Œæ›²çš„IDï¼Œæ­Œæ›²åç§°
    song_ids = []
    song_names = []
    for href, name in zip(hrefs, names):
       song_ids.append(href[9:])
       song_names.append(name)
       
    return song_ids, song_names
#END

# åˆ¶ä½œè¯äº‘å›¾
def create_word_cloud(f):
#BEGIN
    print(&#39;æ ¹æ®è¯é¢‘ï¼Œå¼€å§‹ç”Ÿæˆè¯äº‘!&#39;)
    #f = remove_stop_words(f)
    cut_text = &quot; &quot;.join(jieba.cut(f,cut_all=False, HMM=True))
    wc = WordCloud(
       font_path=&quot;G:&#47;å¼€å‘å®éªŒåŒº&#47;å®éªŒæ•°æ®&#47;æ¯›ä¸æ˜“æ­Œå•è¯äº‘å›¾&#47;simhei.ttf&quot;,
       max_words=100,
       width=2000,
       height=1200,
    )
    print(cut_text)
    wordcloud = wc.generate(cut_text)
    # å†™è¯äº‘å›¾ç‰‡
    wordcloud.to_file(&quot;G:&#47;å¼€å‘å®éªŒåŒº&#47;å®éªŒæ•°æ®&#47;æ¯›ä¸æ˜“æ­Œå•è¯äº‘å›¾&#47;wordcloud.jpg&quot;)
    # æ˜¾ç¤ºè¯äº‘æ–‡ä»¶
    plt.imshow(wordcloud)
    plt.axis(&quot;off&quot;)
    plt.show()
#END

# ä¸»ç¨‹åº
def main():
#BEGIN
    song_ids, song_names = get_songlist(&#39;753776811&#39;)

    all_song_name = &#39;&#39;
    for song_id, song_name in zip(song_ids, song_names):
        all_song_name = all_song_name + &#39; &#39; + song_name

    create_word_cloud(all_song_name)
    
#END

if __name__ == &#39;__main__&#39;:
    main()
</div>2020-03-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/d9/84/f1b10393.jpg" width="30px"><span>è¿›å‡»çš„çŸ®å­</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ä¸é”™,è™½ç„¶è¿™äº›çŸ¥è¯†ç‚¹éƒ½ä¼š,ä½†å¤ç”¨è¾ƒå¼º,æ”¹ä¸ªidå°±æ˜¯å¦ä¸€ä¸ªæ­Œæ‰‹äº†,åªæ˜¯stopwordsä¹Ÿéœ€è¦æ”¹å˜</div>2020-10-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/33/07/8f351609.jpg" width="30px"><span>JustDoDT</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>äº¤ä½œä¸šï¼š
https:&#47;&#47;github.com&#47;LearningChanging&#47;Data-analysis-in-action&#47;tree&#47;master&#47;38-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A6%82%E4%BD%95%E7%BB%99%E6%AF%9B%E4%B8%8D%E6%98%93%E7%9A%84%E6%AD%8C%E6%9B%B2%E5%81%9A%E8%AF%8D%E4%BA%91%E5%B1%95%E7%A4%BA%EF%BC%9F</div>2020-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/94/6d/5cd6e8c7.jpg" width="30px"><span>å¼ è´º</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æµ…æ˜¾æ˜“æ‡‚</div>2020-03-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8e/0a/31ec5392.jpg" width="30px"><span>æŒ å¤´ä¾ </span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸« é€™å€‹æ­Œæ›²é é¢ä¸æ˜¯åŠ¨æ€åŠ è½½çš„å—ï¼Œæ€ä¹ˆå¯ä»¥ç›´æ¥ç”¨requestså‘€</div>2019-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/8e/0a/31ec5392.jpg" width="30px"><span>æŒ å¤´ä¾ </span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆå¯ä»¥ä»‹ç»ä¸€ä¸‹jiebaä¸­HMMå‚æ•°çš„ä½œç”¨å—</div>2019-05-23</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJAeZ2VCia2y3bW9N7EMfgBqX8WClXUydwaXDPcK7Bm3XaMnMKx7q5ffA0UuTeJmEusxtQAibf8djCA/132" width="30px"><span>ä¸Šå®˜</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Traceback (most recent call last):
  File &quot;&#47;Users&#47;shangguan&#47;PycharmProjects&#47;LicenseRecognition&#47;geci.py&quot;, line 85, in &lt;module&gt;
    [song_ids, song_names] = get_songs(artist_id)
TypeError: &#39;NoneType&#39; object is not iterable

ä¸ºä»€ä¹ˆæŠ¥nonetypeï¼Ÿ
</div>2019-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7d/05/4bad0c7c.jpg" width="30px"><span>Geek_hve78z</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>é¢˜ç›®ç†è§£ï¼ˆ1ï¼‰ï¼šå°†æ­Œå•çš„æ­Œæ›²åç§°ä½œè¯äº‘å±•ç¤º
-------
import requests
import jieba
from wordcloud import WordCloud
import matplotlib.pyplot as plt

headers = {
       &#39;Referer&#39;  :&#39;http:&#47;&#47;music.163.com&#39;,
       &#39;Host&#39;     :&#39;music.163.com&#39;,
       &#39;Accept&#39;   :&#39;text&#47;html,application&#47;xhtml+xml,application&#47;xml;q=0.9,image&#47;webp,image&#47;apng,*&#47;*;q=0.8&#39;,
       &#39;User-Agent&#39;:&#39;Chrome&#47;10&#39;
    }

#å¾—åˆ°æŒ‡å®šæ­Œå•é¡µé¢çš„ å…¨éƒ¨æ­Œæ›²çš„æ­Œæ›²IDï¼Œæ­Œæ›²å
def get_songs(playlist_id):
    page_url=&#39;http:&#47;&#47;music.163.com&#47;api&#47;playlist&#47;detail?id=&#39;+playlist_id
    #è·å–ç½‘é¡µHTML
    res=requests.request(&#39;GET&#39;,page_url,headers=headers)
    # è¾“å‡ºæ­Œå•ä¸­æ­Œæ›²æ•°é‡
    print(len(res.json()[&#39;result&#39;][&#39;tracks&#39;]))

    # è®¾ç½®çƒ­é—¨æ­Œæ›²çš„IDï¼Œæ­Œæ›²åç§°
    song_ids=[]
    song_names=[]

    for i in range(len(res.json()[&#39;result&#39;][&#39;tracks&#39;])):
        names=res.json()[&#39;result&#39;][&#39;tracks&#39;][i][&#39;name&#39;]
        ids=res.json()[&#39;result&#39;][&#39;tracks&#39;][i][&#39;id&#39;]
        song_names.append(names)
        song_ids.append(ids)
        print(names,&#39; &#39;,ids)
    return song_names,song_ids

#å»æ‰åœç”¨è¯
def remove_stop_words(f):
    stop_words=[&#39;Demo&#39;,&#39;ä¼´å¥&#39;,&#39;ç‰ˆ&#39;,&#39;å¿…èƒœå®¢&#39;,&#39;Bonus&#39;,&#39;Track&#39;]
    for stop_word in stop_words:
        f=f.replace(stop_word,&#39;&#39;)
    return f

#ç”Ÿæˆè¯äº‘
def create_word_cloud(f):
    print(&#39;æ ¹æ®è¯é¢‘ ç”Ÿæˆè¯äº‘&#39;)
    f=remove_stop_words(f)
    cut_text=&#39; &#39;.join(jieba.cut(f,cut_all=False,HMM=True))
    wc = WordCloud(
       font_path=&quot;.&#47;wc.ttf&quot;,
       max_words=100,
       width=2000,
       height=1200,
    )
    print(cut_text)
    wordcloud = wc.generate(cut_text)
    # å†™è¯äº‘å›¾ç‰‡
    wordcloud.to_file(&quot;wordcloud.jpg&quot;)
    # æ˜¾ç¤ºè¯äº‘æ–‡ä»¶
    plt.imshow(wordcloud)
    plt.axis(&quot;off&quot;)
    plt.show()
    

# è®¾ç½®æ­Œå•IDï¼Œã€æ¯›ä¸æ˜“ | ä¸å–„è¨€è¾çš„æ·±æƒ…ã€‘ä¸º753776811
playlist_id=&#39;753776811&#39;
[song_names,song_ids]=get_songs(playlist_id)

# å°†åˆ—è¡¨song_namesç”Ÿæˆå­—ç¬¦ä¸²
song_names_text=&quot; &quot;.join(song_names)

#æ ¹æ®è¯é¢‘ï¼Œç”Ÿæˆè¯äº‘
create_word_cloud(song_names_text)</div>2019-03-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/db/21/26ff0240.jpg" width="30px"><span>ä¸Šå–„è‹¥æ°´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Traceback (most recent call last):
  File &quot;C:\Program Files\Python37\lib\site-packages\IPython\core\interactiveshell.py&quot;, line 3267, in run_code
    exec(code_obj, self.user_global_ns, self.user_ns)
  File &quot;&lt;ipython-input-2-d883ef070907&gt;&quot;, line 1, in &lt;module&gt;
è¿è¡ŒæŠ¥é”™ï¼Œè¯·é—®æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</div>2019-03-11</li><br/>
</ul>