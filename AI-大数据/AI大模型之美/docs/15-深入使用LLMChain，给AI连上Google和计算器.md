ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ–‡æµ©ã€‚

ä¸Šä¸€è®²é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†æ€ä¹ˆé€šè¿‡LangChainè¿™ä¸ªPythonåŒ…ï¼Œé“¾å¼åœ°è°ƒç”¨OpenAIçš„APIã€‚é€šè¿‡é“¾å¼è°ƒç”¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªéœ€è¦è¯¢é—®AIå¤šè½®æ‰èƒ½è§£å†³çš„é—®é¢˜å°è£…èµ·æ¥ï¼ŒæŠŠä¸€ä¸ªé€šè¿‡è‡ªç„¶è¯­è¨€å¤šè½®è°ƒç”¨æ‰èƒ½è§£å†³çš„é—®é¢˜ï¼Œå˜æˆäº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚

ä¸è¿‡ï¼ŒLangChainèƒ½å¤Ÿå¸®åˆ°æˆ‘ä»¬çš„è¿œä¸æ­¢è¿™ä¸€ç‚¹ã€‚å‰ä¸€é˜µï¼ŒChatGPTå‘å¸ƒäº† [Plugins](https://openai.com/blog/chatgpt-plugins) è¿™ä¸ªæ’ä»¶æœºåˆ¶ã€‚é€šè¿‡Pluginsï¼ŒChatGPTå¯ä»¥æµè§ˆæ•´ä¸ªäº’è”ç½‘ï¼Œè¿˜å¯ä»¥æ¥ä¸ŠWolframè¿™æ ·çš„ç§‘å­¦è®¡ç®—å·¥å…·ï¼Œèƒ½å¤Ÿå®ç°å¾ˆå¤šåŸå…ˆå…‰é å¤§è¯­è¨€æ¨¡å‹è§£å†³ä¸å¥½çš„é—®é¢˜ã€‚ä¸è¿‡ï¼Œè¿™ä¸ªåŠŸèƒ½ç›®å‰è¿˜æ˜¯å¤„äºwait listçš„çŠ¶æ€ï¼Œæˆ‘ä¹Ÿè¿˜æ²¡æœ‰æ‹¿åˆ°æƒé™ã€‚

ä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡LangChainä¹Ÿèƒ½å®ç°è¿™äº›ç±»ä¼¼çš„åŠŸèƒ½ã€‚ä»Šå¤©è¿™ä¸€è®²ï¼Œæˆ‘ä»¬å°±ç»§ç»­æ·±å…¥æŒ–æ˜ä¸€ä¸‹Langchainï¼Œçœ‹çœ‹å®ƒæ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜ã€‚

## è§£å†³AIæ•°ç†èƒ½åŠ›çš„éš¾é¢˜

å¾ˆå¤šäººå‘ç°ï¼Œè™½ç„¶ChatGPTå›ç­”å„ç§é—®é¢˜çš„æ—¶å€™éƒ½åƒæ¨¡åƒæ ·çš„ï¼Œä½†æ˜¯ä¸€åˆ°è®¡ç®—ä¸‰ä½æ•°ä¹˜æ³•çš„æ—¶å€™å°±éœ²é¦…å„¿äº†ã€‚æ„Ÿè§‰å®ƒåªæ˜¯å¿«é€Ÿä¼°è®¡äº†ä¸€ä¸ªæ•°å­—ï¼Œè€Œä¸æ˜¯çœŸçš„å‡†ç¡®è®¡ç®—äº†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬è®©OpenAIå¸®æˆ‘ä»¬è®¡ç®—ä¸€ä¸‹ 352 x 493 ç­‰äºå¤šå°‘ï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒç®—å¾—å¤§å·®ä¸å·®ï¼Œä½†è¿˜æ˜¯ç®—é”™äº†ã€‚è¿™å°±å¾ˆå°´å°¬ï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„æƒ³è¦è®©å®ƒæ¥æ‹…ä»»ä¸€ä¸ªå°å­¦æ•°å­¦çš„åŠ©æ•™ï¼Œæ€»æ˜¯ç»™å‡ºé”™è¯¯çš„ç­”æ¡ˆä¹Ÿä¸æ˜¯ä¸ªäº‹å„¿ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ22ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/56/b3/29c814af.jpg" width="30px"><span>å›ä¸º</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆä½ å¥½ï¼Œchainå’Œpipeçš„åŸç†è¿˜æ˜¯æ¯”è¾ƒåƒï¼Œå­¦å®Œè¿™è®²æ‰“å¼€äº†æˆ‘å¯¹ChatGPTå¯åº”ç”¨ç©ºé—´ã€‚å®é™…åº”ç”¨ä¸­æœ€å¤§çš„é—®é¢˜è¿˜æ˜¯api çš„å“åº”é€Ÿåº¦å’Œæ¥å£é™æµã€‚
è¯·é—®è€å¸ˆæœ‰æ²¡æœ‰æ›´å¥½çš„è§£å†³åŠæ³•ï¼Ÿç›®å‰æˆ‘çŸ¥é“çš„æ˜¯å¤šä¸ªè´¦å·è´Ÿè½½å‡è¡¡å’Œè°ƒç”¨å®¹é”™é‡è¯•ã€‚</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/39/e6/1effba61.jpg" width="30px"><span>hhh</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æµ©å“¥ï¼Œæ–‡ç¨¿ä¸­ä»£ç ã€ç±»åº“éƒ½æ˜¯pythonè„šæ­¥çš„ï¼Œæœ‰javaç›¸å…³çš„ç”Ÿæ€æ¨è¿›å—ï¼Ÿ</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/56/65/22a37a8e.jpg" width="30px"><span>Yezhiwei</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¹‹å‰è‡ªå·±è¯•è¿‡ LangFlow éå¸¸ç®€å•ï¼ŒæŠŠæ­¥éª¤è®°å½•ä¸‹æ¥äº†ï¼Œéš¾é“åœ¨ç½‘ç»œï¼Œå¦‚æœç½‘ç»œç¨³å®šï¼Œå¾ˆå¿«çœ‹åˆ°æ•ˆæœ 
https:&#47;&#47;mp.weixin.qq.com&#47;s&#47;jjNkkoUu-q8Yb1J6_u6WGg</div>2023-04-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg" width="30px"><span>é‡‘î„</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æ€ä¹ˆè®©æ¨¡æ¿æ›´é€šç”¨å‘¢ï¼Ÿæ¯”å¦‚é‚£ä¸ªç®—æœ¯é—®é¢˜ï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯ä¸ªè®¡ç®—é—®é¢˜ï¼Œæ„Ÿè§‰æ¨¡æ¿åªèƒ½è§£å†³è°ƒç”¨é—®é¢˜.</div>2023-04-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/36/9f/5e/791d0f5e.jpg" width="30px"><span>è‡ªç„¶å·çš„Neil</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>&quot;url&quot;: &quot;https:&#47;&#47;www.google.com&#47;search?q=&quot; + question.replace(&quot; &quot;, &quot;+&quot;)
è¿™ä¸€æ®µä»£ç ä¸ºä»€ä¹ˆéœ€è¦åŠ ä¸Š+ question.replace(&quot; &quot;, &quot;+&quot;)
æˆ‘çœ‹äº†langchainçš„æ‰‹å†Œä¹Ÿæ˜¯è¿™ä¹ˆå†™çš„ï¼Œ
å¦‚æœè¾“å…¥æ˜¯&#39;query&#39;: &#39;What are the Three (3) biggest countries, and their respective sizes?&#39;,
è¾“å‡ºä¼šå˜æˆ&#39;url&#39;: &#39;https:&#47;&#47;www.google.com&#47;search?q=What+are+the+Three+(3)+biggest+countries,+and+their+respective+sizes?&#39;
ä¸å¤ªç†è§£è¿™æ ·åšçš„æ„ä¹‰æ˜¯å•¥</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/ca/58/6fe1854c.jpg" width="30px"><span>é‡‘î„</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ä¸ªç¡®å®ä¸é”™ï¼Œæˆ‘ä¸€ç›´åœ¨æ€è€ƒå¦‚ä½•è®©chatgptä¼˜é›…çš„å®Œæˆæœ€åä¸€æ­¥ï¼Œlangchainè¿™ä¸ªå·¥å…·èƒ½å¾ˆå¤§ç¨‹åº¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ä¸ªå·¥å…·æ”¯æŒæ¸…åçš„é‚£ä¸ªå¼€æºå¤§æ¨¡å‹å—ï¼Ÿ</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/69/92/69c2c135.jpg" width="30px"><span>åšç§¯è–„å‘</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>from langchain.chains import LLMRequestsChain

template = &quot;&quot;&quot;åœ¨ &gt;&gt;&gt; å’Œ &lt;&lt;&lt; ç›´æ¥æ˜¯æ¥è‡ªGoogleçš„åŸå§‹æœç´¢ç»“æœ.
è¯·æŠŠå¯¹äºé—®é¢˜ &#39;{query}&#39; çš„ç­”æ¡ˆä»é‡Œé¢æå–å‡ºæ¥ï¼Œå¦‚æœé‡Œé¢æ²¡æœ‰ç›¸å…³ä¿¡æ¯çš„è¯å°±è¯´ &quot;æ‰¾ä¸åˆ°&quot;
è¯·ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ï¼š
Extracted:&lt;answer or &quot;æ‰¾ä¸åˆ°&quot;&gt;
&gt;&gt;&gt; {requests_result} &lt;&lt;&lt;
Extracted:&quot;&quot;&quot;

PROMPT = PromptTemplate(
    input_variables=[&quot;query&quot;, &quot;requests_result&quot;],
    template=template,
)
requests_chain = LLMRequestsChain(llm_chain = LLMChain(llm=OpenAI(temperature=0), prompt=PROMPT),verbose=True)
question = &quot;ä»Šå¤©ä¸Šæµ·çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ&quot;
inputs = {
    &quot;query&quot;: question,
    &quot;url&quot;: &quot;https:&#47;&#47;www.google.com&#47;search?q=&quot; + question.replace(&quot; &quot;, &quot;+&quot;)
}
result=requests_chain(inputs)
print(result)
print(result[&#39;output&#39;])

è€å¸ˆï¼Œæˆ‘æµ‹è¯•è¿™æ®µä»£ç ï¼Œè¿”å›å€¼æ˜¯æ‰¾ä¸åˆ° ï¼Œæ˜¯ä»€ä¹ˆåŸå› å“ˆ
</div>2023-05-11</li><br/><li><img src="" width="30px"><span>Geek_9691fb</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ecommerce_faq.txt åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°</div>2023-05-06</li><br/><li><img src="" width="30px"><span>æ²ç‘Lynn</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ç”¨LLMRequestsChainæƒ³è°·æ­Œæé—®ï¼Œæ€»æ˜¯å›ç­”æ‰¾ä¸åˆ°ï¼›ç„¶åç”¨requestsç›´æ¥å†™äº†ä¸ªç¨‹åºè°ƒgoogle é¡µé¢ï¼Œå‘ç°å¯èƒ½è¢«æ‹¦æˆªã€‚ç„¶åé—®é¢˜äº†GPTï¼Œå¾—åˆ°å›ç­”
â€œè¿™æ®µä»£ç ä½¿ç”¨ requests æ¨¡å—å‘ Google æœç´¢å‘å‡º GET è¯·æ±‚æ¥è·å–æŒ‡å®šé—®é¢˜çš„æœç´¢ç»“æœé¡µé¢çš„ HTML ä»£ç ã€‚ç„¶åä½¿ç”¨ print() å‡½æ•°å°† HTML ä»£ç æ‰“å°å‡ºæ¥ã€‚
ä½†æ˜¯ä½¿ç”¨è¯¥æ–¹æ³•è·å– Google æœç´¢ç»“æœå¯èƒ½ä¼šè¢« Google è¯†åˆ«ä¸ºæœºå™¨è¡Œä¸ºï¼Œå¹¶è¢«é˜»æ‹¦ã€‚å»ºè®®ä½¿ç”¨ Google æä¾›çš„ API æ¥è·å–æœç´¢ç»“æœã€‚â€ è®°å½•ä¸€ä¸‹ï¼Œçœ‹çœ‹å¤§å®¶æ˜¯ä¸æ˜¯æœ‰åŒæ ·çš„é—®é¢˜å§ã€‚</div>2023-04-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4b/b4/4768f34b.jpg" width="30px"><span>æ—­</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœæ˜¯æä¾›æœåŠ¡çš„è¯ï¼Œé“¾å¼è®¡ç®—ä¸­é—´æ­¥éª¤çš„å®¹é”™æ€§æœ‰æ²¡æœ‰å¥½åŠæ³•ä¿è¯ï¼Ÿ</div>2023-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/ed/08/fe7910e2.jpg" width="30px"><span>æ…•æ«</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>RequestsChainæ€ä¹ˆåˆ¤æ–­æ˜¯é—®é¢˜æ˜¯å¦éœ€è¦è°ƒç”¨å¤–éƒ¨apiï¼Ÿ</div>2023-04-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/cc/da91bd47.jpg" width="30px"><span>å‡æœ›</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>RAyH4c
å¾®åš
ç»™å¼€å‘å’Œä½¿ç”¨LLMåº”ç”¨çš„å„ä½æä¸ªé†’ï¼Œå„è·¯èŠå¤©
æœºå™¨äººå’ŒChatXXxåº”ç”¨éƒ½ä½¿ç”¨çš„LangChainåº“ï¼Œ
å¯¹è¾“å…¥çš„æç¤ºè¯åŒ…äº†ä¸€å±‚execå’Œevalå‡½æ•°ï¼Œå¯¼è‡´
æ‰€æœ‰æç¤ºè¯éƒ½èƒ½è¿œç¨‹æ‰§è¡Œä»»æ„pythonä»£ç ...

è€å¸ˆå¥½ï¼Œçœ‹å¾®åšæœ‰äººè¯´è¿™ä¸ªé—®é¢˜ï¼Œè¯·é—®å½±å“å¤§å—ï¼Ÿ</div>2023-04-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/11/fa/e0dcc1bf.jpg" width="30px"><span>æ¦•</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆå¥½ï¼Œé€šè¿‡langchainç­‰æ­¦å™¨åº“ç¡®å®ç»™äº†æˆ‘ä»¬ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å¾ˆå¤§çš„æƒ³è±¡ç©ºé—´ï¼Œä½†å‰æå¾—æœ‰å¤§è¯­è¨€æ¨¡å‹æ”¯æŒã€‚å¯¹äºåœ°åŒºé™åˆ¶è®¿é—®çš„é—®é¢˜ï¼Œé‚£å¯¹äºå›½å†…çš„ä¸ªäººæˆ–ä¼ä¸šè¦çœŸæ­£è½åœ°è¿™äº›èƒ½åŠ›ï¼Œç›®å‰æ˜¯é€šè¿‡å“ªäº›æ–¹å¼æ¥åšå‘¢ï¼Ÿè°¢è°¢</div>2023-04-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/36/95/50/01199ae9.jpg" width="30px"><span>ä¸€å¶</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆè¿™æ®µä»£ç é‡Œé¢:


from langchain.embeddings.openai import OpenAIEmbeddings
from langchain.vectorstores import FAISS
from langchain.text_splitter import SpacyTextSplitter
from langchain import OpenAI, VectorDBQA
from langchain.document_loaders import TextLoader

llm = OpenAI(temperature=0)
loader = TextLoader(&#39;.&#47;data&#47;ecommerce_faq.txt&#39;)
documents = loader.load()
text_splitter = SpacyTextSplitter(chunk_size=256, pipeline=&quot;zh_core_web_sm&quot;)
texts = text_splitter.split_documents(documents)

embeddings = OpenAIEmbeddings()
docsearch = FAISS.from_documents(texts, embeddings)

faq_chain = VectorDBQA.from_chain_type(llm=llm, vectorstore=docsearch, verbose=True)

å¯ä»¥æŠŠç´¢å¼•ç»™ä¿å­˜åˆ°æ•°æ®åº“å—? ä»¥åå†ç»§ç»­ä½¿ç”¨?</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/36/95/50/01199ae9.jpg" width="30px"><span>ä¸€å¶</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆ,æˆ‘æœ‰ä¸ªé—®é¢˜å¯ä»¥è§£ç­”ä¸€ä¸‹å—?æˆ‘ä»¬ç›®å‰å¼€å‘çš„ä¸€æ¬¾app,å°±æœ‰å®¢æˆ·é—®åˆ°ç±»ä¼¼çš„é—®é¢˜,æ¯”å¦‚ä»Šå¤©çš„æ—¶é—´,Chatgptå°±æ²¡åŠæ³•å®Œæ•´çš„å›ç­”,æˆ‘çœ‹åˆ°ä¸Šé¢çš„ç¼–è¯‘Pythonçš„æ–¹å¼ä¼¼ä¹å¯è¡Œ,ä½†æ˜¯ä¼¼ä¹ç”¨æˆ·çš„é—®é¢˜åƒå¥‡ç™¾æ€ª,æ¯”å¦‚æœ‰çš„åˆä¼šé—®åˆ°æ•°å­¦...è€Œæœ‰çš„llmç›´æ¥å°±èƒ½è§£å†³,åœ¨è¿™ç§æƒ…å†µä¸‹,æˆ‘è¦æ€ä¹ˆå®ç°ä¼šæ›´å¥½?</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ec/13/49e98289.jpg" width="30px"><span>neohope</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ChatGPTè¢«ä½œä¸ºä¸€ç§èƒ½åŠ›å»ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯X+AIæ¨¡å¼ï¼Œç¡®å®æœ‰ä¸å°çš„æƒ³è±¡ç©ºé—´ã€‚
ä½†åè¿‡æ¥ï¼Œå¦‚æœ‰ä¸€ä¸ªå¤§æ¨¡å‹ï¼Œèƒ½å¿«é€Ÿæ•´åˆå„ç§å¤–éƒ¨èƒ½åŠ›ï¼Œä»X+AIï¼Œå˜æˆAI+Xã€Yã€Zï¼Œå¾ˆå¯èƒ½ä¼šæˆä¸ºä¸‹ä¸€ä»£äº’è”ç½‘çš„å…¥å£ï¼Œå¹¶ä»å„ç§ç»´åº¦ç»™äººç±»å¸¦æ¥å…¨æ–°ä½“éªŒï¼ŒæœŸå¾…è¿™ä¸ªæ—¶ä»£èƒ½å°½å¿«åˆ°æ¥ã€‚</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ce/30/eb380376.jpg" width="30px"><span>æœˆç‹¼è‘±è‘±</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è·‘ä»£ç çš„æ—¶å€™å‘ç°UserWarning: `VectorDBQA` is deprecated - please use `from langchain.chains import RetrievalQA`

ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š

from langchain.chains import RetrievalQA

qa = RetrievalQA.from_chain_type(llm=OpenAI(temperature=0), chain_type=&quot;stuff&quot;, retriever=docsearch.as_retriever())
question = &quot;è¯·é—®ä½ ä»¬çš„è´§ï¼Œèƒ½é€åˆ°ä¸‰äºšå—ï¼Ÿå¤§æ¦‚éœ€è¦å‡ å¤©ï¼Ÿ&quot;
result = qa.run(question)

print(result)

å‚è€ƒæ–‡æ¡£ï¼šhttps:&#47;&#47;www.langchain.com.cn&#47;modules&#47;chains&#47;index_examples&#47;vector_db_qa</div>2023-07-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/3c/c5/92017a7b.jpg" width="30px"><span>ç¡•æœé˜³å…‰</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>btw VectorDBQA å·²ç»è¢«deprecated and replaced by RetrivalQA
https:&#47;&#47;python.langchain.com&#47;docs&#47;modules&#47;chains&#47;popular&#47;vector_db_qa</div>2023-06-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/83/19/0a3fe8c1.jpg" width="30px"><span>Evan</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>RequestsChain éå¸¸æœ‰æ•ˆçš„ï¼Œèƒ½è°ƒç”¨å¤–éƒ¨æ¥å£çš„</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/82/f1/6f8bf660.jpg" width="30px"><span>è’¸å‘æ°ä½œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ„Ÿè§‰åˆ°äº†AIç¡®å®åœ¨è“¬å‹ƒå‘å±•ï¼Œä¸€å¤§å †ç±»åº“ï¼Œç›®å‰è¿˜åœ¨è“„åŠ¿å¾…å‘</div>2024-01-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/37/a5/56/b3cf71a9.jpg" width="30px"><span>Penguin Shi</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>&quot;é€šè¿‡ VectorDBQA æ¥å®ç°å…ˆæœç´¢å†å›å¤çš„èƒ½åŠ›&quot;åé¢çš„ç¬¬ä¸€æ®µä»£ç ï¼Œç”±äºlangchain RetrievalQAæ¨¡å—ä½¿ç”¨å˜åŒ–ï¼Œè°ƒè¯•å¾ˆä¹…ï¼Œæ‰å¯è¿è¡Œã€‚å¯è¿è¡Œçš„ä»£ç å¦‚ä¸‹ï¼Œä¾›å‚è€ƒï¼š
from langchain.llms import OpenAI
from langchain import FAISS
from langchain.embeddings import OpenAIEmbeddings
from langchain.text_splitter import SpacyTextSplitter

from langchain.chains import RetrievalQA
from langchain.document_loaders import TextLoader
from langchain.vectorstores.base import VectorStoreRetriever


llm = OpenAI(temperature=0)
loader = TextLoader(&#39;.&#47;data&#47;ecommerce_faq.txt&#39;)
documents = loader.load()
text_splitter = SpacyTextSplitter(chunk_size=256, pipeline=&quot;zh_core_web_sm&quot;)
texts = text_splitter.split_documents(documents)

embeddings = OpenAIEmbeddings()

docsearch = FAISS.from_documents(texts, embeddings)
retriever = VectorStoreRetriever(vectorstore=docsearch)
faq_chain = RetrievalQA.from_llm(llm=llm, retriever=retriever, verbose=True)</div>2023-08-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/f6/f3/69fdc9c8.jpg" width="30px"><span>zgxx</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>final_result = final_chain.run(inputs)

inputsæ˜¯å“ªé‡Œæ¥çš„</div>2023-05-24</li><br/>
</ul>