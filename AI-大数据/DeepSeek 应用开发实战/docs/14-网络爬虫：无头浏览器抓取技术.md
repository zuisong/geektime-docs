ä½ å¥½ï¼Œæˆ‘æ˜¯é‚¢äº‘é˜³ã€‚

ç»è¿‡å‰ä¸‰èŠ‚è¯¾å¯¹æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰æŠ€æœ¯çš„ç³»ç»Ÿå­¦ä¹ ï¼Œè¿˜æœ‰æ‰‹å†™MCP Serverå’ŒClientçš„å®è·µï¼Œç›¸ä¿¡ä½ æ·±å…¥æŒæ¡äº†æ¨¡å‹ä¸å¤–éƒ¨ç³»ç»Ÿé€šä¿¡çš„æ ¸å¿ƒæœºåˆ¶ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ— è®ºæ˜¯MCPåè®®è¿˜æ˜¯å½“ä¸‹æµè¡Œçš„Agentã€Function CallingæŠ€æœ¯ï¼Œæœ¬è´¨ä¸Šéƒ½åœ¨æ„å»ºå¤§æ¨¡å‹ä¸çœŸå®ä¸–ç•Œçš„äº¤äº’æ¡¥æ¢â€”â€”è¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬æ‰“é€ æ±‚èŒåŠ©æ‰‹é¡¹ç›®æ‰€éœ€çš„å…³é”®èƒ½åŠ›ã€‚

ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°†æ­£å¼å¼€å¯æ±‚èŒåŠ©æ‰‹é¡¹ç›®çš„å®æˆ˜å¼€å‘ã€‚

## æ•°æ®æºå¦‚ä½•è·å–

åœ¨ç€æ‰‹ç¼–ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè¿›è¡Œå…³é”®çš„éœ€æ±‚æ‹†è§£ã€‚

è¿™ä¸ªé¡¹ç›®éœ€è¦å®ç°ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ï¼š

1.å¯ä»¥æ ¹æ®æ‹›è˜ç½‘ç«™ä¸Šçš„å²—ä½åˆ—è¡¨ï¼Œä½¿ç”¨è‡ªå·±çš„ç®€å†åŒ¹é…åˆé€‚çš„å·¥ä½œã€‚

2.å¯ä»¥æ ¹æ®å²—ä½éœ€æ±‚è‡ªåŠ¨è°ƒæ•´æˆ‘ä»¬çš„ç®€å†ã€‚

å…¶ä¸­ï¼Œå²—ä½æ•°æ®æ˜¯æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®çš„é‡è¦æ•°æ®æºã€‚é‚£å¦‚ä½•è·å–åˆ°å²—ä½æ•°æ®å‘¢ï¼Ÿ

åé¢è¿™å‡ ç§æ–¹æ³•æ¯”è¾ƒå¸¸ç”¨ã€‚

ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ç½‘ç«™æä¾›çš„ OpenAPIã€‚é€šå¸¸æŸäº›ç½‘ç«™ä¼šå¯¹å¤–æä¾› OpenAPI çš„ä»˜è´¹è°ƒç”¨æœåŠ¡ï¼Œä¾‹å¦‚é«˜å¾·åœ°å›¾ç­‰ç­‰ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•æ˜¯æœ€ç®€å•ç›´æ¥çš„ã€‚

ç¬¬äºŒç§æ˜¯åˆ©ç”¨ä¼ ç»Ÿçˆ¬è™«æŠ€æœ¯ã€‚åœ¨ä¼ ç»Ÿçˆ¬è™«å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨requests+BeautifulSoupç»„åˆç›´æ¥æŠ“å–ç½‘é¡µHTMLå†…å®¹ã€‚ä¾‹å¦‚é€šè¿‡Pythonå‘é€HTTPè¯·æ±‚è·å–é¡µé¢æºç ï¼Œå†ç”¨XPathæˆ–CSSé€‰æ‹©å™¨è§£ææ•°æ®ã€‚

å½“ç„¶åœ¨ MCP å®˜æ–¹æä¾›çš„ MCP Server ä¸­ï¼Œä¹Ÿæœ‰ä¸€ä¸ª Fetch MCP Serverï¼Œå¯ä»¥ç›´æ¥å‘å…¶æä¾›ç½‘ç«™çš„ URLï¼Œè¯¥ Server å°±å¯ä»¥ç›´æ¥è§£æç½‘ç«™å†…å®¹ã€‚

ä¸è¿‡è¿™ç§æ–¹å¼çœ‹ä¼¼ç®€å•é«˜æ•ˆï¼Œä½†å¯¹äºå¾ˆå¤šä¸æƒ³å¯¹å¤–å¼€æ”¾æ•°æ®çš„ç½‘ç«™æ¥è¯´ï¼Œå´æ˜¯ä¸å¯è¡Œçš„ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›ç½‘ç«™éƒ½æ˜¯é€šè¿‡åç«¯è¯­è¨€æ¥è¯»å–æ•°æ®åº“æœåŠ¡å™¨çš„æ•°æ®ï¼Œç„¶ååŠ¨æ€åŠ è½½åˆ°å‰ç«¯ç½‘é¡µä¸Šçš„ï¼Œè€Œä¸”å¾ˆå¤šç½‘ç«™è¿˜ä¼šå¸¦æœ‰ä¸€äº›é˜²æŠ“å–æœºåˆ¶ã€‚å› æ­¤æ­¤æ—¶å¦‚æœç›´æ¥æŠ“å–ç½‘é¡µå†…å®¹ï¼Œæ˜¯å¾—ä¸åˆ°æ•°æ®çš„ã€‚

æ¯”å¦‚ï¼Œä»¥æŸæ‹›è˜ç½‘ç«™ä¸ºä¾‹ï¼Œæˆ‘ä»¬æœç´¢åˆ°èŒä½åˆ—è¡¨åï¼Œåœ¨ç½‘ç«™ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œé€‰æ‹©æŸ¥çœ‹é¡µé¢æºä»£ç ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/a1/ec/a12d266bbc95c46b6debff8ce22f36ec.png?wh=1810x553)

å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶å‡ºç°çš„ HTML é™æ€é¡µä¸­æ˜¯ä¸åŒ…å«å²—ä½ä¿¡æ¯çš„ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/f1/6c/f1d02afaa8cb2d9bb05cd53451f99c6c.png?wh=594x290)

æ­¤æ—¶ï¼Œæ¯”è¾ƒå¥½çš„å®ç°æ–¹æ¡ˆæ˜¯ä½¿ç”¨æ— å¤´æµè§ˆå™¨æŠ€æœ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™é‡Œæˆ‘ä»…ä»…æ˜¯ä»æŠ€æœ¯çš„è§’åº¦å‡ºå‘æ¥åˆ†äº«è¿™ä¸ªçŸ¥è¯†ï¼Œè·å–åˆ°çš„ä»»ä½•æ•°æ®ï¼Œéƒ½ä¸èƒ½è¿›è¡Œå•†ç”¨ã€‚

## æ— å¤´æµè§ˆå™¨å®è·µ

æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯æ— å¤´æµè§ˆå™¨ã€‚æ‰€è°“çš„æ— å¤´æµè§ˆå™¨ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰ç•Œé¢çš„æµè§ˆå™¨ã€‚æˆ‘ä»¬ä¾ç„¶å¯ä»¥å€ŸåŠ©ç«ç‹ï¼Œè°·æ­Œç­‰æµè§ˆå™¨è¿›è¡Œæ•°æ®çš„æŠ“å–ï¼Œä½†ä¸ä¼šäº§ç”Ÿç•Œé¢ã€‚

è¿™é¡¹æŠ€æœ¯æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ¡†æ¶ï¼Œå«åš Seleniumï¼Œå®ƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å’Œæµè§ˆå™¨è‡ªåŠ¨åŒ–çš„å¼€æºæ¡†æ¶ã€‚å®ƒå…è®¸å¼€å‘äººå‘˜ç¼–å†™è„šæœ¬ï¼Œå¹¶å€ŸåŠ©æµè§ˆå™¨å’Œæµè§ˆå™¨çš„é©±åŠ¨ï¼Œæ¥æ¨¡æ‹Ÿåœ¨æµè§ˆå™¨ä¸­çš„è¡Œä¸ºï¼Œè‡ªåŠ¨æ‰§è¡Œä¸€äº›åˆ—çš„æ“ä½œï¼Œæ¯”å¦‚ç‚¹å‡»æŒ‰é’®ã€å¡«å†™è¡¨å•ã€å¯¼èˆªåˆ°ä¸åŒçš„é¡µé¢ç­‰ã€‚

æˆ‘ä»¬ä»Šå¤©å°±æ¥è¯•è¯•æœ€æ–°çš„ selenium 4.x çš„ä»£ç ç¼–å†™æ–¹æ³•ã€‚

### ç¯å¢ƒå‡†å¤‡

æˆ‘ä¼šå°† Linux å’Œ Windows ç³»ç»Ÿçš„ç¯å¢ƒå‡†å¤‡éƒ½è®²ä¸€ä¸‹ï¼Œä¾¿äºä½ æŒ‰éœ€é€‰æ‹©ã€‚

**Linux**

å…ˆæ¥çœ‹ Linux ç³»ç»Ÿã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ä¸€å° ubuntu 22.04 çš„æœåŠ¡å™¨ã€‚

é¦–å…ˆåœ¨ python ç¯å¢ƒä¸­ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£… selenium SDKï¼š

```python
pip install selenium==4.23.1
```

æå®šä¹‹åï¼Œè¿˜éœ€è¦è£…å¥½æµè§ˆå™¨ä»¥åŠæµè§ˆå™¨é©±åŠ¨ã€‚ä»¥ Google Chrome æµè§ˆå™¨ä¸ºä¾‹ï¼Œå®‰è£…èµ·æ¥ä¹Ÿå¹¶ä¸å¤æ‚ã€‚

é¦–å…ˆä¸‹è½½ Chrome æµè§ˆå™¨çš„å®‰è£…åŒ…ï¼š

```python
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
```

æ¥ç€æ‰§è¡Œä¸€ä¸‹åé¢çš„å‘½ä»¤ï¼Œé˜²æ­¢å®‰è£…æµè§ˆå™¨æ—¶æ‰¾ä¸åˆ°ä¾èµ–ã€‚

```python
apt-get install -f
```

å®Œæˆåï¼Œç»§ç»­æ‰§è¡Œåé¢çš„å‘½ä»¤å®‰è£…æµè§ˆå™¨ã€‚

```python
dpkg -i google-chrome-stable_current_amd64.deb
```

å®‰è£…å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹æµè§ˆå™¨çš„ç‰ˆæœ¬ã€‚

```python
root@hi-test:~# google-chrome --version                                                                                                                           
Google Chrome 134.0.6998.35
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘çš„ç‰ˆæœ¬æ˜¯ 134.0.6998.35ï¼Œç”±äº Chrome æ›´æ–°çš„é€Ÿåº¦éå¸¸å¿«ï¼Œå½“ä½ å­¦åˆ°è¿™ä¸€èŠ‚æ—¶ï¼Œå¾ˆæœ‰å¯èƒ½ç‰ˆæœ¬å·²ç»å’Œæˆ‘ä¸ä¸€æ ·äº†ï¼Œå› æ­¤**ä¸€å®šè¦æŸ¥çœ‹è‡ªå·±çš„ç‰ˆæœ¬ï¼Œä»¥å®é™…ä¸ºå‡†ã€‚**

æ¥ä¸‹æ¥å°±æ˜¯å®‰è£… Chrome çš„é©±åŠ¨äº†ï¼Œæœ‰äº†é©±åŠ¨ï¼ŒSelenium æ‰èƒ½è°ƒç”¨æµè§ˆå™¨å»åšæ“ä½œã€‚é©±åŠ¨éœ€è¦å’Œæˆ‘ä»¬çš„æµè§ˆå™¨ä½¿ç”¨åŒä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸Šé¢è¦æ±‚ä½ æ ¹æ®è‡ªå·±å®é™…æƒ…å†µæ¥çš„åŸå› ã€‚

é©±åŠ¨ç‰ˆæœ¬å¯ä»¥é€šè¿‡è®¿é—®è¿™ä¸ªç½‘å€ [https://googlechromelabs.github.io/chrome-for-testing/](https://googlechromelabs.github.io/chrome-for-testing/)

æ¥è·å–ã€‚æ‰“å¼€åï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„ç•Œé¢ï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/62/62/62ae9b61c807098fb1c8334ce162f562.png?wh=1476x878)

å¯ä»¥çœ‹åˆ°ï¼Œæœ€æ–°çš„ç‰ˆæœ¬å°±æ˜¯æˆ‘åˆšæ‰å®‰è£…çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚æˆ‘ä»¬å°†ç½‘é¡µå¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°è¯¥ç‰ˆæœ¬çš„å®‰è£…åŒ…äº†ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/d2/e7/d22ffec2ef586285029ee2402b98c6e7.png?wh=1918x832)

ç„¶åä½¿ç”¨ wget å°† linux ç‰ˆæœ¬çš„ä¸‹è½½åˆ°æœåŠ¡å™¨ï¼Œä½¿ç”¨ unzip è§£å‹å³å¯ã€‚

```python
wget https://storage.googleapis.com/chrome-for-testing-public/134.0.6998.35/linux64/chromedriver-linux64.zip
```

**Windows**

Windows ç³»ç»Ÿå°±éå¸¸ç®€å•äº†ã€‚ç›´æ¥è®¿é—®å‰é¢æåˆ°çš„è¿™ä¸ªç½‘ç«™[Chrome for Testing availability](https://googlechromelabs.github.io/chrome-for-testing/)ï¼Œå°† win64 ç‰ˆæœ¬çš„ chrome å’Œ chromedriver éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œè§£å‹åˆ°æœ¬åœ°å³å¯ã€‚

è§£å‹å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™ä»£ç äº†ã€‚

### ç¤ºä¾‹ä»£ç ç¼–å†™

æˆ‘ä»¥åœ¨ Linux ç³»ç»Ÿä¸Šï¼Œä½¿ç”¨æ— å¤´æµè§ˆå™¨è®¿é—®é­”æ­ç¤¾åŒºé¦–é¡µä¸ºä¾‹ï¼Œæ¥ä¸ºä½ æ¼”ç¤ºã€‚å…ˆä¸Šä»£ç ï¼š

```python
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service


def test():
Â  Â  Â #å®šä½åˆ° å¯æ‰§è¡Œç¨‹åº
Â  Â  chromedriver_path="/root/chromedriver-linux64/chromedriver"
Â  Â  # '--verbose', Â log_output=sys.stdout,
Â  Â  service = Service(executable_path=chromedriver_path,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  service_args=['--headless=new','--no-sandbox',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '--disable-dev-shm-usage',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '--disable-gpu',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '--ignore-certificate-errors',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '--ignore-ssl-errors',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ])

Â  Â  options = Options()
Â  Â  options.add_argument('--headless')
Â  Â  options.add_argument('--no-sandbox')
Â  Â  options.add_argument('--disable-dev-shm-usage')
Â  Â  options.add_argument('--ignore-certificate-errors')
Â  Â  options.add_argument('--ignore-ssl-errors')

Â  Â  driver = webdriver.Chrome(options=options,service=service)

Â  Â  driver.get("https://modelscope.cn/my/overview")
Â  Â  print(driver.title)

Â  Â  driver.quit()


if __name__ == "__main__":
Â  Â  test()
```

ä»£ç éå¸¸ç®€å•ï¼Œé¦–å…ˆæ˜¯ç¬¬ 9 è¡Œï¼ŒæŒ‡å®šäº† Chrome é©±åŠ¨çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„å°±æ˜¯åˆšæ‰è§£å‹ Chrome é©±åŠ¨çš„ç›®æ ‡è·¯å¾„ã€‚ä¹‹åä»ç¬¬ 11 è¡Œåˆ°ç¬¬ 24 è¡Œæ˜¯è°·æ­Œæµè§ˆå™¨çš„ä¸€äº›é»˜è®¤é…ç½®ï¼Œä½ å¯ä»¥å…ˆæš‚æ—¶å¿½ç•¥ï¼Œæˆ‘ä»¬åé¢å†è®²ã€‚ç¬¬ 26 è¡Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ª Chrome é©±åŠ¨çš„æ‰§è¡Œå™¨ã€‚æœ‰äº†è¿™ä¸ªæ‰§è¡Œå™¨ï¼Œå°±å¯ä»¥å®Œæˆæ‰“å¼€é­”æ­ç¤¾åŒºä¸»é¡µï¼ˆå¯¹åº”ç¬¬28è¡Œï¼‰å’Œè·å– title çš„æ“ä½œäº†ï¼ˆå¯¹åº”ç¬¬29è¡Œï¼‰ã€‚

ä»£ç æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š

```python
é¦– é¡µ  Â· é­” æ­ ç¤¾ åŒº 
```

### ä»å…ƒç´ ä¸­è·å–æ•°æ®

æœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä»¥åœ¨æŸç›´è˜ç½‘ç«™è·å–ä¸Šæµ·å¸‚çš„ AI åº”ç”¨å¼€å‘çš„å²—ä½åˆ—è¡¨ä¸ºä¾‹ï¼Œå­¦ä¹ ä¸€ä¸‹å¦‚ä½•æŠ“å–ä»å…ƒç´ ä¸­æŠ“å–æ•°æ®ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æ‰“å¼€æŸç›´è˜ç½‘ç«™ï¼Œåœ¨é”®ç›˜ä¸ŠæŒ‰ F12ï¼Œè¿›å…¥åˆ°æµè§ˆå™¨çš„è°ƒè¯•å·¥ä½œå°ã€‚ä¹‹åå°†å·¥ä½œå°çš„é¡µé¢åˆ‡æ¢åˆ°å…ƒç´ ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/02/21/025791ebba5e28bb1f36858a6ae65b21.png?wh=959x191)

ç„¶ååœ¨ç½‘ç«™ä¸Šå°†åŸå¸‚åˆ‡æ¢åˆ°ä¸Šæµ·ï¼Œåœ¨èŒä½æœç´¢çš„è¾“å…¥æ¡†è¾“å…¥â€œAI åº”ç”¨å¼€å‘â€ï¼Œè¿™æ ·ä¼šæœç´¢åˆ°å¾ˆå¤šå…³äº AI åº”ç”¨å¼€å‘çš„å²—ä½ã€‚æ¯”å¦‚AIåº”ç”¨å¼€å‘ä¸“å®¶TAMã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/d5/30/d5f30614e0854ce1993d079335f3e130.png?wh=662x560)

æ­¤æ—¶æ§åˆ¶å°çš„å…ƒç´ é¡µé¢ï¼Œä¹Ÿä¼šæ¸²æŸ“å‡ºå†…å®¹ã€‚ç±»ä¼¼è¿™æ ·ï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/bd/13/bdf4e0934c30a813ee2211749e5a0513.png?wh=940x362)

æˆ‘ä»¬éšä¾¿ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨é”®ç›˜ä¸ŠæŒ‰ Ctrl+Fï¼Œæ‰“å¼€æœç´¢æ¡†ï¼Œè¾“å…¥ TAMï¼ˆå› ä¸ºä¸Šæ–‡æœåˆ°çš„èŒä½åˆ—è¡¨ä¸­ç¬¬ä¸€æ¡å°±æ˜¯AIåº”ç”¨å¼€å‘ä¸“å®¶TAMï¼‰ï¼Œè¿™æ ·å°±èƒ½å®šä½åˆ°èŒä½åˆ—è¡¨æ‰€åœ¨çš„ classã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/bf/1b/bf1950b32ff3b04673cee84233c4a61b.png?wh=1734x707)

å¯ä»¥çœ‹åˆ°ï¼ŒèŒä½åˆ—è¡¨æ˜¯åœ¨ search-job-result é‡Œçš„ job-list-box ä¸­ï¼Œè¯¥ list ä¸­åŒ…å« job-name, job-area ç­‰ç­‰å¤šä¸ª spanï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨æ— å¤´æµè§ˆå™¨æŠ“å–è¿™äº›æ•°æ®ï¼Œä¾¿å¯ä»¥å¾—åˆ°èŒä½åˆ—è¡¨ã€‚

æ²¿ç€è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…³é”®ä»£ç çš„å®ç°ï¼Œè¯¥ä»£ç ä¼šåœ¨ windows ä¸Šæ‰§è¡Œã€‚

é¦–å…ˆæ˜¯è°·æ­Œæµè§ˆå™¨çš„è®¾ç½®é—®é¢˜ï¼Œä»£ç å¦‚ä¸‹ï¼š

```python
def get_UA(): Â  Â  Â 
Â  Â  UA_list = [ Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.54 Safari/537.36', Â  Â 
Â  Â  Â  Â  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4651.0 Safari/537.36', Â  Â 
Â  Â  Â  Â  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.0.0 Safari/537.36' Â 
Â  Â  Â  Â  ] Â  Â  Â 
Â  Â  randnum = random.randint(0, len(UA_list) - 1) Â 
Â  Â  UA = UA_list[randnum] Â 
Â  Â  return UA
...


options = Options()
options.add_argument('--disable-gpu') # ç¦ç”¨GPUæ¸²æŸ“ Â  Â  Â  Â  Â 
options.add_argument('--incognito') Â  Â # æ— ç—•æ¨¡å¼ Â 
options.add_argument('--ignore-certificate-errors-spki-list') Â # å¿½ç•¥ä¸è¯ä¹¦ç›¸å…³çš„é”™è¯¯ Â 
options.add_argument('--disable-notifications') Â # ç¦ç”¨æµè§ˆå™¨é€šçŸ¥å’Œæ¨é€API Â 
options.add_argument(f'user-agent={get_UA()}') Â  # ä¿®æ”¹ç”¨æˆ·ä»£ç†ä¿¡æ¯ Â 
options.add_argument('--window-name=huya_test') Â # è®¾ç½®åˆå§‹çª—å£ç”¨æˆ·æ ‡é¢˜ Â 
options.add_argument('--window-workspace=1') Â # æŒ‡å®šåˆå§‹çª—å£å·¥ä½œåŒº Â # 
options.add_argument('--disable-extensions') Â # ç¦ç”¨æµè§ˆå™¨æ‰©å±• Â 
options.add_argument('--force-dark-mode') Â # ä½¿ç”¨æš—æ¨¡å¼ Â 
options.add_argument('--start-fullscreen') Â # æŒ‡å®šæµè§ˆå™¨æ˜¯å¦ä»¥å…¨å±æ¨¡å¼å¯ï¼Œä¸è¿›å…¥æµè§ˆå™¨åæŒ‰F11æ•ˆæœç›¸åŒ Â 
options.add_argument('--start-maximized')
```

ä»£ç å¼€å§‹é€šè¿‡ä¸€ä¸ªå‡½æ•°è®¾ç½®äº†UserAgentã€‚UserAgentï¼ˆç”¨æˆ·ä»£ç†ï¼‰æ˜¯æŒ‡åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰å‘é€ç»™æœåŠ¡å™¨çš„å¤´éƒ¨ä¿¡æ¯ï¼Œç”¨äºæ ‡è¯†å®¢æˆ·ç«¯çš„è½¯ä»¶ã€è®¾å¤‡ã€æ“ä½œç³»ç»Ÿç­‰ç›¸å…³ä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ›´æ”¹User Agentï¼Œæ¥éšè—çœŸå®çš„æµè§ˆå™¨å’Œè®¾å¤‡ä¿¡æ¯ã€‚

ä¹‹åè¿˜è¦ä¸ºæµè§ˆå™¨åšä¸€äº›ç›¸åº”çš„è®¾ç½®ï¼Œæ¯ä¸€ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä½ å¯ä»¥å‚è€ƒæˆ‘æ·»åŠ çš„æ³¨é‡Šçœ‹ä¸€ä¸‹ï¼Œç®€å•äº†è§£å³å¯ã€‚è¿™æ ·è®¾ç½®ä¹‹åï¼Œå½“æˆ‘ä»¬è¿è¡Œä»£ç æ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè¢«ä»£ç è‡ªåŠ¨æ§åˆ¶çš„æµè§ˆå™¨ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç›´è§‚çœ‹åˆ°ä»£ç æ˜¯å¦è®¿é—®æˆåŠŸäº†ç›®æ ‡ç½‘ç«™ã€‚

è®¾ç½®æµè§ˆå™¨å®Œæˆåï¼Œæ¥ä¸‹æ¥å°±æ˜¯æŠ“å–å²—ä½ä¿¡æ¯çš„ä»£ç ã€‚

```python
driver.get(url)


WebDriverWait(driver, 1000, 0.8).\
Â  Â  until(EC.presence_of_element_located((By.CSS_SELECTOR,
Â  Â  Â  '.job-list-box'))) #ç­‰å¾…é¡µé¢åŠ è½½åˆ°å‡ºç°job-list-box ä¸ºæ­¢

li_list=driver.find_elements(By.CSS_SELECTOR,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ".job-list-box li.job-card-wrapper")
jobs=[]
for li in li_list:
Â  Â  job_name_list=li.find_elements(By.CSS_SELECTOR,".job-name")
Â  Â  if len(job_name_list)==0:
Â  Â  Â  Â  continue
Â  Â  job={}
Â  Â  job["job_name"]=job_name_list[0].text
Â  Â  job_salary_list=li.find_elements(By.CSS_SELECTOR,".job-info .salary")
Â  Â  if job_salary_list and len(job_salary_list)>0:
Â  Â  Â  Â  job["job_salary"]=job_salary_list[0].text
Â  Â  else:
Â  Â  Â  Â  job["job_salary"]="æš‚æ— "
Â  Â  job_tags_list=li.find_elements(By.CSS_SELECTOR,".job-info .tag-list li")
Â  Â  if job_tags_list and len(job_tags_list)>0:
Â  Â  Â  Â  job["job_tags"]=[tag.text for tag in job_tags_list]
Â  Â  else:
Â  Â  Â  Â  job["job_tags"]=[]
Â  Â  com_name=li.find_element(By.CSS_SELECTOR,".company-name")
Â  Â  if com_name:
Â  Â  Â  Â  job["com_name"]=com_name.text
Â  Â  else:
Â  Â  Â  Â  continue 
Â  Â  com_tags_list=li.find_elements(By.CSS_SELECTOR,".company-tag-list li")
Â  Â  if com_tags_list and len(com_tags_list)>0:
Â  Â  Â  Â  job["com_tags"]=[tag.text for tag in com_tags_list]
Â  Â  else:
Â  Â  Â  Â  job["com_tags"]=[]
Â  Â  job_tags_list_footer=li.find_elements(By.CSS_SELECTOR,".job-card-footer Â li")
Â  Â  if job_tags_list_footer and len(job_tags_list_footer)>0:
Â  Â  Â  Â  job["job_tags_footer"]=[tag.text for tag in job_tags_list_footer]
Â  Â  else:
Â  Â  Â  Â  job["job_tags_footer"]=[]
Â  Â  jobs.append(job)
driver.close()
job_tpl="""
{}. å²—ä½åç§°: {}
å…¬å¸åç§°: {}
å²—ä½è¦æ±‚: {}
æŠ€èƒ½è¦æ±‚: {}
è–ªèµ„å¾…é‡: {}
Â """
ret=""
if len(jobs)>0:
Â  Â  for i, job in enumerate(jobs):
Â  Â  Â  Â  job_desc = job_tpl.format(str(i + 1), job["job_name"],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  job["com_name"],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ",".join(job["job_tags"]),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ",".join(job["job_tags_footer"]),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  job["job_salary"])
Â  Â  Â  Â  ret += job_desc + "\n"
```

ä»£ç é¦–å…ˆä½¿ç”¨ WebDriverWait ç­‰å¾…é¡µé¢åŠ è½½å‡º job-list-boxï¼Œå¦‚æœæ²¡åŠ è½½å‡ºæ¥ï¼Œä¼šä¸€ç›´å¡åœ¨è¿™ï¼Œç›´åˆ°è¶…æ—¶ã€‚

æ¥ç€é€šè¿‡ find\_elementsï¼Œå¯ä»¥è·å– job-class-wrapper çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯èŒä½åˆ—è¡¨ã€‚find\_elements æ˜¯å¯ä»¥é€šè¿‡ By.xx æŒ‡å®šå…ƒç´ ï¼Œæ¥è·å–åˆ°ç›¸å…³çš„å†…å®¹ï¼Œä¾‹å¦‚ By.ID ç­‰ç­‰ã€‚

æœ‰äº†èŒä½åˆ—è¡¨ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦éå†èŒä½åˆ—è¡¨ï¼ŒæŒ‰æˆ‘ä»¬åœ¨æ§åˆ¶å°çœ‹åˆ°çš„æ ‡ç­¾çš„åç§°ï¼Œæ¯”å¦‚ job\_name ç­‰ï¼Œå–å‡ºç›¸åº”çš„å†…å®¹å°±å¯ä»¥ã€‚

æœ€åï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ª job\_tpl æ¨¡æ¿ï¼Œå°†å–åˆ°çš„å†…å®¹æŒ‰æ¨¡æ¿å†…å®¹è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¿™æ ·å°±å®Œæˆäº†æŠ“å–å²—ä½æ•°æ®çš„å·¥ä½œã€‚

ä»£ç çš„æ‰§è¡Œæ•ˆæœä¸ºï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/2b/b9/2b8388fe70f8f1ed1469944489539cb9.png?wh=762x522)

è¿™èŠ‚è¯¾çš„ä»£ç ï¼Œæˆ‘ä¼šæ”¾åˆ°æˆ‘çš„ [Github](https://github.com/xingyunyang01/Geek02/tree/main/selenium) ä¸Šï¼Œå¤§å®¶å¯ä»¥è¿›è¡Œå­¦ä¹ æµ‹è¯•ã€‚ä½†éœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼Œç½‘ç«™çš„å…ƒç´ åç§°ï¼Œæœ‰å¯èƒ½è¿‡ä¸€æ®µæ—¶é—´å°±ä¼šæœ‰å˜åŒ–ï¼Œæ­¤æ—¶å¤§å®¶å°±éœ€è¦æŒ‰ç…§ä»Šå¤©å­¦ä¹ çš„æ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹å…ƒç´ çš„åç§°æ”¹æˆå•¥äº†ï¼Œç„¶åå»è°ƒæ•´ä»£ç ã€‚

## æ€»ç»“

ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ­£å¼å¼€å¯äº†æ±‚èŒåŠ©æ‰‹çš„é¡¹ç›®å®æˆ˜å¼€å‘ã€‚å› ä¸ºæˆ‘ä»¬è¦è®©å¤§æ¨¡å‹å¸®æˆ‘ä»¬åŒ¹é…åˆé€‚çš„å·¥ä½œï¼Œå› æ­¤å‡†å¤‡å²—ä½æ•°æ®ï¼Œå±äºå‰ç½®å·¥ä½œã€‚

æˆ‘ä»¬é¦–å…ˆäº†è§£äº†å‡ ç§å¸¸ç”¨çš„è·å–æ•°æ®çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä½¿ç”¨å•†ç”¨çš„ APIï¼Œä½¿ç”¨ä¼ ç»Ÿçˆ¬è™«æˆ– Fetch å·¥å…·ï¼Œä»¥åŠä½¿ç”¨æ— å¤´æµè§ˆå™¨ç­‰ã€‚ä¹‹åæˆ‘ä»¬é‡ç‚¹è®²è§£äº†æ— å¤´æµè§ˆå™¨æŠ€æœ¯çš„ç¼–ç¨‹æ¡†æ¶ Selenium çš„ç”¨æ³•ã€‚

å¯¹äºæ­¤ç±»æ¡†æ¶çš„å­¦ä¹ ï¼Œå¤§å®¶ä¸€å®šè¦è®°ä½ä¸€ä¸ªæ ¸å¿ƒè¦ç´ ï¼Œé‚£å°±æ˜¯ä¸è¦å»æ·±ç©¶æ¡†æ¶çš„ä»£ç åŸç†ï¼Œåªè¦å­¦ä¼šå¦‚ä½•ä½¿ç”¨å³å¯ï¼Œé™¤éä½ æ˜¯æƒ³è¦åšä¸€ä¸ªç±»ä¼¼çš„æ¡†æ¶ï¼Œé‚£æ‰éœ€è¦å»å‚è€ƒæºç çš„å®ç°ã€‚

æœ‰äº†è¿™èŠ‚è¯¾çš„æ•°æ®åšåŸºç¡€ï¼Œåé¢æˆ‘ä»¬å°±èƒ½æ­£å¼å€ŸåŠ© MCP ï¼Œè®©å®ƒå¸®æˆ‘ä»¬ä»ä¼—å¤šå·¥ä½œä¸­æŒ‘é€‰å‡ºåˆé€‚çš„é€‰é¡¹äº†ã€‚

## è¯¾åé¢˜

å¸Œæœ›ä½ å¯ä»¥ä¸‹è½½å¹¶é˜…è¯»è¿™èŠ‚è¯¾çš„[ä»£ç ](https://github.com/xingyunyang01/Geek02/tree/main/selenium)ï¼Œç†è§£ä¸€ä¸‹å…¶æ€è·¯ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æˆ‘ä»¬ç•™è¨€åŒºäº¤æµã€‚å¦‚æœä½ è§‰å¾—è¿™èŠ‚è¯¾çš„å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿ä½ åˆ†äº«ç»™å…¶ä»–æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ10ï¼‰</strong></div><ul>
<li><span>jogholy</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<p>å±…ç„¶è®²åˆ°äº†è‡ªåŠ¨åŒ–æµ‹è¯•çš„åŸºæœ¬åŠŸğŸ˜…</p>2025-03-31</li><br/><li><span>123</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è®²çš„çœŸä¸é”™</p>2025-05-01</li><br/><li><span>Geek_077fc1</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼ŒèŒä½åˆ—è¡¨ä¸æ˜¯éœ€è¦å¾€ä¸‹æ‹‰åˆ·æ–°æ‰èƒ½æ˜¾ç¤ºå…¨éƒ¨èŒä½å—?ä¸ç„¶åªèƒ½çˆ¬15æ¡æ•°æ®ã€‚</p>2025-04-25</li><br/><li><span>å®Œç¾åšæŒ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>windowsçš„åŒå­¦ï¼Œè·¯å¾„è®¾ç½®é‚£é‡Œä¸èƒ½æŒ‰ç…§åŸå§‹çš„ï¼Œ
 #å®šä½åˆ° å¯æ‰§è¡Œç¨‹åº
    chromedriver_path = r&quot;D:\course\deepseek_app\chromedriver-win64\chromedriver-win64\chromedriver.exe&quot;

æ³¨æ„ç»“å°¾æ˜¯ chromedriver.exeï¼Œä¸æ˜¯æ–‡ä»¶å¤¹ï¼
å»ºè®®ç”¨åŸå§‹å­—ç¬¦ä¸²å‰ç¼€ rï¼Œé˜²æ­¢åæ–œæ è½¬ä¹‰é—®é¢˜ã€‚</p>2025-05-05</li><br/><li><span>ifelse</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å­¦ä¹ æ‰“å¡</p>2025-04-14</li><br/><li><span>ä¸œæ–¹å¥‡éª¥</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆçš„ä»£ç é‡Œï¼Œ options.add_argument(&#39;--proxy-server=http:&#47;&#47;z976.kdltps.com:15818&#39;) è¦å»æ‰ï¼Œ--proxy-server æ˜¯ Selenium ä¸­ç”¨äºè®¾ç½®æµè§ˆå™¨ä»£ç†æœåŠ¡å™¨çš„å‚æ•°ï¼Œé€šè¿‡è¯¥å‚æ•°å¯ä»¥æŒ‡å®šæµè§ˆå™¨é€šè¿‡ç‰¹å®šçš„ä»£ç† IP å’Œç«¯å£è®¿é—®ç›®æ ‡ç½‘ç«™ã€‚åº”è¯¥æ˜¯è€å¸ˆç”¨äº†ä»£ç†ã€‚æˆ‘ä»¬æœ¬åœ°è·‘ä¸éœ€è¦ã€‚</p>2025-04-07</li><br/><li><span>Feng</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Traceback (most recent call last):
  File &quot;&#47;root&#47;Geek02&#47;selenium&#47;listjob.py&quot;, line 154, in &lt;module&gt;
    ret = listjob_by_keyword(&quot;AIåº”ç”¨å¼€å‘&quot;)
  File &quot;&#47;root&#47;Geek02&#47;selenium&#47;listjob.py&quot;, line 76, in listjob_by_keyword
    driver=init_driver()
  File &quot;&#47;root&#47;Geek02&#47;selenium&#47;listjob.py&quot;, line 66, in init_driver
    driver = webdriver.Chrome(options=options,service=service)
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;selenium&#47;webdriver&#47;chrome&#47;webdriver.py&quot;, line 45, in __init__
    super().__init__(
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;selenium&#47;webdriver&#47;chromium&#47;webdriver.py&quot;, line 66, in __init__
    super().__init__(command_executor=executor, options=options)
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;selenium&#47;webdriver&#47;remote&#47;webdriver.py&quot;, line 212, in __init__
    self.start_session(capabilities)
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;selenium&#47;webdriver&#47;remote&#47;webdriver.py&quot;, line 299, in start_session
    response = self.execute(Command.NEW_SESSION, caps)[&quot;value&quot;]
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;selenium&#47;webdriver&#47;remote&#47;webdriver.py&quot;, line 354, in execute
    self.error_handler.check_response(response)
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.10&#47;dist-packages&#47;selenium&#47;webdriver&#47;remote&#47;errorhandler.py&quot;, line 229, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.SessionNotCreatedException: Message: session not created: probably user data directory is already in use, please specify a unique value for --user-data-dir argument, or don&#39;t use --user-data-dir
Stacktrace:
#0 0x55632b03ee8a &lt;unknown&gt;
#1 0x55632aaf0640 &lt;unknown&gt;
</p>2025-04-06</li><br/><li><span>èŠ±è½è©æ</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>Manusä½¿ç”¨åˆ°äº†browser_useæ¥è¿›è¡Œç½‘é¡µçš„æµè§ˆä¸å†…å®¹çš„æŠ“å–ï¼Œçœ‹èµ·æ¥ä½¿ç”¨æ›´ç®€å•ä¸€äº›ï¼Œä¸éœ€è¦äººå·¥å»è§£æDOMè·å–å†…å®¹ï¼Œè€å¸ˆå¯ä»¥åˆ†äº«ä¸‹browser_useçš„å®ç°åŸç†å—</p>2025-04-15</li><br/><li><span>è½©çˆ·</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>ç¬¬äºŒä¸ªç¤ºä¾‹ä»£ç è¦åŠ ä¸¤ä¸ªå¯¼å…¥ï¼š
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
</p>2025-05-23</li><br/><li><span>CGer_AJ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>åˆ’é‡ç‚¹:
è¿™èŠ‚è¯¾è®²çš„æ˜¯éç»“æ„åŒ–æ•°æ®ï¼Œå¯è§†åŒ–æ•°æ®è½¬æ¢æˆç»“æ„åŒ–æ•°æ®çš„æ–¹æ³•</p>2025-04-10</li><br/>
</ul>