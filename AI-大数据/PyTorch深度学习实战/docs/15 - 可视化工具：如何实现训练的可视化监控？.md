ä½ å¥½ï¼Œæˆ‘æ˜¯æ–¹è¿œã€‚æ¬¢è¿æ¥åˆ°ç¬¬15èŠ‚è¯¾çš„å­¦ä¹ ã€‚

ä¸ŠèŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä»¥çº¿æ€§å›å½’æ¨¡å‹ä¸ºä¾‹ï¼Œå­¦ä¹ äº†æ¨¡å‹ä»æ­å»ºåˆ°è®­ç»ƒçš„å…¨éƒ¨è¿‡ç¨‹ã€‚åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œæ¨¡å‹è®­ç»ƒæ˜¯ä¸€ä¸ªå¿…é¡»çš„ç¯èŠ‚ï¼Œè€Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å¯¹æ¨¡å‹çš„å‚æ•°ã€è¯„ä»·æŒ‡æ ‡ç­‰ä¿¡æ¯è¿›è¡Œå¯è§†åŒ–ç›‘æ§ã€‚

ä»Šå¤©æˆ‘ä»¬ä¸»è¦ä¼šå­¦ä¹ ä¸¤ç§å¯è§†åŒ–å·¥å…·ï¼Œå¹¶åˆ©ç”¨å®ƒä»¬å®ç°è®­ç»ƒè¿‡ç¨‹çš„å¯è§†åŒ–ç›‘æ§ã€‚

åœ¨TensorFlowä¸­ï¼Œæœ€å¸¸ä½¿ç”¨çš„å¯è§†åŒ–å·¥å…·éTensorboardè«å±ï¼Œè€ŒTensorboardXå·¥å…·ä½¿å¾—PyTorchä¹Ÿäº«å—åˆ°Tensorboardçš„ä¾¿æ·åŠŸèƒ½ã€‚å¦å¤–ï¼ŒFaceBookä¹Ÿä¸ºPyTorchå¼€å‘äº†ä¸€æ¬¾äº¤äº’å¼å¯è§†åŒ–å·¥å…·Visdomï¼Œå®ƒå¯ä»¥å¯¹å®æ—¶æ•°æ®è¿›è¡Œä¸°å¯Œçš„å¯è§†åŒ–ï¼Œå¸®åŠ©æˆ‘ä»¬å®æ—¶ç›‘æ§å®éªŒè¿‡ç¨‹ã€‚

è®©æˆ‘ä»¬å…ˆä»TensorboardXè¯´èµ·ã€‚

## TensorboardX

Tensorboardæ˜¯TensorFlowçš„ä¸€ä¸ªé™„åŠ å·¥å…·ï¼Œç”¨äºè®°å½•è®­ç»ƒè¿‡ç¨‹çš„æ¨¡å‹çš„å‚æ•°ã€è¯„ä»·æŒ‡æ ‡ä¸å›¾åƒç­‰ç»†èŠ‚å†…å®¹ï¼Œå¹¶é€šè¿‡Webé¡µé¢æä¾›æŸ¥çœ‹ç»†èŠ‚ä¸è¿‡ç¨‹çš„åŠŸèƒ½ï¼Œç”¨æµè§ˆå™¨å¯è§†åŒ–çš„å½¢å¼å±•ç°ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨å®éªŒæ—¶è§‚å¯Ÿç¥ç»ç½‘ç»œçš„è®­ç»ƒè¿‡ç¨‹ï¼ŒæŠŠæ¡è®­ç»ƒè¶‹åŠ¿ã€‚

æ—¢ç„¶Tensorboardå·¥å…·è¿™ä¹ˆæ–¹ä¾¿ï¼ŒTensorFlowå¤–çš„å…¶å®ƒæ·±åº¦å­¦ä¹ æ¡†æ¶è‡ªç„¶ä¹Ÿæƒ³è·å–Tensorboardçš„ä¾¿æ·åŠŸèƒ½ï¼Œäºæ˜¯ï¼ŒTensorboardXåº”è¿è€Œç”Ÿã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ14ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/2b/14/f3/175dc943.jpg" width="30px"><span>å’ªè¥¿å°æ‚ </span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>viz = Visdom()
viz.line([[0., 0.]], [0], win=&#39;train&#39;, opts=dict(title=&#39;loss_accuracy&#39;, legend=[&#39;loss&#39;, &#39;acc&#39;]))

for n_iter in range(10):
    loss = 0.2 * np.random.randn() + 1
    accuracy = 0.1 * np.random.randn() + 1
    viz.line([[loss, accuracy]], [n_iter], win=&#39;train&#39;, update=&#39;append&#39;)
    time.sleep(0.5)</div>2021-11-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg" width="30px"><span>John(æ˜“ç­‹)</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿è¡Œä¸‹é¢æŒ‡ä»¤æŠ¥é”™: Error while finding module specification for &#39;visdom.server&#39;
python -m visdom.server

è§£å†³æ–¹æ¡ˆï¼š
Upgrade pip,

python -m pip install --upgrade pip
They try,

python -m pip install visdom

å†æ¬¡è¿è¡Œæœ€å¼€å§‹çš„å‘½ä»¤å³å¯ã€‚ 
ref: https:&#47;&#47;stackoverflow.com&#47;questions&#47;60623224&#47;modulenotfounderror-no-module-named-visdom-when-importing-visdom</div>2022-08-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/60/a1/45ffdca3.jpg" width="30px"><span>é™å¿ƒ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>MacOSä¸Šè¿è¡Œtensorboardå‘½ä»¤å¯åŠ¨æœåŠ¡æ—¶ï¼Œé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
ValueError: Duplicate plugins for name projector

é€šè¿‡ä»¥ä¸‹å¸è½½é‡å®‰è£…åŠæ³•ç­‰åˆ°è§£å†³ï¼š
pip uninstall tb-nightly tensorboardX tensorboard
pip install tensorboard</div>2023-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg" width="30px"><span>John(æ˜“ç­‹)</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œå‘ç°Visdom åœ¨chromeä¸Šè¿è¡Œæ­£å¸¸ï¼ŒSafari ä¸åŠ¨ã€‚

from visdom import Visdom
import numpy as np
import time

# å°†çª—å£ç±»å®ä¾‹åŒ–
viz = Visdom()
# åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–
viz.line([[0., 0.]], [0], win=&#39;loss and accuracy&#39;, opts=dict(title=&#39;train_loss&#39;))

for n_iter in range(10):
     # éšæœºè·å–losså€¼
    loss = 0.2 * np.random.randn() + 1
    # éšæœºäº§ç”Ÿaccuracy
    accuracy = 0.1 * np.random.randn()
    # æ›´æ–°çª—å£å›¾åƒ,åŒæ—¶æ›´æ–°losså’Œaccuracy
    viz.line(Y=[[loss, accuracy]], X=[n_iter], win=&#39;loss and accuracy&#39;, update=&#39;append&#39;)
    time.sleep(0.5)</div>2022-08-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2e/63/87/d4579be2.jpg" width="30px"><span>ç‘¾ç‘œå®</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>
è€å¸ˆæ‚¨å¥½ï¼Œåœ¨tensorboard --logdir=runs  è¿™ä¸€æ­¥å‡ºç°äº†é—®é¢˜ï¼Œæ±‚è§£
File &quot;C:\Users\86189\AppData\Local\Temp&#47;ipykernel_82416&#47;59224237.py&quot;, line 1
    tensorboard --logdir=runs
    ^
SyntaxError: cannot assign to operator
</div>2022-07-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/72/cf/791d0f5e.jpg" width="30px"><span>Merlyn</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆæ‚¨å¥½ï¼Œä¸ºä»€ä¹ˆæˆ‘åœ¨å¯åŠ¨tensorboardåï¼Œè¿è¡Œç¨‹åºä»¥åæŠ¥äº†å¦‚ä¸‹é”™è¯¯å‘¢ï¼Œæ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„å‘¢ï¼Ÿ
[WinError 10061] ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥ã€‚
on_close() takes 1 positional argument but 3 were given</div>2022-05-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/0c/1f/fcc777e1.jpg" width="30px"><span>ä¹å‘µçš„hehe</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œæˆ‘çš„ç¯å¢ƒé‡Œæœ‰tensorboardxï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆæ— æ³•å¯¼å…¥å‘¢ï¼ŸæŠ¥é”™å¦‚ä¸‹ï¼š

ModuleNotFoundError                       Traceback (most recent call last)
Input In [7], in &lt;module&gt;
----&gt; 1 from torch.utils.tensorboard import SummaryWriter
      2 # PyTorch 1.8ä¹‹å‰çš„ç‰ˆæœ¬è¯·ä½¿ç”¨ï¼š
      3 # from tensorboardX import SummaryWriter
      4 import numpy as np

File D:\Anaconda3\envs\PythonEnvironment1\lib\site-packages\torch\utils\tensorboard\__init__.py:1, in &lt;module&gt;
----&gt; 1 import tensorboard
      2 from setuptools import distutils
      4 LooseVersion = distutils.version.LooseVersion

ModuleNotFoundError: No module named &#39;tensorboard&#39;</div>2022-05-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7a/27/791d0f5e.jpg" width="30px"><span>å°æ—å­</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæ¨èä½¿ç”¨å“ªç§å¯è§†åŒ–å·¥å…·äº†ï¼Ÿ</div>2022-05-09</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/j24oyxHcpB5AMR9pMO6fITqnOFVOncnk2T1vdu1rYLfq1cN6Sj7xVrBVbCvHXUad2MpfyBcE4neBguxmjIxyiaQ/132" width="30px"><span>vcjmhg</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div># å°†çª—å£ç±»å®ä¾‹åŒ–
viz = Visdom()
# åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–
viz.line([0.], [0], win=&#39;loss and accuracy&#39;, opts=dict(title=&#39;train_loss&#39;))

for n_iter in range(10):
    # éšæœºè·å–losså€¼
    loss = 0.2 * np.random.randn() + 1
    # éšæœºäº§ç”Ÿaccuracy
    accuracy = 0.1 * np.random.randn()
    # æ›´æ–°çª—å£å›¾åƒ,åŒæ—¶æ›´æ–°losså’Œaccuracy
    viz.line(Y=[loss, accuracy], X=[n_iter], win=&#39;loss and accuracy&#39;, update=&#39;append&#39;)
    time.sleep(0.5)</div>2021-11-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg" width="30px"><span>ifelse</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å­¦ä¹ æ‰“å¡</div>2023-12-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/15/91/076c1d24.jpg" width="30px"><span>å˜Ÿå˜Ÿå˜Ÿå˜Ÿå˜Ÿå®å„¿</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å·²ç»å®‰è£…äº†Tensorboardï¼Œä½†æ˜¯è¿è¡Œè¿‡ç¨‹ä»ç„¶æ˜¾ç¤ºæ‰¾ä¸åˆ°è¿™ä¸ªæ¨¡å‹ã€‚å¹¶ä¸”æ˜¯1.13.0çš„ç‰ˆæœ¬ï¼Œè¯·é—®é—®é¢˜æ˜¯å‡ºåœ¨å“ªé‡Œå‘¢ã€‚æ˜¯å®‰è£…ä¸æˆåŠŸå˜›ï¼Œä½†æ˜¯è¿è¡Œå‘½ä»¤è¡Œçš„æ—¶å€™æ˜¾ç¤ºéƒ½æ˜¯æ»¡è¶³çš„
</div>2023-09-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg" width="30px"><span>äºšæ—</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ä½¿ç”¨visdomï¼Œä¸Šä¸€èŠ‚è®­ç»ƒæ¨¡å‹æ”¶ä¼åœ¨2é™„è¿‘äº†</div>2022-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg" width="30px"><span>äºšæ—</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>def cifar10_go():
    # å®ä¾‹åŒ–ä¸€ä¸ªçª—å£
    viz = Visdom(port=8097)
    # åˆå§‹åŒ–çª—å£çš„ä¿¡æ¯
    viz.line([0.], [0.], win=&#39;train_loss&#39;, opts=dict(title=&#39;train loss&#39;))

    transform = transforms.Compose([
        transforms.RandomResizedCrop((224, 224)),
        transforms.ToTensor(),
        transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
    ])
    cifar10_dataset = torchvision.datasets.CIFAR10(root=&#39;.&#47;data&#39;,
                                                   train=False,
                                                   transform=transform,
                                                   target_transform=None,
                                                   download=True)
    dataloader = DataLoader(dataset=cifar10_dataset,  # ä¼ å…¥çš„æ•°æ®é›†, å¿…é¡»å‚æ•°
                            batch_size=32,  # è¾“å‡ºçš„batchå¤§å°
                            shuffle=True,  # æ•°æ®æ˜¯å¦æ‰“ä¹±
                            num_workers=4)  # è¿›ç¨‹æ•°, 0è¡¨ç¤ºåªæœ‰ä¸»è¿›ç¨‹
    model = MyCNN()
    # äº¤å‰ç†µæŸå¤±å‡½æ•°
    criterion = nn.CrossEntropyLoss()
    # å®šä¹‰ä¼˜åŒ–å™¨
    optimizer = torch.optim.SGD(model.parameters(), lr=1e-4, weight_decay=1e-2, momentum=0.9)
    # ä¸‹é¢å¼€å§‹è®­ç»ƒ
    start = time.time()  # è®°æ—¶å¼€å§‹
    for epoch in range(3):  # è®¾ç½®è¦åœ¨å…¨éƒ¨æ•°æ®ä¸Šè®­ç»ƒçš„æ¬¡æ•°

        for i, data in enumerate(dataloader):
            # dataå°±æ˜¯æˆ‘ä»¬è·å–çš„ä¸€ä¸ªbatch sizeå¤§å°çš„æ•°æ®

            inputs, labels = data
            optimizer.zero_grad()
            # è·å¾—æ¨¡å‹çš„è¾“å‡ºç»“æœï¼Œä¹Ÿå³æ˜¯å½“å‰æ¨¡å‹å­¦åˆ°çš„æ•ˆæœ
            outputs = model(inputs)
            # è·å¾—è¾“å‡ºç»“æœå’Œæ•°æ®çœŸæ­£ç±»åˆ«çš„æŸå¤±å‡½æ•°
            loss = criterion(outputs, labels)
            print(&#39;Epoch {}, Loss {}&#39;.format(epoch + 1, loss))
            loss.backward()
            optimizer.step()
            viz.line([loss.item()], [i], win=&#39;train_loss&#39;, update=&#39;append&#39;)
    end = time.time()  # è®¡æ—¶ç»“æŸ
    print(&#39;ä½¿ç”¨æ—¶é—´: {:.5f} s&#39;.format(end - start))
    torch.save(model, &#39;.&#47;MyCNN_model_23.pth&#39;)</div>2022-05-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2d/0c/1f/fcc777e1.jpg" width="30px"><span>ä¹å‘µçš„hehe</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>from visdom import Visdom
import numpy as np
import time

# å°†çª—å£ç±»å®ä¾‹åŒ–
viz = Visdom()
# åˆ›å»ºçª—å£å¹¶åˆå§‹åŒ–
viz.line([0.], [0], win=&#39;loss&#39;, opts=dict(title=&#39;loss&#39;))
viz.line([0.], [0], win=&#39;accuracy&#39;, opts=dict(title=&#39;accuracy&#39;))

for n_iter in range(100):
    # éšæœºè·å–losså€¼
    loss = 0.2 * np.random.randn() + 1
    accuracy = 0.2 * np.random.randn() + 1
    # æ›´æ–°çª—å£å›¾åƒ
    viz.line([loss], [n_iter], win=&#39;loss&#39;, update=&#39;append&#39;)
    viz.line([accuracy], [n_iter], win=&#39;accuracy&#39;, update=&#39;append&#39;)
    time.sleep(0.5)</div>2022-05-16</li><br/>
</ul>