ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ã€‚

åœ¨å¯ç¨‹ç¯‡çš„å‰ä¸¤è¯¾ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•è°ƒç”¨Functionï¼Œä»¥åŠThreadï¼ˆçº¿ç¨‹ï¼‰å’ŒRunï¼ˆè¿è¡Œäº¤äº’å¯¹è¯ï¼‰çš„æ¥é¾™å»è„‰ï¼Œä»Šå¤©æˆ‘ä»¬ç¨å¾®è½»æ¾ä¸€ä¸‹ï¼Œè®²äº›æ²¡æœ‰é‚£ä¹ˆçƒ§è„‘ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•çš„å†…å®¹ã€‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼Œå¦‚ä½•ä½¿ç”¨Assistantsä¸­çš„Code interpreteråšæ•°æ®åˆ†æã€‚

## ä»€ä¹ˆæ˜¯ Code interpreter

Code interpreterè¿™ä¸ªå·¥å…·çš„åå­—æœ‰ç‚¹è¯¯å¯¼ï¼Œä¸€å¼€å§‹ï¼Œæˆ‘ä»¥ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ä»£ç åˆ†æå™¨ï¼Œæ˜¯ç±»ä¼¼äºGithub Copilotã€CodeLlamaè¿™æ ·çš„å·¥å…·ï¼Œèƒ½å¤Ÿåˆ†æã€è¡¥å…¨æˆ–è€…ç”Ÿæˆä»£ç ï¼Œå¸®åŠ©å¼€å‘è€…æé«˜ç¼–ç¨‹æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚æˆ‘æƒ³ï¼Œå¦‚æœæˆ‘æŠŠä¸€å †ç¨‹åºä»£ç ä¸¢è¿›å»ï¼ŒCode interpreteråº”è¯¥èƒ½å¸®æˆ‘åˆ†æåˆ†æå§ï¼ˆå…¶å®ChatGPTä¸è°ƒç”¨ä»»ä½•å·¥å…·ï¼Œå°±å·²ç»å¯ä»¥èƒœä»»è¿™ç§ä»£ç åˆ†æå’Œç”Ÿæˆçš„ä»»åŠ¡äº†ï¼‰ã€‚

ä½†æ˜¯ï¼Œå…¶å®ä¸æ˜¯ï¼ŒCode interpreterå½“ç„¶å¯ä»¥ç”Ÿæˆä»£ç ï¼Œä½†å®ƒçš„ä¸»è¦çš„ç›®æ ‡å·¥ä½œæ˜¯å¸®åŠ©æˆ‘ä»¬æ ¹æ®æ•°æ®æ–‡ä»¶åšæ•°æ®åˆ†æã€‚è¿™é‡Œæ‰€è¯´çš„æ•°æ®åˆ†æï¼Œæ˜¯ä»å¤´åˆ°å°¾çš„ä¸€ç«™å¼æœåŠ¡â€”â€”**ç”Ÿæˆæ•°æ®åˆ†æä»£ç çš„åŒæ—¶ï¼Œè¿˜èƒ½ç›´æ¥è¿è¡Œæ‰€ç”Ÿæˆçš„ä»£ç ï¼Œå¹¶å‘ˆç°ç»“æœ**ã€‚

ç”¨å®˜æ–¹çš„è¯æ¥è¯´ï¼ŒCode interpreteræ˜¯ä¸€æ¬¾æ‰˜ç®¡åœ¨OpenAIæœåŠ¡å™¨çš„å·¥å…·ï¼Œå…è®¸ç”¨Pythonä»£ç è¯»å–ã€å¤„ç†å’Œåˆ†ææ•°æ®æ–‡ä»¶ã€‚å®ƒæ”¯æŒå¤šç§å¸¸è§çš„æ–‡ä»¶æ ¼å¼ï¼Œå¦‚csvã€jsonã€pdfç­‰ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ‡ç‰‡ã€è¿‡æ»¤ã€æ’åºã€åˆ†ç»„ã€èšåˆç­‰å¤šç§æ“ä½œï¼Œè€Œä¸”å†…ç½®äº†æ•°æ®å¯è§†åŒ–åŠŸèƒ½ï¼Œå¯ä»¥ä¸€é”®ç”ŸæˆæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰å›¾è¡¨ã€‚OpenAIå¯¹Code interpreterä½¿ç”¨æŒ‰é‡è®¡è´¹ï¼Œæ¯ä¸ªä¼šè¯æ”¶è´¹0.03ç¾å…ƒï¼Œä¼šè¯é»˜è®¤æŒç»­1å°æ—¶ã€‚

Code interpreterå¹¶ä¸ä»…ä»…å­˜åœ¨äºAssistantsä¸­ï¼Œè€Œæ˜¯å·²ç»æ— ç¼é›†æˆåˆ°äº†ChatGPTè¿™æ¬¾äº§å“çš„å†…éƒ¨ã€‚æ¯”å¦‚ï¼Œæˆ‘æœ‰ä¸€ä¸ªä¸‹å›¾æ‰€ç¤ºçš„é”€å”®æ•°æ®æ–‡ä»¶ï¼ˆè¯¾ç¨‹æ–‡ä»¶å’Œä»£ç åœ¨[æ­¤å¤„](https://github.com/huangjia2019/powerful_llm)ä¸‹è½½ï¼‰ï¼Œå°±å¯ä»¥è®©ChatGPTï¼ˆGPT-4ï¼‰ä¸ºæˆ‘è¿›è¡Œæ•°æ®åˆ†æã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/72/33/72cd44c76d43b3ffcee2d778d5ff0733.png?wh=902x429)

ä¸Šä¼ ç»™GPT-4ä¹‹åï¼ŒChatGPTçš„æ•°æ®åˆ†æç»“æœå¦‚ä¸‹ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/06/96/06d65ea13c673410ae170d374e9ec496.png?wh=1518x1684)

ä¸Šè¿°åˆ†æç»“æœï¼Œä¸ä»…ä»…æ˜¯é€šè¿‡ç®€å•çš„GPTæ–‡æœ¬è¯»å–æ€»ç»“å‡ºæ¥çš„ï¼Œè€Œæ˜¯ç»è¿‡äº†Pythonä»£ç çš„åŠ å·¥å¤„ç†ä¹‹åæ‰€å‘ˆç°çš„ç»“æœã€‚å½“æˆ‘ä»¬åœ¨ChatGPTå¯¹è¯ç•Œé¢ä¸­é€‰æ‹©ä»¥ä¸‹è¿™ä¸¤ç§ç®­å¤´ï¼Œå°±å¯ä»¥çœ‹åˆ°Pythonä»£ç ï¼Œä»¥åŠä»£ç ç”Ÿæˆçš„æ•°æ®åˆ†æç»“æœã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/ca/92/caf2e74b6c5fbcd01e0d0abaf8850892.jpg?wh=597x143)

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/0f/97/0fa08acb919a01856acbd5cebbb88e97.png?wh=1007x1632)

è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒChatGPTå°±ç”¨åˆ°äº†Code Intepreterçš„åŠŸèƒ½ã€‚åªä¸è¿‡ï¼Œæ­¤æ—¶Code Intepreterå·²ç»å†…åµŒåˆ°ChatGPTä¸­äº†ï¼ŒChatGPTçŸ¥é“ä»€ä¹ˆæ—¶å€™åº”è¯¥è°ƒç”¨å®ƒã€‚

## ä½¿ç”¨ Playground ä¸­çš„ Code Intepreter

å¥½ï¼Œä¸‹é¢æˆ‘ä»¬æ¥æŠŠè¿™ä¸ªå·¥å…·é›†æˆåˆ°è‡ªå·±çš„Assistantä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆé€šè¿‡Playgroundä¸­çš„Code Intepreteræ¥çœ‹çœ‹å®ƒçš„ä½¿ç”¨æœºç†ã€‚

ç¬¬ä¸€æ­¥ï¼Œé€‰æ‹©Create assistantæ–°å»ºä¸€ä¸ªAssistantï¼Œå¹¶å‘½åä¸ºæ•°æ®åˆ†æåŠ©æ‰‹ï¼ˆåå­—éšæ„ï¼‰ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/yy/4a/yy237a7c4fcd4411012e01256ea2844a.png?wh=679x302)

ç¬¬äºŒæ­¥ï¼Œå¼€å¯Code interpreteråŠŸèƒ½ï¼Œå¹¶é€šè¿‡AddåŠŸèƒ½ä¸Šä¼ æ•°æ®æ–‡ä»¶ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/e7/20/e7382ea9c3e8ffba806354f5d96a7520.png?wh=963x1223)

ä¹‹åï¼Œå°±å¯ä»¥åœ¨å¯¹è¯åŒºåŸŸå†…é€šè¿‡è‡ªç„¶è¯­è¨€æ¥è°ƒç”¨Assistantè¿›è¡Œæ•°æ®åˆ†æã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/c4/69/c4e83076ddc1dfdc0cf5338aa1deed69.png?wh=2202x2048)

## ä½¿ç”¨ Python è¿›è¡Œæ•°æ®åˆ†æ

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æš‚æ—¶å¿˜æ‰Code intepreterï¼Œå›åˆ°Pythonæ•°æ®åˆ†æçš„é¢†åŸŸã€‚æˆ‘ä»¬æ¥åŸºäºæ•°æ®æ–‡ä»¶ flower\_sales.csv æ‰‹å·¥ç¼–å†™ä¸€äº›ä»£ç è¿›è¡ŒåŸºæœ¬çš„æ•°æ®åˆ†ææ“ä½œã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æŒ‰åœ°åŒºè®¡ç®—æ€»æ”¶å…¥ï¼Œå¹¶ç»˜åˆ¶æŸ±çŠ¶å›¾ã€‚

```plain
import pandas as pd
import matplotlib.pyplot as plt

# Read the CSV file
df = pd.read_csv('flower_sales.csv')

# Calculate total revenue by region and create a bar chart
revenue_by_region = df.groupby('region')['price'].sum()
revenue_by_region.plot.bar(figsize=(8, 4))
plt.title('Total Revenue by Region')
plt.xlabel('Region')
plt.ylabel('Revenue')
plt.show()
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/1f/5d/1fa87a43bd4fe13ab5yyd59245b3f25d.png?wh=713x419)

ç„¶åï¼ŒæŒ‰æ—¥æœŸè®¡ç®—æ¯æ—¥æ€»æ”¶å…¥ï¼Œå¹¶ç»˜åˆ¶æŠ˜çº¿å›¾ã€‚

```plain
# Calculate daily total revenue and create a line chart
daily_revenue = df.groupby('date')['price'].sum()
daily_revenue.plot.line(figsize=(10, 4))
plt.title('Daily Total Revenue')
plt.xlabel('Date')
plt.ylabel('Revenue')
plt.show()
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/73/dd/733573bb170ec388b9c9db6e68940cdd.png?wh=859x393)

ä¹‹åï¼Œè®¡ç®—å„èŠ±å‰ç±»å‹çš„é”€å”®å æ¯”ï¼Œå¹¶ç»˜åˆ¶é¥¼å›¾ã€‚

```plain
# Calculate the sales proportion of each flower type and create a pie chart
flower_sales = df.groupby('flower')['count'].sum()
plt.pie(flower_sales, labels=flower_sales.index, autopct='%1.1f%%')
plt.title('Sales Proportion by Flower Type')
plt.show()
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/f9/c7/f916567b8eefc89d1997c715b76284c7.png?wh=399x411)

æ¥ä¸‹æ¥ï¼Œæ‰¾å‡ºåˆ©æ¶¦æœ€é«˜çš„5ç§èŠ±å‰ã€‚

```plain
# Find the top 5 most profitable flowers
top5_profit_flowers = df.groupby('flower')['profit'].sum().nlargest(5)
print('Top 5 Most Profitable Flowers:')
print(top5_profit_flowers)
```

è¾“å‡ºå¦‚ä¸‹ï¼š

```plain
Top 5 Most Profitable Flowers:
flower
Rose         30532.5
Tulip        25037.0
Lily         15823.0
Daisy         9905.0
Sunflower     9517.0
Name: profit, dtype: float64
```

æœ€åï¼Œä½¿ç”¨éšæœºæ£®æ—å›å½’æ¨¡å‹æ¥é¢„æµ‹æœªæ¥7å¤©çš„æ€»æ”¶å…¥ã€‚

```plain
from sklearn.ensemble import RandomForestRegressor
# Forecast the total revenue for the next 7 days using Random Forest Regressor
revenue_ts = df.groupby('date')['price'].sum().reset_index()
revenue_ts['date'] = pd.to_datetime(revenue_ts['date'])
revenue_ts['day'] = revenue_ts['date'].dt.day

X = revenue_ts['day'].values.reshape(-1, 1)
y = revenue_ts['price'].values

model = RandomForestRegressor(n_estimators=100, random_state=42)
model.fit(X, y)

future_dates = pd.date_range(start=revenue_ts['date'].max(), periods=8, freq='D')[1:]
future_days = future_dates.day.values.reshape(-1, 1)

forecast = model.predict(future_days)
print('Forecasted Total Revenue for the Next 7 Days:')
print(pd.Series(forecast, index=future_dates))
```

è¾“å‡ºå¦‚ä¸‹ï¼š

```plain
Forecasted Total Revenue for the Next 7 Days:
2023-05-01    1836.360355
2023-05-02    1805.565833
2023-05-03    1185.813321
2023-05-04    1282.622365
2023-05-05    1743.691246
2023-05-06    1885.061446
2023-05-07    2132.975299
Freq: D, dtype: float64
```

è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå…¶ä¸»è¦æ­¥éª¤æ˜¯å…ˆå°†æ—¥æœŸåˆ—è½¬æ¢ä¸ºæ—¶é—´æˆ³æ ¼å¼ï¼Œå¹¶æå–æ—¥æœŸä¸­çš„æ—¥ä¿¡æ¯ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ç‰¹å¾ï¼Œå°†æ—¥æœŸç‰¹å¾æ‰€å¯¹åº”çš„æ€»æ”¶å…¥ä½œä¸ºæ ‡ç­¾ï¼Œè¿™ä¹Ÿå°±æ˜¯æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºã€‚ç„¶åï¼Œåˆ›å»ºå¹¶è®­ç»ƒéšæœºæ£®æ—å›å½’æ¨¡å‹ã€‚æ¨¡å‹è®­ç»ƒå¥½ä¹‹åï¼Œç”Ÿæˆæœªæ¥7å¤©çš„æ—¥æœŸåºåˆ—ï¼Œå¹¶æå–æ—¥ä¿¡æ¯ä½œä¸ºæ¨¡å‹çš„è¾“å…¥ï¼Œæœ€åä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹æœªæ¥7å¤©çš„æ€»æ”¶å…¥è¿›è¡Œé¢„æµ‹ã€‚

## **ä½¿ç”¨** **Assistant API** **ä¸­çš„** **Code Intepreter**

ä¸Šé¢çš„å‡ ä¸ªæ•°æ®åˆ†æç¤ºä¾‹ï¼Œè™½ç„¶ä¸éš¾ï¼Œä½†æ˜¯æ¯•ç«Ÿè¿˜æ˜¯éœ€è¦ç¼–ç¨‹åŸºç¡€ï¼Œä¸€ä¸ªæ•°æ®åˆ†æå¸ˆå®Œæˆä¸Šè¿°ç¼–ç¨‹ä»»åŠ¡ï¼Œå¤§æ¦‚éœ€è¦å‡ ä¸ªå°æ—¶åˆ°ä¸€ä¸¤å¤©çš„æ—¶é—´å†™ä»£ç ã€‚

é‚£ç°åœ¨å‘¢ï¼Œæˆ‘ä»¬å°±é€šè¿‡Assistants APIä¸­çš„Code intepreterå·¥å…·ï¼Œä»¥è‡ªç„¶è¯­è¨€çš„æ–¹å¼æ¥å®Œæˆä¸Šè¿°æ•°æ®åˆ†æåŠŸèƒ½ã€‚**åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒAssistants API** **çš„è°ƒç”¨æµç¨‹æ˜¯å›ºå®šçš„ï¼Œè€Œæˆ‘ä»¬éœ€è¦è®¾è®¡çš„åªæ˜¯è‡ªç„¶è¯­è¨€æç¤ºæ–‡æœ¬**ã€‚

å…ˆæ¥çœ‹ä¸€ä¸ªä»¥æ–‡æœ¬æ ¼å¼ä½œä¸ºè¾“å‡ºçš„æ•°æ®åˆ†æç¤ºä¾‹ã€‚

```plain
from dotenv import load_dotenv
load_dotenv()
from openai import OpenAI
import os
import requests
import time
import json

client = OpenAI()

def create_assistant(instructions, file_path):
Â  Â  with open(file_path, "rb") as file:
Â  Â  Â  Â  file_obj = client.files.create(file=file, purpose='assistants')
Â  Â  Â  Â  file_id = file_obj.id

Â  Â  assistant = client.beta.assistants.create(
Â  Â  Â  Â  instructions=instructions,
Â  Â  Â  Â  model="gpt-4",
Â  Â  Â  Â  tools=[{"type": "code_interpreter"}],
Â  Â  Â  Â  file_ids=[file_id]
Â  Â  )
Â  Â  return assistant

def create_thread(user_message, file_id):
Â  Â  thread = client.beta.threads.create(
Â  Â  Â  Â  messages=[
Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  "role": "user",
Â  Â  Â  Â  Â  Â  Â  Â  "content": user_message,
Â  Â  Â  Â  Â  Â  Â  Â  "file_ids": [file_id]
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  ]
Â  Â  )
Â  Â  return thread

def run_assistant(thread_id, assistant_id):
Â  Â  run = client.beta.threads.runs.create(
Â  Â  Â  Â  thread_id=thread_id,
Â  Â  Â  Â  assistant_id=assistant_id
Â  Â  )
Â  Â  return run

def poll_run_status(client, thread_id, run_id, interval=20):
Â  Â  while True:
Â  Â  Â  Â  run = client.beta.threads.runs.retrieve(thread_id=thread_id, run_id=run_id)
Â  Â  Â  Â  print(f"Runçš„è½®è¯¢ä¿¡æ¯:\n{run}\n")
Â  Â  Â  Â  if run.status in ['requires_action', 'completed']:
Â  Â  Â  Â  Â  Â  return run
Â  Â  Â  Â  time.sleep(interval)

def get_assistant_reply(thread_id):
Â  Â  response = client.beta.threads.messages.list(thread_id=thread_id)
Â  Â  message = response.data[-1]
Â  Â  message_content = message.content[0].text
Â  Â  annotations = message_content.annotations
Â  Â  citations = []

Â  Â  for index, annotation in enumerate(annotations):
Â  Â  Â  Â  message_content.value = message_content.value.replace(annotation.text, f' [{index}]')

Â  Â  Â  Â  if (file_citation := getattr(annotation, 'file_citation', None)):
Â  Â  Â  Â  Â  Â  cited_file = client.files.retrieve(file_citation.file_id)
Â  Â  Â  Â  Â  Â  citations.append(f'[{index}] {file_citation.quote} from {cited_file.filename}')
Â  Â  Â  Â  elif (file_path := getattr(annotation, 'file_path', None)):
Â  Â  Â  Â  Â  Â  cited_file = client.files.retrieve(file_path.file_id)
Â  Â  Â  Â  Â  Â  citations.append(f'[{index}] Click <here> to download {cited_file.filename}')
Â  Â  Â  Â  Â  Â  download_file(cited_file.filename, file_path.file_id)

Â  Â  message_content.value += '\n' + '\n'.join(citations)
Â  Â  return message_content.value

def download_file(filename, file_id):
Â  Â  file_content = client.files.content(file_id)
Â  Â  with open(filename, 'wb') as file:
Â  Â  Â  Â  file.write(file_content)

def main():
Â  Â  instructions = """
Â  Â  Please use the flower_sales.csv data to complete the following analysis tasks:
Â  Â  1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.
Â  Â  2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.
Â  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.
Â  Â  4. Find the top 5 most profitable flowers based on the total profit.
Â  Â  5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.
Â  Â  """

Â  Â  file_path = r"01_Assitants\CodeIntepreter\flower_sales.csv"
Â  Â  
Â  Â  with open(file_path, "rb") as file:
Â  Â  Â  Â  file_obj = client.files.create(file=file, purpose='assistants')
Â  Â  Â  Â  file_id = file_obj.id

Â  Â  assistant = create_assistant(instructions, file_path)

Â  Â  user_message = "Please perform the data analysis tasks as instructed."
Â  Â  thread = create_thread(user_message, file_id)

Â  Â  run = run_assistant(thread.id, assistant.id)
Â  Â  print(f"Run status: {run.status}")

Â  Â  # è½®è¯¢Runç›´åˆ°å®Œæˆæˆ–éœ€è¦æ“ä½œ
Â  Â  run = poll_run_status(client, thread.id, run.id)

Â  Â  # è·å–Assistantåœ¨Threadä¸­çš„å›åº”
Â  Â  messages = client.beta.threads.messages.list(thread_id=thread.id)
Â  Â  print("å…¨éƒ¨çš„message", messages)

Â  Â  # è¾“å‡ºAssistantçš„æœ€ç»ˆå›åº”
Â  Â  print('ä¸‹é¢æ‰“å°æœ€ç»ˆçš„Assistantå›åº”:')
Â  Â  for message in messages.data:
Â  Â  Â  Â  if message.role == "assistant":
Â  Â  Â  Â  Â  Â  print(f"{message.content}\n")

if __name__ == "__main__":
Â  Â  main()
```

è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆä¸Šä¼ æ•°æ®æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªAssistantå¯¹è±¡å’Œä¸€ä¸ªThreadå¯¹è±¡ï¼Œç„¶ååœ¨Threadä¸Šè¿è¡ŒAssistantæ¥æ‰§è¡ŒæŒ‡å®šçš„æ•°æ®åˆ†æä»»åŠ¡ã€‚ä¹‹åï¼Œè¿˜æ˜¯è½®è¯¢Runçš„çŠ¶æ€ï¼Œå¹¶åœ¨Runå®Œæˆä¹‹åï¼Œè·å–å¹¶æ˜¾ç¤ºAssistantçš„å›å¤ã€‚

å…¶ä¸­çš„å…³é”®è®¾è®¡ï¼Œå°±æ˜¯æç¤ºä¿¡æ¯çš„è®¾è®¡ã€‚

```
Â  Â  instructions = """
Â  Â  Please use the flower_sales.csv data to complete the following analysis tasks:
Â  Â  1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.
Â  Â  2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.
Â  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.
Â  Â  4. Find the top 5 most profitable flowers based on the total profit.
Â  Â  5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.
Â  Â  """
```

è¿™é‡Œï¼Œæˆ‘ä»¬ç»™å‡ºçš„5ä¸ªæ•°æ®åˆ†æä»»åŠ¡ï¼Œæ­£æ˜¯å’Œåˆšæ‰æˆ‘ä»¬ç”¨Pythonæ•°æ®åˆ†æä»£ç æ¥å®ç°çš„å®Œå…¨ä¸€è‡´ã€‚

è¾“å‡ºå¦‚ä¸‹ï¼š

```plain
Runçš„åˆå§‹ä¿¡æ¯: queued
Runçš„è½®è¯¢ä¿¡æ¯:
Run(id='run_202iwnMlW8nJVbEKOMPWJqVT', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', cancelled_at=None, completed_at=None, created_at=1713842398, expires_at=1713842998, failed_at=None, incomplete_details=None, instructions='\nÂ  Â  Please use the flower_sales.csv data to complete the following analysis tasks:\nÂ  Â  # 1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.\nÂ  Â  # 2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.\nÂ  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.\nÂ  Â  4. Find the top 5 most profitable flowers based on the total profit.\nÂ  Â  # 5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.\nÂ  Â  ', last_error=None, max_completion_tokens=None, max_prompt_tokens=None, metadata={}, model='gpt-4-turbo', object='thread.run', required_action=None, response_format='auto', started_at=1713842398, status='in_progress', thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7', tool_choice='auto', tools=[CodeInterpreterTool(type='code_interpreter')], truncation_strategy=TruncationStrategy(type='auto', last_messages=None), usage=None, temperature=1.0, top_p=1.0, tool_resources={})

Runçš„è½®è¯¢ä¿¡æ¯:
Run(id='run_202iwnMlW8nJVbEKOMPWJqVT', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', cancelled_at=None, completed_at=None, created_at=1713842398, expires_at=1713842998, failed_at=None, incomplete_details=None, instructions='\nÂ  Â  Please use the flower_sales.csv data to complete the following analysis tasks:\nÂ  Â  # 1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.\nÂ  Â  # 2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.\nÂ  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.\nÂ  Â  4. Find the top 5 most profitable flowers based on the total profit.\nÂ  Â  # 5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.\nÂ  Â  ', last_error=None, max_completion_tokens=None, max_prompt_tokens=None, metadata={}, model='gpt-4-turbo', object='thread.run', required_action=None, response_format='auto', started_at=1713842398, status='in_progress', thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7', tool_choice='auto', tools=[CodeInterpreterTool(type='code_interpreter')], truncation_strategy=TruncationStrategy(type='auto', last_messages=None), usage=None, temperature=1.0, top_p=1.0, tool_resources={})

Runçš„è½®è¯¢ä¿¡æ¯:
Run(id='run_202iwnMlW8nJVbEKOMPWJqVT', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', cancelled_at=None, completed_at=None, created_at=1713842398, expires_at=1713842998, failed_at=None, incomplete_details=None, instructions='\nÂ  Â  Please use the flower_sales.csv data to complete the following analysis tasks:\nÂ  Â  # 1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.\nÂ  Â  # 2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.\nÂ  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.\nÂ  Â  4. Find the top 5 most profitable flowers based on the total profit.\nÂ  Â  # 5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.\nÂ  Â  ', last_error=None, max_completion_tokens=None, max_prompt_tokens=None, metadata={}, model='gpt-4-turbo', object='thread.run', required_action=None, response_format='auto', started_at=1713842398, status='in_progress', thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7', tool_choice='auto', tools=[CodeInterpreterTool(type='code_interpreter')], truncation_strategy=TruncationStrategy(type='auto', last_messages=None), usage=None, temperature=1.0, top_p=1.0, tool_resources={})

Runçš„è½®è¯¢ä¿¡æ¯:
Run(id='run_202iwnMlW8nJVbEKOMPWJqVT', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', cancelled_at=None, completed_at=None, created_at=1713842398, expires_at=1713842998, failed_at=None, incomplete_details=None, instructions='\nÂ  Â  Please use the flower_sales.csv data to complete the following analysis tasks:\nÂ  Â  # 1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.\nÂ  Â  # 2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.\nÂ  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.\nÂ  Â  4. Find the top 5 most profitable flowers based on the total profit.\nÂ  Â  # 5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.\nÂ  Â  ', last_error=None, max_completion_tokens=None, max_prompt_tokens=None, metadata={}, model='gpt-4-turbo', object='thread.run', required_action=None, response_format='auto', started_at=1713842398, status='in_progress', thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7', tool_choice='auto', tools=[CodeInterpreterTool(type='code_interpreter')], truncation_strategy=TruncationStrategy(type='auto', last_messages=None), usage=None, temperature=1.0, top_p=1.0, tool_resources={})

Runçš„è½®è¯¢ä¿¡æ¯:
Run(id='run_202iwnMlW8nJVbEKOMPWJqVT', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', cancelled_at=None, completed_at=1713842464, created_at=1713842398, expires_at=None, failed_at=None, incomplete_details=None, instructions='\nÂ  Â  Please use the flower_sales.csv data to complete the following analysis tasks:\nÂ  Â  # 1. Group the data by region and calculate the total revenue for each region. Visualize the results using a bar chart.\nÂ  Â  # 2. Group the data by date and calculate the daily total revenue. Create a line chart to show the revenue trend over time.\nÂ  Â  3. Calculate the sales proportion of each flower type and display the results in a pie chart.\nÂ  Â  4. Find the top 5 most profitable flowers based on the total profit.\nÂ  Â  # 5. Using the historical sales data, forecast the total revenue for the next 7 days using a Random Forest Regressor model.\nÂ  Â  ', last_error=None, max_completion_tokens=None, max_prompt_tokens=None, metadata={}, model='gpt-4-turbo', object='thread.run', required_action=None, response_format='auto', started_at=1713842398, status='completed', thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7', tool_choice='auto', tools=[CodeInterpreterTool(type='code_interpreter')], truncation_strategy=TruncationStrategy(type='auto', last_messages=None), usage=Usage(completion_tokens=1001, prompt_tokens=11781, total_tokens=12782), temperature=1.0, top_p=1.0, tool_resources={})

å…¨éƒ¨çš„message SyncCursorPage[Message](data=[Message(id='msg_cRSYdkrscxnyHXimfqqivQZn', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', attachments=[], completed_at=None, content=[TextContentBlock(text=Text(annotations=[], value="The top 5 most profitable flowers based on the total profit are listed below:\n1. **Rose** with a profit of \\$30,532.50\n2. **Tulip** with a profit of \\$25,037.00\n3. **Lily** with a profit of \\$15,823.00\n4. **Daisy** with a profit of \\$9,905.00\n5. **Sunflower** with a profit of \\$9,517.00\n\nThese results reveal which flower types are contributing most significantly to the business's bottom line. \n\nLet's move forward with the final task which involves forecasting the total revenue for the next 7 days using a Random Forest Regressor model. I will prepare the data and develop the model to perform this forecast."), type='text')], created_at=1713842457, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='assistant', run_id='run_202iwnMlW8nJVbEKOMPWJqVT', status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7'), Message(id='msg_QZMADy6BrFb6LTGS0Ho7ruEi', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', attachments=[], completed_at=None, content=[ImageFileContentBlock(image_file=ImageFile(file_id='file-aUTB6yfVsc7AoI0SNfQteuwq'), type='image_file'), TextContentBlock(text=Text(annotations=[], value="The pie chart above presents the proportion of sales for each type of flower, indicating the relative popularity and market share of each flower type within the dataset.\n\nNext, we will proceed with task #4: identifying the top 5 most profitable flowers based on the total profit. I'll sum the profit for each flower type and display the top 5."), type='text')], created_at=1713842450, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='assistant', run_id='run_202iwnMlW8nJVbEKOMPWJqVT', status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7'), Message(id='msg_r0ETiNGjOEaqFuEvw45auB52', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', attachments=[], completed_at=None, content=[ImageFileContentBlock(image_file=ImageFile(file_id='file-ARR9oWz1AdYwLCVeaDNsYfGk'), type='image_file'), TextContentBlock(text=Text(annotations=[], value='The line chart illustrates the daily total revenue from flower sales, showing various trends and fluctuations over time.\n\nMoving on to task #3, I will calculate the sales proportion of each flower type and visualize it using a pie chart.'), type='text')], created_at=1713842442, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='assistant', run_id='run_202iwnMlW8nJVbEKOMPWJqVT', status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7'), Message(id='msg_pfR9okmWbQZTlX5FSpFwKji2', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', attachments=[], completed_at=None, content=[ImageFileContentBlock(image_file=ImageFile(file_id='file-DA3uSxFhVE8KqZFrWKY2YWTX'), type='image_file'), TextContentBlock(text=Text(annotations=[], value="The bar chart above displays the total revenue from flower sales for each region.\n\nNext, let's address task #2 by grouping the data by date and calculating the daily total revenue, which we will then visualize as a line chart to observe trends over time."), type='text')], created_at=1713842433, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='assistant', run_id='run_202iwnMlW8nJVbEKOMPWJqVT', status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7'), Message(id='msg_SCX0Z8qv2VGtFHBGPJkp66E1', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', attachments=[], completed_at=None, content=[TextContentBlock(text=Text(annotations=[], value="The dataset contains the following columns:\n- `date`: The date of sales\n- `flower`: Type of flower sold\n- `count`: The number of flowers sold\n- `price`: Total price received for the flowers sold\n- `cost`: Total cost of the flowers sold\n- `profit`: Total profit from the flower sales\n- `region`: Geographic region of the sales\n\nFrom your requests, we'll proceed with the analysis tasks:\n1. Group the data by region and calculate the total revenue for each region.\n2. Group the data by date and calculate the daily total revenue.\n3. Calculate the sales proportion of each flower type.\n4. Find the top 5 most profitable flowers based on the total profit.\n\nLet's start with task #1 and visualize the total revenue for each region."), type='text')], created_at=1713842408, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='assistant', run_id='run_202iwnMlW8nJVbEKOMPWJqVT', status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7'), Message(id='msg_0wyxD0pWM9DbMOevRVuuwPZW', assistant_id='asst_ZzFnvavBoYZ59NDLnLinNC99', attachments=[], completed_at=None, content=[TextContentBlock(text=Text(annotations=[], value="Let's start by examining the contents of the uploaded CSV file to understand its structure and data types. I will then proceed with the specified data analysis tasks."), type='text')], created_at=1713842399, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='assistant', run_id='run_202iwnMlW8nJVbEKOMPWJqVT', status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7'), Message(id='msg_SujuDWSAVzkKVx45SrhVnQQL', assistant_id=None, attachments=[Attachment(add_to=None, file_id='file-XXkzo0wHANWlrkMd1ZnaESor', tools=[{'type': 'code_interpreter'}])], completed_at=None, content=[TextContentBlock(text=Text(annotations=[], value='Please perform the data analysis tasks as instructed.'), type='text')], created_at=1713842397, incomplete_at=None, incomplete_details=None, metadata={}, object='thread.message', role='user', run_id=None, status=None, thread_id='thread_D3JUkq05bfvtmBw7QoNSuTy7')], object='list', first_id='msg_cRSYdkrscxnyHXimfqqivQZn', last_id='msg_SujuDWSAVzkKVx45SrhVnQQL', has_more=False)

ä¸‹é¢æ‰“å°æœ€ç»ˆçš„Assistantå›åº”:
[TextContentBlock(text=Text(annotations=[], value="The top 5 most profitable flowers based on the total profit are listed below:\n1. **Rose** with a profit of \\$30,532.50\n2. **Tulip** with a profit of \\$25,037.00\n3. **Lily** with a profit of \\$15,823.00\n4. **Daisy** with a profit of \\$9,905.00\n5. **Sunflower** with a profit of \\$9,517.00\n\nThese results reveal which flower types are contributing most significantly to the business's bottom line. \n\nLet's move forward with the final task which involves forecasting the total revenue for the next 7 days using a Random Forest Regressor model. I will prepare the data and develop the model to perform this forecast."), type='text')]

[ImageFileContentBlock(image_file=ImageFile(file_id='file-aUTB6yfVsc7AoI0SNfQteuwq'), type='image_file'), TextContentBlock(text=Text(annotations=[], value="The pie chart above presents the proportion of sales for each type of flower, indicating the relative popularity and market share of each flower type within the dataset.\n\nNext, we will proceed with task #4: identifying the top 5 most profitable flowers based on the total profit. I'll sum the profit for each flower type and display the top 5."), type='text')]

[ImageFileContentBlock(image_file=ImageFile(file_id='file-ARR9oWz1AdYwLCVeaDNsYfGk'), type='image_file'), TextContentBlock(text=Text(annotations=[], value='The line chart illustrates the daily total revenue from flower sales, showing various trends and fluctuations over time.\n\nMoving on to task #3, I will calculate the sales proportion of each flower type and visualize it using a pie chart.'), type='text')]

[ImageFileContentBlock(image_file=ImageFile(file_id='file-DA3uSxFhVE8KqZFrWKY2YWTX'), type='image_file'), TextContentBlock(text=Text(annotations=[], value="The bar chart above displays the total revenue from flower sales for each region.\n\nNext, let's address task #2 by grouping the data by date and calculating the daily total revenue, which we will then visualize as a line chart to observe trends over time."), type='text')]

[TextContentBlock(text=Text(annotations=[], value="The dataset contains the following columns:\n- `date`: The date of sales\n- `flower`: Type of flower sold\n- `count`: The number of flowers sold\n- `price`: Total price received for the flowers sold\n- `cost`: Total cost of the flowers sold\n- `profit`: Total profit from the flower sales\n- `region`: Geographic region of the sales\n\nFrom your requests, we'll proceed with the analysis tasks:\n1. Group the data by region and calculate the total revenue for each region.\n2. Group the data by date and calculate the daily total revenue.\n3. Calculate the sales proportion of each flower type.\n4. Find the top 5 most profitable flowers based on the total profit.\n\nLet's start with task #1 and visualize the total revenue for each region."), type='text')]

[TextContentBlock(text=Text(annotations=[], value="Let's start by examining the contents of the uploaded CSV file to understand its structure and data types. I will then proceed with the specified data analysis tasks."), type='text')]
```

ä¸Šé¢æ—¥å¿—ä¸­çš„å†…å®¹è¿‡å¤šï¼Œæˆ‘ä»¬ç®€å•åˆ—è¡¨æ€»ç»“ä¸€ä¸‹ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/fd/b3/fde42690da3772c09243de1c9c2decb3.jpg?wh=1822x1282)

ä»è¾“å‡ºä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒAssistantå£°ç§°ï¼Œé¥¼å›¾å·²ç»ç”Ÿæˆå•¦ï¼Œå¯ä»¥ä¸‹è½½ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æŠŠæ‰€æœ‰çš„æ•°æ®åˆ†æå›¾ç‰‡ä¸‹è½½ä¸‹æ¥ã€‚

```plain
from openai import OpenAI

def download_file(filename, file_id):
Â  Â  file_content = client.files.content(file_id)
Â  Â  with open(filename, 'wb') as file:
Â  Â  Â  Â  file.write(file_content.read())

def get_assistant_messages(thread_id, assistant_id):
Â  Â  response = client.beta.threads.messages.list(thread_id=thread_id)
Â  Â  messages = [message for message in response.data if message.role == 'assistant' and message.assistant_id == assistant_id]
Â  Â  return messages

def process_message(message):
Â  Â  for content_block in message.content:
Â  Â  Â  Â  if content_block.type == 'image_file':
Â  Â  Â  Â  Â  Â  file_id = content_block.image_file.file_id
Â  Â  Â  Â  Â  Â  filename = f"image_{file_id}.png"
Â  Â  Â  Â  Â  Â  download_file(filename, file_id)
Â  Â  Â  Â  Â  Â  print(f"Downloaded image: {filename}")
Â  Â  Â  Â  elif content_block.type == 'text':
Â  Â  Â  Â  Â  Â  text = content_block.text.value
Â  Â  Â  Â  Â  Â  annotations = content_block.text.annotations
Â  Â  Â  Â  Â  Â  for annotation in annotations:
Â  Â  Â  Â  Â  Â  Â  Â  if annotation.type == 'file_path':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  file_id = annotation.file_path.file_id
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  filename = annotation.text.split('/')[-1]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  download_file(filename, file_id)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  print(f"Downloaded file: {filename}")

def main():
Â  Â  thread_id = 'thread_D3JUkq05bfvtmBw7QoNSuTy7'
Â  Â  assistant_id = 'asst_ZzFnvavBoYZ59NDLnLinNC99'

Â  Â  messages = get_assistant_messages(thread_id, assistant_id)
Â  Â  for message in messages:
Â  Â  Â  Â  process_message(message)

if __name__ == "__main__":
Â  Â  client = OpenAI()
Â  Â  main()
```

è¿è¡Œç¨‹åºï¼Œä»£ç åˆ†æå™¨ï¼ˆä¹Ÿå°±æ˜¯æ•°æ®åˆ†æåŠ©æ‰‹ï¼‰åˆ›å»ºçš„å›¾ç‰‡å°†å‡ºç°åœ¨ä½ çš„æœ¬åœ°ç›®å½•ä¸­ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/51/de/51eee38949746bde9efb1656d98e0bde.png?wh=1453x1359)

å¥½å•¦ï¼Œç»è¿‡ä¸Šé¢çš„å±•ç¤ºï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨Assistantsä¸­çš„Code interpreteråšæ•°æ®åˆ†ææ—¶ï¼Œæ‰€éœ€è¦çš„åˆ‡æ¢æ˜¯ä»â€œæ•°æ®åˆ†æç¼–ç¨‹â€åˆ°è°ƒç”¨Assistants API è¿›è¡Œâ€œè‡ªç„¶è¯­è¨€ç¼–ç¨‹â€ã€‚

å½“ä½ éå¸¸ç†Ÿæ‚‰äº†Assistants APIçš„ä½¿ç”¨æµç¨‹åï¼Œå½“ç„¶æ˜¯ç”¨â€œè‡ªç„¶è¯­è¨€ç¼–ç¨‹â€æ›´èŠ‚çœå¿ƒåŠ›å•¦ï¼

## æ€»ç»“æ—¶åˆ»

æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æµ…å‡ºåœ°ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨OpenAIçš„Code interpreterå·¥å…·è¿›è¡Œæ•°æ®åˆ†æã€‚é€šè¿‡å¯¹æ¯”æ‰‹å†™Pythonä»£ç å’Œä½¿ç”¨è‡ªç„¶è¯­è¨€è°ƒç”¨Code interpreterï¼Œä½ åº”è¯¥å¯ä»¥æ¸…æ™°åœ°ç†è§£è¿™ä¸¤ç§æ–¹å¼çš„å¼‚åŒã€‚

æˆ‘æœ€æƒ³å‘ä½ å¼ºè°ƒçš„ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªå¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘çš„åŸºæœ¬æ€è·¯ï¼Œæœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä»è®¡ç®—æœºè¯­è¨€ç¼–ç ï¼Œåˆ°è‡ªç„¶è¯­è¨€ç¼–ç çš„èŒƒå¼è½¬æ¢ã€‚è¿™ä¸€è½¬å˜çš„æ„ä¹‰åœ¨äºé™ä½äº†æ•°æ®åˆ†æçš„é—¨æ§›ã€‚ä½¿ç”¨è‡ªç„¶è¯­è¨€æè¿°åˆ†æéœ€æ±‚ï¼Œæ— éœ€æŒæ¡å¤æ‚çš„ç¼–ç¨‹æŠ€èƒ½ï¼Œæ›´å¤šçš„äººå¯ä»¥å‚ä¸åˆ°æ•°æ®åˆ†æçš„è¿‡ç¨‹ä¸­æ¥ã€‚åŒæ—¶æé«˜äº†åˆ†ææ•ˆç‡ã€‚é€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’ï¼Œåˆ†æäººå‘˜å¯ä»¥å¿«é€Ÿè¿­ä»£åˆ†ææ€è·¯ï¼Œä¸å¿…èŠ±è´¹å¤§é‡æ—¶é—´ç¼–å†™å’Œè°ƒè¯•ä»£ç ã€‚Code interpreterä¼šè‡ªåŠ¨ç”Ÿæˆä¼˜åŒ–åçš„ä»£ç ï¼Œå¹¶ç»™å‡ºç»“æœã€‚

ä¸æ­¤åŒæ—¶ï¼Œè¿™ç§ç¼–ç¨‹èŒƒå¼ä¿ƒè¿›äº†äººæœºåä½œã€‚åˆ†æäººå‘˜æå‡ºéœ€æ±‚ï¼Œæœºå™¨è‡ªåŠ¨æ‰§è¡Œåˆ†æå¹¶ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨ï¼ŒåŒæ–¹ä¼˜åŠ¿äº’è¡¥ã€‚äººçš„åˆ›é€ åŠ›å’Œæ´å¯ŸåŠ›ï¼Œä¸æœºå™¨çš„è®¡ç®—èƒ½åŠ›å’Œæ‰§è¡ŒåŠ›ç›¸ç»“åˆï¼Œå¯ä»¥å®ç°æ›´åŠ æ™ºèƒ½é«˜æ•ˆçš„æ•°æ®åˆ†æã€‚è¿™ä¹Ÿé¢„ç¤ºäº†æœªæ¥äººæœºäº¤äº’çš„è¶‹åŠ¿ã€‚éšç€è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯çš„å‘å±•ï¼Œæˆ‘ä»¬ä¸è®¡ç®—æœºäº¤æµçš„æ–¹å¼ä¼šå˜å¾—è¶Šæ¥è¶Šè‡ªç„¶ï¼Œè¶Šæ¥è¶Šæ¥è¿‘äººä¸äººä¹‹é—´çš„äº¤æµã€‚ç¼–ç¨‹è¯­è¨€æˆ–è®¸ä¼šæˆä¸ºå†å²ï¼Œè‡ªç„¶è¯­è¨€åˆ™ä¼šæˆä¸ºäººæœºäº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚

## æ€è€ƒé¢˜

1. æœ¬ç¤ºä¾‹ä¸­çš„æç¤ºä¿¡æ¯æˆ‘æ˜¯ç”¨è‹±æ–‡å†™çš„ï¼Œè¯·ä½ ç”¨ä¸­æ–‡æç¤ºè¯•è¯•æ•ˆæœã€‚
2. åœ¨æœ¬ç¤ºä¾‹çš„ä»»åŠ¡5ï¼šç”¨éšæœºæ£®æ—æ¨¡å‹æ¥é¢„æµ‹7å¤©ä¹‹åçš„åˆ©æ¶¦ä¸­ï¼ŒAssistantçŠ¯æ‡’äº†ï¼Œæ²¡æœ‰çœŸæ­£å®ç°ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¯·ä½ åŠ å¼ºæç¤ºè¯­ï¼Œæˆ–è€…æŠŠå®ƒä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡é‡æ–°è®¾è®¡å®ç°ã€‚
3. æœªæ¥ï¼Œè‡ªç„¶è¯­è¨€é©±åŠ¨çš„æ•°æ®åˆ†ææ¨¡å¼å¯èƒ½åœ¨å“ªäº›åœºæ™¯ä¸‹å¤§æ˜¾èº«æ‰‹? åˆæœ‰å“ªäº›åœºæ™¯ç›®å‰è¿˜éš¾ä»¥é€‚ç”¨?
4. è‡ªç„¶è¯­è¨€é©±åŠ¨çš„è¶‹åŠ¿æ˜¯å¦æ„å‘³ç€ç¼–ç¨‹æŠ€èƒ½å°†å˜å¾—ä¸å†é‡è¦ï¼Ÿæ•°æ®åˆ†æäººå‘˜å¦‚ä½•åœ¨è¿™ä¸€è¶‹åŠ¿ä¸‹æå‡è‡ªå·±çš„èŒä¸šç«äº‰åŠ›ï¼Ÿä¼ ç»Ÿçš„ç¼–ç¨‹æŠ€èƒ½ä¸è‡ªç„¶è¯­è¨€äº¤äº’èƒ½åŠ›å¦‚ä½•å®ç°äº’è¡¥?

å…¶å®ï¼Œæœ‰çš„é¢˜ç›®å¹¶æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç•™è¨€åŒºä¸€èµ·æ¢è®¨ï¼Œé‚£ä¹ˆï¼Œæˆ‘æœŸå¾…çœ‹åˆ°ä½ çš„ç•™è¨€ã€‚å¦‚æœä»Šå¤©çš„å†…å®¹è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾è½¬å‘ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ6ï¼‰</strong></div><ul>
<li><span>qinsi</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ä¸»è¦è¿˜æ˜¯æ€•å¹»è§‰å§ã€‚ç”Ÿæˆä»£ç äº”åˆ†é’Ÿï¼Œæ£€æŸ¥ä»£ç äº”å°æ—¶ï¼Œæ€»ä½“ä¸Šå¯èƒ½è¿˜æ²¡äººå†™å¾—å¿«ã€‚code interpreteræ˜¯ç¡®ä¿ä»£ç è‡³å°‘èƒ½è·‘å¾—èµ·æ¥ã€‚</p>2024-05-24</li><br/><li><span>é™ˆä¸œ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ä»¥ä¸Šè¿™äº›æ¡ˆä¾‹åˆ†ææ¥è‡ªäºå®é™…å·¥ä½œå—ï¼Ÿè€å¸ˆèƒ½å¦é€‚å½“å¢åŠ å®é™…å·¥ä½œè¦ç”¨åˆ°çš„ä¾‹å­ï¼Ÿï¼Œè°¢è°¢ã€‚</p>2024-05-24</li><br/><li><span>Geek_6e7726</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆæå‡ºçš„è¿™äº›é—®é¢˜ï¼Œåé¢æœ‰ä¸“é—¨ä¸€ç« ç»Ÿä¸€å›å¤ä¹ˆï¼Ÿ</p>2024-06-07</li><br/><li><span>æ’éª¨</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å’Œç”Ÿæˆå¼é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¦‚GPT-4ï¼‰çš„å‘å±•ç¡®å®ä½¿å¾—ä¸è®¡ç®—æœºçš„äº¤äº’å˜å¾—æ›´åŠ ç›´è§‚å’Œè‡ªç„¶ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ç¼–ç¨‹æŠ€èƒ½å°†å˜å¾—ä¸å†é‡è¦ã€‚ç›¸åï¼Œç¼–ç¨‹æŠ€èƒ½å’Œè‡ªç„¶è¯­è¨€äº¤äº’èƒ½åŠ›å¯ä»¥äº’è¡¥ï¼Œå…±åŒæå‡æ•°æ®åˆ†æäººå‘˜çš„èŒä¸šç«äº‰åŠ›ã€‚</p>2024-06-03</li><br/><li><span>Simon WZ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è¿™æ ·å­çœ‹ï¼Œå…¶å®è¿™Function callingå’ŒCode Interpreterçš„åŠŸèƒ½åœ¨GPTä¸­éƒ½ä¹Ÿæœ‰ï¼Œé‚£ä½¿ç”¨Assistantsè·Ÿç›´æ¥è°ƒç”¨GPTæœ€æ˜æ˜¾åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>2024-06-25</li><br/><li><span>Alex</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>def create_assistant(instructions, file_path):
    with open(file_path, &quot;rb&quot;) as file:
        file_obj = client.files.create(file=file, purpose=&#39;assistants&#39;)
        file_id = file_obj.id

    assistant = client.beta.assistants.create(
        instructions=instructions,
        model=&quot;gpt-4&quot;,
        tools=[{&quot;type&quot;: &quot;code_interpreter&quot;}],
        file_ids=[file_id]
    )
    return assistant
è€å¸ˆè¿™é‡Œçš„file_idså¥½åƒåº”è¯¥å»æ‰å§ï¼Ÿ æŸ¥çœ‹æ–‡æ¡£ https:&#47;&#47;platform.openai.com&#47;docs&#47;api-reference&#47;assistants&#47;createAssistant  è¿™é‡Œå¦‚æœæ˜¯tool ä¸º file_searchçš„åœºæ™¯çš„è¯ ç”¨tool_resourcesè¯»å–æ–‡ä»¶å‘é‡ 
è¯·è€å¸ˆæŒ‡æ•™ä¸‹ æ˜¯ä¸æ˜¯æˆ‘ç†è§£é”™äº†ï¼Ÿ
</p>2024-06-10</li><br/>
</ul>