ä½ å¥½ï¼Œæˆ‘æ˜¯æé”Ÿã€‚

è¿™èŠ‚è¯¾æˆ‘ä»¬æ­£å¼è¿›å…¥å®æˆ˜ç¯èŠ‚ï¼Œå¼€å§‹å­¦ä¹ æœ¬è¯¾ç¨‹ç¬¬ä¸€ä¸ª Autonomous Agent å¼€å‘æ¡†æ¶â€”â€”**MetaGPTï¼Œä¹Ÿæ˜¯ç›®å‰æ­¤ç±»å¼€å‘æ¡†æ¶ä¸­æœ€ä¸ºæˆç†Ÿçš„ä¸€ä¸ªã€‚**

ç›®å‰ Python æ˜¯ AI + LLM åº”ç”¨å¼€å‘çš„é¦–é€‰ç¼–ç¨‹è¯­è¨€ï¼Œæˆ‘ä»¬è¿™å¥—è¯¾ç¨‹ä¸­ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯ Pythonï¼Œé€‰æ‹©çš„å¼€å‘æ¡†æ¶ä¹Ÿæ˜¯ Python å¼€å‘æ¡†æ¶ã€‚å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¾‹å¦‚ Javaã€C#ã€JavaScriptã€Go ç­‰è¯­è¨€çš„å¼€å‘è€…ï¼Œæš‚æ—¶æ— æ³•å…¼é¡¾ï¼Œåªèƒ½è¯´æŠ±æ­‰äº†ã€‚

## å®‰è£… Pythonã€Node.js å’Œ Git

åœ¨ Linux ä¸»æœºä¸Šéœ€è¦ç¡®ä¿æœ‰ç¬¦åˆè¦æ±‚çš„ Python ç‰ˆæœ¬ã€‚åœ¨ Ubuntu ä¸Šå®‰è£… Python çš„æ–¹æ³•å¾ˆå¤šï¼Œä½ å¯ä»¥è‡ªè¡Œæœç´¢ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒUbuntu è‡ªå¸¦çš„ Python ç‰ˆæœ¬å³å¯æ»¡è¶³è¦æ±‚ã€‚ä»å…¼å®¹æ€§çš„è§’åº¦ï¼ŒPython çš„ç‰ˆæœ¬æˆ‘æ¨èä½¿ç”¨å®˜æ–¹çš„ 3.10 ç‰ˆã€‚

è™½ç„¶ Python æœ€æ–°çš„å®˜æ–¹ç‰ˆæœ¬å·²ç»æ˜¯ 3.13 ç‰ˆï¼Œä½†ä»ç„¶æœ‰å¾ˆå¤š AIã€LLM å¼€å‘åº“æ— æ³•åœ¨ 3.12 ä»¥ä¸Šç‰ˆæœ¬ä¸­ä½¿ç”¨ã€‚æ‰€ä»¥ä»¥åå¯¹äºè¦å­¦ä¹ çš„æ¯ä¸ªå¼€å‘æ¡†æ¶ï¼Œé™¤éæˆ‘æ˜ç¡®è¯´æ˜å¯ä½¿ç”¨ Python 3.12 ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦åˆ™éƒ½ä½¿ç”¨ 3.10 æˆ– 3.11 ç‰ˆã€‚ä½¿ç”¨ Conda å®‰è£…çš„ Python ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªè¦å¯¹åº”çš„ Python ç‰ˆæœ¬æ»¡è¶³ä¸Šè¿°è¦æ±‚ã€‚

åœ¨ Python ç¯å¢ƒä¸­ï¼Œéœ€è¦æå‰å®‰è£…å¥½ poetryï¼Œå› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ poetry è¿™ä¸ªå¼ºå¤§çš„å·¥å…·æ¥åˆ›å»ºå’Œç®¡ç† Python è™šæ‹Ÿç¯å¢ƒã€‚å®‰è£…æ–¹æ³•ï¼š

```plain
pip3 install poetry
```

æ³¨æ„ï¼šåœ¨å®‰è£…å®Œ poetry ä¹‹åï¼Œè¿˜è¦ç¡®ä¿å°† poetry å‘½ä»¤æ‰€åœ¨ç›®å½•åŠ å…¥åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥åœ¨å‘½ä»¤è¡Œç›´æ¥è°ƒç”¨ã€‚

è¿˜éœ€è¦åœ¨ Linux ä¸»æœºä¸Šå®‰è£…å¥½ Node.js å’Œä¸€äº› MetaGPT ä¼šç”¨åˆ°çš„åŸºäº Node.js çš„å·¥å…·ã€‚

```plain
sudo apt update
sudo apt install nodejs build-essential
sudo npm install -g @mermaid-js/mermaid-cli
npx puppeteer browsers install chrome-headless-shell
```

åœ¨ Linux ä¸»æœºä¸Šå®‰è£…å¥½ Gitã€‚

```plain
sudo apt install git
```

## Python é¡¹ç›®åˆå§‹åŒ–

é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ª Python é¡¹ç›®ï¼Œåœ¨ Linux ä¸»æœºçš„ç»ˆç«¯çª—å£æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```plain
mkdir -p ~/work/learn_metagpt
cd ~/work/learn_metagpt
touch README.md
poetry init  
# åˆ›å»º poetry è™šæ‹Ÿç¯å¢ƒï¼Œå½“å‡ºç°ä»¥ä¸‹æç¤º
Compatible Python versions [^3.10]:  æ—¶ï¼Œè¾“å…¥ ">=3.9, <3.12" (æ³¨æ„åˆ«åŠ å¼•å·)
```

å› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæˆ‘å»ºè®®ä½¿ç”¨å›½å†…çš„ Python åº“é•œåƒæœåŠ¡å™¨ï¼Œä¾‹å¦‚ä¸Šæµ·äº¤å¤§çš„é•œåƒæœåŠ¡å™¨ï¼š

```plain
poetry source add --priority=primary mirrors https://mirror.sjtu.edu.cn/pypi/web/simple
```

å¦‚æœä¸Šæµ·äº¤å¤§é•œåƒæœåŠ¡å™¨çš„è®¿é—®é€Ÿåº¦å¾ˆæ…¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–é•œåƒæœåŠ¡å™¨ï¼Œä½ å¯ä»¥è‡ªå·±æœç´¢å…¶ä»–é•œåƒæœåŠ¡å™¨çš„åœ°å€ã€‚

ç„¶åå®‰è£…ä¸€äº›å¸¸ç”¨çš„ Python åº“ï¼š

```plain
poetry add pysocks socksio 
```

MetaGPT é¡¹ç›®çš„åˆ›å§‹äººæ˜¯å´æ‰¿éœ–è€å¸ˆï¼Œäº 2023 å¹´ 6 æœˆå¼€æºã€‚

é¡¹ç›®çš„æºä»£ç åœ¨ï¼š[https://github.com/geekan/MetaGPT](https://github.com/geekan/MetaGPT)

å®˜æ–¹æ–‡æ¡£åœ¨ï¼š[https://docs.deepwisdom.ai/main/zh/guide/get\_started/introduction.html](https://docs.deepwisdom.ai/main/zh/guide/get_started/introduction.html)

å› ä¸º MetaGPT æ˜¯ç”±ä¸­å›½å¼€å‘è€…åˆ›å»ºå¹¶ä¸»å¯¼çš„ï¼Œæ‰€ä»¥æœ‰å¾ˆå¥½çš„ä¸­æ–‡æ–‡æ¡£ã€‚

è¿™é‡Œæˆ‘å°±ä¸èŠ±æ—¶é—´èµ˜è¿° MetaGPT çš„å†å²äº†ï¼Œä½ å¯ä»¥è‡ªå·±æœç´¢é˜…è¯»ç½‘ä¸Šçš„èµ„æ–™ã€‚é—²è¯å°‘è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä¸»é¢˜ï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£… MetaGPTï¼Œè¿è¡Œä¸€äº›å®˜æ–¹æä¾›çš„ä¾‹å­ã€‚

## å®‰è£… MetaGPT å¹¶è¿è¡Œç¬¬ä¸€ä¸ªä¾‹å­

MetaGPT çš„å®‰è£…æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ï¼šPython åº“å®‰è£…å’Œé¡¹ç›®æºä»£ç å®‰è£… (æœ€æ–°çš„å¼€å‘ç‰ˆæœ¬)ã€‚å› ä¸ºå³å°†å‘å¸ƒçš„ MetaGPT 1.0 ç‰ˆä¸å½“å‰çš„ 0.8.x ç¨³å®šç‰ˆç›¸æ¯”å˜åŒ–å¾ˆå¤§ï¼Œæ‰€ä»¥æˆ‘æ¨èåŸºäºé¡¹ç›®æœ€æ–°çš„æºä»£ç  (è§ä¸‹é¢çš„å‘½ä»¤) å®‰è£…ï¼Œä»¥ä¾¿å­¦ä¹ åˆ°æœ€æ–°çš„çŸ¥è¯†ï¼Œèƒ½å¤Ÿé•¿æœŸæœ‰æ•ˆã€‚

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… MetaGPT åŠå…¶ä¾èµ–çš„ Python åº“ï¼š

```plain
cd ~/work
git clone https://github.com/geekan/MetaGPT.git
cd learn_metagpt
# poetry add --editable "../MetaGPT"
poetry install --no-root && poetry run pip install -e "../MetaGPT" --config-settings editable_mode=compat
```

è¿˜è®°å¾—åœ¨ä¸Šä¸€è¯¾çš„ç»“å°¾ï¼Œæˆ‘ä»¬åœ¨ Linux ä¸»æœºä¸Šä½¿ç”¨ ollama éƒ¨ç½²äº†ä¸€ä¸ªå¼€æº LLMâ€”â€”é˜¿é‡Œå·´å·´çš„ qwen2.5ã€‚ç¡®ä¿ä»¥ä¸‹å‘½ä»¤ï¼š

```plain
ollama run qwen2.5 
```

èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå¼€æº LLM æ¥è¿è¡Œ MetaGPT å®˜æ–¹æä¾›çš„ä¾‹å­ã€‚

è¿è¡Œç¬¬ä¸€ä¸ª MetaGPT ä¾‹å­å‰ï¼Œéœ€è¦ç»™é¡¹ç›®æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚å»ºè®®ä½ æŠŠé…ç½®æ–‡ä»¶æ”¾åœ¨ ~/.metagpt ç›®å½•ä¸‹ã€‚

```plain
mkdir ~/.metagpt
vi ~/.metagpt/config2.yamlÂ 
```

è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š

```plain
llm:
Â  api_type: 'ollama'
Â  base_url: 'http://127.0.0.1:11434/api'
Â  model: 'qwen2.5'
Â  temperature: 0


CALC_USAGE: True
repair_llm_output: true
```

ä¿å­˜é…ç½®æ–‡ä»¶ config2.yamlï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆç¥å¥‡çš„äº‹æƒ…ã€‚

```plain
poetry run metagpt "write a cli blackjack game"
```

å±å¹•ä¸Šå‡ºç°äº†é•¿ä¸²è¾“å‡ºçš„æ–‡æœ¬å’Œä»£ç ï¼Œæ»šåŠ¨äº†å¾ˆé•¿æ—¶é—´ã€‚è¯·è€å¿ƒç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¿è¡ŒæœŸé—´å¯ä»¥å»åšäº›å…¶ä»–äº‹æƒ…ï¼Œæˆ–è€…å–æ¯å’–å•¡å·ä¸ªæ‡’ :) ã€‚

å¦‚æœåœ¨è¾“å‡ºä¸­æ²¡æœ‰æŠ¥å‘Šä»»ä½•é”™è¯¯ï¼Œè¯´æ˜å‘½ä»¤æ‰§è¡Œæ˜¯æˆåŠŸçš„ã€‚è¾“å‡ºä¸­æœ‰ä¸€äº›è­¦å‘Šï¼š

```plain
Model qwen2.5 not found in TOKEN_COSTS
```

å¯¹äºå½“å‰çš„ MetaGPT 0.8.x ç¨³å®šç‰ˆï¼Œå› ä¸ºåœ¨ç³»ç»Ÿä¸­æ²¡æœ‰é…ç½®é€šè¿‡ ollama æ”¯æŒçš„å¼€æº LLM çš„ token è´¹ç‡ï¼Œå‡ºç°è¿™ä¸ªè­¦å‘Šæ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥ç®€å•å¿½ç•¥ã€‚åœ¨ MetaGPT æœ€æ–°çš„å¼€å‘ç‰ˆä¸­å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚

ä¸Šè¿°è¿™ä¸ªç®€å•çš„å‘½ä»¤ç©¶ç«Ÿåšäº†äº›ä»€ä¹ˆï¼Ÿæˆ‘å‘ MetaGPT æå‡ºäº†ä¸€ä¸ªè¦æ±‚ï¼šç¼–å†™ä¸€ä¸ªå¯åœ¨å‘½ä»¤è¡Œè¿è¡Œçš„ 21 ç‚¹ (BlackJack) æ¸¸æˆ ã€‚ä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰å‘Šè¯‰ MetaGPT 21 ç‚¹æ¸¸æˆç©¶ç«Ÿæ˜¯å•¥ï¼Œå®ƒé€šè¿‡åº•å±‚ LLM çš„ç†è§£èƒ½åŠ›å’Œæœç´¢å·¥å…·è‡ªå·±ææ¸…æ¥šäº†è¿™ä»¶äº‹ï¼Œå¹¶ä¸”å†™å‡ºäº†å¯ä»¥è¿è¡Œçš„ Python ä»£ç ï¼ˆé»˜è®¤ç¼–ç¨‹è¯­è¨€æ˜¯ Pythonï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆå…¶ä»–è¯­è¨€çš„ä»£ç ï¼‰ã€‚

å¦‚æœéœ€è¦ä¿å­˜ metagpt å‘½ä»¤è¾“å‡ºçš„å†…å®¹ï¼Œå¯ä»¥å°†å±å¹•è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚

```plain
poetry run metagpt "write a cli blackjack game" > blackjack.txt
```

è¿è¡Œå®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€ blackjack.txtï¼Œçœ‹çœ‹ MetaGPT æ‰€ç”Ÿæˆçš„ä»£ç ã€‚æœ‰å…´è¶£çš„è¯ï¼Œè¿˜å¯ä»¥äº²è‡ªæŠŠè¿™äº›ä»£ç è·‘ä¸€ä¸‹ã€‚

ä¸ Autonomous Agent çš„åˆæ¬¡é‚‚é€…æ„Ÿè§‰å¦‚ä½•ï¼Ÿæ˜¯ä¸æ˜¯ä¸ä»¥å‰ä½¿ç”¨è¿‡çš„å„ç§ ChatBot çš„ä½“éªŒè¿¥å¼‚ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´è§‚ä½“ä¼šåˆ°ï¼Œ**Autonomous Agent ä¸ ChatBot çš„ä¸»è¦åŒºåˆ«å°±æ˜¯è‡ªä¸»æ€§å’Œè‡ªåŠ¨åŒ–ç¨‹åº¦ã€‚**MetaGPT å®Œæˆæˆ‘æå‡ºçš„ç¼–ç¨‹è¦æ±‚ï¼Œç¡®å®èŠ±äº†è¾ƒé•¿æ—¶é—´ï¼Œä½†æ˜¯å¦‚æœè‡ªåŠ¨ç”Ÿæˆçš„æºä»£ç å¤§å¤šæ•°æ˜¯å¯ç”¨çš„ï¼Œå¸¦æ¥çš„ä»·å€¼è¿œè¿œè¶…å‡ºäº†æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚

é‚£ä¹ˆç”Ÿæˆçš„è¿™äº›ä»£ç æ˜¯å¦çœŸçš„å¯ç”¨å‘¢ï¼Ÿé‡Œé¢ä¼šä¸ä¼šæœ‰ bugï¼Ÿè¿™ä¸ªé—®é¢˜è·Ÿæˆ‘ä»¬æ‰€ä½¿ç”¨çš„åŸºç¡€ LLM çš„èƒ½åŠ›æœ‰å…³ï¼Œä¸åŒçš„ LLM åœ¨ç”Ÿæˆä»£ç æ–¹é¢çš„èƒ½åŠ›å·®è·ä¼šå¾ˆå¤§ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€ä½¿ç”¨çš„ qwen2.5 åœ¨ç”Ÿæˆä»£ç æ–¹é¢ï¼Œæ˜¯å¼€æº LLM ä¸­çš„ä½¼ä½¼è€…ã€‚ä»£ç è´¨é‡çš„è¿™ä¸ªé—®é¢˜ç›®å‰å¹¶ä¸æ˜¯é‡ç‚¹ï¼Œæˆ‘ä»¬æš‚æ—¶å…ˆæ”¾ä¸‹ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠé»˜è®¤æƒ…å†µä¸‹çš„ MetaGPT çœ‹ä½œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„**è½¯ä»¶å¼€å‘å›¢é˜Ÿ**ï¼Œå…¶ä¸­æœ‰æ¶æ„å¸ˆã€ç¨‹åºå‘˜ã€æµ‹è¯•å·¥ç¨‹å¸ˆç­‰ç­‰ä¸åŒçš„è§’è‰²ã€‚å›¢é˜Ÿçš„äº§å‡ºç‰©æ˜¯å¯ç¼–è¯‘ã€å¯è¿è¡Œå¹¶é€šè¿‡äº†æµ‹è¯•çš„è½¯ä»¶æºä»£ç ã€‚ä½†æ˜¯ä½¿ç”¨ MetaGPT ä¸ä»…èƒ½ç»„å»ºä¸€ä¸ªè½¯ä»¶å¼€å‘å›¢é˜Ÿï¼ŒMetaGPT äº‹å®ä¸Šèƒ½ç»„å»ºå„ç§ä¸åŒç±»å‹çš„å·¥ä½œå›¢é˜Ÿã€‚åœ¨ä¸‹ä¸€è¯¾æˆ‘ä»¬å°†è¦å¼€å‘ä¸€ä¸ªèƒ½å¤Ÿé™ªä¼´æˆ‘ä»¬ç© 24 ç‚¹æ¸¸æˆçš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å®ƒç»™æˆ‘ä»¬ç¼–ä¸€å¥— 24 ç‚¹æ¸¸æˆçš„ Python ä»£ç ï¼Œè€Œæ˜¯å¸Œæœ›å®ƒåƒä¸€ä¸ªäººç±»ä¸€æ ·èƒ½ç›´æ¥é™ªä¼´æˆ‘ä»¬ç©è¿™ä¸ªæ¸¸æˆã€‚

## MetaGPTå®˜æ–¹æ–‡æ¡£å¯¼è¯»

MetaGPT æœ‰å¾ˆæ£’çš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨æˆ‘ä»¬è¯¾ç¨‹ä¸­é‡å¤ä»‹ç»å…è´¹çš„å®˜æ–¹æ–‡æ¡£æ˜¯æ¯«æ— æ„ä¹‰çš„ã€‚æ‰€ä»¥æˆ‘ä¼šè¡¥å……å®˜æ–¹æ–‡æ¡£ä¸­æ²¡æœ‰æåŠçš„å†…å®¹ã€‚å‰é¢æˆ‘ä¹Ÿè¯´è¿‡ï¼Œæœ¬è¯¾ç¨‹å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ­¦æ—ç§˜ç±çš„ç›®å½•ï¼Œè€Œä¸æ˜¯å–ä»£è¿™äº›æ­¦æ—ç§˜ç±ã€‚è¦æ·±å…¥æŒæ¡ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œ**é€šè¯»å®˜æ–¹æ–‡æ¡£**æ˜¯ä¸èƒ½å…å»çš„åŠŸè¯¾ï¼Œå› æ­¤æˆ‘åœ¨è¿™é‡Œå¯¹å®˜æ–¹æ–‡æ¡£åšä¸€ä¸ªå¯¼è¯»ã€‚

MetaGPT å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œåˆå­¦è€…é¦–å…ˆéœ€è¦é˜…è¯»æœ€å‰é¢è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚

- æ¦‚å¿µç®€è¿°ï¼š[https://docs.deepwisdom.ai/main/zh/guide/tutorials/concepts.html](https://docs.deepwisdom.ai/main/zh/guide/tutorials/concepts.html)
- æ™ºèƒ½ä½“å…¥é—¨ï¼š[https://docs.deepwisdom.ai/main/zh/guide/tutorials/agent\_101.html](https://docs.deepwisdom.ai/main/zh/guide/tutorials/agent_101.html)
- å¤šæ™ºèƒ½ä½“å…¥é—¨ï¼š[https://docs.deepwisdom.ai/main/zh/guide/tutorials/multi\_agent\_101.html](https://docs.deepwisdom.ai/main/zh/guide/tutorials/multi_agent_101.html)

é¦–å…ˆéœ€è¦ç†è§£å…³äºå¤š Agent åº”ç”¨çš„ä¸€äº›æ ¸å¿ƒæ¦‚å¿µã€‚ä½ ä¸è¦æ€¥äºè¿è¡Œç¤ºä¾‹ä»£ç ï¼Œå…ˆè®¤çœŸé˜…è¯»ä¸€ä¸‹ä¸Šè¿°æ¦‚å¿µç®€è¿°ï¼Œè¿™é‡Œæˆ‘ä»…å¼•ç”¨è¯¥æ–‡æ¡£é‡Œçš„ä¸€å°éƒ¨åˆ†å†…å®¹ï¼š

> å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œå¯¹æœ¯è¯­â€œ**æ™ºèƒ½ä½“**â€ (Agent) æå‡ºäº†å„ç§å®šä¹‰ã€‚å¤§è‡´æ¥è¯´ï¼Œä¸€ä¸ªæ™ºèƒ½ä½“åº”å…·å¤‡ç±»ä¼¼äººç±»çš„æ€è€ƒå’Œè§„åˆ’èƒ½åŠ›ï¼Œæ‹¥æœ‰è®°å¿†ç”šè‡³æƒ…æ„Ÿï¼Œå¹¶å…·å¤‡ä¸€å®šçš„æŠ€èƒ½ä»¥ä¾¿ä¸ç¯å¢ƒã€æ™ºèƒ½ä½“å’Œäººç±»è¿›è¡Œäº¤äº’ã€‚
> 
> åœ¨ MetaGPT çœ‹æ¥ï¼Œå¯ä»¥å°†æ™ºèƒ½ä½“æƒ³è±¡æˆç¯å¢ƒä¸­çš„æ•°å­—äººï¼Œå…¶ä¸­  
> **æ™ºèƒ½ä½“ = å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ + è§‚å¯Ÿ + æ€è€ƒ + è¡ŒåŠ¨ + è®°å¿†**
> 
> **å¤šæ™ºèƒ½ä½“** (MultiAgent) ç³»ç»Ÿå¯ä»¥è§†ä¸ºä¸€ä¸ªæ™ºèƒ½ä½“ç¤¾ä¼šï¼Œå…¶ä¸­  
> **å¤šæ™ºèƒ½ä½“ = æ™ºèƒ½ä½“ + ç¯å¢ƒ + æ ‡å‡†æµç¨‹ï¼ˆSOPï¼‰ + é€šä¿¡ + ç»æµ**

åœ¨æ¦‚å¿µç®€è¿°æ–‡æ¡£ä¸­ï¼Œå¯¹ä¸Šè¿°ä¸¤ä¸ªå…¬å¼ä¸­å³ä¾§çš„å„ä¸ªåè¯ä¹Ÿç»™å‡ºäº†è¯¦ç»†çš„è§£é‡Šã€‚è¿™äº›æ¦‚å¿µæ˜¯ MetaGPT è®¾è®¡çš„åŸºç¡€ï¼Œæˆ‘ä»¬ç†è§£äº†è¿™äº›æ¦‚å¿µï¼Œå†å»ç†è§£å…¶ä»– Autonomous Agent å¼€å‘æ¡†æ¶çš„è®¾è®¡ä¹Ÿä¼šå®¹æ˜“å¾ˆå¤šã€‚ç°ä»£ AI ç ”ç©¶æ–¹æ³•çš„ç†è®ºåŸºç¡€â€”â€”**æ·±åº¦å­¦ä¹ **å…¶å®æ˜¯åŸºäº**ä»¿ç”Ÿå­¦**ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡è®¡ç®—æœºè½¯ä»¶æ¨¡æ‹Ÿäººç±»çš„è„‘ç§‘å­¦ã€‚MetaGPT å¯¹äº Agent å’Œå¤š Agent çš„ç†è§£ï¼ŒåŒæ ·ä¹Ÿæ˜¯åŸºäºä»¿ç”Ÿå­¦ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ª Agent ç†è§£ä¸ºä¸€ä¸ªåƒäººç±»ä¸€æ ·æœ‰æ™ºèƒ½çš„å®ä½“ï¼Œå¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€æ¥ä¸ä¹‹äº¤äº’ã€‚å¤šä¸ª Agent å¯ä»¥ç»„åˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€å½¼æ­¤æ²Ÿé€šï¼Œå¹¶å¼€å±•å¤æ‚çš„åä½œã€‚

åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å¤š Agent åä½œçš„å›¾ç¤ºï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/53/f3/53b0571e78ce5ac5940aecce879340f3.png?wh=1920x1061)

MetaGPT æœ€åˆè®¾è®¡å’Œå®ç°çš„å…¸å‹åœºæ™¯æ˜¯ä¸€ä¸ªè½¯ä»¶å¼€å‘å›¢é˜Ÿï¼Œæ‰€ä»¥è¿™ä¸ªå›¾ç¤ºæ˜¯ä¸€ä¸ªæç®€çš„è½¯ä»¶å¼€å‘å›¢é˜Ÿã€‚è™½ç„¶è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„å›¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­äº†è§£åˆ°å¾ˆå¤šä¿¡æ¯ï¼š

- æ¯ä¸ª Agent éƒ½æœ‰è‡ªå·±çš„è§’è‰² (ä¹Ÿå¯ä»¥ç†è§£ä¸ºå²—ä½)ã€‚åœ¨è¿™ä¸ªå›¾ç¤ºä¸­ï¼ŒAlice ä½œä¸ºäº§å“ç»ç†ç¼–å†™éœ€æ±‚æ–‡æ¡£ï¼›Bob ä½œä¸ºé¡¹ç›®ç»ç†ï¼Œåˆ†é…ä»»åŠ¡å¹¶å¯¹ç”Ÿæˆçš„ä»£ç åšå‡ºè¯„ä»·ï¼›Charlie ä½œä¸ºç¨‹åºå‘˜ï¼Œæ ¹æ®éœ€æ±‚å’Œä»»åŠ¡æè¿°ç¼–å†™ Python ä»£ç ã€‚æ¯ä¸ª Agent ä»…å®Œæˆè‡ªå·±è¿™ä¸ªè§’è‰²éœ€è¦å®Œæˆçš„ä»»åŠ¡ï¼Œå„å¸å…¶èŒï¼Œé€šè¿‡åä½œå®Œæˆå¤æ‚çš„å·¥ä½œã€‚è¿™å°±æ˜¯æ‰€è°“çš„ **Role Playing**(è§’è‰²æ‰®æ¼”)ï¼Œæ›´å¥½åœ°æ”¯æŒ Role Playing æ­£æ˜¯ç›®å‰å„ä¸ªåŸºç¡€ LLM çš„ä¸€ä¸ªé‡è¦çš„æ”¹è¿›æ–¹å‘ã€‚
- åŒä¸€ä¸ªå›¢é˜Ÿä¸­çš„å¤šä¸ª Agent å…±äº«ä¸€ä¸ªç¯å¢ƒã€‚å®ƒä»¬é€šè¿‡ä»ç¯å¢ƒæ¥æ”¶å’Œå‘ç¯å¢ƒå‘é€å„ç§äº‹ä»¶æ¥å¼€å±•é€šä¿¡å’Œåä½œã€‚
- ç¯å¢ƒä¸­çš„äº‹ä»¶æœ‰å¤šç§ç±»å‹ï¼Œæœ€é‡è¦çš„äº‹ä»¶æ˜¯**æ‰§è¡ŒAction**ã€‚æ‰§è¡Œæ¯ä¸ªAction (ä¸€ä¸ªäº‹ä»¶) çš„è¾“å‡ºç»“æœä¼šç´¯ç§¯èµ·æ¥ï¼Œä½œä¸ºæ¥æ”¶è¿™ä¸ªäº‹ä»¶çš„ Agent å°†è¦æ‰§è¡Œçš„åç»­ Action çš„è¾“å…¥ä¸Šä¸‹æ–‡ã€‚æ¯ä¸ª Agent å¯è®¢é˜…ç¯å¢ƒä¸­è‡ªå·±æ„Ÿå…´è¶£çš„ä»»ä½• Actionï¼Œå¹¶ä¸”åŸºäºè¿™äº› Action çš„è¾“å‡ºç»“æœå¼€å±•æ€è€ƒï¼Œç¡®å®šè‡ªå·±éœ€è¦æ‰§è¡Œçš„åç»­ Actionã€‚
- æ‰§è¡Œ Action æ—¶å¯ä»¥æ ¹æ®éœ€è¦è°ƒç”¨å„ç§å¤–éƒ¨å·¥å…· ï¼Œå®ŒæˆæŸä¸ªä»»åŠ¡å¹¶ä¸”è¿”å›æ‰§è¡Œç»“æœã€‚å¤–éƒ¨å·¥å…·å¯ä»¥åšéœ€è¦çš„ä»»ä½•äº‹æƒ…ï¼ŒåŒ…æ‹¬è®¿é—®æœç´¢å¼•æ“ã€æŸ¥è¯¢æ•°æ®åº“ã€åœ¨è®¢ç¥¨ç½‘ç«™ä¸Šè®¢é£æœºç¥¨ã€å¯åŠ¨è®¾å¤‡ç”Ÿäº§ä¸€æ‰¹é›¶ä»¶ç­‰ç­‰ã€‚
- æ¯ä¸ª Agent éƒ½æœ‰è‡ªå·±çš„è®°å¿†ï¼Œèƒ½å¤Ÿè®°ä½è‡ªå·±ä¹‹å‰ä¸å…¶ä»–æ™ºèƒ½ä½“å¼€å±•çš„å¯¹è¯ã€æ¥æ”¶åˆ°çš„äº‹ä»¶ã€é‡‡å–çš„è¡ŒåŠ¨ã€‚å¹¶ä¸”æ ¹æ®è®°å¿†åšå‡ºé€‚åˆçš„å†³ç­–ï¼Œæ‰§è¡Œé€‚åˆçš„ Actionã€‚

é€šè¿‡é˜…è¯» MetaGPT å®˜æ–¹æ–‡æ¡£çš„å‰ä¸‰ä¸ªéƒ¨åˆ†ï¼Œè¿˜å¯ä»¥äº†è§£åˆ°ï¼Œåœ¨ä¸€ä¸ªå¤š Agent åº”ç”¨ä¸­ï¼Œæ¯ä¸€ä¸ª Agent æ—¢å¯ä»¥ç”±ç¨‹åº (æœºå™¨äºº) æ¥æ‹…ä»»ï¼Œä¹Ÿå¯ä»¥ç”±äººç±»ç”¨æˆ·æ¥æ‹…ä»»ã€‚å¬èµ·æ¥éå¸¸æœ‰è¶£æ˜¯å§ï¼Ÿ

MetaGPT çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€å°±æ˜¯è®©äººç±»ç”¨æˆ·ä¸å„ç§æ™ºèƒ½ä½“å®Œç¾åä½œã€‚æˆ‘ä»¬å¾ˆå¿«å°±ä¼šä½“ä¼šåˆ°ï¼Œè¿™æ ·çš„è®¾è®¡éå¸¸çµæ´»å’Œå¼ºå¤§ã€‚å› ä¸ºåœ¨ä¸€äº›å¤æ‚çš„åä½œä¸­ï¼Œå½“åŸºç¡€ LLM å°šä¸å¤Ÿå¼ºå¤§æ—¶ï¼Œç”±äººç±»æ¥æ‰¿æ‹…å…³é”®è§’è‰²ï¼Œåšå‡ºå†³ç­–å’Œè¯„åˆ¤æ˜¯å¾ˆé‡è¦çš„ã€‚LLM åŒæ ·ä¹Ÿä¸æ˜¯é“¶å¼¹ï¼Œä½†æ˜¯å®ƒæ˜¯äººç±»å¾ˆå¥½çš„è¾…åŠ©å·¥å…·ã€‚åœ¨**ç™¾åˆ†ä¹‹ç™¾è‡ªåŠ¨åŒ–**éš¾ä»¥å®ç°æ—¶ï¼Œèƒ½å¤Ÿå¤§å¹…æé«˜å·¥ä½œæ•ˆç‡ã€é™ä½å·¥ä½œæˆæœ¬çš„**åŠè‡ªåŠ¨åŒ–**å·¥ä½œæµåŒæ ·ä¹Ÿæ˜¯å€¼å¾—è¿½æ±‚çš„ã€‚

## ç¬¬äºŒä¸ªä¾‹å­ï¼šäººç±»å‚ä¸çš„å¤š Agent åº”ç”¨

ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯é€šè¿‡ metagpt å‘½ä»¤è¿è¡Œçš„ï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°æºä»£ç ï¼Œä¼šæ„Ÿè§‰éš”é´æ”ç—’ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´ç®€å•çš„ä¾‹å­ï¼Œä¸€ä¸ªæ”¯æŒäººç±»ç”¨æˆ·å‚ä¸çš„å¤š Agent åº”ç”¨ä¾‹å­ï¼Œç¤ºä¾‹ä»£ç åœ¨è¯¾ç¨‹ä»£ç æ–‡ä»¶ build\_customized\_multi\_agents.py ä¸­ã€‚

åœ¨è¿™ä¸ªç¤ºä¾‹ä»£ç ä¸­æœ‰ä¸‰ä¸ª Role çš„å­ç±» (å³å‰é¢å›¾ç¤ºä¸­çš„ Agent)ï¼šä¸€ä¸ªç¨‹åºå‘˜ SimpleCoderã€ä¸€ä¸ªæµ‹è¯•å·¥ç¨‹å¸ˆ SimpleTesterã€ä¸€ä¸ªè¯„è®ºå‘˜ SimpleReviewerã€‚ç”± SimpleReviewer ç¡®å®šç”Ÿæˆçš„ä»£ç è´¨é‡æ˜¯å¦å¯ä»¥æ¥å—ä»¥åŠå·¥ä½œæ˜¯å¦æˆåŠŸå®Œæˆã€‚ç¤ºä¾‹ä»£ç ä¸­æ¯ä¸ª Agent çš„åå­—å’Œè§’è‰²åˆ’åˆ†ï¼Œä¸å‰é¢çš„å›¾ç¤ºæœ‰äº›å·®åˆ«ï¼Œæ³¨æ„åˆ«ææ··äº†ã€‚ä»£ç ç•¥å¾®æœ‰ç‚¹é•¿ï¼Œå°±ä¸å ç”¨ç¯‡å¹…äº†ï¼Œä½ å¯ä»¥è‡ªå·±ç”¨ç¼–è¾‘å™¨æ‰“å¼€ä»£ç æ–‡ä»¶æŸ¥çœ‹ã€‚

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œè¿™ä¸ªä¾‹å­ï¼š

```plain
poetry run python build_customized_multi_agents.py --idea "write a function that calculates the product of a list" --add_human=True
```

åœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œæˆ‘æå‡ºçš„ä»»åŠ¡è¦æ±‚æ˜¯ï¼Œç¼–å†™ä¸€ä¸ª Python å‡½æ•°æ¥è®¡ç®—åˆ—è¡¨ä¸­çš„äº§å“æ•°é‡ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå‚æ•° â€œadd\_human=Trueâ€ï¼Œé»˜è®¤ä¸º Falseã€‚å¦‚æœè®¾ç½®ä¸º Trueï¼Œåˆ™ç”±äººç±»ç”¨æˆ·æ¥å……å½“è¯„è®ºå‘˜ï¼Œå¯¹ç”Ÿæˆçš„ä»£ç åšå‡ºè¯„ä»·ã€‚æ‰§è¡Œä¸Šè¿°å‘½ä»¤æ—¶ï¼Œåœ¨è¾“å‡ºç”Ÿæˆçš„ä»£ç ä¹‹åï¼Œä¼šåœ¨å‘½ä»¤è¡Œç­‰å¾…ç”¨æˆ·çš„è¾“å…¥ï¼Œå¯ä»¥ç®€å•è¾“å…¥â€œItâ€™s OKâ€ä»¥ç»“æŸç¨‹åºæ‰§è¡Œã€‚

ä»è¿™ä¸ªä¾‹å­çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¸€ä¸ªå…¸å‹çš„ MetaGPT åº”ç”¨ä¸­ï¼ŒåŒ…å«äº†ä¸‰ä¸ªå±‚æ¬¡ï¼šTeam (å›¢é˜Ÿ)ã€Role (è§’è‰²) å’Œ Action (è¡ŒåŠ¨)ã€‚

- ä¸€ä¸ª Team å¯åŒ…å« (é›‡ä½£) å¤šä¸ª Roleã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒTeam åŒ…å«äº†ä¸‰ä¸ª Roleï¼šSimpleCoderã€SimpleTesterã€SimpleReviewerã€‚
- æ¯ä¸ª Role å¯åŒ…å« (æ‰§è¡Œ) ä¸€ä¸ªæˆ–å¤šä¸ª Actionã€‚SimpleCoder åŒ…å«äº† SimpleWriteCodeã€SimpleTester åŒ…å«äº† SimpleWriteTestã€SimpleReviewer åŒ…å«äº† SimpleWriteReviewã€‚

å½“ä¼ å…¥â€œâ€“add\_human=Trueâ€é€‰é¡¹æ—¶ï¼Œåœ¨åˆå§‹åŒ– SimpleReviewer å¯¹è±¡æ—¶ä¼šä¼ å…¥ä¸€ä¸ªâ€œis\_human=Trueâ€å‚æ•°ï¼Œè¿™æ · SimpleReviewer å°±ä¸å†æ‰§è¡Œ SimpleWriteReview è¿™ä¸ª Action æ¥è·å¾—å¯¹ä»£ç çš„è¯„ä»·ï¼Œè€Œæ˜¯åœ¨å‘½ä»¤è¡Œç­‰å¾…äººç±»ç”¨æˆ·è¾“å…¥ä»£ç çš„è¯„ä»·ã€‚

è¿™ä¸ªç®€å•çš„ä¾‹å­æ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚å¤§å¤šæ•°ç¥å¥‡çš„äº‹æƒ…æ˜¯ç”±å¼€å‘æ¡†æ¶å®ç°çš„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåªéœ€è¦ç†è§£é«˜å±‚çš„æŠ½è±¡å³å¯ã€‚æ¯ä¸ª Role å¯¹è±¡éƒ½æ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œåœ¨è¿™é‡Œçš„äº‹ä»¶å°±æ˜¯å„ä¸ª Actionã€‚åœ¨è¿è¡Œä¹‹å‰æ¯ä¸ª Role å¯¹è±¡é¦–å…ˆæ³¨å†Œè‡ªå·±å¯æ‰§è¡Œçš„ Actionï¼Œä»¥åŠè‡ªå·±æ„Ÿå…´è¶£çš„ Actionã€‚ç„¶åè¿™äº›ä¸åŒçš„ Action æŒ‰ç…§ä¸²è¡Œå’Œå¹¶è¡Œæ–¹å¼ç»„åˆåœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªå¤æ‚çš„å·¥ä½œæµã€‚

ä»è¿™ä¸ªä¾‹å­çš„ä»£ç å†ç»“åˆå¯¹ä¹‹å‰å›¾ç¤ºçš„è®²è§£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥äº†è§£åˆ°ä»¥ä¸‹ç»†èŠ‚ï¼š

- æ¯ä¸ª Action å¯¹è±¡çš„ run() å‡½æ•°çš„è¾“å‡ºï¼Œä¼šç´¯ç§¯èµ·æ¥ï¼Œä½œä¸ºæ¥æ”¶è¿™ä¸ªäº‹ä»¶çš„ Role å¯¹è±¡åç»­æ‰§è¡Œçš„ Action å¯¹è±¡ run() å‡½æ•°çš„è¾“å…¥å‚æ•° contextã€‚
- å¦‚æœç³»ç»Ÿçš„å·¥ä½œæµæ˜¯å•ä¸€ä¸²è¡Œçš„ï¼Œåœ¨ Role å¯¹è±¡çš„åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œåªéœ€è¦æ³¨å†Œè‡ªå·±å¯ä»¥æ‰§è¡Œçš„ Actionï¼Œå’Œè®¢é˜…è‡ªå·±æ„Ÿå…´è¶£çš„ Actionã€‚ä¾‹å¦‚ SimpleReviewer å¯¹è±¡çš„åˆå§‹åŒ–å‡½æ•°ï¼š

```plain
Â  Â  Â def __init__(self, **kwargs):
Â  Â  Â  Â  super().__init__(**kwargs)
Â  Â  Â  Â  self.set_actions([SimpleWriteReview])
Â  Â  Â  Â  self._watch([SimpleWriteTest])
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„æç¤ºè¯ (Prompt) é»˜è®¤éƒ½æ˜¯è‹±æ–‡çš„ã€‚è¿™ä¹Ÿæ˜¯ç›®å‰å¤§å¤šæ•° Autonomous Agent å¼€å‘æ¡†æ¶çš„è¦æ±‚ã€‚è¿™å¯¹äº Autonomous Agent æ¥è¯´ä¸æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ã€‚å› ä¸ºè¿™ç±»åº”ç”¨å¹¶ä¸éœ€è¦ä½¿ç”¨è€…æ‰‹å†™å¤§é‡çš„æç¤ºè¯ã€‚å¦‚æœä½¿ç”¨è€…ä¸ç†Ÿæ‚‰è‹±æ–‡ï¼Œæ‰¾ä¸€ä¸ªç¿»è¯‘å·¥å…·ç¿»è¯‘ä¸€ä¸‹ä¹Ÿéå¸¸ç®€å•ã€‚

## æ€»ç»“æ—¶åˆ»

åœ¨è¿™ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ poetry åˆ›å»ºäº† Python é¡¹ç›®ï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£…äº† MetaGPTã€‚é€šè¿‡è¿è¡Œç¬¬ä¸€ä¸ªä¾‹å­éªŒè¯ MetaGPT å¯æ­£å¸¸å·¥ä½œã€‚ç„¶åæˆ‘ä»¬é˜…è¯»äº† MetaGPT å®˜æ–¹æ–‡æ¡£çš„å‰ä¸‰ä¸ªéƒ¨åˆ†ï¼Œç†è§£äº† MetaGPT çš„æ ¸å¿ƒæ¦‚å¿µã€‚æœ€åè¿è¡Œäº†ç¬¬äºŒä¸ªä¾‹å­ï¼Œå¹¶ç ”ç©¶äº†ç¬¬äºŒä¸ªä¾‹å­çš„æºä»£ç ã€‚è¿è¡Œä¸¤ä¸ªä¾‹å­å‡ä½¿ç”¨ä¼˜ç§€çš„å›½äº§å¼€æº LLMâ€”â€”é˜¿é‡Œå·´å·´çš„ qwen2.5ã€‚

MetaGPT æœ€åˆçš„è®¾è®¡å°±æ˜¯ä¸ºäº†æ”¯æŒå¤š Agent åä½œçš„ï¼Œå ªç§°ç›®å‰æœ€å®Œå–„çš„å¤š Agent å¼€å‘æ¡†æ¶ã€‚å´æ‰¿éœ–è€å¸ˆè¯´ä»–åœ¨ 2023 å¹´ä¸ŠåŠå¹´çœ‹è¿‡å¤§å¤šæ•°å¼€æº LLM åº”ç”¨å¼€å‘æ¡†æ¶ï¼ˆåŒ…æ‹¬ LangChainï¼‰ï¼Œæ²¡æœ‰ä¸€ä¸ªèƒ½æ”¯æŒå¤š Agent åä½œï¼Œæ— å¥ˆä¹‹ä¸‹åªå¥½è‡ªå·±åŠ¨æ‰‹ï¼Œå¼€å¯äº†ä¸€æ®µä¼ å¥‡ç»å†ã€‚

åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹ä½¿ç”¨ MetaGPT å®ç°æˆ‘ä»¬çœŸæ­£çš„éœ€æ±‚â€”â€”ä¸€ä¸ªé™ªä¼´æˆ‘ä»¬ç©24ç‚¹æ¸¸æˆçš„æ™ºèƒ½ä½“åº”ç”¨ã€‚

è¯¾ç¨‹ä»£ç é“¾æ¥ï¼š[https://gitee.com/mozilla88/autonomous\_agent/tree/master/lesson\_03](https://gitee.com/mozilla88/autonomous_agent/tree/master/lesson_03)

## æ€è€ƒé¢˜

åœ¨ MetaGPT åº”ç”¨ä¸­ä¸åŒçš„ Agent (Role çš„å­ç±»å®ä¾‹) æ˜¯å¦‚ä½•åä½œçš„ï¼Ÿ

æç¤ºï¼šé€šè¿‡åœ¨ build\_customized\_multi\_agents.py æºä»£ç ä¸­å„ä¸ª Role å’Œ Action å¯¹è±¡çš„å‡½æ•°å†…æ·»åŠ  print æˆ– logger è¯­å¥ï¼Œææ¸…æ¥šå®ƒä»¬ä¹‹é—´æ˜¯å¦‚ä½•åä½œçš„ã€‚

æœŸå¾…ä½ çš„åˆ†äº«ã€‚å¦‚æœä»Šå¤©çš„å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹ŸæœŸå¾…ä½ è½¬å‘ç»™ä½ çš„åŒäº‹æˆ–è€…æœ‹å‹ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ11ï¼‰</strong></div><ul>
<li><span>æœˆç‹¼è‘±è‘±</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æˆ‘ä½¿ç”¨win11ï¼Œåœ¨æ‰§è¡Œpoetry install --no-root &amp;&amp; poetry run pip install -e &quot;..&#47;MetaGPT&quot; --config-settings editable_mode=compatï¼Œä¼šæŠ¥é”™ï¼š ERROR: Failed building wheel for volcengine-python-sdkï¼ŒåŸå› æ˜¯æ–‡ä»¶è·¯å¾„è¿‡é•¿ï¼šWindows ç³»ç»Ÿé»˜è®¤å¯¹æ–‡ä»¶è·¯å¾„é•¿åº¦æœ‰é™åˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸäº›æ–‡ä»¶æ— æ³•æ­£ç¡®åˆ›å»ºã€‚ï¼Œç”¨winçš„ä¼™ä¼´å¯ä»¥å‚è€ƒè§£å†³æ–¹æ¡ˆ https:&#47;&#47;github.com&#47;geekan&#47;MetaGPT&#47;issues&#47;1677</p>2025-02-05</li><br/><li><span>ç§èŠ±å®¶</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>sudo npm install -g @mermaid-js&#47;mermaid-cli ä¹‹å‰åŠ ä¸Š sudo apt install npm
ç„¶åæ£€æŸ¥ node -v
npm -v</p>2025-01-08</li><br/><li><span>èˆå¤§è™¾</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>å¦‚ä½•é…ç½®metagptè°ƒç”¨é€šè¿‡vllméƒ¨ç½²çš„qwenæ¨¡å‹?


### æµ‹è¯•è®¾ç½®config.yamlé…ç½®å¦‚ä¸‹ï¼š
llm:
  api_type: &quot;ollama&quot; 
  model: &quot;&#47;models&#47;Qwen2.5-72B-Instruct&quot;
  base_url: &quot;http:&#47;&#47;localhost:8000&#47;v1&quot;
  api_key: &quot;EMPTY&quot;
  temperature: 0

æ‰§è¡Œmetagpt &quot;Create a 2048 game&quot;æŠ¥é”™ã€‚

æ³¨ï¼šä½¿ç”¨dashscopeçš„qwen72bå¯ä»¥æˆåŠŸã€‚

###vllmæœåŠ¡å‘½ä»¤ï¼š
vllm serve &#47;models&#47;Qwen2.5-72B-Instruct \
              --host 0.0.0.0 \
              --port 8000 \
              --dtype bfloat16 \
              --tensor_parallel_size 2 \
              --max-num-seqs 1 \
              --enforce-eager \
              --gpu_memory_utilization 0.95 \
              --max_model_len 16384 \
              --max_seq_len_to_capture 16384 \
              --max-num-batched-tokens 16384 \
              --swap-space 8 \
              --disable-log-requests \
              --enable-auto-tool-choice \
              --tool-call-parser hermes
			  


## è¯¥æœåŠ¡ç»æµ‹è¯•æ­£å¸¸è°ƒç”¨ã€‚
from openai import OpenAI
client = OpenAI(api_key=&quot;EMPTY&quot;, base_url=&quot;http:&#47;&#47;localhost:8000&#47;v1&quot;)
model_type=&quot;&#47;models&#47;Qwen2.5-72B-Instruct&quot;
...
response = client.chat.completions.create(
    model=model_type,
    messages=messages,
    temperature=0,
    stream=True
)
...</p>2025-02-19</li><br/><li><span>yangchao</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æ€è€ƒé¢˜
åœ¨ build_customized_multi_agents.py ä¸­ï¼Œä¸åŒçš„ Agentï¼ˆå³ Role çš„å­ç±»å®ä¾‹ï¼‰é€šè¿‡æ¶ˆæ¯ä¼ é€’å’ŒåŠ¨ä½œæ‰§è¡Œæ¥è¿›è¡Œåä½œï¼Œå…·ä½“å°±æ˜¯æ¯ä¸ªè§’è‰²éƒ½æœ‰ç‰¹å®šçš„èŒè´£å’Œå¯ä»¥æ‰§è¡Œçš„æ“ä½œã€‚è§’è‰²ä¹‹é—´é€šè¿‡_watchæœºåˆ¶å»ºç«‹è”ç³»ï¼Œå½¢æˆå·¥ä½œæµã€‚</p>2025-02-19</li><br/><li><span>æ¬ å€ºå¤ªå¤š</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œå¦‚æœæ¨èçš„é…ç½®æœºå™¨æ²¡æœ‰ï¼Œä½¿ç”¨mac airæ›¿ä»£æ˜¯å¦å¯è¡Œï¼Œç°åœ¨æœºå™¨çš„é…ç½®æ˜¯Apple M3 16gå†…å­˜ï¼Ÿä¼šæœ‰å“ªäº›å½±å“
</p>2025-02-13</li><br/><li><span>è“å¤©</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Linux 5.4.0-117-generic
npm ERR! argv &quot;&#47;usr&#47;bin&#47;node&quot; &quot;&#47;usr&#47;bin&#47;npm&quot; &quot;install&quot; &quot;-g&quot; &quot;@mermaid-js&#47;mermaid-cli&quot;
npm ERR! node v8.10.0
npm ERR! npm  v3.5.2
npm ERR! code EMISSINGARG

npm ERR! typeerror Error: Missing required argument #1
npm ERR! typeerror     at andLogAndFinish (&#47;usr&#47;share&#47;npm&#47;lib&#47;fetch-package-metadata.js:31:3)
npm ERR! typeerror     at fetchPackageMetadata (&#47;usr&#47;share&#47;npm&#47;lib&#47;fetch-package-metadata.js:51:22)
npm ERR! typeerror     at resolveWithNewModule (&#47;usr&#47;share&#47;npm&#47;lib&#47;install&#47;deps.js:456:12)
npm ERR! typeerror     at &#47;usr&#47;share&#47;npm&#47;lib&#47;install&#47;deps.js:190:5
npm ERR! typeerror     at &#47;usr&#47;share&#47;npm&#47;node_modules&#47;slide&#47;lib&#47;async-map.js:52:35
npm ERR! typeerror     at Array.forEach (&lt;anonymous&gt;)
npm ERR! typeerror     at &#47;usr&#47;share&#47;npm&#47;node_modules&#47;slide&#47;lib&#47;async-map.js:52:11
npm ERR! typeerror     at Array.forEach (&lt;anonymous&gt;)
npm ERR! typeerror     at asyncMap (&#47;usr&#47;share&#47;npm&#47;node_modules&#47;slide&#47;lib&#47;async-map.js:51:8)
npm ERR! typeerror     at exports.loadRequestedDeps (&#47;usr&#47;share&#47;npm&#47;lib&#47;install&#47;deps.js:188:3)
npm ERR! typeerror This is an error with npm itself. Please report this error at:
npm ERR! typeerror     &lt;http:&#47;&#47;github.com&#47;npm&#47;npm&#47;issues&gt;
</p>2025-02-11</li><br/><li><span>zshanjun</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>è¿è¡ŒæŠ¥é”™ï¼Œè·‘ä¸é€šã€‚è€å¸ˆå¸®å¿™çœ‹çœ‹

poetry run metagpt &quot;write a cli blackjack game&quot;
2025-02-10 17:24:03.997 | INFO     | metagpt.team:invest:93 - Investment: $3.0.
2025-02-10 17:24:03.998 | INFO     | metagpt.roles.role:_act:403 - Alice(Product Manager): to do PrepareDocuments(PrepareDocuments)
2025-02-10 17:24:04.062 | INFO     | metagpt.utils.file_repository:save:57 - save to: &#47;Users&#47;zhangsj190&#47;ai&#47;MetaGPT&#47;workspace&#47;20250210172403&#47;docs&#47;requirement.txt
2025-02-10 17:24:04.062 | INFO     | metagpt.roles.role:_act:403 - Alice(Product Manager): to do WritePRD(WritePRD)
2025-02-10 17:24:04.062 | INFO     | metagpt.actions.write_prd:run:86 - New requirement detected: write a cli blackjack game
2025-02-10 17:24:04.091 | ERROR    | metagpt.utils.common:log_it:554 - Finished call to &#39;metagpt.actions.action_node.ActionNode._aask_v1&#39; after 0.028(s), this was the 1st time calling it. exp: &#39;dict&#39; object has no attribute &#39;lower&#39;
2025-02-10 17:24:05.011 | ERROR    | metagpt.utils.common:log_it:554 - Finished call to &#39;metagpt.actions.action_node.ActionNode._aask_v1&#39; after 0.948(s), this was the 2nd time calling it. exp: &#39;dict&#39; object has no attribute &#39;lower&#39;
2025-02-10 17:24:15.394 | WARNING  | metagpt.utils.common:wrapper:673 - There is a exception in role&#39;s execution, in order to resume, we delete the newest role communication message in the role&#39;s memory.
2025-02-10 17:24:15.402 | ERROR    | metagpt.utils.common:wrapper:655 - Exception occurs, start to serialize the project, exp:
Traceback (most recent call last):
  File &quot;&#47;Users&#47;zhangsj190&#47;Library&#47;Caches&#47;pypoetry&#47;virtualenvs&#47;learn-metagpt-eQkDn61w-py3.10&#47;lib&#47;python3.10&#47;site-packages&#47;tenacity&#47;_asyncio.py&quot;, line 50, in __call__
    result = await fn(*args, **kwargs)
  File &quot;&#47;Users&#47;zhangsj190&#47;ai&#47;MetaGPT&#47;metagpt&#47;actions&#47;action_node.py&quot;, line 442, in _aask_v1
    parsed_data = llm_output_postprocess(
AttributeError: &#39;dict&#39; object has no attribute &#39;lower&#39;



</p>2025-02-10</li><br/><li><span>æœˆç‹¼è‘±è‘±</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>win11ç”¨æˆ·æ— æ³•ä½¿ç”¨ å‘½ä»¤
mkdir ~&#47;.metagpt
vi ~&#47;.metagpt&#47;config2.yaml 
å‡è®¾ä½ çš„ç”¨æˆ·åæ˜¯ usernameï¼Œè½¬æ¢å‘½ä»¤å¦‚ä¸‹
mkdir C:\Users\username\.metagpt
notepad C:\Users\username\.metagpt\config2.yaml</p>2025-02-05</li><br/><li><span>èŠ±å‰ä¸æ‰æ­¤ç”Ÿå£¹æ¢¦</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>poetry add pysocks socksio 

The currently activated Python version 3.12.3 is not supported by the project (&gt;=3.9, &lt;3.12).
Trying to find and use a compatible version. 

Poetry was unable to find a compatible version. If you have one, you can explicitly use it via the &quot;env use&quot; command.

æ‰§è¡Œçš„æ—¶å€™æŠ¥é”™ï¼Œåº”è¯¥æ€ä¹ˆæ
</p>2025-01-15</li><br/><li><span>Geek_9708db</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>ç”¨qwen:14bè¿è¡ŒæŠ¥é”™JSON parseçš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯è§£æå‡ºäº†é—®é¢˜ï¼›æ¢æˆllama3:latestå¥½ç”¨äº†ã€‚è¿™ä¸ªæ€ä¹ˆè§£å†³å‘¢ï¼Œæ€»è§‰å¾—å¦‚æœä¸èƒ½æ”¯æŒå¤§éƒ¨åˆ†æ¨¡å‹å°±ä¸å¤ªå¥½ç”¨å‘€</p>2025-01-10</li><br/><li><span>æœ¨æ³•æ²™</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>âœ  learn_metagpt python3 main.py
Welcome to Blackjack!
Player&#39;s hand: (&#39;Hearts&#39;, 3)
Player&#39;s hand: (&#39;Spades&#39;, &#39;Jack&#39;)
Do you want to hit or stand? (h&#47;s): h
Player&#39;s hand: (&#39;Hearts&#39;, 3)
Player&#39;s hand: (&#39;Spades&#39;, &#39;Jack&#39;)
Bust! You lose this round.
âœ  learn_metagpt python3 main.py
Welcome to Blackjack!
Player&#39;s hand: (&#39;Spades&#39;, 8)
Player&#39;s hand: (&#39;Spades&#39;, 7)
Do you want to hit or stand? (h&#47;s): s
Dealer busts! You win this round!</p>2025-01-08</li><br/>
</ul>