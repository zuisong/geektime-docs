ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ï¼Œæ¬¢è¿æ¥åˆ°LangChainå®æˆ˜è¯¾ï¼

æˆ‘åœ¨ [ç¬¬4è¯¾](https://time.geekbang.org/column/article/700699) çš„ç»“å°¾æ—¶è¯´äº†ï¼Œä½ å¯ä»¥å°è¯•ç”¨æ€ç»´é“¾ä¹Ÿå°±æ˜¯CoTï¼ˆChain of Thoughtï¼‰çš„æ¦‚å¿µæ¥å¼•å¯¼æ¨¡å‹çš„æ¨ç†ï¼Œè®©æ¨¡å‹ç”Ÿæˆæ›´è¯¦å®ã€æ›´å®Œå¤‡çš„æ–‡æ¡ˆï¼Œä»Šå¤©æˆ‘ä»¬å°±ä¸€èµ·çœ‹ä¸€çœ‹CoTçš„ä½¿ç”¨ã€‚

## ä»€ä¹ˆæ˜¯ Chain of Thought

CoTè¿™ä¸ªæ¦‚å¿µæ¥æºäºå­¦æœ¯ç•Œï¼Œæ˜¯è°·æ­Œå¤§è„‘çš„Jason Weiç­‰äººäº2022å¹´åœ¨è®ºæ–‡ã€Š [Chain-of-Thought Prompting Elicits Reasoning in Large Language Models](https://proceedings.neurips.cc/paper_files/paper/2022/file/9d5609613524ecf4f15af0f7b31abca4-Paper-Conference.pdf)ï¼ˆè‡ªæˆ‘ä¸€è‡´æ€§æå‡äº†è¯­è¨€æ¨¡å‹ä¸­çš„æ€ç»´é“¾æ¨ç†èƒ½åŠ›ï¼‰ã€‹ä¸­æå‡ºæ¥çš„æ¦‚å¿µã€‚å®ƒæå‡ºï¼Œå¦‚æœç”Ÿæˆä¸€ç³»åˆ—çš„ä¸­é—´æ¨ç†æ­¥éª¤ï¼Œå°±èƒ½å¤Ÿæ˜¾è‘—æé«˜å¤§å‹è¯­è¨€æ¨¡å‹è¿›è¡Œå¤æ‚æ¨ç†çš„èƒ½åŠ›ã€‚

### Few-Shot CoT

Few-Shot CoT ç®€å•çš„åœ¨æç¤ºä¸­æä¾›äº†ä¸€äº›é“¾å¼æ€è€ƒç¤ºä¾‹ï¼ˆChain-of-Thought Promptingï¼‰ï¼Œè¶³å¤Ÿå¤§çš„è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›å°±èƒ½å¤Ÿè¢«å¢å¼ºã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ç»™å‡ºä¸€ä¸¤ä¸ªç¤ºä¾‹ï¼Œç„¶ååœ¨ç¤ºä¾‹ä¸­å†™æ¸…æ¥šæ¨å¯¼çš„è¿‡ç¨‹ã€‚

![](https://static001.geekbang.org/resource/image/f2/a0/f27cec109dff8947d85507b34ce240a0.png?wh=940x473)

è®ºæ–‡ä¸­ç»™å‡ºäº†ä¸€ä¸ªå¤§æ¨¡å‹é€šè¿‡æ€ç»´é“¾åšæ•°å­¦é¢˜çš„ç¤ºä¾‹ã€‚å›¾å·¦å’Œå›¾å³ï¼Œå¤§æ¨¡å‹éƒ½è¯»å…¥äº†OneShotç¤ºä¾‹ï¼Œä½†æ˜¯å›¾å·¦åªç»™å‡ºäº†ç­”æ¡ˆï¼Œè€Œå›¾å³åˆ™åœ¨OneShotç¤ºä¾‹ä¸­ç»™å‡ºäº†è§£é¢˜çš„å…·ä½“æ€è·¯ã€‚ç»“æœï¼Œåªç»™å‡ºäº†ç­”æ¡ˆçš„æ¨¡å‹æ¨ç†é”™è¯¯ï¼Œè€Œç»™å‡ºè§£é¢˜æ€è·¯åï¼ŒåŒä¸€ä¸ªæ¨¡å‹ç”Ÿæˆäº†æ­£ç¡®çš„ç­”æ¡ˆã€‚

åœ¨ä¸‰ç§å¤§å‹è¯­è¨€æ¨¡å‹çš„å®éªŒä¸­ï¼ŒCoTåœ¨ä¸€ç³»åˆ—çš„ç®—æœ¯ã€å¸¸è¯†å’Œç¬¦å·æ¨ç†ä»»åŠ¡ä¸­éƒ½æé«˜äº†æ€§èƒ½ã€‚åœ¨GSM8Kæ•°å­¦é—®é¢˜åŸºå‡†æµ‹è¯•ä¸­ï¼Œé€šè¿‡CoTæŒ‡å¯¼åï¼Œå¤§æ¨¡å‹çš„è¡¨ç°å¯ä»¥è¾¾åˆ°å½“æ—¶æœ€å…ˆè¿›çš„å‡†ç¡®æ€§ã€‚

CoTä»æ¦‚å¿µä¸Šéå¸¸å®¹æ˜“ç†è§£ï¼Œä»åº”ç”¨ä¸Šéå¸¸å®¹æ˜“æ“ä½œã€‚è™½ç„¶ç®€å•ï¼Œä½†è¿™ç§æ€æƒ³å¯ä»¥ç»™æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹å¸¦æ¥å¾ˆå¤šå¯å‘ã€‚

æ¯”å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªAIèŠ±åº—åŠ©æ‰‹ï¼Œå®ƒçš„ä»»åŠ¡æ˜¯å¸®åŠ©ç”¨æˆ·é€‰æ‹©ä»–ä»¬æƒ³è¦çš„èŠ±ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªé”€å”®åˆ—è¡¨ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨CoTæ¥å¼•å¯¼AIçš„æ¨ç†è¿‡ç¨‹ã€‚

ğŸ‘‰ æ•´ä½“æŒ‡å¯¼ï¼šä½ éœ€è¦è·Ÿç€ä¸‹é¢çš„æ­¥éª¤ä¸€æ­¥æ­¥çš„æ¨ç†ã€‚

1. é—®é¢˜ç†è§£ï¼šé¦–å…ˆï¼ŒAIéœ€è¦ç†è§£ç”¨æˆ·çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯èƒ½ä¼šè¯´ï¼šâ€œä»Šå¤©è¦å‚åŠ æœ‹å‹çš„ç”Ÿæ—¥Partyï¼Œæƒ³é€æŸèŠ±ç¥ç¦å¥¹ã€‚â€æˆ‘ä»¬å¯ä»¥ç»™AIä¸€ä¸ªæç¤ºæ¨¡æ¿ï¼Œé‡Œé¢åŒ…å«ç¤ºä¾‹ï¼šâ€œ _**é‡åˆ°XXé—®é¢˜ï¼Œæˆ‘å…ˆçœ‹è‡ªå·±æœ‰**_ _**æ²¡æœ‰**_ _**ç›¸å…³çŸ¥è¯†ï¼Œæœ‰çš„è¯ï¼Œå°±æä¾›ç­”æ¡ˆï¼›æ²¡æœ‰ï¼Œå°±è°ƒç”¨å·¥å…·æœç´¢ï¼Œæœ‰äº†çŸ¥è¯†åå†è¯•å›¾è§£å†³ã€‚**_â€â€”â€” è¿™å°±æ˜¯ç»™äº†AIä¸€ä¸ªæ€ç»´é“¾çš„ç¤ºä¾‹ã€‚

2. ä¿¡æ¯æœç´¢ï¼šæ¥ä¸‹æ¥ï¼ŒAIéœ€è¦æœç´¢ç›¸å…³ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½éœ€è¦æŸ¥æ‰¾å“ªäº›èŠ±æœ€é€‚åˆç”Ÿæ—¥æ´¾å¯¹ã€‚

3. å†³ç­–åˆ¶å®šï¼šåŸºäºæ”¶é›†åˆ°çš„ä¿¡æ¯ï¼ŒAIéœ€è¦åˆ¶å®šä¸€ä¸ªå†³ç­–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ€ç»´é“¾è®©ä»–è¯¦ç»†æ€è€ƒå†³ç­–çš„æµç¨‹ï¼Œå…ˆåšä»€ä¹ˆååšä»€ä¹ˆã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®ƒä¸€ä¸ªç¤ºä¾‹ï¼šâ€œ _**é‡åˆ°ç”Ÿæ—¥æ´¾å¯¹é€èŠ±çš„æƒ…å†µï¼Œæˆ‘å…ˆè€ƒè™‘ç”¨æˆ·çš„éœ€æ±‚ï¼Œç„¶åæŸ¥çœ‹é²œèŠ±çš„åº“å­˜ï¼Œæœ€åå†³å®šæ¨èä¸€äº›ç«ç‘°å’Œç™¾åˆï¼Œå› ä¸ºè¿™äº›èŠ±é€šå¸¸é€‚åˆç”Ÿæ—¥æ´¾å¯¹ã€‚**_â€â€”â€” é‚£ä¹ˆæœ‰äº†ç”Ÿæ—¥æ´¾å¯¹è¿™ä¸ªåœºæ™¯åšç¤ºä¾‹ï¼Œå¤§æ¨¡å‹å°±èƒ½æŠŠç±»ä¼¼çš„æ€ç»´æµç¨‹è¿ç”¨åˆ°å…¶å®ƒåœºæ™¯ã€‚

4. ç”Ÿæˆé”€å”®åˆ—è¡¨ï¼šæœ€åï¼ŒAIä½¿ç”¨OutputParserç”Ÿæˆä¸€ä¸ªé”€å”®åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ¨èçš„èŠ±å’Œä»·æ ¼ã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ•´ä½“ä¸Šï¼Œæ€ç»´é“¾å¼•å¯¼AIä»ç†è§£é—®é¢˜ï¼Œåˆ°æœç´¢ä¿¡æ¯ï¼Œå†åˆ°åˆ¶å®šå†³ç­–ï¼Œæœ€åç”Ÿæˆé”€å”®åˆ—è¡¨ã€‚è¿™ç§æ–¹æ³•ä¸ä»…ä½¿AIçš„æ¨ç†è¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿä½¿å¾—ç”Ÿæˆçš„é”€å”®åˆ—è¡¨æ›´åŠ ç¬¦åˆç”¨æˆ·çš„éœ€æ±‚ã€‚å…·ä½“åˆ°æ¯ä¸€ä¸ªæ­¥éª¤ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ€ç»´é“¾æ¥è®¾è®¡æ›´ä¸ºè¯¦ç»†çš„æç¤ºæ¨¡æ¿ï¼Œæ¥å¼•å¯¼æ¨¡å‹æ¯ä¸€æ­¥çš„æ€è€ƒéƒ½éµå¾ªæ¸…æ™°å‡†ç¡®çš„é€»è¾‘ã€‚

å…¶å®LangChainçš„æ ¸å¿ƒç»„ä»¶Agentçš„æœ¬è´¨å°±æ˜¯è¿›è¡Œå¥½çš„æç¤ºå·¥ç¨‹ï¼Œå¹¶å¤§é‡åœ°ä½¿ç”¨é¢„ç½®çš„FewShotå’ŒCoTæ¨¡æ¿ã€‚è¿™ä¸ªåœ¨ä¹‹åçš„è¯¾ç¨‹å­¦ä¹ ä¸­æˆ‘ä»¬ä¼šç†è§£å¾—è¶Šæ¥è¶Šé€å½»ã€‚

### Zero-Shot CoT

ä¸‹é¢çš„è¿™ä¸¤ä¸ªCoTæç¤ºæ¨¡æ¿çš„ä¾‹å­ï¼Œæ¥è‡ªäºGoogle Researchå’Œä¸œäº¬å¤§å­¦çš„è®ºæ–‡ã€Š [å¤§è¯­è¨€æ¨¡å‹æ˜¯é›¶æ ·æœ¬æ¨ç†è€…](https://proceedings.neurips.cc/paper_files/paper/2022/file/8bb0d291acd4acf06ef112099c16f326-Paper-Conference.pdf)ã€‹ã€‚

å›¾ä¸­çš„ï¼ˆdï¼‰ç¤ºä¾‹éå¸¸éå¸¸æœ‰æ„æ€ï¼Œåœ¨Zero-Shot CoTä¸­ï¼Œä½ åªè¦ç®€å•åœ°å‘Šè¯‰æ¨¡å‹â€œ **è®©æˆ‘ä»¬ä¸€æ­¥æ­¥çš„æ€è€ƒï¼ˆLetâ€™s think step by stepï¼‰**â€ï¼Œæ¨¡å‹å°±èƒ½å¤Ÿç»™å‡ºæ›´å¥½çš„ç­”æ¡ˆï¼

![](https://static001.geekbang.org/resource/image/09/8b/09a48be47b3e0e9ec0ae7ebd483d868b.png?wh=944x508)

å“ˆå“ˆå“ˆï¼Œè¿™æ ·å¤ªç¥å¥‡äº†å§ï¼Œè¿™ä¸ç”±å¾—è®©æˆ‘è”æƒ³èµ·æœ€ç®€å•çš„æç¤ºå·¥ç¨‹ï¼Œè§’è‰²è®¾å®šâ€”â€”æ¨¡å‹å›ç­”ä¹‹å‰ï¼Œå…ˆå‘Šè¯‰å®ƒâ€œä½ æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç»éªŒçš„XXä¸“å®¶â€ï¼Œæ¨¡å‹åº”è¯¥å°±ä¼šåœ¨å¼€å§‹èƒ¡è¯´å…«é“ä¹‹å‰ä¸‰æ€ã€‚

ç®€å•æ€»ç»“ä¸€ä¸‹ï¼šFew-Shot CoTï¼ŒæŒ‡çš„å°±æ˜¯åœ¨å¸¦æœ‰ç¤ºä¾‹çš„æç¤ºè¿‡ç¨‹ä¸­ï¼ŒåŠ å…¥æ€è€ƒçš„æ­¥éª¤ï¼Œä»è€Œå¼•å¯¼æ¨¡å‹ç»™å‡ºæ›´å¥½çš„ç»“æœã€‚è€ŒZero-Shot CoTï¼Œå°±æ˜¯ç›´æ¥å‘Šè¯‰æ¨¡å‹è¦ä¸€æ­¥ä¸€æ­¥åœ°æ€è€ƒï¼Œæ…¢æ…¢åœ°æ¨ç†ã€‚

## Chain of Thought å®æˆ˜

ç°åœ¨ï¼Œå°±è®©æˆ‘å¸¦ç€ä½ å®Œæˆä¸€æ¬¡Chain of Thoughtçš„LangChainåº”ç”¨å¼€å‘å®æˆ˜ã€‚

**é¡¹ç›®éœ€æ±‚**ï¼šåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªAIè¿è¥åŠ©æ‰‹ï¼Œæˆ‘ä»¬è¦å±•ç¤ºAIå¦‚ä½•æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æ¨ç†å’Œç”Ÿæˆç­”æ¡ˆã€‚ç„¶åï¼ŒAIæ ¹æ®å½“å‰çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œæ¨ç†ï¼Œæä¾›äº†å…·ä½“çš„èŠ±å‰å»ºè®®å¹¶è§£é‡Šäº†ä¸ºä»€ä¹ˆé€‰æ‹©è¿™äº›å»ºè®®ã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒAIéœ€è¦ç†è§£å®¢æˆ·çš„éœ€æ±‚ä¹‹åï¼ŒæŒ‰éƒ¨å°±ç­çš„æ€è€ƒï¼Œç„¶åç»™å‡ºæœ€ç¬¦åˆé€»è¾‘çš„å›ç­”ã€‚

### CoTçš„æ¨¡æ¿è®¾è®¡

é’ˆå¯¹è¿™ä¸ªèŠå¤©æœºå™¨äººçš„éœ€æ±‚ï¼Œæˆ‘è®¾è®¡äº†ä¸‹é¢è¿™æ ·çš„æ€ç»´é“¾æ¨¡æ¿ã€‚

> ä½œä¸ºä¸€ä¸ªä¸ºèŠ±åº—ç”µå•†å…¬å¸å·¥ä½œçš„AIåŠ©æ‰‹ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©å®¢æˆ·æ ¹æ®ä»–ä»¬çš„å–œå¥½åšå‡ºæ˜æ™ºçš„å†³å®šã€‚
>
> æˆ‘ä¼šæŒ‰éƒ¨å°±ç­çš„æ€è€ƒï¼Œå…ˆç†è§£å®¢æˆ·çš„éœ€æ±‚ï¼Œç„¶åè€ƒè™‘å„ç§é²œèŠ±çš„æ¶µä¹‰ï¼Œæœ€åæ ¹æ®è¿™ä¸ªéœ€æ±‚ï¼Œç»™å‡ºæˆ‘çš„æ¨èã€‚
>
> åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¼šå‘å®¢æˆ·è§£é‡Šæˆ‘è¿™æ ·æ¨èçš„åŸå› ã€‚
>
> **ç¤ºä¾‹ 1ï¼š**
>
> äººç±»ï¼šæˆ‘æƒ³æ‰¾ä¸€ç§è±¡å¾çˆ±æƒ…çš„èŠ±ã€‚
>
> AIï¼šé¦–å…ˆï¼Œæˆ‘ç†è§£ä½ æ­£åœ¨å¯»æ‰¾ä¸€ç§å¯ä»¥è±¡å¾çˆ±æƒ…çš„èŠ±ã€‚åœ¨è®¸å¤šæ–‡åŒ–ä¸­ï¼Œçº¢ç«ç‘°è¢«è§†ä¸ºçˆ±æƒ…çš„è±¡å¾ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬çš„çº¢è‰²é€šå¸¸ä¸çƒ­æƒ…å’Œæµ“çƒˆçš„æ„Ÿæƒ…è”ç³»åœ¨ä¸€èµ·ã€‚å› æ­¤ï¼Œè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä¼šæ¨èçº¢ç«ç‘°ã€‚çº¢ç«ç‘°ä¸ä»…èƒ½å¤Ÿè±¡å¾çˆ±æƒ…ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¼ è¾¾å‡ºå¼ºçƒˆçš„æ„Ÿæƒ…ï¼Œè¿™æ˜¯ä½ åœ¨å¯»æ‰¾çš„ã€‚
>
> **ç¤ºä¾‹ 2ï¼š**
>
> äººç±»ï¼šæˆ‘æƒ³è¦ä¸€äº›ç‹¬ç‰¹å’Œå¥‡ç‰¹çš„èŠ±ã€‚
>
> AIï¼šä»ä½ çš„éœ€æ±‚ä¸­ï¼Œæˆ‘ç†è§£ä½ æƒ³è¦çš„æ˜¯ç‹¬ä¸€æ— äºŒå’Œå¼•äººæ³¨ç›®çš„èŠ±æœµã€‚å…°èŠ±æ˜¯ä¸€ç§éå¸¸ç‹¬ç‰¹å¹¶ä¸”é¢œè‰²é²œè‰³çš„èŠ±ï¼Œå®ƒä»¬åœ¨ä¸–ç•Œä¸Šçš„è®¸å¤šåœ°æ–¹éƒ½è¢«è§†ä¸ºå¥¢ä¾ˆå“å’Œç¾çš„è±¡å¾ã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®ä½ è€ƒè™‘å…°èŠ±ã€‚é€‰æ‹©å…°èŠ±å¯ä»¥æ»¡è¶³ä½ å¯¹ç‹¬ç‰¹å’Œå¥‡ç‰¹çš„è¦æ±‚ï¼Œè€Œä¸”ï¼Œå…°èŠ±çš„ç¾ä¸½å’Œå®ƒä»¬æ‰€ä»£è¡¨çš„åŠ›é‡å’Œå¥¢ä¾ˆä¹Ÿå¯èƒ½ä¼šå¸å¼•ä½ ã€‚

AIçš„æ¨¡æ¿å¼€å§‹äºå¯¹å…¶è§’è‰²çš„é˜è¿°ï¼Œå¹¶ç»™å‡ºäº†ä¸€äº›å…ˆå‰çš„å¯¹è¯ç¤ºä¾‹ï¼ˆFew-Shot Learningï¼‰æ¥å¸®åŠ©AIç†è§£å¦‚ä½•å¤„ç†è¿™ç§ç±»å‹çš„è¯·æ±‚ã€‚è¿™äº›ç¤ºä¾‹å±•ç¤ºäº†AIå¦‚ä½•æ ¹æ®æ€ç»´é“¾è¿›è¡Œæ€è€ƒï¼Œç»™å‡ºæ·±æ€ç†Ÿè™‘ä¹‹åçš„ç­”æ¡ˆã€‚

### ç¨‹åºçš„å®Œæ•´æ¡†æ¶

ç¨‹åºçš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```plain
# è®¾ç½®ç¯å¢ƒå˜é‡å’ŒAPIå¯†é’¥
import os
os.environ["OPENAI_API_KEY"] = 'ä½ çš„OpenAI API Key'

# åˆ›å»ºèŠå¤©æ¨¡å‹
from langchain.chat_models import ChatOpenAI
llm = ChatOpenAI(temperature=0)

# è®¾å®š AI çš„è§’è‰²å’Œç›®æ ‡
role_template = "ä½ æ˜¯ä¸€ä¸ªä¸ºèŠ±åº—ç”µå•†å…¬å¸å·¥ä½œçš„AIåŠ©æ‰‹, ä½ çš„ç›®æ ‡æ˜¯å¸®åŠ©å®¢æˆ·æ ¹æ®ä»–ä»¬çš„å–œå¥½åšå‡ºæ˜æ™ºçš„å†³å®š"

# CoT çš„å…³é”®éƒ¨åˆ†ï¼ŒAI è§£é‡Šæ¨ç†è¿‡ç¨‹ï¼Œå¹¶åŠ å…¥ä¸€äº›å…ˆå‰çš„å¯¹è¯ç¤ºä¾‹ï¼ˆFew-Shot Learningï¼‰
cot_template = """
ä½œä¸ºä¸€ä¸ªä¸ºèŠ±åº—ç”µå•†å…¬å¸å·¥ä½œçš„AIåŠ©æ‰‹ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©å®¢æˆ·æ ¹æ®ä»–ä»¬çš„å–œå¥½åšå‡ºæ˜æ™ºçš„å†³å®šã€‚

æˆ‘ä¼šæŒ‰éƒ¨å°±ç­çš„æ€è€ƒï¼Œå…ˆç†è§£å®¢æˆ·çš„éœ€æ±‚ï¼Œç„¶åè€ƒè™‘å„ç§é²œèŠ±çš„æ¶µä¹‰ï¼Œæœ€åæ ¹æ®è¿™ä¸ªéœ€æ±‚ï¼Œç»™å‡ºæˆ‘çš„æ¨èã€‚
åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¼šå‘å®¢æˆ·è§£é‡Šæˆ‘è¿™æ ·æ¨èçš„åŸå› ã€‚

ç¤ºä¾‹ 1:
Â  äººç±»ï¼šæˆ‘æƒ³æ‰¾ä¸€ç§è±¡å¾çˆ±æƒ…çš„èŠ±ã€‚
Â  AIï¼šé¦–å…ˆï¼Œæˆ‘ç†è§£ä½ æ­£åœ¨å¯»æ‰¾ä¸€ç§å¯ä»¥è±¡å¾çˆ±æƒ…çš„èŠ±ã€‚åœ¨è®¸å¤šæ–‡åŒ–ä¸­ï¼Œçº¢ç«ç‘°è¢«è§†ä¸ºçˆ±æƒ…çš„è±¡å¾ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä»¬çš„çº¢è‰²é€šå¸¸ä¸çƒ­æƒ…å’Œæµ“çƒˆçš„æ„Ÿæƒ…è”ç³»åœ¨ä¸€èµ·ã€‚å› æ­¤ï¼Œè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä¼šæ¨èçº¢ç«ç‘°ã€‚çº¢ç«ç‘°ä¸ä»…èƒ½å¤Ÿè±¡å¾çˆ±æƒ…ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¼ è¾¾å‡ºå¼ºçƒˆçš„æ„Ÿæƒ…ï¼Œè¿™æ˜¯ä½ åœ¨å¯»æ‰¾çš„ã€‚

ç¤ºä¾‹ 2:
Â  äººç±»ï¼šæˆ‘æƒ³è¦ä¸€äº›ç‹¬ç‰¹å’Œå¥‡ç‰¹çš„èŠ±ã€‚
Â  AIï¼šä»ä½ çš„éœ€æ±‚ä¸­ï¼Œæˆ‘ç†è§£ä½ æƒ³è¦çš„æ˜¯ç‹¬ä¸€æ— äºŒå’Œå¼•äººæ³¨ç›®çš„èŠ±æœµã€‚å…°èŠ±æ˜¯ä¸€ç§éå¸¸ç‹¬ç‰¹å¹¶ä¸”é¢œè‰²é²œè‰³çš„èŠ±ï¼Œå®ƒä»¬åœ¨ä¸–ç•Œä¸Šçš„è®¸å¤šåœ°æ–¹éƒ½è¢«è§†ä¸ºå¥¢ä¾ˆå“å’Œç¾çš„è±¡å¾ã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®ä½ è€ƒè™‘å…°èŠ±ã€‚é€‰æ‹©å…°èŠ±å¯ä»¥æ»¡è¶³ä½ å¯¹ç‹¬ç‰¹å’Œå¥‡ç‰¹çš„è¦æ±‚ï¼Œè€Œä¸”ï¼Œå…°èŠ±çš„ç¾ä¸½å’Œå®ƒä»¬æ‰€ä»£è¡¨çš„åŠ›é‡å’Œå¥¢ä¾ˆä¹Ÿå¯èƒ½ä¼šå¸å¼•ä½ ã€‚
"""
from langchain.prompts import ChatPromptTemplate, HumanMessagePromptTemplate, SystemMessagePromptTemplate
system_prompt_role = SystemMessagePromptTemplate.from_template(role_template)
system_prompt_cot = SystemMessagePromptTemplate.from_template(cot_template)

# ç”¨æˆ·çš„è¯¢é—®
human_template = "{human_input}"
human_prompt = HumanMessagePromptTemplate.from_template(human_template)

# å°†ä»¥ä¸Šæ‰€æœ‰ä¿¡æ¯ç»“åˆä¸ºä¸€ä¸ªèŠå¤©æç¤º
chat_prompt = ChatPromptTemplate.from_messages([system_prompt_role, system_prompt_cot, human_prompt])

prompt = chat_prompt.format_prompt(human_input="æˆ‘æƒ³ä¸ºæˆ‘çš„å¥³æœ‹å‹è´­ä¹°ä¸€äº›èŠ±ã€‚å¥¹å–œæ¬¢ç²‰è‰²å’Œç´«è‰²ã€‚ä½ æœ‰ä»€ä¹ˆå»ºè®®å—?").to_messages()

# æ¥æ”¶ç”¨æˆ·çš„è¯¢é—®ï¼Œè¿”å›å›ç­”ç»“æœ
response = llm(prompt)
print(response)

```

ç¨‹åºä¸­ï¼Œé¦–å…ˆè®¾ç½®ç¯å¢ƒå˜é‡OpenAIçš„APIå¯†é’¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿä½¿ç”¨OpenAIçš„GPT-4æ¨¡å‹ã€‚ç„¶ååˆ›å»ºèŠå¤©æ¨¡å‹ï¼šé€šè¿‡è°ƒç”¨ ChatOpenAI ç±»ï¼Œåˆ›å»ºäº†ä¸€ä¸ªèŠå¤©æ¨¡å‹ã€‚è®¾ç½® temperature=0 å¯ä»¥è®©æ¨¡å‹ç”Ÿæˆæ›´ç¡®å®šæ€§çš„å›ç­”ï¼Œå³è¾“å‡ºæ›´å€¾å‘äºæœ€å¯èƒ½çš„ç»“æœã€‚

æ¥ç€å®šä¹‰äº†AIçš„è§’è‰²å’Œç›®æ ‡ï¼Œè¯¥AIä¸ºèŠ±åº—ç”µå•†å…¬å¸çš„åŠ©æ‰‹ï¼Œå…¶ç›®æ ‡æ˜¯æ ¹æ®å®¢æˆ·çš„å–œå¥½æ¥æä¾›è´­ä¹°å»ºè®®ã€‚ç´§æ¥ç€ï¼Œå®šä¹‰ CoT æ¨¡æ¿ï¼Œå…¶ä¸­åŒ…æ‹¬äº†AIçš„è§’è‰²å’Œç›®æ ‡æè¿°ã€æ€è€ƒé“¾æ¡ä»¥åŠéµå¾ªæ€è€ƒé“¾æ¡çš„ä¸€äº›ç¤ºä¾‹ï¼Œæ˜¾ç¤ºäº†AIå¦‚ä½•ç†è§£é—®é¢˜ï¼Œå¹¶ç»™å‡ºå»ºè®®ã€‚

ä¹‹åï¼Œæˆ‘ä½¿ç”¨äº†PromptTemplateçš„from\_templateæ–¹æ³•ï¼Œæ¥ç”Ÿæˆç›¸åº”çš„è¯¢é—®æ¨¡æ¿ã€‚å…¶ä¸­åŒ…æ‹¬ç”¨äºæŒ‡å¯¼æ¨¡å‹çš„SystemMessagePromptTemplateå’Œç”¨äºä¼ é€’äººç±»é—®é¢˜çš„HumanMessagePromptTemplateã€‚

ç„¶åï¼Œæˆ‘ä½¿ç”¨äº†ChatPromptTemplate.from\_messagesæ–¹æ³•ï¼Œæ•´åˆä¸Šè¿°å®šä¹‰çš„è§’è‰²ï¼ŒCoTæ¨¡æ¿å’Œç”¨æˆ·è¯¢é—®ï¼Œç”ŸæˆèŠå¤©æç¤ºã€‚

æœ€åï¼Œå°†ç”Ÿæˆçš„èŠå¤©æç¤ºè¾“å…¥æ¨¡å‹ä¸­ï¼Œè·å¾—æ¨¡å‹çš„å›ç­”ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚

åœ¨Few-Shot CoTæç¤ºçš„æŒ‡å¼•ä¹‹ä¸‹ï¼Œæ¨¡å‹é’ˆå¯¹æˆ‘ä»¬çš„é—®é¢˜ï¼Œä»é—®é¢˜ä¸­çš„å…·ä½“éœ€æ±‚å‡ºå‘ï¼Œè¿”å›äº†ä¸é”™çš„å»ºè®®ã€‚

_**ç°åœ¨ï¼Œæ ¹æ®ä½ çš„éœ€æ±‚ï¼šä½ æ­£åœ¨å¯»æ‰¾ä½ çš„å¥³æœ‹å‹å–œæ¬¢çš„ç²‰è‰²å’Œç´«è‰²çš„èŠ±ã€‚**_

_**é¦–å…ˆï¼Œæˆ‘ä»ç†è§£ä½ çš„éœ€æ±‚å‡ºå‘ï¼Œåªä¼šæ¨èç²‰è‰²æˆ–ç´«è‰²ï¼Œæˆ–è€…ä¸¤è€…çš„ç»„åˆçš„èŠ±ã€‚è¿™äº›å¯èƒ½åŒ…æ‹¬ç²‰è‰²çš„ç«ç‘°ï¼Œç´«è‰²çš„å…°èŠ±ï¼Œæˆ–è€…æ˜¯ç²‰è‰²å’Œç´«è‰²çš„èŠ±çš„æ··åˆèŠ±æŸã€‚ç«ç‘°æ˜¯è±¡å¾çˆ±æƒ…å’Œäº²æƒ…çš„ç»å…¸ç¬¦å·ï¼Œè€Œå…°èŠ±è±¡å¾ç€ç¾ä¸½å’ŒåŠ›é‡ã€‚è¿™ä¸¤ç§èŠ±éƒ½è•´å«å¾ˆæ£’çš„å†…æ¶µã€‚å½“ç„¶äº†ï¼Œæ— è®ºä½ é€‰æ‹©å“ªç§èŠ±å‰ï¼Œé‡è¦çš„æ˜¯è¡¨è¾¾å‡ºä½ å¯¹å¥¹çš„çˆ±å’Œå…³å¿ƒã€‚è®°å¾—é™„ä¸Šä¸€å¼ æ¸©é¦¨çš„è´ºå¡ï¼Œå†™ä¸‹ä½ çš„çœŸæŒšç¥ç¦ã€‚**_

## Tree of Thought

CoTè¿™ç§æ€æƒ³ï¼Œä¸ºå¤§æ¨¡å‹å¸¦æ¥äº†æ›´å¥½çš„ç­”æ¡ˆï¼Œç„¶è€Œï¼Œå¯¹äºéœ€è¦æ¢ç´¢æˆ–é¢„åˆ¤æˆ˜ç•¥çš„å¤æ‚ä»»åŠ¡æ¥è¯´ï¼Œä¼ ç»Ÿæˆ–ç®€å•çš„æç¤ºæŠ€å·§æ˜¯ä¸å¤Ÿçš„ã€‚åŸºäºCoTçš„æ€æƒ³ï¼ŒYaoå’ŒLongç­‰äººå‡ ä¹åœ¨åŒä¸€æ—¶é—´åœ¨è®ºæ–‡ã€Š [æ€ç»´ä¹‹æ ‘ï¼šä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é—®é¢˜è§£å†³](https://arxiv.org/pdf/2305.10601.pdf)ã€‹å’Œã€Š [å¤§å‹è¯­è¨€æ¨¡å‹æŒ‡å¯¼çš„æ€ç»´ä¹‹æ ‘](https://arxiv.org/pdf/2305.08291.pdf)ã€‹ä¸­ï¼Œè¿›ä¸€æ­¥æå‡ºäº†æ€ç»´æ ‘ï¼ˆTree of Thoughtsï¼ŒToTï¼‰æ¡†æ¶ï¼Œè¯¥æ¡†æ¶åŸºäºæ€ç»´é“¾æç¤ºè¿›è¡Œäº†æ€»ç»“ï¼Œå¼•å¯¼è¯­è¨€æ¨¡å‹æ¢ç´¢æŠŠæ€ç»´ä½œä¸ºä¸­é—´æ­¥éª¤æ¥è§£å†³é€šç”¨é—®é¢˜ã€‚

ToTæ˜¯ä¸€ç§è§£å†³å¤æ‚é—®é¢˜çš„æ¡†æ¶ï¼Œå®ƒåœ¨éœ€è¦å¤šæ­¥éª¤æ¨ç†çš„ä»»åŠ¡ä¸­ï¼Œå¼•å¯¼è¯­è¨€æ¨¡å‹æœç´¢ä¸€æ£µç”±è¿è´¯çš„è¯­è¨€åºåˆ—ï¼ˆè§£å†³é—®é¢˜çš„ä¸­é—´æ­¥éª¤ï¼‰ç»„æˆçš„æ€ç»´æ ‘ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ç”Ÿæˆä¸€ä¸ªç­”æ¡ˆã€‚ToTæ¡†æ¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šè®©æ¨¡å‹ç”Ÿæˆå’Œè¯„ä¼°å…¶æ€ç»´çš„èƒ½åŠ›ï¼Œå¹¶å°†å…¶ä¸æœç´¢ç®—æ³•ï¼ˆå¦‚å¹¿åº¦ä¼˜å…ˆæœç´¢å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰ç»“åˆèµ·æ¥ï¼Œè¿›è¡Œç³»ç»Ÿæ€§åœ°æ¢ç´¢å’ŒéªŒè¯ã€‚

![](https://static001.geekbang.org/resource/image/6e/a0/6eec83ffe1a5f37d245520535d65f8a0.png?wh=1083x550)

ToT æ¡†æ¶ä¸ºæ¯ä¸ªä»»åŠ¡å®šä¹‰å…·ä½“çš„æ€ç»´æ­¥éª¤å’Œæ¯ä¸ªæ­¥éª¤çš„å€™é€‰é¡¹æ•°é‡ã€‚ä¾‹å¦‚ï¼Œè¦è§£å†³ä¸€ä¸ªæ•°å­¦æ¨ç†ä»»åŠ¡ï¼Œå…ˆæŠŠå®ƒåˆ†è§£ä¸º3ä¸ªæ€ç»´æ­¥éª¤ï¼Œå¹¶ä¸ºæ¯ä¸ªæ­¥éª¤æå‡ºå¤šä¸ªæ–¹æ¡ˆï¼Œå¹¶ä¿ç•™æœ€ä¼˜çš„5ä¸ªå€™é€‰æ–¹æ¡ˆã€‚ç„¶ååœ¨å¤šæ¡æ€ç»´è·¯å¾„ä¸­æœå¯»æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚

è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œæ¨¡å‹å¯ä»¥é€šè¿‡è§‚å¯Ÿå’Œè¯„ä¼°å…¶è‡ªèº«çš„æ€ç»´è¿‡ç¨‹ï¼Œæ›´å¥½åœ°è§£å†³é—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯åŸºäºè¾“å…¥ç”Ÿæˆè¾“å‡ºã€‚è¿™å¯¹äºéœ€è¦æ·±åº¦æ¨ç†çš„å¤æ‚ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚æ­¤å¤–ï¼Œé€šè¿‡å¼•å…¥å¼ºåŒ–å­¦ä¹ ã€é›†æŸæœç´¢ç­‰æŠ€æœ¯ï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜æœç´¢ç­–ç•¥çš„æ€§èƒ½ï¼Œå¹¶è®©æ¨¡å‹åœ¨è§£å†³æ–°é—®é¢˜æˆ–é¢ä¸´æœªçŸ¥æƒ…å†µæ—¶æœ‰æ›´å¥½çš„è¡¨ç°ã€‚

ä¸‹é¢æˆ‘ä»¬åº”ç”¨ToTçš„æ€æƒ³ï¼Œç»™å‡ºä¸€ä¸ªé²œèŠ±è¿è¥æ–¹é¢çš„ç¤ºä¾‹ã€‚

> å‡è®¾ä¸€ä¸ªé¡¾å®¢åœ¨é²œèŠ±ç½‘ç«™ä¸Šè¯¢é—®ï¼šâ€œæˆ‘æƒ³ä¸ºæˆ‘çš„å¦»å­è´­ä¹°ä¸€æŸé²œèŠ±ï¼Œä½†æˆ‘ä¸ç¡®å®šåº”è¯¥é€‰æ‹©å“ªç§é²œèŠ±ã€‚å¥¹å–œæ¬¢æ·¡é›…çš„é¢œè‰²å’ŒèŠ±é¦™ã€‚â€
>
> AIï¼ˆä½¿ç”¨ToTæ¡†æ¶ï¼‰ï¼š
>
> **æ€ç»´æ­¥éª¤1**ï¼šç†è§£é¡¾å®¢çš„éœ€æ±‚ã€‚
>
> é¡¾å®¢æƒ³ä¸ºå¦»å­è´­ä¹°é²œèŠ±ã€‚
>
> é¡¾å®¢çš„å¦»å­å–œæ¬¢æ·¡é›…çš„é¢œè‰²å’ŒèŠ±é¦™ã€‚
>
> **æ€ç»´æ­¥éª¤2**ï¼šè€ƒè™‘å¯èƒ½çš„é²œèŠ±é€‰æ‹©ã€‚
>
> å€™é€‰1ï¼šç™¾åˆï¼Œå› ä¸ºå®ƒæœ‰æ·¡é›…çš„é¢œè‰²å’ŒèŠ±é¦™ã€‚
>
> å€™é€‰2ï¼šç«ç‘°ï¼Œé€‰æ‹©æ·¡ç²‰è‰²æˆ–ç™½è‰²ï¼Œå®ƒä»¬é€šå¸¸æœ‰èŠ±é¦™ã€‚
>
> å€™é€‰3ï¼šç´«ç½—å…°ï¼Œå®ƒæœ‰æ·¡é›…çš„é¢œè‰²å’ŒèŠ±é¦™ã€‚
>
> å€™é€‰4ï¼šæ¡”æ¢—ï¼Œå®ƒçš„é¢œè‰²æ·¡é›…ä½†ä¸ä¸€å®šæœ‰èŠ±é¦™ã€‚
>
> å€™é€‰5ï¼šåº·ä¹ƒé¦¨ï¼Œé€‰æ‹©æ·¡è‰²ç³»åˆ—ï¼Œå®ƒä»¬æœ‰æ·¡é›…çš„èŠ±é¦™ã€‚
>
> **æ€ç»´æ­¥éª¤3**ï¼šæ ¹æ®é¡¾å®¢çš„éœ€æ±‚ç­›é€‰æœ€ä½³é€‰æ‹©ã€‚
>
> ç™¾åˆå’Œç´«ç½—å…°éƒ½ç¬¦åˆé¡¾å®¢çš„éœ€æ±‚ï¼Œå› ä¸ºå®ƒä»¬éƒ½æœ‰æ·¡é›…çš„é¢œè‰²å’ŒèŠ±é¦™ã€‚
>
> æ·¡ç²‰è‰²æˆ–ç™½è‰²çš„ç«ç‘°ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚
>
> æ¡”æ¢—å¯èƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©ï¼Œå› ä¸ºå®ƒå¯èƒ½æ²¡æœ‰èŠ±é¦™ã€‚
>
> åº·ä¹ƒé¦¨æ˜¯ä¸€ä¸ªå¯è€ƒè™‘çš„é€‰æ‹©ã€‚
>
> **æ€ç»´æ­¥éª¤4**ï¼šç»™å‡ºå»ºè®®ã€‚
>
> â€œè€ƒè™‘åˆ°æ‚¨å¦»å­å–œæ¬¢æ·¡é›…çš„é¢œè‰²å’ŒèŠ±é¦™ï¼Œæˆ‘å»ºè®®æ‚¨å¯ä»¥é€‰æ‹©ç™¾åˆæˆ–ç´«ç½—å…°ã€‚æ·¡ç²‰è‰²æˆ–ç™½è‰²çš„ç«ç‘°ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å¸Œæœ›è¿™äº›å»ºè®®èƒ½å¸®åŠ©æ‚¨åšå‡ºå†³ç­–ï¼â€

è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥ä½œä¸ºFewShotç¤ºä¾‹ä¹‹ä¸€ï¼Œä¼ é€’ç»™æ¨¡å‹ï¼Œè®©ä»–å­¦ç€å®ç°ToTã€‚

é€šè¿‡åœ¨å…·ä½“çš„æ­¥éª¤ä¸­äº§ç”Ÿå¤šæ¡æ€è€ƒè·¯å¾„ï¼ŒToT æ¡†æ¶ä¸ºè§£å†³å¤æ‚é—®é¢˜æä¾›äº†ä¸€ç§æ–°çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ç»“åˆäº†è¯­è¨€æ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ã€æœç´¢ç®—æ³•ä»¥åŠå¼ºåŒ–å­¦ä¹ ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„æ•ˆæœã€‚

## æ€»ç»“æ—¶åˆ»

è¿™èŠ‚è¯¾æˆ‘ä»¬ä»‹ç»äº†Chain of Thoughtï¼ˆCoTï¼Œå³â€œæ€ç»´é“¾â€ï¼‰å’ŒTree of Thoughtsï¼ˆToTï¼Œå³â€œæ€ç»´æ ‘â€ï¼‰è¿™ä¸¤ä¸ªéå¸¸æœ‰è¶£çš„æ¦‚å¿µï¼Œå¹¶æ¢è®¨äº†å¦‚ä½•åˆ©ç”¨å®ƒä»¬å¼•å¯¼å¤§å‹è¯­è¨€æ¨¡å‹è¿›è¡Œæ›´æ·±å…¥çš„æ¨ç†ã€‚

- CoTçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ç”Ÿæˆä¸€ç³»åˆ—ä¸­é—´æ¨ç†æ­¥éª¤æ¥å¢å¼ºæ¨¡å‹çš„æ¨ç†èƒ½åŠ›ã€‚åœ¨Few-Shot CoTå’ŒZero-Shot CoTä¸¤ç§åº”ç”¨æ–¹æ³•ä¸­ï¼Œå‰è€…é€šè¿‡æä¾›é“¾å¼æ€è€ƒç¤ºä¾‹ä¼ é€’ç»™æ¨¡å‹ï¼Œåè€…åˆ™ç›´æ¥å‘Šè¯‰æ¨¡å‹è¿›è¡Œè¦æŒ‰éƒ¨å°±ç­çš„æ¨ç†ã€‚
- ToTè¿›ä¸€æ­¥æ‰©å±•äº†CoTçš„æ€æƒ³ï¼Œé€šè¿‡æœç´¢ç”±è¿è´¯çš„è¯­è¨€åºåˆ—ç»„æˆçš„æ€ç»´æ ‘æ¥è§£å†³å¤æ‚é—®é¢˜ã€‚æˆ‘é€šè¿‡ä¸€ä¸ªé²œèŠ±é€‰æ‹©çš„å®ä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨ToTæ¡†æ¶ã€‚


  æœ‰æœ‹å‹åœ¨GitHubä¸Šå¼€äº†ä¸€ä¸ª [Repo](https://github.com/kyegomez/tree-of-thoughts)ï¼Œä¸“é—¨ç»™å¤§å®¶ä»‹ç»ToTçš„åº”ç”¨æ–¹æ³•å’Œå®ä¾‹ï¼Œä»–ä»¬è¿˜ç»™å‡ºäº†å‡ ä¸ªéå¸¸ç®€å•çš„é€šç”¨ToTæç¤ºè¯­ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚

> è¯·ä½ æ¨¡æ‹Ÿä¸‰ä½å‡ºè‰²ã€é€»è¾‘æ€§å¼ºçš„ä¸“å®¶åˆä½œå›ç­”ä¸€ä¸ªé—®é¢˜ã€‚æ¯ä¸ªäººéƒ½è¯¦ç»†åœ°è§£é‡Šä»–ä»¬çš„æ€è€ƒè¿‡ç¨‹ï¼Œè€ƒè™‘åˆ°å…¶ä»–äººä¹‹å‰çš„è§£é‡Šï¼Œå¹¶å…¬å¼€æ‰¿è®¤é”™è¯¯ã€‚åœ¨æ¯ä¸€æ­¥ï¼Œåªè¦å¯èƒ½ï¼Œæ¯ä½ä¸“å®¶éƒ½ä¼šåœ¨å…¶ä»–äººçš„æ€è€ƒåŸºç¡€ä¸Šè¿›è¡Œå®Œå–„å’Œå»ºè®¾ï¼Œå¹¶æ‰¿è®¤ä»–ä»¬çš„è´¡çŒ®ã€‚ä»–ä»¬ç»§ç»­ï¼Œç›´åˆ°å¯¹é—®é¢˜æœ‰ä¸€ä¸ªæ˜ç¡®çš„ç­”æ¡ˆã€‚ä¸ºäº†æ¸…æ™°èµ·è§ï¼Œæ‚¨çš„æ•´ä¸ªå›åº”åº”è¯¥æ˜¯ä¸€ä¸ªMarkdownè¡¨æ ¼ã€‚
>
> é—®é¢˜æ˜¯â€¦

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/d7/3c/d719e10a2b045f5a70993b6135ef503c.png?wh=1920x1357)

å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥å»è¿™ä¸ªRepoé‡Œé¢çœ‹ä¸€çœ‹ã€‚

## æ€è€ƒé¢˜

1. æˆ‘ä»¬çš„CoTå®æˆ˜ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ˜¯Few-Shot CoTæç¤ºï¼Œè¯·ä½ æŠŠå®ƒæ¢ä¸ºZero-Shot CoTï¼Œè·‘ä¸€ä¸‹ç¨‹åºï¼Œçœ‹çœ‹ç»“æœã€‚
2. è¯·ä½ è®¾è®¡ä¸€ä¸ªä½ å·¥ä½œåœºæ™¯ä¸­çš„ä»»åŠ¡éœ€æ±‚ï¼Œç„¶åç”¨ToTè®©å¤§è¯­è¨€æ¨¡å‹å¸®ä½ è§£å†³é—®é¢˜ã€‚

æœŸå¾…åœ¨ç•™è¨€åŒºçœ‹åˆ°ä½ çš„åˆ†äº«ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµæ¢è®¨ï¼Œå…±åˆ›ä¸€ä¸ªå¥½çš„å­¦ä¹ æ°›å›´ã€‚å¦‚æœä½ è§‰å¾—å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿åˆ†äº«ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼æœ€åå¦‚æœä½ å­¦æœ‰ä½™åŠ›ï¼Œå¯ä»¥è¿›ä¸€æ­¥å­¦ä¹ ä¸‹é¢çš„å»¶ä¼¸é˜…è¯»ã€‚

## å»¶ä¼¸é˜…è¯»

1. è®ºæ–‡ï¼Œè‡ªæˆ‘ä¸€è‡´æ€§æå‡äº†è¯­è¨€æ¨¡å‹ä¸­çš„æ€ç»´é“¾æ¨ç†èƒ½åŠ›ï¼Œ [Chain-of-Thought Prompting Elicits Reasoning in Large Language Models](https://arxiv.org/pdf/2205.11916.pdf)ï¼ŒWang, X., Wei, J., Schuurmans, D., Le, Q., Chi, E., Narang, S., Chowdhery, A., & Zhou, D. (2023). Self-Consistency Improves Chain of Thought Reasoning in Language Models. Proceedings of the International Conference on Learning Representations (ICLR). arXiv preprint arXiv:2203.11171.
2. è®ºæ–‡ï¼Œå¤§è¯­è¨€æ¨¡å‹æ˜¯é›¶æ ·æœ¬æ¨ç†è€…ï¼Œ [Large Language Models are Zero-Shot Reasoners](https://proceedings.neurips.cc/paper_files/paper/2022/file/8bb0d291acd4acf06ef112099c16f326-Paper-Conference.pdf)ï¼ŒKojima, T., Gu, S. S., Reid, M., Matsuo, Y., & Iwasawa, Y. (2023). Large Language Models are Zero-Shot Reasoners. arXiv preprint arXiv:2205.11916v4.
3. è®ºæ–‡ï¼Œæ€ç»´ä¹‹æ ‘ï¼šä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹è¿›è¡Œæ·±æ€ç†Ÿè™‘çš„é—®é¢˜è§£å†³ï¼Œ [Tree of Thoughts: Deliberate Problem Solving with Large Language Models](https://arxiv.org/abs/2305.10601)ï¼ŒYao, S., Yu, D., Zhao, J., Shafran, I., Griffiths, T. L., Cao, Y., & Narasimhan, K. (2023). Tree of Thoughts: Deliberate Problem Solving with Large Language Models. arXiv preprint arXiv:2305.10601.
4. è®ºæ–‡ï¼Œå¤§å‹è¯­è¨€æ¨¡å‹æŒ‡å¯¼çš„æ€ç»´ä¹‹æ ‘ï¼Œ [Large Language Model Guided Tree-of-Thought](https://arxiv.org/abs/2305.08291)ï¼ŒLong, J. (2023). Large Language Model Guided Tree-of-Thought. arXiv preprint arXiv:2305.08291.
5. GitHubé“¾æ¥ï¼Œ [tree-of-thoughts](https://github.com/kyegomez/tree-of-thoughts)ï¼ŒæŠŠToTç®—æ³•å¯¼å…¥ä½ çš„å¤§æ¨¡å‹åº”ç”¨ï¼Œç›®å‰3.3Ké¢—æ˜Ÿ