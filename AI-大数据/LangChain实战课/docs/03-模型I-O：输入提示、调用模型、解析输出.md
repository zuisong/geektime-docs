ä½ å¥½ï¼Œæˆ‘æ˜¯é»„ä½³ï¼Œæ¬¢è¿æ¥åˆ°LangChainå®æˆ˜è¯¾ï¼

ä»è¿™èŠ‚è¯¾å¼€å§‹ï¼Œæˆ‘ä»¬å°†å¯¹LangChainä¸­çš„å…­å¤§æ ¸å¿ƒç»„ä»¶ä¸€ä¸€è¿›è¡Œè¯¦ç»†çš„å‰–æã€‚

æ¨¡å‹ï¼Œä½äºLangChainæ¡†æ¶çš„æœ€åº•å±‚ï¼Œå®ƒæ˜¯åŸºäºè¯­è¨€æ¨¡å‹æ„å»ºçš„åº”ç”¨çš„**æ ¸å¿ƒå…ƒç´ **ï¼Œå› ä¸ºæ‰€è°“LangChainåº”ç”¨å¼€å‘ï¼Œå°±æ˜¯ä»¥LangChainä½œä¸ºæ¡†æ¶ï¼Œé€šè¿‡APIè°ƒç”¨å¤§æ¨¡å‹æ¥è§£å†³å…·ä½“é—®é¢˜çš„è¿‡ç¨‹ã€‚

å¯ä»¥è¯´ï¼Œæ•´ä¸ªLangChainæ¡†æ¶çš„é€»è¾‘éƒ½æ˜¯ç”±LLMè¿™ä¸ªå‘åŠ¨æœºæ¥é©±åŠ¨çš„ã€‚æ²¡æœ‰æ¨¡å‹ï¼ŒLangChainè¿™ä¸ªæ¡†æ¶ä¹Ÿå°±å¤±å»äº†å®ƒå­˜åœ¨çš„æ„ä¹‰ã€‚é‚£ä¹ˆè¿™èŠ‚è¯¾æˆ‘ä»¬å°±è¯¦ç»†è®²è®²æ¨¡å‹ï¼Œæœ€åä½ ä¼šæ”¶è·ä¸€ä¸ªèƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆé²œèŠ±æ–‡æ¡ˆçš„åº”ç”¨ç¨‹åºã€‚

![](https://static001.geekbang.org/resource/image/76/c4/76619cf2f73ef200dd57cd16c0d55ec4.png?wh=1965x1363)

## Model I/O

æˆ‘ä»¬å¯ä»¥æŠŠå¯¹æ¨¡å‹çš„ä½¿ç”¨è¿‡ç¨‹æ‹†è§£æˆä¸‰å—ï¼Œåˆ†åˆ«æ˜¯**è¾“å…¥æç¤º**ï¼ˆå¯¹åº”å›¾ä¸­çš„Formatï¼‰ã€**è°ƒç”¨æ¨¡å‹**ï¼ˆå¯¹åº”å›¾ä¸­çš„Predictï¼‰å’Œ**è¾“å‡ºè§£æ**ï¼ˆå¯¹åº”å›¾ä¸­çš„Parseï¼‰ã€‚è¿™ä¸‰å—å½¢æˆäº†ä¸€ä¸ªæ•´ä½“ï¼Œå› æ­¤åœ¨LangChainä¸­è¿™ä¸ªè¿‡ç¨‹è¢«ç»Ÿç§°ä¸º **Model I/O**ï¼ˆInput/Outputï¼‰ã€‚

![](https://static001.geekbang.org/resource/image/ac/23/ac67214287154dcfbbf12d81086c8023.png?wh=4000x1536 "Model I/Oï¼šä»è¾“å…¥åˆ°è¾“å‡º")

åœ¨æ¨¡å‹ I/Oçš„æ¯ä¸ªç¯èŠ‚ï¼ŒLangChainéƒ½ä¸ºå’±ä»¬æä¾›äº†æ¨¡æ¿å’Œå·¥å…·ï¼Œå¿«æ·åœ°å½¢æˆè°ƒç”¨å„ç§è¯­è¨€æ¨¡å‹çš„æ¥å£ã€‚

1. **æç¤ºæ¨¡æ¿**ï¼šä½¿ç”¨æ¨¡å‹çš„ç¬¬ä¸€ä¸ªç¯èŠ‚æ˜¯æŠŠæç¤ºä¿¡æ¯è¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œä½ å¯ä»¥åˆ›å»ºLangChainæ¨¡æ¿ï¼Œæ ¹æ®å®é™…éœ€æ±‚åŠ¨æ€é€‰æ‹©ä¸åŒçš„è¾“å…¥ï¼Œé’ˆå¯¹ç‰¹å®šçš„ä»»åŠ¡å’Œåº”ç”¨è°ƒæ•´è¾“å…¥ã€‚
2. **è¯­è¨€æ¨¡å‹**ï¼šLangChainå…è®¸ä½ é€šè¿‡é€šç”¨æ¥å£æ¥è°ƒç”¨è¯­è¨€æ¨¡å‹ã€‚è¿™æ„å‘³ç€æ— è®ºä½ è¦ä½¿ç”¨çš„æ˜¯å“ªç§è¯­è¨€æ¨¡å‹ï¼Œéƒ½å¯ä»¥é€šè¿‡åŒä¸€ç§æ–¹å¼è¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·å°±æé«˜äº†çµæ´»æ€§å’Œä¾¿åˆ©æ€§ã€‚
3. **è¾“å‡ºè§£æ**ï¼šLangChainè¿˜æä¾›äº†ä»æ¨¡å‹è¾“å‡ºä¸­æå–ä¿¡æ¯çš„åŠŸèƒ½ã€‚é€šè¿‡è¾“å‡ºè§£æå™¨ï¼Œä½ å¯ä»¥ç²¾ç¡®åœ°ä»æ¨¡å‹çš„è¾“å‡ºä¸­è·å–éœ€è¦çš„ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å¤„ç†å†—ä½™æˆ–ä¸ç›¸å…³çš„æ•°æ®ï¼Œæ›´é‡è¦çš„æ˜¯è¿˜å¯ä»¥æŠŠå¤§æ¨¡å‹ç»™å›çš„éç»“æ„åŒ–æ–‡æœ¬ï¼Œè½¬æ¢æˆç¨‹åºå¯ä»¥å¤„ç†çš„ç»“æ„åŒ–æ•°æ®ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ28ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/a0/a4/b060c723.jpg" width="30px"><span>é˜¿æ–¯è’‚èŠ¬</span> ğŸ‘ï¼ˆ13ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>promptä¸­çš„{format_instructions} å®é™…å¡«å……çš„æ˜¯æŒ‰ç…§ response_schemas æ ¼å¼æ„å»ºçš„ä¸€ä¸ªé¢„æœŸå¤§æ¨¡å‹å“åº”çš„â€œæ ¼å¼â€ï¼Œç„¶åé€šè¿‡ StructuredOutputParser æ¥è¿›è¡Œè§£æã€‚
åœ¨æœ¬ä¾‹ä¸­ï¼Œæ‰“å°å®Œæ•´çš„promptï¼Œä¼šçœ‹åˆ°æœ«å°¾æœ‰å«æœ‰ &quot;description&quot; å’Œ &quot;reason&quot; å±æ€§çš„jsonï¼Œä»¥å‘ŠçŸ¥å¤§æ¨¡å‹æŒ‰jsonæ ¼å¼å“åº”ã€‚
OutputParser çš„è®¾è®¡å°†prompt çš„é¢„æœŸå“åº”å’Œå¤§æ¨¡å‹å®é™…å“åº”éƒ¨åˆ†å…³è”èµ·æ¥äº†ï¼Œæ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ã€‚
ä¸è¿‡å¤§æ¨¡å‹å¹¶æ²¡æœ‰å¯¹æ­¤æ‰“åŒ…ç¥¨ï¼Œåè€Œæ˜¯å°½åŠ›è€Œä¸ºã€‚åœ¨æˆ‘runè‡ªå·±ä»£ç çš„æ—¶å€™ï¼Œå°±å‡ºç°è¿‡è¿”å›çš„responseâ€œçœ‹èµ·æ¥åƒæ˜¯â€jsonï¼Œä½†å®é™…ä¸Šç¼ºäº†ä¸€ä¸ªé€—å·ï¼Œå¯¼è‡´æ ¼å¼è§£æå¤±è´¥ã€‚è€Œä¸”è¿™æ˜¯å¶ç°çš„ã€‚
å› æ­¤å³ä½¿ä½¿ç”¨äº†è§£æå™¨ï¼Œåº”è¯¥è¿˜æ˜¯è¦åœ¨å¥å£®æ€§ä¸Šåšä¸€äº›é”™è¯¯å¤„ç†æ¯”è¾ƒå¥½ã€‚</div>2023-09-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/67/6e/f5ee46e8.jpg" width="30px"><span>æµ·æ»¨</span> ğŸ‘ï¼ˆ10ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>é—®é¢˜ 4ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½çš„ï¼Œè¾“å‡ºè§£æå™¨æœ¬è´¨ä¸Šæ˜¯åœ¨ prompt ä¸­æ’å…¥äº†éœ€è¦è¿”å›çš„æ ¼å¼è¯´æ˜ï¼ŒLLMå®Œå…¨æœ‰å¯èƒ½å¿½ç•¥è¿™éƒ¨åˆ†çš„è¦æ±‚ã€‚æ‰€ä»¥è¿˜æ˜¯éœ€è¦åœ¨ä¸šåŠ¡å±‚é¢è¿›è¡Œåˆ¤æ–­å†é‡è¯•</div>2023-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/14/52/e4f25bc6.jpg" width="30px"><span>Archer</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæˆ‘æœ‰ä¸ªéœ€æ±‚ï¼Œä¾‹å¦‚æˆ‘æƒ³åˆ©ç”¨chatgptå¸®æˆ‘å†™ç‰¹å®šçš„Java bean xmlæ–‡ä»¶ï¼Œä½†æ˜¯éœ€è¦è¾“å…¥å¾ˆå¤šè¦æ±‚ï¼Œèƒ½å¦è‡ªå®šä¹‰è¯´æˆ‘è¦aæ ·å¼çš„xmlï¼Œä»–å°±å¯ä»¥å†…éƒ¨æ ¹æ®æˆ‘é¢„å®šçš„éœ€æ±‚ï¼Œå¸®æˆ‘å†™å‡ºxmlï¼Ÿ</div>2023-10-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2c/66/4a/a5ecf67a.jpg" width="30px"><span>åœ¨è·¯ä¸Š1619</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç›´æ¥ä½¿ç”¨è¯¾ä»¶é‡Œçš„ä»£ç ï¼Œä¸€ç›´å‡ºç°ä¸‹é¢çš„é”™è¯¯æç¤ºï¼šYou tried to access openai.ChatCompletion, but this is no longer supported in openai&gt;=1.0.0ã€‚ åº”è¯¥æ˜¯langchainçš„ç‰ˆæœ¬æ›´æ–°çš„ç¼˜æ•…

æ”¹æˆä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œä»£ç å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚

from langchain_openai import ChatOpenAI

# åˆ›å»ºæ¨¡å‹å®ä¾‹
model = ChatOpenAI(model_name=&#39;gpt-3.5-turbo&#39;)

# è·å–æ¨¡å‹çš„è¾“å‡º
output = model.invoke(input)
    
# è§£ææ¨¡å‹çš„è¾“å‡ºï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼‰
parsed_output = output_parser.parse(output.content)

æˆ‘çš„ç‰ˆæœ¬
langchain                 0.1.0
openai                    1.6.1</div>2024-04-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/af/62/5eeb9041.jpg" width="30px"><span>é‡Œå’¯ç ´</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æŠ¥é”™äº†â€”â€”KeyError: {&#39;format_instructions&#39;}ï¼Œæ˜¯ä¸æ˜¯å› ä¸ºLangChainæ›´æ–°åï¼Œä¸æ”¯æŒè¿™ä¸ªå‚æ•°äº†ï¼Ÿ</div>2023-11-14</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/YflLdCdbUAkfr9LPzF50EibDrMxBibPicQ5NNAETaPP0ytTmuR3h6QNichDMhDbR2XelSIXpOrPwbiaHgBkMJYOeULA/132" width="30px"><span>æŠ½è±¡æ´¾</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æ›´æ–°åº“åï¼ŒAttributeError: type object &#39;PromptTemplate&#39; has no attribute &#39;from_template&#39;</div>2023-09-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/20/1c/de379ed1.jpg" width="30px"><span>shatu</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>1.LangChainçš„ä¼˜åŠ¿åœ¨äºä¸°å¯Œçš„é›†æˆæ¡†æ¶ï¼Œä½†æ˜¯ç”±äºå¤æ‚çš„å°è£…å’Œpromptä¼ é€’çš„ä¸ç¡®å®šæ€§ä¸šå†…ä¹Ÿå­˜åœ¨äº‰è®®
2.é€šè¿‡response_schemasæ„å»ºï¼Œé€šè¿‡get_format_instructionså®šä¹‰çš„promptä¼ é€’
3.partial_variableså®šä¹‰äº†ä¸€ä¸ªâ€œLoad a prompt template from a templateâ€çš„promptï¼ŒåŒ…æ‹¬Argså’ŒReturnsä¸¤éƒ¨åˆ†
4.å®Œå…¨å¯èƒ½ï¼ŒLangchainçš„ä¼ é€’å¾ˆå¤šä»¥æ¥å¤šä¸ªpromptä¹‹é—´çš„ä¼ é€’ï¼Œä¸€æ—¦å‡ºç°ä¸é¢„æœŸä¸åŒçš„ç»“æœéœ€è¦é€ä¸ªæ’æŸ¥æ‰€æœ‰ç»è¿‡ä¼ é€’çš„promptè€Œè¿™äº›promptçš„è¾“å‡ºé»˜è®¤æ˜¯ä¸æ‰“å°çš„ï¼Œè¿™ä¹Ÿæ˜¯langchainçš„ä¸€ä¸ªå¤§äº‰è®®ç‚¹</div>2023-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/5d/f2/785169e9.jpg" width="30px"><span>è¿›å‡»çš„é±¼å„¿</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆèƒ½æ¨èä¸€ä¸‹ç”»å›¾å·¥å…·å—ï¼Ÿæƒ³ç”»æ‚¨æ–‡ç« ä¸­çš„å›¾ï¼Œå‘ç°æœ‰äº›ä¾‹å¦‚åœ†è§’è±å½¢ç”¨PPTä¸æ˜¯å¾ˆå¥½ç”»å‡ºæ¥ã€‚</div>2023-09-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/37/49/80/791d0f5e.jpg" width="30px"><span>ä¸åƒè‹¦ç“œ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œæˆ‘æ¯æ¬¡è®©aiæŒ‰ç…§ä¸€å®šæ ¼å¼è¾“å‡ºæ—¶ï¼Œä»–æ€»æ˜¯ä¼šåŠ ä¸€ç‚¹å…¶ä»–å†…å®¹è¿™ä¸ªè¦è¿™ä¹ˆè§£å†³ï¼ˆå°±æ¯”å¦‚è¾“å‡ºå†…å®¹å¤–é¢è€æ˜¯æ¡†ä¸€ä¸ª&#39;&#39;&#39;JSONï¼Œå¤šçš„è¿™éƒ¨åˆ†ä¹Ÿä¸æ˜¯å›ºå®šçš„ï¼Œæœ‰æ—¶å€™æ˜¯å‡ ä¸ªç¬¦å·æ¡†ï¼Œæœ‰æ—¶å€™æ˜¯ä¸€å°æ®µæ–‡å­—ï¼‰ï¼Œæ¯æ¬¡è¿™æ ·è§£æå™¨å°±è§£æä¸äº†äº†ï¼Œè¯·é—®è¿™ç§æƒ…å†µæ€ä¹ˆæ ·è§£å†³</div>2023-12-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/42/58/2286eca6.jpg" width="30px"><span>HdUIprince</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæ‚¨å¥½ï¼Œç¬¬ä¸€ä¸ªä¾‹å­ä¸­ flower_name ä¸ºä»€ä¹ˆè¦ä¼ å…¥ä¸€ä¸ªåˆ—è¡¨ï¼Ÿ
input = prompt.format(flower_name=[&quot;ç«ç‘°&quot;], price=&#39;50&#39;)

æ‰“å°inputç»“æœæ˜¯è¿™æ ·çš„ï¼š
&quot;æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„é²œèŠ±åº—æ–‡æ¡ˆæ’°å†™å‘˜ã€‚\n\nå¯¹äºå”®ä»·ä¸º 50 å…ƒçš„ [&#39;ç«ç‘°&#39;] ï¼Œæ‚¨èƒ½æä¾›ä¸€ä¸ªå¸å¼•äººçš„ç®€çŸ­æè¿°å—ï¼Ÿ\n&quot;
è€Œä¸æ˜¯æ–‡ä¸­çš„ï¼š
â€œæ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„é²œèŠ±åº—æ–‡æ¡ˆæ’°å†™å‘˜ã€‚å¯¹äºå”®ä»·ä¸º 50 å…ƒçš„ç«ç‘°ï¼Œæ‚¨èƒ½æä¾›ä¸€ä¸ªå¸å¼•äººçš„ç®€çŸ­æè¿°å—ï¼Ÿâ€</div>2023-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/7f/d3/b5896293.jpg" width="30px"><span>Realm</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>HFçš„æ¥å£å¥½åƒå‡çº§äº†ï¼Œåœ¨è¿è¡ŒHFçš„ä¾‹å­æŠ¥äº†å¦‚ä¸‹é”™è¯¯ï¼š
```
&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;3.11&#47;lib&#47;python3.11&#47;site-packages&#47;huggingface_hub&#47;utils&#47;_deprecation.py:127: FutureWarning: &#39;__init__&#39; (from &#39;huggingface_hub.inference_api&#39;) is deprecated and will be removed from version &#39;0.19.0&#39;. `InferenceApi` client is deprecated in favor of the more feature-complete `InferenceClient`. Check out this guide to learn how to convert your script to use it: https:&#47;&#47;huggingface.co&#47;docs&#47;huggingface_hub&#47;guides&#47;inference#legacy-inferenceapi-client.
  warnings.warn(warning_message, FutureWarning)
You are a flower shop assitiant For 50 of [&#39;&#39;]
```
è€å¸ˆè¾›è‹¦çœ‹çœ‹ğŸ˜„</div>2023-09-14</li><br/><li><img src="" width="30px"><span>Geek_744c74</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¥½ï¼æƒ³è¯·æ•™ä¸€ä¸‹ï¼Œæœ€è¿‘ä¸‹è½½äº†chatGLM3,æ‰“å¼€modelsæ–‡ä»¶å¤¹å‘ç°æ˜¯è¿™æ ·çš„ï¼Œå¥½åƒè¢«åˆ†æˆäº†7ä»½ï¼Œè¿™ç§æƒ…å†µè¦æ€ä¹ˆç”¨transfomerè°ƒç”¨å‘€ï¼š
pytorch model-00001-of-00007.bin
pytorch model-00002-f-00007.bin
pytorch model-00003-of-00007.bin
pytorch model-00004-of-00007.bin
pytorch model-00005-of-00007.bin
pytorch model-00006-of-00007.bin
pytorch model-00007-of-00007.bin</div>2023-11-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/c4/51/5bca1604.jpg" width="30px"><span>aLong</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>template = &quot;&quot;&quot;The price of the {flower_name} is $ {price}. \n
I need you to write her a short description that will attract customers to buy \n
and include the name of the flower and price.\n
The word limit is 30. 
&quot;&quot;&quot;

ç»“æœï¼š
Introducing the enchanting ç«ç‘°! Delicate and captivating, this beauty is yours for only $50. Don&#39;t miss out on this irresistible offer!
Introducing the elegant ç™¾åˆ at just $30!
Introducing the charming åº·ä¹ƒé¦¨! ğŸŒ¸ Only $20! ğŸŒº

æ²¡æƒ³åˆ°ä»–ç«Ÿç„¶ä¼šåœ¨é‡Œé¢åŠ å…¥emojiï¼Œæœ‰æ„æ€ã€‚</div>2023-11-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/18/1a/5f36bb6e.jpg" width="30px"><span>è¿œæ¸¸</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¥½ï¼Œpythonå°ç™½ï¼Œmacosä¸Šè¿è¡Œè¿‡ç¨‹ä¸­æŠ¥é”™å¦‚ä¸‹
 File &quot;&#47;Users&#47;wangshibao&#47;Documents&#47;idea&#47;GitHub&#47;langchain-geektime&#47;02_æ–‡æ¡£QAç³»ç»Ÿ&#47;DocQA.py&quot;, line 38, in &lt;module&gt;
    vectorstore = Qdrant.from_documents(
                  ^^^^^^^^^^^^^^^^^^^^^^
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.11&#47;site-packages&#47;langchain&#47;schema&#47;vectorstore.py&quot;, line 438, in from_documents
    return cls.from_texts(texts, embedding, metadatas=metadatas, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.11&#47;site-packages&#47;langchain&#47;vectorstores&#47;qdrant.py&quot;, line 1301, in from_texts
    qdrant = cls.construct_instance(
ã€‚ã€‚ã€‚
  File &quot;&#47;usr&#47;local&#47;Cellar&#47;python@3.11&#47;3.11.4_1&#47;Frameworks&#47;Python.framework&#47;Versions&#47;3.11&#47;lib&#47;python3.11&#47;http&#47;client.py&quot;, line 1286, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File &quot;&#47;usr&#47;local&#47;Cellar&#47;python@3.11&#47;3.11.4_1&#47;Frameworks&#47;Python.framework&#47;Versions&#47;3.11&#47;lib&#47;python3.11&#47;http&#47;client.py&quot;, line 1327, in _send_request
    self.putheader(hdr, value)
  File &quot;&#47;usr&#47;local&#47;lib&#47;python3.11&#47;site-packages&#47;urllib3&#47;connection.py&quot;, line 224, in putheader
    _HTTPConnection.putheader(self, header, *values)
  File &quot;&#47;usr&#47;local&#47;Cellar&#47;python@3.11&#47;3.11.4_1&#47;Frameworks&#47;Python.framework&#47;Versions&#47;3.11&#47;lib&#47;python3.11&#47;http&#47;client.py&quot;, line 1259, in putheader
    values[i] = one_value.encode(&#39;latin-1&#39;)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: &#39;latin-1&#39; codec can&#39;t encode characters in position 7-8: ordinal not in range(256)
ä¸çŸ¥è¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªç¼–ç é—®é¢˜ï¼Œè¿˜æœ›æŒ‡æ•™</div>2023-10-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/14/45/adf079ae.jpg" width="30px"><span>æ¨æ¾</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆè¯·æ•™ä¸‹ï¼Œprompt = PromptTemplate.from_template(prompt_template,                 partial_variables={&quot;format_instructions&quot;: format_instructions}) ä¸­çš„format_instructionsä¸€å®šè¦ä»è¾“å‡ºè§£æå™¨format_instructions = output_parser.get_format_instructions()ä¸­è·å¾—å—ï¼Ÿå¯ä»¥è‡ªå·±æ‹¼æ¥å—ï¼Ÿ</div>2023-10-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/14/45/adf079ae.jpg" width="30px"><span>æ¨æ¾</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆï¼Œè¯·æ•™ä¸‹å…³äºâ€œè¾“å‡ºè§£æå™¨â€ï¼Œæˆ‘æ˜¯å¦å¯ä»¥ç†è§£ä¸ºï¼šè¾“å‡ºè§£æå™¨åªæ˜¯è¦æ±‚æ¨¡å‹å°½é‡æŒ‰ç…§è§„å®šçš„æ ¼å¼å»ç”Ÿæˆï¼Œè€Œä¸æ˜¯ç›´æ¥æ”¹å˜æ¨¡å‹çš„ç”Ÿæˆç»“æœã€‚</div>2023-10-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/32/36/d87ddaa0.jpg" width="30px"><span>æ¢…èŠ±ç¦„</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¥½ è¯·é—®è¯¾ç¨‹ä¸­æ‰€æ¶‰åŠçš„ä»£ç å¯ä»¥æä¾›ä¸‹æºç ä»“åº“å—</div>2023-10-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/ee/d9/10005a4a.jpg" width="30px"><span>æŸ¯æ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¥½ï¼Œæˆ‘åœ¨è¿è¡Œç¬¬å››ä¸ªä¾‹å­çš„æ—¶å€™ï¼ŒæŒ‰ç…§ç»™å‡ºçš„ä»£ç ï¼Œæ€»æ˜¯è¿”å›ç»™æˆ‘ You are a flower shop assitiant For 50 of [&#39;&#39;]
äºæ˜¯æˆ‘æŠŠ input = prompt.format(flower_name=[&quot;ç«ç‘°&quot;], price=&#39;50&#39;) ä¸­çš„ç«ç‘°æ¢æˆäº†roseï¼Œè¿™æ—¶å€™ï¼Œè¿”å›ç»™æˆ‘äº† i love youï¼Œæ˜¯éœ€è¦è¿›è¡Œä»€ä¹ˆè®¾ç½®æ‰èƒ½æ”¯æŒä¸­æ–‡å—ï¼Ÿå‰ä¸‰ä¸ªä¾‹å­éƒ½æ²¡é—®é¢˜ã€‚</div>2023-10-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/42/58/2286eca6.jpg" width="30px"><span>HdUIprince</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è¿è¡Œç¬¬äºŒä¸ªä¾‹å­æŠ¥é”™ï¼š

UnicodeEncodeError: &#39;latin-1&#39; codec can&#39;t encode characters in position 7-8: ordinal not in range(256)</div>2023-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f0/17/796a3d20.jpg" width="30px"><span>è¨€åå¹´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>{
	&#39;prompt&#39;: [&#39;æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„é²œèŠ±åº—æ–‡æ¡ˆæ’°å†™å‘˜ã€‚\nå¯¹äºå”®ä»·ä¸º 20 å…ƒçš„ åº·ä¹ƒé¦¨ ï¼Œæ‚¨èƒ½æä¾›ä¸€ä¸ªå¸å¼•äººçš„ç®€çŸ­æè¿°å—ï¼Ÿ\nThe output should be a markdown code snippet formatted in the following schema, including the leading and trailing &quot;```json&quot; and &quot;```&quot;:\n\n```json\n{\n\t&quot;description&quot;: string  &#47;&#47; é²œèŠ±çš„æè¿°æ–‡æ¡ˆ\n\t&quot;reason&quot;: string  &#47;&#47; é—®ä»€ä¹ˆè¦è¿™æ ·å†™è¿™ä¸ªæ–‡æ¡ˆ\n}\n```&#39;],
	&#39;model&#39;: &#39;text-davinci-003&#39;,
	&#39;temperature&#39;: 0.7,
	&#39;max_tokens&#39;: 256,
	&#39;top_p&#39;: 1,
	&#39;frequency_penalty&#39;: 0,
	&#39;presence_penalty&#39;: 0,
	&#39;n&#39;: 1,
	&#39;logit_bias&#39;: {}
}</div>2023-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/66/8f/02be926d.jpg" width="30px"><span>åœ¨è·¯ä¸Š</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>partial_variablesæ˜¯æç¤ºè¯çš„ä¸€éƒ¨åˆ†ï¼Œåˆ†ælangchainçš„æºç å¯çŸ¥ï¼ŒPromptTemplate.format(self, **kwargs)è´Ÿè´£ç»„è£…æç¤ºè¯å­—ç¬¦ä¸²ï¼Œå†…éƒ¨è°ƒç”¨äº†BasePromptTemplate._merge_partial_and_user_variables(self, **kwargs)ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå°†user_variableså’Œpartial_variablesåˆå¹¶æˆå­—å…¸ï¼Œä¼ å…¥æç¤ºè¯å­—ç¬¦ä¸²ã€‚</div>2023-09-17</li><br/><li><img src="" width="30px"><span>yanyu-xin</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ç”¨é˜¿é‡Œäº‘çš„é€šä¹‰åƒé—®æ”¹å†™ï¼š02-æ¨¡å‹IO-å¾ªç¯è°ƒç”¨.py
-----
# æ—§ä»£ç ï¼š
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
load_dotenv()  # åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
# å¯¼å…¥LangChainä¸­çš„OpenAIæ¨¡å‹æ¥å£
from langchain_openai import OpenAI
# åˆ›å»ºæ¨¡å‹å®ä¾‹
model = OpenAI(model_name=&#39;gpt-3.5-turbo-instruct&#39;)


# æ‰“å°è¾“å‡ºå†…å®¹
print(output)

-----
# æ–°ä»£ç ï¼š
# å¯¼å…¥LangChainä¸­çš„ChatOpenAIæ¨¡å‹æ¥å£
from langchain_openai import ChatOpenAI
#åˆ›å»ºæ¨¡å‹å®ä¾‹
model = ChatOpenAI(
    api_key=&quot;API-KEY&quot;,  # è¯·åœ¨æ­¤å¤„ç”¨æ‚¨çš„API Keyè¿›è¡Œæ›¿æ¢
    base_url=&quot;https:&#47;&#47;dashscope.aliyuncs.com&#47;compatible-mode&#47;v1&quot;, # DashScope base_url
    model=&quot;qwen-plus&quot;
    )

# æ‰“å°è¾“å‡ºå†…å®¹
print(output.content)

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

ç”¨é˜¿é‡Œäº‘çš„é€šä¹‰åƒé—®æ”¹å†™ï¼š05-æ¨¡å‹IO-è¾“å‡ºè§£æ.py
-----
# æ—§ä»£ç ï¼š
from dotenv import load_dotenv  # ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡
load_dotenv()  # åŠ è½½ .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
# å¯¼å…¥LangChainä¸­çš„OpenAIæ¨¡å‹æ¥å£
from langchain_openai import OpenAI
# åˆ›å»ºæ¨¡å‹å®ä¾‹
model = OpenAI(model_name=&#39;gpt-3.5-turbo-instruct&#39;)


 # è§£ææ¨¡å‹çš„è¾“å‡ºï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼‰
 parsed_output = output_parser.parse(output)

-----
# æ–°ä»£ç ï¼š
# å¯¼å…¥LangChainä¸­çš„ChatOpenAIæ¨¡å‹æ¥å£
from langchain_openai import ChatOpenAI
#åˆ›å»ºæ¨¡å‹å®ä¾‹
model = ChatOpenAI(
    api_key=&quot;API-KEY&quot;,  # è¯·åœ¨æ­¤å¤„ç”¨æ‚¨çš„API Keyè¿›è¡Œæ›¿æ¢
    base_url=&quot;https:&#47;&#47;dashscope.aliyuncs.com&#47;compatible-mode&#47;v1&quot;, # DashScope base_url
    model=&quot;qwen-plus&quot;
    )

    # è§£ææ¨¡å‹çš„è¾“å‡ºï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼‰
    parsed_output = output_parser.parse(output.content)</div>2024-07-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/0a/a4/828a431f.jpg" width="30px"><span>å¼ ç”³å‚²</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ç¬¬3è®²æ‰“å¡~
LangChainç¡®å®å°è£…äº†å¾ˆå¤šè°ƒç”¨LLMçš„å†…éƒ¨å¤„ç†ç»†èŠ‚ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨LangChainç¼–æ’å‡ºåº”ç”¨çš„æ ¸å¿ƒå¤„ç†æµç¨‹ï¼Œå¹¶ä¸”çµæ´»æ›¿æ¢å„ä¸ªç»„ä»¶ï¼Œæå¤§åœ°æå‡å¼€å‘æ•ˆç‡ã€‚</div>2024-07-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/6d/7c/e91866cf.jpg" width="30px"><span>aloha66</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div> # è§£ææ¨¡å‹çš„è¾“å‡ºï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„ï¼‰    parsed_output = output_parser.parse(output)
æ–°ç‰ˆæœ¬è¦æ”¹æˆparsed_output = output_parser.parse(output.content)</div>2024-03-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/83/a2/38928f5b.jpg" width="30px"><span>demons</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ç”±äºæ–°ç‰ˆ3.xçš„æ¥å£æœ‰æ›´æ–°ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªä¸ä»¥æ¥ç‰ˆæœ¬çš„å†™æ³•
# å¯¼å…¥LangChainä¸­çš„æç¤ºæ¨¡æ¿
from langchain.prompts import PromptTemplate
# åˆ›å»ºåŸå§‹æç¤ºæ¨¡æ¿
prompt_template = &quot;&quot;&quot;æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„é²œèŠ±åº—æ–‡æ¡ˆæ’°å†™å‘˜ã€‚
å¯¹äºå”®ä»·ä¸º {price} å…ƒçš„ {flower_name} ï¼Œæ‚¨èƒ½æä¾›ä¸€ä¸ªå¸å¼•äººçš„ç®€çŸ­æè¿°å—ï¼Ÿ
å¹¶æŒ‰å¦‚ä¸‹jsonæ ¼å¼è¿›è¡Œå›å¤ï¼š
{{&quot;description&quot;:xx,&quot;reason&quot;:xx}}&quot;&quot;&quot;


# # æ ¹æ®åŸå§‹æ¨¡æ¿åˆ›å»ºæç¤ºï¼ŒåŒæ—¶åœ¨æç¤ºä¸­åŠ å…¥è¾“å‡ºè§£æå™¨çš„è¯´æ˜
prompt = PromptTemplate.from_template(prompt_template,) 

# æ•°æ®å‡†å¤‡
flowers = [&quot;ç«ç‘°&quot;, &quot;ç™¾åˆ&quot;, &quot;åº·ä¹ƒé¦¨&quot;]
prices = [&quot;50&quot;, &quot;30&quot;, &quot;20&quot;]

# åˆ›å»ºä¸€ä¸ªç©ºçš„DataFrameç”¨äºå­˜å‚¨ç»“æœ
import pandas as pd
df = pd.DataFrame(columns=[&quot;flower&quot;, &quot;price&quot;, &quot;description&quot;, &quot;reason&quot;]) # å…ˆå£°æ˜åˆ—å

for flower, price in zip(flowers, prices):
    # æ ¹æ®æç¤ºå‡†å¤‡æ¨¡å‹çš„è¾“å…¥
    input = prompt.format_prompt(flower_name=flower, price=price)
    print(input)


    parsed_output=json.loads(llm.invoke(input).content)
    print(parsed_output)
    

    # åœ¨è§£æåçš„è¾“å‡ºä¸­æ·»åŠ â€œflowerâ€å’Œâ€œpriceâ€
    parsed_output[&#39;flower&#39;] = flower
    parsed_output[&#39;price&#39;] = price

#     # å°†è§£æåçš„è¾“å‡ºæ·»åŠ åˆ°DataFrameä¸­
    df.loc[len(df)] = parsed_output  

print(df)</div>2025-01-06</li><br/><li><img src="" width="30px"><span>Geek_d5d37b</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>json.decoder.JSONDecodeError: Expecting &#39;,&#39; delimiter: line 3 column 2 (char 157)  è€å¸ˆä½ å¥½&#xff0c;æˆ‘å¤§æ¨¡å‹çš„è¾“å‡ºå­—å…¸ä¸ºä»€ä¹ˆæ²¡æœ‰é€—å·åˆ†éš”
&#96;&#96;json
{
        &#34;description&#34;: &#34;ç²¾é€‰ä¼˜è´¨ç«ç‘°&#xff0c;æ¯ä¸€æœµéƒ½æ‰¿è½½ç€æµªæ¼«ä¸æƒ…æ„Ÿã€‚è¿™äº›ç«ç‘°é²œè‰³å¦‚ç«&#xff0c;ç“£ç“£ä¹‹é—´éƒ½ä»¿ä½›è•´è—ç€æ·±æƒ…ä¸çƒ­æƒ…ã€‚ä¸è®ºæ˜¯æƒ³å‘çˆ±äººä¼ é€’çœŸæŒšçš„æƒ…æ„Ÿ&#xff0c;è¿˜æ˜¯ä¸ºå®¶ä¸­çš„ä¸€è§’å¢æ·»ä¸€ä¸æ¸…æ–°ä¸ç”Ÿæœº&#xff0c;è¿™æ¬¾50å…ƒçš„ç«ç‘°å®šèƒ½è®©æ‚¨çš„é€‰æ‹©æ›´æ˜¾ä»·å€¼ä¸å¿ƒæ„ã€‚ç²¾å¿ƒæŒ‘é€‰çš„æ¯ä¸€æŸç«ç‘°&#xff0c;éƒ½å°†ä¸ºç‰¹åˆ«çš„æ‚¨é€å»ä¸€æŠ¹ç¾å¥½çš„å¯“æ„å’Œæ·±æ·±çš„é—®å€™ã€‚&#34;
        &#34;reason&#34;: &#34;è¯¥æ–‡æ¡ˆé€šè¿‡å¯¹äº§å“çš„å“è´¨æè¿°å’Œå¯¹é€‚ç”¨åœºåˆã€é€ç¤¼æ•ˆæœçš„æ‹“å±•æè¿°&#xff0c;ä½“ç°äº†è¿™æ¬¾50å…ƒç«ç‘°çš„é«˜ä»·å€¼å’Œå“è´¨&#xff0c;ä»¥â€œé²œäº®ã€ç²¾è‡´â€ä¸ºä¸»è°ƒæ¥æ„å»ºä¸»é¢˜å°
è±¡&#xff0c;å±•ç°èŠ±æŸä¸­å¯Œå«çš„ç¾å¥½å¯“æ„ä¸æ·±åº¦ä»·å€¼ã€‚&#34;
}</div>2024-10-18</li><br/><li><img src="" width="30px"><span>é»æ¥šè±</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿™é‡Œæ‰“å°äº†ä¸€ä¸‹è§£æå‰çš„è¾“å‡ºï¼Œå˜æˆè¿™æ ·äº†ï¼Œæ˜¯æ¨¡å‹çš„é—®é¢˜å—ï¼ˆç”¨çš„æ˜¯huggingfaceä¸Šéšä¾¿æ‰¾çš„æ¨¡å‹ï¼‰
ä»£ç ï¼š
for flower, price in zip(flowers, prices):
  input = prompt.format(flower_name=flower, price=price)
  output = model(input)
  print(&#39;è§£æå‰æ¨¡å‹çš„è¾“å‡º:&#39;,output)
  print(&#39;*=&#39;*30)
  #è§£ææ¨¡å‹è¾“å‡º
  parsed_output = output_parser.parse(output)
  print(type(parsed_output))
  # break
  # print(parsed_output)
è¾“å‡ºï¼š
æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„é²œèŠ±åº—æ–‡æ¡ˆæ’°å†™å‘˜ã€‚
å¯¹äºå”®ä»·ä¸º50å…ƒçš„ç«ç‘°ï¼Œoffer a simple description.
The output should be a markdown code snippet formatted in the following schema, including the leading and trailing &quot;```json&quot; and &quot;```&quot;:

```json
{
	&quot;description&quot;: string  &#47;&#47; é²œèŠ±çš„æè¿°æ–‡æ¡ˆ
	&quot;reason&quot;: string  &#47;&#47; ä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªæ–‡æ¡ˆ
}
```

```json
{
	&quot;description&quot;: &quot;A beautiful red rose with soft petals and a sweet fragrance.&quot;,
	&quot;reason&quot;: &quot;This description highlights the classic beauty and appealing scent of the red rose, making it an attractive choice for customers.&quot;
}
```

å¯¹äºå”®ä»·ä¸º50å…ƒçš„ç«ç‘°ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§å¯èƒ½çš„æè¿°ï¼š

```json
{
	&quot;description
*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=
åœ¨è¿™ä¸€å¥ã€parsed_output = output_parser.parse(output)ã€‘æŠ¥é”™ï¼š
OutputParserException: Got invalid return object. Expected key `description` to be present, but got  and </div>2024-03-04</li><br/><li><img src="" width="30px"><span>é»æ¥šè±</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘è¿™é‡Œæ‰“å°äº†ä¸€ä¸‹è§£æå‰çš„è¾“å‡ºï¼Œå˜æˆè¿™æ ·äº†ï¼Œæ˜¯æ¨¡å‹çš„é—®é¢˜å—ï¼ˆç”¨çš„æ˜¯huggingfaceä¸Šéšä¾¿æ‰¾çš„æ¨¡å‹ï¼‰
ä»£ç ï¼š
for flower, price in zip(flowers, prices):
  input = prompt.format(flower_name=flower, price=price)
  output = model(input)
  print(&#39;è§£æå‰æ¨¡å‹çš„è¾“å‡º:&#39;,output)
  print(&#39;*=&#39;*30)
  #è§£ææ¨¡å‹è¾“å‡º
  parsed_output = output_parser.parse(output)
  print(type(parsed_output))
  # break
  # print(parsed_output)
è¾“å‡ºï¼š
æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„é²œèŠ±åº—æ–‡æ¡ˆæ’°å†™å‘˜ã€‚
å¯¹äºå”®ä»·ä¸º50å…ƒçš„ç«ç‘°ï¼Œoffer a simple description.
The output should be a markdown code snippet formatted in the following schema, including the leading and trailing &quot;```json&quot; and &quot;```&quot;:

```json
{
	&quot;description&quot;: string  &#47;&#47; é²œèŠ±çš„æè¿°æ–‡æ¡ˆ
	&quot;reason&quot;: string  &#47;&#47; ä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªæ–‡æ¡ˆ
}
```

```json
{
	&quot;description&quot;: &quot;A beautiful red rose with soft petals and a sweet fragrance.&quot;,
	&quot;reason&quot;: &quot;This description highlights the classic beauty and appealing scent of the red rose, making it an attractive choice for customers.&quot;
}
```

å¯¹äºå”®ä»·ä¸º50å…ƒçš„ç«ç‘°ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§å¯èƒ½çš„æè¿°ï¼š

```json
{
	&quot;description
*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=
åœ¨è¿™ä¸€å¥ã€parsed_output = output_parser.parse(output)ã€‘æŠ¥é”™ï¼š
OutputParserException: Got invalid return object. Expected key `description` to be present, but got  and </div>2024-03-04</li><br/>
</ul>