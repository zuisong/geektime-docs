ä½ å¥½ï¼Œæˆ‘æ˜¯æ¨æ–‡åšã€‚

ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬å›´ç»•è¿è¥å¹³å°Node.jsæœåŠ¡çš„åŠŸèƒ½ç‰¹ç‚¹ï¼Œå­¦ä¹ äº†æ•°æ®åº“æ–¹æ¡ˆè®¾è®¡ï¼Œä»¥åŠå¦‚ä½•ä¼˜é›…å®ç°æ•°æ®åº“çš„å¿«é€Ÿåˆå§‹åŒ–ã€‚åŒæ—¶ï¼Œä¹Ÿæåˆ°ä¸€ä¸ªé¡¹ç›®è§‚ç‚¹ï¼šæ•°æ®åº“çš„è®¾è®¡ç­‰äºæ˜¯ä¸šåŠ¡åŠŸèƒ½çš„è®¾è®¡ï¼Œæ‰€ä»¥åªè¦æ•°æ®åº“è®¾è®¡å¥½äº†ï¼Œä¸šåŠ¡åŠŸèƒ½è®¾è®¡ä¹Ÿå°±åŸºæœ¬æˆå‹ã€‚

ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ä¹Ÿç§‰æ‰¿è¿™ä¸ªè§‚ç‚¹ï¼ŒåŸºäºä¸ŠèŠ‚è¯¾è®¾è®¡çš„â€œå‘˜å·¥ç”¨æˆ·è¡¨â€æ¥å®ç°ç”¨æˆ·çš„æ³¨å†Œå’Œç™»å½•çš„åŠŸèƒ½ï¼ˆä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œâ€œå‘˜å·¥ç”¨æˆ·â€æˆ‘ä»¬å°±éƒ½ç®€ç§°ä¸ºâ€œç”¨æˆ·â€ï¼‰ã€‚

ä¸€èˆ¬ï¼ŒWebå¹³å°æ¶‰åŠç”¨æˆ·æ“ä½œçš„åŠŸèƒ½ï¼Œéƒ½å¿…é¡»åŒ¹é…ç›¸åº”çš„ç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„åŠŸèƒ½ï¼Œæ‰èƒ½è§„èŒƒç”¨æˆ·çš„æ“ä½œæƒé™ï¼Œé¿å…äº§ç”Ÿä¸šåŠ¡æ•°æ®æ±¡æŸ“ï¼Œä¿è¯å¹³å°æµç¨‹æœ‰æ¡ä¸ç´Šåœ°è‡ªåŠ¨è¿è¡Œã€‚é‚£ä¹ˆå¦‚ä½•å®ç°è¿è¥å¹³å°çš„æ³¨å†Œå’Œç™»å½•åŠŸèƒ½å‘¢ï¼Ÿ

åªæœ‰æ•°æ®åº“çš„å‘˜å·¥ç”¨æˆ·è¡¨æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºå‘˜å·¥ç”¨æˆ·è¡¨ï¼Œè®¾è®¡â€œæ³¨å†Œå’Œç™»å½•çš„åŠŸèƒ½é€»è¾‘â€ã€‚

## å¦‚ä½•è®¾è®¡æ³¨å†Œå’Œç™»å½•çš„åŠŸèƒ½é€»è¾‘ï¼Ÿ

ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½é€»è¾‘çš„è®¾è®¡ï¼Œå…¶å®å¹¶ä¸å¤æ‚ï¼Œé‡ç‚¹æ˜¯ç†æ¸…åŠŸèƒ½ç‚¹çš„æ¯ä¸ªæ­¥éª¤çš„é€»è¾‘ã€‚

æˆ‘ä»¬å…ˆçœ‹ç”¨æˆ·æ³¨å†Œçš„åŠŸèƒ½é€»è¾‘é“¾è·¯ï¼Œæˆ‘ç”»äº†ä¸€å¼ å›¾ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/53/1e/53b85a43222daf4e5f8a4c77ae62951e.jpg?wh=1920x1080)

å¯ä»¥çœ‹å‡ºï¼Œæ³¨å†ŒåŠŸèƒ½çš„ä¸»è¦é€»è¾‘å¯ä»¥åˆ†æˆä¸‰æ­¥ã€‚

- ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·è¾“å…¥å’Œæäº¤â€œå¾…æ³¨å†Œâ€è´¦å·å¯†ç ã€‚è¿™ä¸€æ­¥ä¸­ï¼ŒåŠŸèƒ½ä¸Šè¦è¾…åŠ©ç”¨æˆ·æ ¡éªŒç”¨æˆ·åç§°æ˜¯å¦ç¬¦åˆè§„èŒƒï¼ŒåŒæ—¶ï¼Œè¦è¾…åŠ©ç”¨æˆ·æ ¡éªŒä¸¤æ¬¡å¯†ç æ˜¯å¦ä¸€è‡´ã€‚
- ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·æäº¤æ³¨å†Œä¿¡æ¯ï¼Œå¤„ç†æ³¨å†Œé€»è¾‘ã€‚è¿™æ—¶å€™è¦å¹³å°åˆ¤æ–­è´¦å·æ˜¯å¦å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½æ³¨å†Œï¼Œå¹¶å¤„ç†æ³¨å†Œç»“æœã€‚å¦‚æœç”¨æˆ·åç§°å·²å­˜åœ¨ï¼Œå°±å‡†å¤‡å¥½å¤±è´¥æç¤ºç»“æœï¼Œå¦‚æœç”¨æˆ·åç§°ä¸å­˜åœ¨ï¼Œå°±æ³¨å†Œç”¨æˆ·ä¿¡æ¯ã€‚
- ç¬¬ä¸‰æ­¥ï¼Œå¤„ç†æ³¨å†Œåçš„ç»“æœã€‚å¦‚æœç”¨æˆ·æ³¨å†ŒæˆåŠŸï¼Œå°±è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œå¦‚æœç”¨æˆ·æ³¨å†Œå¤±è´¥ï¼Œæ˜¾ç¤ºå¤±è´¥åŸå› ï¼Œæé†’ç”¨æˆ·å¦‚ä½•æ”¹æ­£ã€‚

è®¾è®¡å®Œç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬æ¥è®¾è®¡ç”¨æˆ·ç™»å½•åŠŸèƒ½é€»è¾‘ï¼Œæˆ‘ä¹ŸåŒæ ·ç”»äº†ä¸€å¼ å›¾å±•ç¤ºåŠŸèƒ½é€»è¾‘é“¾è·¯ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/01/4b/0128eb0328f3f986084790b769bed54b.jpg?wh=1920x1080)

å¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·ç™»å½•çš„åŠŸèƒ½é€»è¾‘ä¹Ÿå¯ä»¥åˆ†æˆä¸‰ä¸ªæ­¥éª¤ã€‚

- ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·è¾“å…¥å’Œæäº¤â€œå·²æ³¨å†Œâ€è´¦å·å¯†ç ã€‚
- ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·æäº¤ç™»å½•ä¿¡æ¯ã€‚è¿™æ—¶å€™å¹³å°éœ€è¦åˆ¤æ–­è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œå¹¶è¿”å›ç™»å½•æˆåŠŸæˆ–è€…å¤±è´¥çš„ç»“æœã€‚
- ç¬¬ä¸‰æ­¥ï¼Œå¤„ç†ç™»å½•åçš„ç»“æœã€‚å¦‚æœç™»å½•æˆåŠŸï¼Œè‡ªåŠ¨è·³è½¬ç®¡ç†é¡µé¢ï¼Œå¦‚æœç™»å½•å¤±è´¥ï¼Œæ˜¾ç¤ºå¤±è´¥åŸå› ã€‚

è¿™äº›å°±æ˜¯ä»åŠŸèƒ½é€»è¾‘å±‚é¢æ¥è®¾è®¡ç”¨æˆ·æ³¨å†Œï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ

åŠŸèƒ½çš„é€»è¾‘è®¾è®¡è¿™ç±»å·¥ä½œï¼Œä¸€èˆ¬åœ¨ä¼ä¸šå†…éƒ¨ï¼Œæ˜¯äº§å“ç»ç†è´Ÿè´£æ‰§è¡Œçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœé¡¹ç›®æ˜¯ç”±æŠ€æœ¯äººå‘˜æ¥ä¸»å¯¼çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬è¯¾ç¨‹çš„ä¼ä¸šå†…éƒ¨è¿è¥æ­å»ºå¹³å°ï¼Œé‚£ä¸€èˆ¬éƒ½éœ€è¦ç¨‹åºå‘˜æ¥è‡ªä¸»è®¾è®¡åŠŸèƒ½é€»è¾‘æµç¨‹çš„ã€‚

å¥½ï¼Œå®ç°äº†åŠŸèƒ½é€»è¾‘çš„è®¾è®¡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æŠŠâ€œåŠŸèƒ½é€»è¾‘è®¾è®¡â€â€œç¿»è¯‘â€æˆâ€œæŠ€æœ¯é€»è¾‘è®¾è®¡â€ï¼Œæˆ–è€…æ˜¯â€œæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡â€ã€‚è¿™ä¸ªâ€œç¿»è¯‘â€è¿‡ç¨‹å°±æ˜¯ç¨‹åºå‘˜**æ ¹æ®åŠŸèƒ½é€»è¾‘çš„æƒ…å†µï¼Œé€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ–¹æ¡ˆæˆ–è€…æ¡†æ¶ï¼Œæ¥å®ç°å¯¹åº”çš„åŠŸèƒ½ç‚¹**ã€‚

é‚£ä¹ˆå¦‚ä½•è®¾è®¡ç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„æŠ€æœ¯æ–¹æ¡ˆå‘¢ï¼Ÿ

## å¦‚ä½•è®¾è®¡ç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„æŠ€æœ¯æ–¹æ¡ˆï¼Ÿ

ç®€å•ç†è§£ï¼ŒæŠ€æœ¯æ–¹æ¡ˆ/æŠ€æœ¯é€»è¾‘çš„è®¾è®¡ï¼Œæ˜¯æŠŠâ€œåŠŸèƒ½é€»è¾‘â€è¿›è¡ŒæŠ€æœ¯åŒ–çš„â€œç¿»è¯‘â€ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®å‰é¢ç”»å¥½çš„åŠŸèƒ½é€»è¾‘çš„è®¾è®¡å›¾ï¼Œç»“åˆæŠ€æœ¯å±‚é¢çš„ç†è§£æ¥ä¿®æ”¹ã€‚

### æ³¨å†Œæµç¨‹çš„æŠ€æœ¯æ–¹æ¡ˆ

æˆ‘å…ˆç”»å‡ºç”¨æˆ·æ³¨å†Œçš„æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡å›¾ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/2b/65/2b20a8ac264ed274b02a70281dbfb965.jpg?wh=1920x1080)

å¯ä»¥å¾—çŸ¥ï¼Œç”¨æˆ·æ³¨å†Œçš„æŠ€æœ¯æ–¹æ¡ˆå®ç°é€»è¾‘åˆ†æˆå››æ­¥ã€‚

**ç¬¬ä¸€æ­¥ï¼Œå‰ç«¯æäº¤â€œå¾…æ³¨å†Œâ€çš„è´¦å·å’Œå¯†ç ã€‚**

åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œå‰ç«¯å¯ä»¥é€šè¿‡åŠ¨æ€è¡¨å•å®ç°æ³¨å†Œè¡¨å•åŠŸèƒ½ï¼Œå¹¶ä¸”åŸºäºåŠ¨æ€è¡¨å•æ¥åšæ–°æ ¡éªŒã€‚åŒæ—¶è¿˜è¦è¿›è¡Œç”¨æˆ·åç¬¦ä¸²æ ¡éªŒï¼Œä¸¤æ¬¡å¯†ç çš„å­—ç¬¦ä¸²æ ¼å¼æ ¡éªŒï¼Œä»¥åŠæ£€æŸ¥ä¸¤æ¬¡å¯†ç æ˜¯å¦ä¸€è‡´ã€‚

ä¿¡æ¯æ ¡éªŒå®Œåï¼Œè¿™é‡Œè¦å°†å¯†ç è¿›è¡Œç¬¬ä¸€æ¬¡md5åŠ å¯†ï¼Œé¿å…å¯†ç æ•°æ®åœ¨HTTPä¼ è¾“è¿‡ç¨‹ä¸­è¢«æ˜æ–‡æš´éœ²å‡ºæ¥ã€‚è™½ç„¶ç°åœ¨å¤§å¤šæ•°ç½‘ç«™éƒ½ç”¨HTTPSè¿›è¡ŒåŠ å¯†ä¼ è¾“ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨æš´éœ²æ˜æ–‡æ•°æ®çš„é£é™©ï¼Œä¾‹å¦‚ä¸€äº›æ“ä½œç³»ç»Ÿã€ä¸€äº›APPç½‘ç»œä»£ç†ï¼Œéƒ½æœ‰å¯èƒ½æ‹¿åˆ°æ˜æ–‡çš„ä¿¡æ¯ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±æŠŠå¯†ç åšä¸€æ¬¡md5åŠ å¯†ï¼Œè¿™æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œæ— æ³•è§£å¯†å‡ºåŸæ¥å­—ç¬¦ä¸²ã€‚

åœ¨ç¬¬ä¸€æ­¥æœ«å°¾ï¼Œå‰ç«¯ç”¨è¡¨å•å½¢å¼å‘èµ·POSTå¼‚æ­¥HTTPè¯·æ±‚ï¼ŒæŠŠå¤„ç†å¥½çš„æ³¨å†Œä¿¡æ¯å‘é€ç»™æœåŠ¡ç«¯ã€‚

**ç¬¬äºŒæ­¥ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°HTTPè¯·æ±‚ï¼Œè§£æå‡ºè¡¨å•é‡Œçš„è´¦å·å’Œå¯†ç ã€‚**

æˆ‘ä»¬æ˜¯ç”¨Koa.jsæ¥æ­å»ºçš„WebæœåŠ¡ï¼Œé‚£ä¹ˆè¦è§£æå‡ºHTTPçš„è¡¨å•æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ³¨å†Œç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨Koa.jsçš„ä¸­é—´ä»¶â€œkoa-bodyparserâ€æ¥è§£æã€‚

**ç¬¬ä¸‰æ­¥ï¼ŒæœåŠ¡ç«¯å¤„ç†æ³¨å†Œçš„æ•°æ®é€»è¾‘ã€‚**

è¿™æ—¶å€™æœåŠ¡ç«¯ä¼šæŸ¥è¯¢æ•°æ®åº“ï¼Œæ£€æŸ¥è´¦å·æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½è¿›è¡Œæ³¨å†Œæµç¨‹ã€‚å¦‚æœè´¦å·å­˜åœ¨ï¼Œè¿”å›å¯¹åº”å¤±è´¥ç»“æœï¼Œæä¾›ç»™æµè§ˆå™¨æç¤ºç”¨æˆ·å¤±è´¥åŸå› ï¼›å¦‚æœè´¦å·ä¸å­˜åœ¨ï¼Œå°±å¯ä»¥è¿›è¡Œæ³¨å†Œçš„æ•°æ®æ“ä½œäº†ï¼Œè¿™é‡Œè¿›è¡Œå¯†ç ç¬¬äºŒæ¬¡md5åŠ å¯†ï¼Œç„¶åæŠŠè´¦å·ã€å¯†ç å’Œæ•°æ®æ’å…¥åˆ°æ•°æ®åº“é‡Œï¼Œæœ€åè¿”å›æ³¨å†ŒæˆåŠŸçš„ç»“æœã€‚

è¿™é‡Œè¦æ³¨æ„ï¼Œæˆ‘ä»¬æœ€ç»ˆå­˜åœ¨æ•°æ®åº“çš„ç”¨æˆ·å¯†ç ï¼Œæ˜¯ç»è¿‡ä¸¤æ¬¡md5åŠ å¯†çš„ç»“æœï¼ˆå‰ç«¯ä¸€æ¬¡ï¼ŒæœåŠ¡ç«¯ä¸€æ¬¡ï¼‰ã€‚å…¶å®ï¼Œåªç”¨å‰ç«¯çš„ä¸€æ¬¡åŠ å¯†é€»è¾‘ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸¤æ¬¡md5åŠ å¯†ä¸»è¦æ˜¯æƒ³åŒé‡å®‰å…¨ä¿éšœï¼Œæ¯•ç«Ÿæ²¡æœ‰ç»å¯¹å®‰å…¨çš„åŠ å¯†ç®—æ³•çš„ï¼Œmd5åŠ å¯†ï¼Œåœ¨æç«¯æƒ…å†µä¸‹è¿˜æ˜¯èƒ½æš´åŠ›ç ´è§£çš„ã€‚

è¦è®°å¾—ï¼Œè¿™ä¸ªä¸¤æ¬¡md5åŠ å¯†é€»è¾‘ä¹Ÿè¦ç”¨åˆ°åé¢çš„ç™»å½•æ“ä½œæµç¨‹ä¸­ï¼Œæ‰èƒ½ä¿è¯åŒ¹é…ä¸Šæ•°æ®åº“çš„ç”¨æˆ·å¯†ç æ•°æ®ã€‚

**ç¬¬å››æ­¥ï¼Œæµè§ˆå™¨æ¥å¤„ç†æœåŠ¡ç«¯HTTPå“åº”ç»“æœã€‚**å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œå°±è®¾ç½®å®šæ—¶å™¨è‡ªåŠ¨è·³è½¬ç™»å½•é¡µé¢ï¼Œå¦‚æœæ³¨å†Œå¤±è´¥ï¼Œå°±æç¤ºå¤±è´¥åŸå› ã€‚

åˆ°è¿™é‡Œï¼Œæ³¨å†Œæµç¨‹çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆï¼Œæˆ‘ä»¬å°±æ¢³ç†å¥½äº†ã€‚

### ç™»å½•æµç¨‹çš„æŠ€æœ¯æ–¹æ¡ˆ

æ¥ä¸‹æ¥è®¾è®¡ç”¨æˆ·ç™»å½•æµç¨‹çš„æŠ€æœ¯æ–¹æ¡ˆã€‚æˆ‘ä¹ŸæŠŠç™»å½•å®ç°æŠ€æœ¯æ–¹æ¡ˆç”»æˆä¸€å¼ å›¾ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/ae/f2/aeb1acbd8c532afd521a8232b1e77ef2.jpg?wh=1920x1080)

ç”¨æˆ·ç™»å½•æ“ä½œçš„æŠ€æœ¯å®ç°ï¼Œæˆ‘ä¹Ÿåˆ†è§£æˆäº†å››ä¸ªæ­¥éª¤ã€‚

ç¬¬ä¸€æ­¥ï¼Œå‰ç«¯æäº¤â€œå·²æ³¨å†Œâ€çš„è´¦å·å’Œå¯†ç ï¼Œè¿™æ—¶å€™å‰ç«¯ä¹Ÿå¯ä»¥ç”¨åŠ¨æ€è¡¨å•ï¼Œæ¥å®ç°ç™»å½•çš„é¡µé¢äº¤äº’åŠŸèƒ½ã€‚åŒæ—¶ï¼Œå‰ç«¯è¦å¯†ç ç”¨md5åšç¬¬ä¸€æ¬¡åŠ å¯†ï¼Œæœ€åä»¥è¡¨å•å½¢å¼å‘èµ·POSTå¼‚æ­¥HTTPè¯·æ±‚ç»™æœåŠ¡ç«¯ã€‚

ç¬¬äºŒæ­¥ï¼ŒæœåŠ¡ç«¯æ¥æ”¶HTTPè¯·æ±‚ï¼Œè§£æå‡ºè¡¨å•é‡Œçš„è´¦å·å’Œå¯†ç ï¼Œå…·ä½“æŠ€æœ¯å®ç°è·Ÿæ³¨å†ŒæŠ€æœ¯æ–¹æ¡ˆçš„ç¬¬äºŒæ­¥ä¸€æ ·ã€‚

ç¬¬ä¸‰æ­¥ï¼ŒæœåŠ¡ç«¯æ ¡éªŒè´¦å·å’Œå¯†ç æ˜¯å¦æ­£ç¡®ã€‚è¿™ä¸€æ­¥ä¸­ï¼Œè¦å¯¹å¯†ç è¿›è¡Œç¬¬äºŒæ¬¡md5åŠ å¯†ï¼Œå› ä¸ºå­˜åœ¨æ•°æ®åº“çš„å¯†ç æ˜¯äºŒæ¬¡md5åŠ å¯†çš„ã€‚

ç„¶åï¼Œæˆ‘ä»¬ç”¨è´¦å·å’ŒäºŒæ¬¡åŠ å¯†åçš„å¯†ç è¿›è¡Œæ•°æ®åº“çš„æŸ¥è¯¢ã€‚å¦‚æœè´¦å·å’Œå¯†ç æ­£ç¡®ï¼Œå°±åœ¨Controlå±‚è®¾ç½®HTTPçš„Cookieä½œä¸ºç™»å½•æ€ï¼Œå†è¿”å›æˆåŠŸç»“æœã€‚å¦‚æœè´¦å·å’Œå¯†ç åŒ¹é…ä¸ä¸Šï¼Œå°±è¿”å›å¤±è´¥ç»“æœã€‚

ç¬¬å››æ­¥ï¼Œæµè§ˆå™¨å¤„ç†HTTPå“åº”ç»“æœã€‚å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œå°±è®¾ç½®å®šæ—¶å™¨è‡ªåŠ¨è·³è½¬ç®¡ç†é¡µé¢ï¼Œå¦‚æœæ³¨å†Œå¤±è´¥ï¼Œå°±æç¤ºå¤±è´¥åŸå› ã€‚

å¥½ï¼Œç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„æŠ€æœ¯æ–¹æ¡ˆæ¢³ç†å®Œæˆï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥è¿›å…¥ä»£ç å®ç°çš„ç¯èŠ‚äº†å‘¢ï¼Ÿ

å…¶å®è¿˜ä¸è¡Œï¼Œåœ¨ç™»å½•æŠ€æœ¯æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬æåˆ°ä¸€ä¸ªç¯èŠ‚ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸåå°±è·³è½¬åˆ°ç®¡ç†é¡µé¢ã€‚è¿™ä¹‹åå°±æ˜¯åç»­ç”¨æˆ·æ“ä½œæµç¨‹äº†ï¼Œæ‰€ä»¥ï¼Œç®¡ç†é¡µé¢å¿…é¡»åšå¥½ç”¨æˆ·ç™»å½•æ€çš„æ ¡éªŒã€‚**æˆ‘ä»¬è¿™é‡Œç”¨äº†Cookieåšä¸ºç™»å½•æ€ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ˜¯ç”¨æˆ·ç™»å½•æ€å‘¢ï¼Ÿ**

â€œç™»å½•æ€â€å’Œç›¸å…³æŠ€æœ¯åŸç†ï¼Œè·Ÿç”¨æˆ·æ³¨å†Œç™»å½•çš„æŠ€æœ¯åŠŸèƒ½æ˜¯ä¸€ä½“çš„ï¼Œéå¸¸é‡è¦ï¼Œæˆ‘ä»¬éœ€è¦ç†æ¸…ç›¸å…³æ¦‚å¿µæ‰èƒ½è¿›å…¥ä»£ç å®ç°é˜¶æ®µã€‚

## ä»€ä¹ˆæ˜¯â€œç”¨æˆ·ç™»å½•æ€â€ï¼Ÿ

å½“ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œæ ‡è®°åœ¨æµè§ˆå™¨ç«¯ã€å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯çš„æ•°æ®ï¼Œä½œä¸ºç™»å½•åˆ¤æ–­çš„å”¯ä¸€æ ‡è¯†ï¼Œå°±æ˜¯â€œç”¨æˆ·ç™»å½•æ€â€ï¼Œä¸€èˆ¬ç®€ç§°ä¸ºâ€œç™»å½•æ€â€ã€‚

**åœ¨WebæœåŠ¡ä¸­ï¼Œç™»å½•æ€é€šå¸¸ç”¨æ¥åœ¨æ¯ä¸ªHTTPè¯·æ±‚ä¸­ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç™»å½•æ•°æ®ã€‚**è™½ç„¶HTTPæ˜¯æ— çŠ¶æ€çš„ç½‘ç»œåè®®ï¼Œä½†æ˜¯åœ¨HTTPçš„å†…å®¹ä¸­ï¼Œå¯ä»¥è®¾ç½®ä¸€äº›æ•°æ®ä½œä¸ºç™»å½•æ€çš„å”¯ä¸€æ ‡è¯†ã€‚

ä¸è¿‡ï¼Œç™»å½•æ€åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ç§â€œä¸šåŠ¡æ¦‚å¿µâ€ï¼Œä¸æ˜¯æŠ€æœ¯æ¦‚å¿µï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯è§„èŒƒï¼Œéƒ½æ˜¯æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œè‡ªè¡Œé€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ¥å®ç°ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦äººä¸ºè®¾è®¡å’Œçº¦å®šä¸€å¥—â€œç™»å½•æ€çš„æ•°æ®è§„èŒƒâ€ã€‚

åœ¨Webé¢†åŸŸé‡Œï¼Œç™»å½•æ€çš„ä¿¡æ¯æœ‰ä¸¤ç§æ ‡è®°æ–¹æ³•ã€‚

- åŸºäºHTTPçš„Cookieèƒ½åŠ›ï¼Œæ ‡è®°åœ¨æµè§ˆå™¨ç«¯ã€‚
- æ ‡è®°åœ¨æœåŠ¡ç«¯ï¼Œæœ¯è¯­æ˜¯Sessionï¼Œå®ç°æŠ€æœ¯ä¸€èˆ¬éƒ½æ˜¯æœåŠ¡ç«¯çš„å­˜å‚¨æŠ€æœ¯ï¼Œä¾‹å¦‚ç¼“å­˜æˆ–æ•°æ®åº“ã€‚

**å•çº¯ä½¿ç”¨Cookieï¼Œæ˜¯æœ€ç®€å•çš„å®ç°æ–¹å¼**ã€‚å½“ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œåœ¨æœåŠ¡ç«¯ä¸­æŠŠç™»å½•æ•°æ®è®¾ç½®åœ¨HTTPçš„Cookieé‡Œï¼Œå“åº”ç»™æµè§ˆå™¨ï¼Œè¿™æ—¶å€™æµè§ˆå™¨ä¼šè®°å½•å¯¹åº”ç½‘å€çš„Cookieã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€åè®©æµè§ˆå™¨ç«¯åŸºäºCookieæ¥å­˜å‚¨ç™»å½•æ€ï¼Œæ¯å½“æµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚åï¼Œå°±ä¼šæºå¸¦å¯¹åº”çš„Cookieç»™æœåŠ¡ç«¯åšæ ¡éªŒã€‚

**ä¸è¿‡ï¼Œå•çº¯ä½¿ç”¨Sessionï¼Œå¾ˆéš¾ä¾é å­˜å‚¨æŠ€æœ¯å®ç°ç™»å½•æ€**ï¼Œå› ä¸ºç¼ºå°‘â€œæµè§ˆå™¨ç«¯â€æˆ–è€…â€œå®¢æˆ·ç«¯â€çš„ç”¨æˆ·è·Ÿè¸ªèƒ½åŠ›ï¼Œæ‰€ä»¥éœ€è¦ç»“åˆCookieæ¥å®ç°Sessionè·Ÿè¸ªã€‚å½“ç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒæŠŠç™»å½•æ€å­˜å‚¨åœ¨æ•°æ®åº“æˆ–è€…ç¼“å­˜ä¸­ï¼Œç„¶åæŠŠæ•°æ®çš„idï¼Œä¹Ÿå°±æ˜¯SessionIdï¼Œæ”¾åœ¨Cookieé‡Œä¼ ç»™æµè§ˆå™¨ã€‚æ¯æ¬¡æµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚æ—¶ï¼Œä¼šæºå¸¦å¯¹åº”çš„Cookieç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ‹¿åˆ°Cookieé‡Œçš„SessionIdï¼Œå»ç¼“å­˜æˆ–è€…æ•°æ®åº“é‡Œï¼Œæ‰¾åˆ°å®Œæ•´çš„ç™»å½•ä¿¡æ¯è¿›è¡Œæ ¡éªŒã€‚

æˆ‘ä»¬çš„è¯¾ç¨‹å†…å®¹ä¾§é‡æ•´ä½“å¹³å°è®¾è®¡å’Œå®ç°ï¼Œæ‰€ä»¥å°±é€‰æ‹©æœ€ç®€å•çš„Cookieæ–¹å¼æ¥åšç™»å½•æ€ç®¡ç†ã€‚

è¿™æ—¶å€™ï¼ŒCookieçš„å®‰å…¨æ€§å°±å°¤ä¸ºé‡è¦ã€‚æˆ‘ä»¬éœ€è¦æŠŠç™»å½•æ€çš„Cookieè®¾ç½®HttpOnlyï¼Œè®©Cookieçš„è¯»å†™åªèƒ½åœ¨æœåŠ¡ç«¯å¤„ç†ã€‚åŒæ—¶ï¼Œè¿˜è¦è®¾ç½®Cookieçš„æœ‰æ•ˆæ—¶é—´ã€‚

è€Œä¸”æˆ‘ä»¬çŸ¥é“ï¼ŒCookieæ˜¯å¯ä»¥åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°çœ‹åˆ°æ˜æ–‡å†…å®¹çš„ï¼Œé‚£ä¹ˆCookieé‡Œç”¨æˆ·æ˜æ–‡ä¿¡æ¯å­˜åœ¨æµè§ˆå™¨ç«¯å¾ˆä¹Ÿå¾ˆå±é™©ï¼Œ**æœ‰æ²¡æœ‰ä½æˆæœ¬çš„åŠæ³•ï¼ŒæŠŠCookieçš„æ•°æ®åœ¨æµè§ˆå™¨é‡ŒåŠ å¯†ï¼Œç„¶ååœ¨æœåŠ¡å™¨é‡Œè§£å¯†å‘¢ï¼Ÿ**

ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œå°±æ˜¯JSON Web TokenæŠ€æœ¯ï¼Œç®€ç§°â€œJWTâ€ã€‚

## å¦‚ä½•ä½¿ç”¨JWTæ¥ç®¡ç†ç”¨æˆ·ç™»å½•æ€ï¼Ÿ

é¦–å…ˆæ¥ç†è§£ä¸€ä¸‹ï¼Œâ€œJWTâ€ï¼Œå…¨ç§°JSON Web Tokenï¼Œä¸šç•Œä¸€èˆ¬æ˜¯è¿™ä¹ˆæè¿°çš„ã€‚

> â€œJSON Web Tokenå®šä¹‰äº†ä¸€ç§ç´§å‡‘çš„ã€è‡ªåŒ…å«çš„æ–¹å¼ï¼Œç”¨äºä½œä¸ºJSONå¯¹è±¡åœ¨å„æ–¹ä¹‹é—´å®‰å…¨åœ°ä¼ è¾“ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯å¯ä»¥è¢«éªŒè¯å’Œä¿¡ä»»ï¼Œå› ä¸ºå®ƒæ˜¯æ•°å­—ç­¾åçš„ã€‚â€

æˆ‘ä»¬ç»“åˆå…·ä½“å®ç°æ­¥éª¤æ¥ç†è§£ã€‚

ç¬¬ä¸€æ­¥ï¼Œç”ŸæˆJWTã€‚å½“ç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨æŠŠç”¨æˆ·æ•°æ®å°è£…æˆJSONå¯¹è±¡ï¼Œç„¶åè¿›è¡ŒåŠ å¯†ï¼Œæˆä¸€ä¸ªâ€œåŠ å¯†å­—ç¬¦ä¸²â€ï¼Œå“åº”è¿”å›ç»™æµè§ˆå™¨ã€‚

ç¬¬äºŒæ­¥ï¼Œå­˜å‚¨JWTã€‚è¿™æ—¶å€™ï¼Œæµè§ˆå™¨å¯ä»¥æŠŠè¿™ä¸ªâ€œåŠ å¯†å­—ç¬¦ä¸²â€å­˜åœ¨localStorageé‡Œï¼Œæˆ–è€…æœåŠ¡å™¨å“åº”æ—¶å­˜åœ¨Cookieé‡Œã€‚

ç¬¬ä¸‰æ­¥ï¼Œæµè§ˆå™¨ä½¿ç”¨JWTå’ŒæœåŠ¡å™¨æ ¡éªŒJWTã€‚è¿™æ—¶å€™ï¼Œæµè§ˆå™¨å‘é€HTTPè¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æŠŠâ€œåŠ å¯†å­—ç¬¦ä¸²â€åŠ åˆ°HTTP Headeré‡Œï¼Œæˆ–è€…æ”¾åœ¨HTTP Bodyé‡Œï¼Œæˆ–è€…è‡ªåŠ¨è·Ÿéšåœ¨Cookieé‡Œã€‚å½“æœåŠ¡ç«¯æ¥æ”¶åˆ°HTTPè¯·æ±‚åï¼Œä»HTTPçš„Headerã€Bodyæˆ–è€…Cookieé‡Œæ‹¿åˆ°JWTï¼Œè¿›è¡Œè§£å¯†ï¼ŒæŠŠJSONæ•°æ®æ‹¿å‡ºæ¥æ£€æŸ¥æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚

è¿™æ˜¯JWTçš„ä¸€ä¸ªæœ€ç®€å•çš„æµç¨‹ã€‚å…¶å®ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°JWTçš„åŠ å¯†å’Œè§£å¯†çš„èƒ½åŠ›ï¼Œæ¥è¿›è¡ŒCookieæ•°æ®çš„åŠ å¯†å’Œè§£å¯†ã€‚

å¥½ï¼Œåˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œç»“åˆç™»å½•æ€çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå¯ä»¥å¼€å§‹å†™ä»£ç å®ç°äº†ã€‚

## å¦‚ä½•æ ¹æ®æŠ€æœ¯æ–¹æ¡ˆè¿›è¡Œä»£ç å®ç°ï¼Ÿ

è¿™é‡Œæˆ‘ç”¨æ³¨å†Œæµç¨‹ä½œä¸ºæ¡ˆä¾‹ï¼Œæ¼”ç¤ºä»£ç å®ç°ã€‚æ³¨å†Œæµç¨‹ä»£ç åˆ†æˆä¸¤å¤§éƒ¨åˆ†ï¼Œå‰ç«¯éƒ¨åˆ†å’ŒæœåŠ¡ç«¯éƒ¨åˆ†ã€‚

é¦–å…ˆæ˜¯å‰ç«¯éƒ¨åˆ†ï¼Œå‰ç«¯çš„å®ç°ç”¨ä¹‹å‰è¯¾ç¨‹é‡Œçš„åŠ¨æ€è¡¨å•è¿›è¡Œå°è£…ï¼Œæ¥å®ç°æ³¨å†Œçš„è¡¨å•ã€‚

```xml
<template>
  <DynamicForm
    class="sign-up-form"
    :model="model"
    :fieldList="fieldList"
    @finish="onFinish"
    @finishFail="onFinishFail"
  >
    <div class="btn-groups">
      <Button type="primary">æ³¨å†Œ</Button>
    </div>
  </DynamicForm>
</template>

<script setup lang="ts">
import { DynamicForm, Button, Message } from '@my/components';
import md5 from 'md5';
import type { DynamicFormField } from '@my/components';

interface SignUpFormData {
  username: string;
  password: string;
  confirmPassword: string;
}

const model: SignUpFormData = {
  username: 'admin001',
  password: '123456',
  confirmPassword: '123456'
};

const fieldList: DynamicFormField[] = [
  {
    label: 'ç”¨æˆ·åç§°',
    name: 'username',
    fieldType: 'Input',
    rule: {
      validator: (val: unknown) => {
        const hasError = /^[0-9a-z\-._]{4,16}$/.test(`${val || ''}`) !== true;
        return {
          hasError,
          message: hasError ? 'å¿…é¡»æ˜¯4~16ä½çš„0-9a-zå’Œ.-_çš„ç»„åˆ' : ''
        };
      }
    }
  },
  {
    label: 'å¯†ç ',
    name: 'password',
    fieldType: 'InputPassword',
    rule: {
      validator: (val: unknown) => {
        const hasError = /^[0-9a-zA-Z]{6,16}$/gi.test(`${val || ''}`) !== true;
        return {
          hasError,
          message: hasError ? 'å¯†ç å¿…é¡»æ˜¯6~16ä½çš„æ•°å­—å’Œå­—æ¯ç»„åˆ' : ''
        };
      }
    }
  },
  {
    label: 'ç¡®è®¤å¯†ç ',
    name: 'confirmPassword',
    fieldType: 'InputPassword',
    rule: {
      validator: (val: unknown) => {
        const hasError = /^[0-9a-zA-Z]{6,16}$/gi.test(`${val || ''}`) !== true;
        return {
          hasError,
          message: hasError ? 'å¯†ç å¿…é¡»æ˜¯6~16ä½çš„æ•°å­—å’Œå­—æ¯ç»„åˆ' : ''
        };
      }
    }
  }
];

const onFinish = (e: SignUpFormData) => {
  if (e.password !== e.confirmPassword) {
    Message.open({
      type: 'error',
      text: 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´',
      duration: 2000
    });
    return;
  }
  fetch('/api/post/account/sign-up', {
    body: JSON.stringify({
      username: e.username,
      password: md5(e.password)
    }),
    headers: {
      'content-type': 'application/json'
    },
    method: 'POST'
  })
    .then((res) => res.json())
    .then((result: any) => {
      Message.open({
        type: result.success ? 'success' : 'error',
        text: result.message,
        duration: 2000
      });
      if (result.success) {
        setTimeout(() => {
          window.location.href = '/page/sign-in';
        }, 2000);
      }
    })
    .catch((err: Error) => {
      Message.open({
        type: 'error',
        text: `æ³¨å†Œå¤±è´¥ [${err.toString()}]`,
        duration: 2000
      });
    });
};

const onFinishFail = (e: unknown) => {
  // eslint-disable-next-line no-console
  console.log('fail =', e);
};
</script>
```

æ¥ä¸‹æ¥å°±æ˜¯æœåŠ¡ç«¯éƒ¨åˆ†ã€‚

è¿˜è®°å¾—æˆ‘ä»¬åšè¿‡çš„Node.jsæœåŠ¡ç«¯ç»“æ„åˆ†å±‚å—ï¼Ÿä»£ç çš„å®ç°ï¼Œå…¶å®å°±æ˜¯åœ¨ä¸åŒåˆ†å±‚é‡Œï¼Œå®ç°å¯¹åº”çš„åˆ†å·¥ä»£ç å°±å¥½ã€‚

æœåŠ¡ç«¯çš„æ³¨å†ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬æ ¹æ®ä¹‹å‰çš„æœåŠ¡ç«¯åˆ†å±‚ Routerã€Controllerã€Serviceã€Modelé€ä¸€å®ç°ã€‚

é¦–å…ˆæ˜¯Routerï¼Œä¹Ÿå°±æ˜¯è·¯ç”±å±‚ï¼Œè¦æ³¨å†ŒHTTPçš„æ³¨å†ŒAPIã€‚

```typescript
// packages/work-server/src/router.ts
import Router from '@koa/router'; 
import { 
  signUp, 
} from './controller/user';
// å…¶å®ƒçœç•¥ä»£ç  ...

router.post('/api/post/account/sign-up', signUp); 
// å…¶å®ƒçœç•¥ä»£ç  ...
const routers = router.routes();

export default routers;
```

æ³¨å†Œäº†è·¯ç”±ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®ç°è·¯ç”±å±‚Routerä¸Šçš„æ§åˆ¶å±‚Controllerçš„ç”¨æˆ·æ³¨å†Œæ–¹æ³•ã€‚

```typescript
// packages/work-server/src/controller/user.ts
import type { Context, Next } from 'koa'; 
import { registerUser, queryAccount } from '../service/user'; 

// å…¶å®ƒçœç•¥ä»£ç  ...
export async function signUp(ctx: Context) {
  const params = ctx.request.body as {
    username?: string;
    password?: string;
  };
  const result = await registerUser(params);
  ctx.body = result;
}
// å…¶å®ƒçœç•¥ä»£ç  ...
```

å®ç°äº†æ§åˆ¶å±‚Controllerçš„æ³¨å†Œæ–¹æ³•ï¼Œæ¥ä¸‹æ¥å°±å®ç°å…¶æ‰€ä¾èµ–çš„ä¸šåŠ¡å±‚ï¼ŒServiceçš„æ³¨å†Œé€»è¾‘æ–¹æ³•ã€‚

```typescript
// packages/work-server/src/service/user.ts
import {
  checkUserIsUsernameExist,
  createUser
} from '../model/user';
import type { MyAPIResult } from './types';
import type { UserInfo } from '../model/user';

export async function registerUser(params: {
  username?: string;
  password?: string;
}): Promise<MyAPIResult> {
  const { username, password } = params;
  let result: MyAPIResult = {
    data: null,
    success: false,
    message: 'æ³¨å†Œå¤±è´¥'
  };
  if (!username || !password) {
    result.message = 'ä¿¡æ¯ä¸å…¨';
    return result;
  }

  try {
    const isExist = await checkUserIsUsernameExist({ username });
    if (isExist === true) {
      result.message = 'ç”¨æˆ·åå·²å­˜åœ¨';
      return result;
    }
    const createResult = await createUser({ username, password });
    result = {
      data: createResult,
      success: true,
      message: 'æ³¨å†ŒæˆåŠŸ'
    };
  } catch (err: any) {
    // eslint-disable-next-line no-console
    console.log(err);
    result.message = err?.toString() || 'å‡ºç°å¼‚å¸¸';
  }
  return result;
}
```

åœ¨ä¸šåŠ¡å±‚Serviceçš„æ³¨å†Œæ–¹æ³•registerUserä¸­ï¼Œå®ç°é€»è¾‘æ˜¯å…ˆæŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç”¨æˆ·åï¼Œå¦‚æœä¸å­˜åœ¨å°±å¯ä»¥è¿›è¡Œæ³¨å†Œæ“ä½œã€‚æ‰€ä»¥ï¼Œè¿™é‡Œä¾èµ–äº†æ•°æ®æ¨¡å‹å±‚Modelä¸­çš„ä¸¤ä¸ªæ–¹æ³•ã€‚

é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å®ç°æ•°æ®åº“æ“ä½œçš„æ•°æ®åº“æ¨¡å‹å±‚ã€‚

```typescript
import md5 from 'md5';
import { v4 } from 'uuid';
import { runSQL, tranformModelData } from '../util/db';

export interface UserInfo {
  id: number;
  uuid: string;
  username: string;
  password: string;
  info: unknown;
  extends: unknown;
  createTime: string;
  modifyTime: string;
}

export async function checkUserIsUsernameExist(params: {
  username: string;
}): Promise<boolean> {
  const { username } = params;
  const sql = `
    SELECT * FROM \`user_info\` WHERE username = ?;
  `;
  const values = [username];
  const results = await runSQL(sql, values);
  if (results && results.length > 0) {
    return true;
  }
  return false;
}

export async function createUser(params: {
  username: string;
  password: string;
}) {
  const sql = `
    INSERT INTO \`user_info\` SET ?;
  `;
  const uuid = v4();
  const { password, username } = params;
  const values = {
    uuid,
    password: md5(password),
    username,
    status: 1
  };
  const results = await runSQL(sql, values);
  if (results?.insertId > 0) {
    return { uuid, username };
  } else {
    return null;
  }
}
```

ç”¨æˆ·æ³¨å†ŒæŠ€æœ¯æ–¹æ¡ˆçš„ä»£ç å®ç°è¿‡ç¨‹å°±æ˜¯è¿™æ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œæ›´å¤šå®Œæ•´ä»£ç ä¿¡æ¯ï¼Œä½ å¯ä»¥çœ‹å¯¹åº”ç« èŠ‚çš„ä»£ç æ¡ˆä¾‹ã€‚

## æ€»ç»“

ç»è¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº†ç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„å…¨æ ˆåŠŸèƒ½å®ç°ã€‚æˆ‘ä»¬åŸºäºè¿è¥æ­å»ºå¹³å°è¿™ä¸ªæ¡ˆä¾‹ï¼Œåˆ†æäº†Webå¹³å°å¸¸è§çš„ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½ï¼Œç±»ä¼¼çš„ä»å‰ç«¯åˆ°æœåŠ¡ç«¯çš„å…¨æ ˆæŠ€æœ¯å®ç°æµç¨‹ä¸»è¦å¯ä»¥åˆ†æˆä¸‰æ­¥ã€‚

- ç¬¬ä¸€æ­¥ï¼Œè®¾è®¡åŠŸèƒ½é€»è¾‘ï¼ŒæŠ›å¼€å‰ç«¯å’ŒæœåŠ¡ç«¯çš„ç•Œé™ï¼Œå…ˆç†æ¸…æ¥šåŠŸèƒ½é€»è¾‘ï¼ŒæŠŠåŠŸèƒ½é€»è¾‘çš„æ­¥éª¤ç»™æ¢³ç†å‡ºæ¥ã€‚
- ç¬¬äºŒæ­¥ï¼Œè®¾è®¡æŠ€æœ¯æ–¹æ¡ˆï¼Œæ ¹æ®æ¢³ç†å‡ºçš„åŠŸèƒ½é€»è¾‘æ­¥éª¤ï¼Œè¿›è¡ŒæŠ€æœ¯å±‚é¢çš„â€œç¿»è¯‘â€ï¼Œä¹Ÿå°±æ˜¯æ‹†è§£æˆå¯¹åº”çš„å‰ç«¯å®ç°æŠ€æœ¯å’ŒæœåŠ¡ç«¯å®ç°æŠ€æœ¯ã€‚è‡³äºå“ªäº›æ˜¯è¦å‰ç«¯å®ç°ï¼Œå“ªäº›è¦åœ¨æœåŠ¡ç«¯å®ç°ï¼Œå°±çœ‹æŠ€æœ¯ç‰¹ç‚¹å’Œä¸ªäººé€‰æ‹©äº†ã€‚
- ç¬¬ä¸‰æ­¥ï¼Œæ ¹æ®æŠ€æœ¯æ–¹æ¡ˆåšä»£ç å®ç°ã€‚å…·ä½“å°±æ˜¯æ ¹æ®æŠ€æœ¯æ–¹æ¡ˆé‡Œçš„é€‰å‹ã€åˆ†å·¥ç­‰è®¾è®¡ï¼Œé€‰æ‹©å¯¹åº”çš„æŠ€æœ¯æ¥é€ä¸€å®ç°ä»£ç ã€‚

åœ¨è¿™ä¸ªå…¨æ ˆé¡¹ç›®çš„å¸¸è§„å¼€å‘æµç¨‹ä¸­ï¼Œç¬¬ä¸€æ­¥ä¸ä¸€å®šæ˜¯ç¨‹åºå‘˜çš„èŒè´£ï¼Œ**ä½†æ˜¯ç¨‹åºå‘˜å¿…é¡»è¦æŒæ¡ç¬¬ä¸€æ­¥çš„åŠŸèƒ½é€»è¾‘çš„è®¾è®¡èƒ½åŠ›ï¼Œæœ‰äº†è¿™ä¸ªèƒ½åŠ›ï¼Œä½ å¯ä»¥çªç ´æŠ€æœ¯èŒè´£çš„è¾¹ç•Œï¼Œé”»ç‚¼å‡ºç‹¬å½“ä¸€é¢çš„é¡¹ç›®ç®¡ç†è½¯å®åŠ›ã€‚**

åˆ†æäº†åŠŸèƒ½é€»è¾‘è®¾è®¡å’ŒæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ï¼Œåœ¨â€œç”¨æˆ·æ³¨å†Œå’Œç™»å½•â€åŠŸèƒ½çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¦ç†è§£ç™»å½•æ€çš„ä½¿ç”¨åœºæ™¯ä»¥åŠæŠ€æœ¯å®ç°æ–¹å¼ã€‚

æœ€åä¹Ÿå­¦ä¹ äº†JSON Web Tokenè¿™ä¸ªä½æˆæœ¬çš„æƒé™æ ¡éªŒæŠ€æœ¯æ–¹æ¡ˆã€‚ä¸è¿‡ï¼Œå…³äºå¹³å°çš„ç”¨æˆ·æ³¨å†Œå’Œç™»å½•çš„æŠ€æœ¯ç†è§£ï¼Œå…¶å®ï¼Œ**æ²¡æœ‰æœ€å®Œç¾ã€æœ€å®‰å…¨çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œåªæœ‰å½“ä¸‹â€œè¾ƒä¸ºå®‰å…¨çš„æŠ€æœ¯é˜€æ†â€**ã€‚æ¯•ç«Ÿï¼ŒæŠ€æœ¯éƒ½æœ‰æ—¶æ•ˆæ€§ï¼ŒæŠ€æœ¯çš„å®‰å…¨æ€§å°±ä¹Ÿæœ‰æ—¶æ•ˆæ€§ï¼Œæ‰€ä»¥ä»»ä½•æŠ€æœ¯éƒ½æ˜¯è¦ä¸æ—¶ä¿±è¿›ï¼Œå®‰å…¨æŠ€æœ¯ä¹Ÿä¸€æ ·ï¼Œæˆ‘ä»¬è¦æ ¹æ®æŠ€æœ¯çš„å‘å±•åšæŒç»­çš„å®‰å…¨ä¼˜åŒ–ã€‚

## æ€è€ƒé¢˜

é€šè¿‡Cookieä½œä¸ºç™»å½•æ€å”¯ä¸€æ•°æ®å­˜åœ¨æµè§ˆå™¨é‡Œï¼Œå¦‚æœCookieè¢«å…¶ä»–äººæ‹¿åˆ°ï¼Œæ˜¯å¦èƒ½ä¼ªé€ Cookieæ‰€å±ç”¨æˆ·çš„ç™»å½•è¡Œä¸ºï¼Ÿæœ‰åŠæ³•é¿å…å‡ºç°è¿™ä¸ªé—®é¢˜å—ï¼Ÿä»WebæœåŠ¡å¹³å°æä¾›æ–¹è§†è§’å‡ºå‘ï¼Œä¸€èˆ¬æ€ä¹ˆåšç™»å½•æ€çš„ä¿æŠ¤ï¼Ÿ

æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€å‚ä¸è®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€èŠ‚è¯¾å†è§ã€‚

### [å®Œæ•´çš„ä»£ç åœ¨è¿™é‡Œ](https://github.com/FE-star/vue3-course/tree/main/chapter/22)
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ3ï¼‰</strong></div><ul>
<li><span>è’™</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>åŠ è§£å¯†å¯ä»¥ç›´æ¥ç”¨nodeçš„åŠ å¯†å‡½æ•°ä¸ç”¨jwtå—ï¼Œ
ç”¨jwtåŠ è§£å¯†æœ‰ä»€ä¹ˆé¢å¤–å¥½å¤„å—</p>2023-01-11</li><br/><li><span>ifelse</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>å­¦ä¹ æ‰“å¡</p>2024-09-22</li><br/><li><span>escray</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>åœ¨æœ¬è¯¾é™„å¸¦çš„æºç ä¸­ï¼Œå¦‚æœåˆ†åˆ«å¯åŠ¨å‰åç«¯

npm run dev:work-front
npm run dev:work-server

é¦–é¡µæ˜¯å¯ä»¥å‡ºæ¥çš„ï¼Œä½†æ˜¯åœ¨åå°ä¼šæœ‰ä¸€ä¸ªæŠ¥é”™

12:21:39 PM [vite] Internal server error: Failed to resolve import &quot;@my&#47;components&#47;css&#47;index.css&quot; from &quot;packages&#47;work-front&#47;src&#47;pages&#47;home&#47;index.ts&quot;. Does the file exist?

å¥½åƒæ˜¯ç»„ä»¶å¼•ç”¨çš„é—®é¢˜ï¼Œé‚£ä¸ª index.css æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œä»ä»£ç é‡Œé¢ä¹Ÿèƒ½å¤Ÿé“¾æ¥åˆ° css æ–‡ä»¶ã€‚

ä¸çŸ¥é“æœ‰æ²¡æœ‰äººé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œæ˜¯å¦æœ‰è§£å†³åŠæ³•ï¼Ÿ

å¦å¤–å°±æ˜¯ç”¨ pnpm i æ¥ç¼–è¯‘æ•´ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œæ‰§è¡Œåˆ°

 &gt; vite-node .&#47;scripts&#47;build-dts.ts

è¿˜æ˜¯ä¼šæœ‰ Error: TypeScriptç±»å‹æè¿°æ–‡ä»¶æ„å»ºå¤±è´¥ï¼

JSX element implicitly has type &#39;any&#39; because no interface &#39;JSX.IntrinsicElements&#39; exists.

åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹ï¼Œå¤§éƒ¨åˆ†çš„åŠæ³•æ˜¯å’Œ react ç›¸å…³çš„ï¼Œä¸€èˆ¬ä¼šæ¨èå†æ¬¡å®‰è£… @types&#47;reactï¼Œæˆ–è€…é‡å¯ TypeScript æœåŠ¡ï¼Œæ„Ÿè§‰ä¸å¤ªåˆé€‚ã€‚

åæ¥é‡åˆ°çš„é”™è¯¯æ˜¯

[less] Unrecognised input
2:35:34 PM [vite] Internal server error: [less] Unrecognised input
  Plugin: vite:css
  File: &#47;Users&#47;zhaorui&#47;Study&#47;professional&#47;SourceCode&#47;VueStudy&#47;vue3-course&#47;chapter&#47;21&#47;packages&#47;work-front&#47;src&#47;pages&#47;sign-in&#47;sign-in.vue:103:9
  2  |    &lt;DynamicForm
  3  |      class=&quot;sign-up-form&quot;
  4  |      :model=&quot;model&quot;
     |           ^
  5  |      :fieldList=&quot;fieldList&quot;
  6  |      @finish=&quot;onFinish&quot;
</p>2024-01-16</li><br/>
</ul>