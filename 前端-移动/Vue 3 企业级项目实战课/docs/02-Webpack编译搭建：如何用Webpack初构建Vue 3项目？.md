ä½ å¥½ï¼Œæˆ‘æ˜¯æ¨æ–‡åšã€‚

çœ‹åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œä½ æ˜¯ä¸æ˜¯è§‰å¾—æœ‰ç‚¹ç–‘æƒ‘ï¼Ÿæ˜æ˜Vue.js 3å®˜æ–¹æ ‡é…çš„ç¼–è¯‘å·¥å…·æ˜¯Viteï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸å…ˆè®²Vue.js 3ç»“åˆViteè¿›è¡Œé¡¹ç›®ç¼–è¯‘ï¼Œè€Œæ˜¯å…ˆæ•™ä½ ç”¨Webpackç¼–è¯‘Vue.js 3é¡¹ç›®å‘¢ï¼Ÿ

è¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬è¿™ä¸ªè¯¾ç¨‹æ˜¯è¦åšä¸€ä¸ªâ€œä¼ä¸šçº§é¡¹ç›®çš„å®æˆ˜â€ï¼Œè€Œåœ¨ä¼ä¸šæŠ€æœ¯å¼€å‘ä¸­ï¼Œç¬¬ä¸€è¦ç´ å°±æ˜¯ä¿è¯åŠŸèƒ½çš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒWebpackæ¯”Viteæœ‰æ›´å¤§ä¼˜åŠ¿ã€‚å®ƒå‘å¸ƒäº2013å¹´ï¼Œæ‹¥æœ‰è¾ƒå¥½çš„æŠ€æœ¯ç”Ÿæ€ï¼ŒåŸºæœ¬ä¸Šï¼Œä½ ç”¨Webpacké¡¹ç›®æ‰“åŒ…æ„å»ºé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œéƒ½èƒ½åœ¨ç½‘ä¸Šæ‰¾åˆ°ç›¸å…³åœºæ™¯çš„ç›´æ¥è§£å†³æ–¹æ¡ˆæˆ–è€…é—´æ¥è§£å†³æ€è·¯ã€‚è€ŒViteæ¯”è¾ƒå¹´è½»ï¼Œåœ¨2020å¹´æ‰å‘å¸ƒæ­£å¼ç‰ˆï¼Œåœ¨æŠ€æœ¯ç”Ÿæ€çš„æ²‰æ·€ä¸Šå¹¶æ²¡æœ‰Webpacké‚£ä¹ˆä¸°å¯Œã€‚

æ‰€ä»¥ï¼Œè¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥è®²è®²æ€ä¹ˆç”¨Webpackæ¥ç¼–è¯‘Vue.js 3é¡¹ç›®ã€‚å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹é™¤äº†Webpackç”Ÿæ€æ›´ç¨³å®šçš„å› ç´ å¤–ï¼ŒWebpackå’ŒViteç©¶ç«Ÿè¿˜æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè®©ä½ å¯¹è¿™ä¸¤ä¸ªå·¥å…·æœ‰æ›´æ·±å…¥çš„äº†è§£ã€‚

## Webpackå’ŒViteæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

æˆ‘åœ¨ç ”ç©¶æŠ€æœ¯çš„æ—¶å€™ç»å¸¸åœ¨æƒ³ï¼Œè„±ç¦»æŠ€æœ¯çš„å®šä½æ¥å¯¹æ¯”æŠ€æœ¯å¥½åéƒ½æ˜¯è€æµæ°“ã€‚å› ä¸ºæ¯ä¸€ç§æµè¡Œçš„æŠ€æœ¯ä¹‹æ‰€ä»¥è¢«äººæ¥çº³ï¼Œè‚¯å®šæ˜¯æœ‰å…¶è¯ç”Ÿçš„å®šä½å’Œå¼€å‘è€…çš„ä½¿ç”¨å®šä½ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å¯¹æ¯”Webpackå’ŒViteï¼Œæœ€é‡è¦æ˜¯**å¯¹æ¯”è¿™ä¸¤ç§æŠ€æœ¯å·¥å…·çš„å®šä½**ã€‚

Webpackå’ŒViteçš„å®šä½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¸ªè¿Viteçš„ä½œè€…å°¤é›¨æºªè€å¸ˆéƒ½æ›¾ç»åœ¨çŸ¥ä¹ä¸Šå›åº”è¿‡ã€‚Viteå®šä½æ˜¯Webâ€œå¼€å‘å·¥å…·é“¾â€ï¼Œå…¶å†…ç½®äº†ä¸€äº›æ‰“åŒ…æ„å»ºå·¥å…·ï¼Œè®©å¼€å‘è€…å¼€ç®±å³ç”¨ï¼Œä¾‹å¦‚é¢„è®¾äº†Webå¼€å‘æ¨¡å¼ç›´æ¥ä½¿ç”¨ESMèƒ½åŠ›ï¼Œå¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„ESMèƒ½åŠ›æŒ‰éœ€åŠ è½½å½“å‰å¼€å‘é¡µé¢çš„ç›¸å…³èµ„æºã€‚

ç„¶è€Œï¼ŒWebpackå®šä½æ˜¯æ„å»ºâ€œæ‰“åŒ…å·¥å…·â€ï¼Œé¢å‘çš„æ˜¯å‰ç«¯ä»£ç çš„ç¼–è¯‘æ‰“åŒ…è¿‡ç¨‹ã€‚Webpackèƒ½åŠ›å¾ˆå•ä¸€ï¼Œå°±æ˜¯æä¾›ä¸€ä¸ªæ‰“åŒ…æ„å»ºçš„èƒ½åŠ›ï¼Œå¦‚æœæœ‰ç‰¹å®šçš„æ„å»ºéœ€è¦ï¼Œå¿…é¡»è®©å¼€å‘è€…æ¥é€‰æ‹©åˆé€‚çš„Loaderå’ŒPluginè¿›è¡Œç»„åˆé…ç½®ï¼Œè¾¾åˆ°æœ€ç»ˆçš„æƒ³è¦çš„æ‰“åŒ…æ•ˆæœã€‚æ¯”å¦‚ Webpackæ²¡æœ‰å†…ç½®å¼€å‘æœåŠ¡ï¼Œéœ€è¦å¼•å…¥ webpack-dev-server æ‰èƒ½æœ‰å¼€å‘æœåŠ¡çš„èƒ½åŠ›ï¼Œè¿™ä¸ªå¯¹æ¯”Viteå°±ä¸ä¸€æ ·ï¼ŒVIteå°±ç›´æ¥å†…ç½®äº†ä¸€ä¸ªå¼€å‘æœåŠ¡ã€‚

é‚£ä¹ˆï¼Œä¸¤è€…çš„æŠ€æœ¯èƒ½åŠ›æˆ–è€…åŠŸèƒ½æœ‰ä»€ä¹ˆå¼‚åŒç‚¹å‘¢ï¼Ÿ

å…¶å®è¿™ä¸¤ä¸ªå·¥å…·èƒ½æä¾›çš„æŠ€æœ¯èƒ½åŠ›æœ‰å¾ˆå¤§çš„é‡å åº¦æˆ–è€…ç›¸ä¼¼åº¦ï¼ŒåŸºæœ¬å°±æ˜¯å¯¹å‰ç«¯ä»£ç è¿›è¡Œæ‰“åŒ…æ„å»ºå¤„ç†ã€‚åŒºåˆ«æ˜¯Viteå†…ç½®äº†å¾ˆå¤šå·¥å…·ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šé…ç½®å·¥ä½œé‡ï¼›è€ŒWebpackåªæ˜¯ç®€å•çš„æ‰“åŒ…å·¥å…·æ¶å­ï¼Œéœ€è¦å¼€å‘è€…ä¸€å¼€å§‹å‡†å¤‡å¾ˆå¤šé…ç½®å¤„ç†ï¼Œä¸åƒViteé‚£æ ·èƒ½å¼€ç®±å³ç”¨ï¼Œéœ€è¦èŠ±äº›åŠŸå¤«è¿›è¡Œé€‰æ‹©Webpackçš„Loaderå’ŒPluginè¿›è¡Œé…ç½®ã€‚

ä¸è¿‡ï¼Œåœ¨å¯¹äºä¼ä¸šçº§é¡¹ç›®å¼€å‘ä¸­ï¼ŒæŠ€æœ¯çš„ç¨³å®šæ€§å½“ç„¶æ˜¯å¤§äºä¸€åˆ‡çš„ï¼Œä½ ä¼šå‘ç°èŠ±ä¸ŠåŠå¤©æ—¶é—´é…ç½®ä¸€ä¸‹æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å‡å°‘åç»­é‡åˆ°é—®é¢˜çš„çƒ¦æ¼ã€‚

é‚£ä¹ˆï¼Œæ—¢ç„¶Webpackä¸èƒ½åƒViteé‚£æ ·å­å¼€ç®±å³ç”¨çš„è¯ï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œç”¨Webpackæ­å»ºVue.js 3é¡¹ç›®éœ€è¦æœ‰ä»€ä¹ˆæ­¥éª¤ã€‚

## å¦‚ä½•ç”¨Webpackæ­å»ºVue.js 3é¡¹ç›®?

ç”¨Webpackæ¥æ­å»ºVue.js 3é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ€åˆå§‹çš„é¡¹ç›®æ­å»ºåˆ†æˆè¿™å‡ ä¸ªæ­¥éª¤ï¼š

1. é¡¹ç›®ç›®å½•å’Œæºç å‡†å¤‡ï¼›
2. å®‰è£…ä¾èµ–ï¼›
3. é…ç½®Webpackçš„Vue.js 3ç¼–è¯‘é…ç½®ï¼›
4. æ‰§è¡ŒVue.js 3ç¼–è¯‘ã€‚

**ç¬¬ä¸€æ­¥å°±æ˜¯è¦å…ˆå‡†å¤‡å¥½é¡¹ç›®ç›®å½•**ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```shell
.
â”œâ”€â”€ dist/*
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚Â  Â â”œâ”€â”€ app.vue
â”‚Â  Â â””â”€â”€ index.js
â””â”€â”€ webpack.config.js
```

æˆ‘ç»™ä½ ä»ä¸Šåˆ°ä¸‹ä»‹ç»ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ç›®å½•çš„ç»“æ„ï¼š

- distï¼Œ æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸ºVue.js 3ä»£ç çš„ç¼–è¯‘ç»“æœç›®å½•ï¼Œæœ€åçš„ç¼–è¯‘ç»“æœéƒ½æ˜¯å‰ç«¯é™æ€èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚JavaScriptã€CSSå’ŒHTMLç­‰æ–‡ä»¶ï¼›
- package.jsonï¼Œæ˜¯ä¸€ä¸ªJSONæ–‡ä»¶ï¼Œä¸ºNode.jsé¡¹ç›®çš„å£°æ˜æ–‡ä»¶ï¼Œå£°æ˜äº†æ¨¡å—ä¾èµ–ã€è„šæœ¬å®šä¹‰å’Œç‰ˆæœ¬åç§°ç­‰å†…å®¹ï¼›
- srcï¼Œæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸ºVue.js3é¡¹ç›®çš„æºç ç›®å½•ï¼Œä¸»è¦å¼€å‘çš„ä»£ç å†…å®¹éƒ½æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œï¼›
- webpack.config.jsï¼Œæ˜¯ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼Œæ˜¯æœ¬æ¬¡Vue.js 3é¡¹ç›®æ ¸å¿ƒå†…å®¹ï¼Œä¸»è¦æ˜¯Webpacké…ç½®ä»£ç ã€‚

æˆ‘ä»¬å°±åœ¨srcçš„æ–‡ä»¶å¤¹é‡Œæ–°å¢ä¸¤ä¸ªVue.js 3çš„æºç å†…å®¹ï¼Œä¸ºåç»­ç¼–è¯‘åšå‡†å¤‡ã€‚è¿™é‡Œæ˜¯ src/app.vue çš„æºç å†…å®¹ï¼š

```xml
<template>
  <div class="demo">
    <div class="text">Count: {{state.count}}</div>
    <button class="btn" @click="onClick">Add</button>
  </div>
</template>

<script setup>
  import { reactive } from 'vue';
  const state = reactive({
    count: 0
  });
  const onClick = () => {
    state.count ++;
  }
</script>

<style>
.demo {
  width: 200px;
  padding: 10px;
  box-shadow: 0px 0px 9px #00000066;
  text-align: center;
}
.demo .text {
  font-size: 28px;
  font-weight: bolder;
  color: #666666;
}
.demo .btn {
  font-size: 20px;
  padding: 0 10px;
  height: 32px;
  min-width: 80px;
  cursor: pointer;
} 
</style>

```

ä»¥ä¸‹æ˜¯ src/index.js é¡¹ç›®çš„å…¥å£æ–‡ä»¶æºç ï¼š

```javascript
import { createApp } from 'vue';
import App from './app.vue';

const app = createApp(App);
app.mount('#app');
```

å½“ä½ å®Œæˆäº†æ­¥éª¤ä¸€çš„é¡¹ç›®ç›®å½•çš„ç»“æ„è®¾è®¡å’Œæºç å‡†å¤‡åï¼Œå°±å¯ä»¥è¿›è¡Œ**ç¬¬äºŒæ­¥ï¼Œå®‰è£…ä¾èµ–çš„npmæ¨¡å—äº†ï¼Œä¹Ÿå°±æ˜¯å®‰è£…é¡¹ç›®æ‰€éœ€è¦çš„npmæ¨¡å—**ã€‚

è¿™é‡Œçš„npmæ¨¡å—åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯æºç æ‰€åœ¨çš„npmæ¨¡å—ï¼Œå¦å¤–ä¸€ç§æ˜¯å¼€å‘è¿‡ç¨‹ä¸­æ‰€éœ€è¦çš„npmæ¨¡å—ã€‚ä¸¤ç§npmæ¨¡å—çš„å®‰è£…æ–¹å¼éƒ½ä¸€æ ·ï¼ŒåŒºåˆ«å°±æ˜¯å®‰è£…å‘½ä»¤è¦å¸¦ä¸Šä¸åŒå‚æ•°ã€‚

ä»¥ä¸‹æ˜¯å®‰è£…æºç ä¾èµ–çš„npmæ¨¡å—ï¼š

```shell
npm i --save vue
```

è¿™é‡Œæºç ä»£ç ä¾èµ–æ˜¯ Vue.js çš„å®˜æ–¹æºç åº“ï¼Œè¿™æ—¶å€™ä¼šè‡ªåŠ¨å¢åŠ ä¾èµ–å£°æ˜åˆ° package.jsonæ–‡ä»¶çš„dependencieså­—æ®µé‡Œã€‚

```json
{
  "dependencies": {
    "vue": "^3.2.37"
  }
}
```

ä»¥ä¸‹æ˜¯å®‰è£…é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ä¾èµ–çš„npmæ¨¡å—ï¼š

```shell
npm i --save-dev css-loader mini-css-extract-plugin vue-loader webpack webpack-cli
```

è¿™é‡Œæ˜¯Webpackç¼–è¯‘Vue.js 3ä»£ç æ‰€éœ€è¦çš„å¼€å‘ä¾èµ–ï¼Œè¿™æ—¶å€™ä¹Ÿä¼šè‡ªåŠ¨æ–°å¢ä¾èµ–å£°æ˜åˆ° package.jsonæ–‡ä»¶çš„devDependencieså­—æ®µé‡Œï¼Œè·Ÿæºç çš„ä¾èµ–åŒºåˆ†å¼€æ¥ã€‚

```json
{
  "devDependencies": {
    "css-loader": "^6.7.1",
    "mini-css-extract-plugin": "^2.6.1",
    "vue-loader": "^17.0.0",
    "webpack": "^5.74.0",
    "webpack-cli": "^4.10.0"
  }
}
```

**å½“ä½ å®Œæˆäº†æ­¥éª¤äºŒçš„é¡¹ç›®ä¾èµ–å®‰è£…åï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿™èŠ‚è¯¾é…ç½®çš„å…³é”®å†…å®¹ï¼Œæ­¥éª¤ä¸‰çš„Webpacké…ç½®ã€‚**åœ¨æ­¤ï¼Œæˆ‘å…ˆå°†å®Œæ•´çš„Webpacké…ç½®å†…å®¹è´´å‡ºæ¥ï¼Œåé¢å†è·Ÿä½ è¯¦ç»†è®²è§£æ¯ä¸ªé…ç½®é¡¹çš„ä½œç”¨ï¼Œä½ å…ˆçœ‹çœ‹å®Œæ•´çš„ä»£ç ï¼š

```javascript
const path = require('path');
const { VueLoaderPlugin } = require('vue-loader/dist/index')
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  mode: 'production',
  entry: {
    'index' : path.join(__dirname, 'src/index.js'),
  },
  output: {
    path: path.join(__dirname, 'dist'),
    filename: '[name].js',
  },
  module: {
    rules: [
      {
        test: /\.vue$/,
        use: [
          'vue-loader'
        ]
      },
      {  
        test: /\.(css|less)$/,
        use: [
          MiniCssExtractPlugin.loader,
          'css-loader',
        ]
      },
    ]
  },
  plugins: [
    new VueLoaderPlugin(), 
    new MiniCssExtractPlugin({
      filename: '[name].css'
    })
  ],
  externals: {
    'vue': 'window.Vue'
  }
}
```

æˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹ä¸€æ­¥æ­¥åˆ†æã€‚

é¦–å…ˆçœ‹modeï¼Œè¿™æ˜¯å£°æ˜äº†Webpackçš„æ‰“åŒ…æ¨¡å¼æ˜¯ç”Ÿäº§çš„ç¼–è¯‘æ¨¡å¼ã€‚è¿™é‡Œä¸€èˆ¬æœ‰ä¸¤ç§é€‰é¡¹ï¼Œç”Ÿäº§ï¼ˆproductionï¼‰å’Œå¼€å‘ï¼ˆdevelopmentï¼‰æ¨¡å¼ï¼Œè¿™ä¸¤ç§æ¨¡å¼æ˜¯ä¼ä¸šæˆ–è€…å¼€æºé¡¹ç›®çº¦å®šä¿—æˆçš„å¿…å¤‡æ¨¡å¼ã€‚

ç¬¬äºŒä¸ªentryï¼Œæ˜¯å£°æ˜äº†Webpackè¦æ‰§è¡Œæ‰“åŒ…æ„å»ºç¼–è¯‘æ—¶å€™ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹ç¼–è¯‘çš„â€œå…¥å£æ–‡ä»¶â€ã€‚è€Œæ¥ä¸‹æ¥çš„outputï¼Œæ˜¯å£°æ˜Webpackç¼–è¯‘çš„å‡ºå£æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘ç»“æœè¦æ”¾åœ¨å“ªä¸ªç›®å½•ä¸‹çš„å“ªä¸ªæ–‡ä»¶é‡Œï¼Œè¿™é‡Œæˆ‘å°±å¯¹åº”åœ°é…ç½®å‡ºå£ç›®å½•é…ç½®åœ¨ distæ–‡ä»¶å¤¹é‡Œã€‚

å†æ¥ç€æ˜¯moduleï¼Œè¿™æ˜¯Webpackæ‰“åŒ…æ„å»ºçš„æ ¸å¿ƒæ‰€åœ¨ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„æ‰“åŒ…éœ€è¦ï¼Œé€‰æ‹©å¯¹åº”çš„æ‰“åŒ…åŠ è½½å™¨ï¼ˆLoaderï¼‰æ¥å¤„ç†æŒ‡å®šçš„æ‰“åŒ…æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©äº†vue-loaderå’Œcss-loader å°±æ˜¯ä¸ºäº†è§£å†³é¡¹ç›®é‡ŒVue.js3æºç å’ŒVue.js3æºç é‡Œçš„CSSä»£ç çš„æ‰“åŒ…ç¼–è¯‘å¤„ç†ã€‚

ç„¶åæ˜¯pluginsï¼Œè¿™ä¸ªæ˜¯Webpackçš„æ’ä»¶é…ç½®ï¼Œä¸»è¦æ˜¯è´¯ç©¿Webpackçš„æ•´ä¸ªæ‰“åŒ…çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™é‡Œå°±éœ€è¦Vueçš„åŠ è½½æ’ä»¶ï¼ˆVueLoaderPluginï¼‰æ¥è¾…åŠ©ä½ åœ¨ç¼–è¯‘Vue.js 3ä»£ç æ—¶å€™åšç›¸å…³çš„ç¼–è¯‘å¤„ç†ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿç”¨äº†CSSçš„åˆ†ç¦»æ’ä»¶ï¼ˆMiniCssExtractPluginï¼‰ï¼Œä¸»è¦æ˜¯åœ¨Webpackæ‰“åŒ…çš„ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ä¸­å°†Vue.js 3æºç é‡Œçš„CSSä»£ç åˆ†ç¦»å‡ºå•ç‹¬çš„CSSæ–‡ä»¶ã€‚

æœ€åæ˜¯externalsï¼Œè¿™ä¸ªæ˜¯å£°æ˜åœ¨Webpackæ‰“åŒ…ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæœ‰å“ªäº›æºç ä¾èµ–çš„npmæ¨¡å—éœ€è¦â€œæ’é™¤æ‰“åŒ…â€å¤„ç†ï¼Œä¹Ÿå°±æ˜¯ä¸åšæ‰“åŒ…æ•´åˆå¤„ç†ã€‚æˆ‘ä»¬è¿™é‡Œå°±æ˜¯å°†Vue.js 3çš„è¿è¡Œæºç è¿›è¡Œâ€œæ’é™¤æ‰“åŒ…â€å¤„ç†ï¼Œè®©ä»£ç æœ€ç»ˆä»£ç ä¾èµ–çš„Vue.js 3è¿è¡Œæ—¶ï¼Œä»window.Vueå…¨å±€å˜é‡è·å–ã€‚è¿™ä¹ˆåšçš„å¥½å¤„å°±æ˜¯é€šè¿‡å‡å°‘æ‰“åŒ…çš„å†…å®¹æ¥ç¼©çŸ­æ‰“åŒ…æ—¶é—´ã€‚

**å®Œæˆä»¥ä¸Šçš„ä¸‰ä¸ªæ­¥éª¤ï¼Œæ¥ä¸‹æ¥å°±è¿›å…¥æœ€ç»ˆæ­¥éª¤äº†ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘è„šæœ¬é…ç½®ã€‚**è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨package.json é‡Œé…ç½®å¥½æ‰§è¡Œè„šæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
{
  "scripts": {
    "build": "webpack -c ./webpack.config.js"
  }
}
```

è¿™ä¸ªç¼–è¯‘è„šæœ¬å¯ä»¥è®©ä½ åœ¨å½“å‰ç›®å½•çš„å‘½ä»¤è¡Œå·¥å…·é‡Œï¼Œç›´æ¥æ‰§è¡Œ npm run build å°±å¯ä»¥è§¦å‘ç¼–è¯‘æ“ä½œã€‚æ‰§è¡Œç¼–è¯‘è„šæœ¬å‘½ä»¤åç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/bb/22/bb44c19fddd5e69aaa758a66190e5922.png?wh=1896x1288)

æ‰§è¡Œå®Œä»£ç åï¼Œä¼šåœ¨å½“å‰é¡¹ç›®çš„ dist ç›®å½•æ–‡ä»¶å¤¹é‡Œï¼Œç”Ÿæˆæœ€ç»ˆçš„Vue.js 3ç¼–è¯‘ç»“æœä»£ç  index.js å’Œ index.css æ–‡ä»¶ã€‚å…¶ä¸­index.jsæ–‡ä»¶å°±æ˜¯æ ¸å¿ƒçš„Vue.js3æºç æ–‡ä»¶çš„ç¼–è¯‘ç»“æœï¼Œç»“æœå¦‚ä¸‹ï¼š

```javascript
(()=>{"use strict";const e=window.Vue,t={class:"demo"},n={class:"text"},c={__name:"app",setup(c){const o=(0,e.reactive)({count:0}),a=()=>{o.count++};return(c,s)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",t,[(0,e.createElementVNode)("div",n,"Count: "+(0,e.toDisplayString)(o.count),1),(0,e.createElementVNode)("button",{class:"btn",onClick:a},"Add")]))}};(0,e.createApp)(c).mount("#app")})();
```

ä½ å¯ä»¥ä»ä¸Šè¿°ä»£ç ä¸­çœ‹åˆ°ï¼Œç”±äºæˆ‘æŠŠvueæ¨¡å—ç»™externalå‡ºæ¥æˆä¸ºwindow.Vueï¼Œè®©ç¼–è¯‘åçš„ä»£ç å˜å¾—æ›´åŠ ç²¾ç®€ã€‚åç»­ä»£ç è¿è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¦åœ¨é¡µé¢åŠ å…¥ Vue.js 3çš„å…¨å±€å˜é‡è„šæœ¬ï¼Œå°±å¯ä»¥æŠŠ node\_modules/vue/dist/vue.runtion.global.js è¿™ä¸ªæ–‡ä»¶å¤åˆ¶å‡ºæ¥å¼•ç”¨äº†ã€‚

å¥½äº†ï¼Œåˆ°è¿™ä¸ªç‚¹ï¼Œæˆ‘ä»¬ç»ˆäºå®ç°äº†æœ€åŸºç¡€çš„Webpackç¼–è¯‘Vue.js 3é¡¹ç›®ã€‚ä¸è¿‡ï¼Œä¸Šè¿°çš„å†…å®¹åªæ˜¯å¼€å§‹ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸Šè¿°é…ç½®è¿‡ç¨‹åªæ˜¯å¤„ç†äº†ä»£ç ç¼–è¯‘ï¼Œä½†æ˜¯å®é™…åšé¡¹ç›®æˆ‘ä»¬éœ€è¦ä¸€è¾¹å†™ä»£ç ä¸€è¾¹å®æ—¶ç¼–è¯‘æºç è°ƒè¯•ï¼Œè¿˜è¦å®æ—¶æ˜¾ç¤ºæ•ˆæœï¼Œè¿™ä¸ä»…ä»…åªåšä¸€æ¬¡æ€§çš„ç¼–è¯‘æ“ä½œï¼Œè€Œæ˜¯è¦åˆ†æˆå¤šç§ç¼–è¯‘æ¨¡å¼ã€‚

é€šå¸¸æˆ‘ä»¬åšä¼ä¸šçº§å‰ç«¯é¡¹ç›®æ—¶å€™ï¼Œæœ€åŸºæœ¬çš„ç¼–è¯‘æ¨¡å¼æœ‰å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥è®²è§£ä¸€ä¸‹Webpackå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„é…ç½®ã€‚

## Webpackå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼

åœ¨è®²è§£å¦‚ä½•é…ç½®Webpackå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£ä¸€ä¸ªæ¦‚å¿µï¼ŒNode.jsè¿›ç¨‹çš„ç¯å¢ƒå˜é‡æ¦‚å¿µã€‚

Node.jsåœ¨æ‰§è¡Œå‘½ä»¤è„šæœ¬æ—¶å€™ï¼Œå¦‚æœå¸¦ä¸Šå‚æ•° NODE\_ENV=productionï¼Œå®Œæ•´çš„è„šæœ¬å‘½ä»¤æ˜¯ NODE\_ENV=production webpack -c ./webpack.config.js ã€‚é‚£ä¹ˆ webpack.config.js æ–‡ä»¶åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥åœ¨ Â process.env æ‹¿åˆ°ç¯å¢ƒå˜é‡ NODE\_ENVï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æ‹¿åˆ° process.env.NODE\_ENV = productionã€‚

è¿™ä¸ªç¯å¢ƒå˜é‡æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå®ƒå¯ä»¥è®©æˆ‘ä»¬è®¾ç½®ä¸åŒç¯å¢ƒå˜é‡æ¥æ‰§è¡ŒåŒä¸€ä»½é…ç½®Webpack.config.js é…ç½®æ–‡ä»¶ï¼Œè§¦å‘ä¸åŒçš„ç¼–è¯‘æ¨¡å¼ã€‚

åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä¸€å¼€å§‹è¦è®²è§£Node.jsè¿›ç¨‹çš„ç¯å¢ƒå˜é‡è¿™ä¸ªæ¦‚å¿µäº†å§ï¼Ÿæˆ‘ä»¬å°±æ˜¯è¦åˆ©ç”¨è¿›ç¨‹ç¯å¢ƒå˜é‡ï¼Œåœ¨webpack.config.jsé…ç½®æ–‡ä»¶é‡Œï¼Œæ ¹æ®ä¸åŒç¯å¢ƒå˜é‡å€¼åˆ¤æ–­å’Œå¤„ç†ä¸åŒæ¨¡å¼çš„ç¼–è¯‘ã€‚

ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è¿›å…¥Webpackçš„å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„è®²è§£äº†ã€‚

### å¼€å‘æ¨¡å¼å¤„ç†

å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼æ˜¯åŸºäºä¸åŒè¿›ç¨‹ç¯å¢ƒå˜é‡åšåŒºåˆ†çš„ï¼Œæ‰€ä»¥ä»–ä»¬çš„æ‰§è¡Œå‘½ä»¤è„šæœ¬å°±ä¸ä¸€æ ·ã€‚è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºä¸Šè¿°çš„package.jsonåšä¸€ä¸‹æ‰§è¡Œè„šæœ¬çš„æ›´æ”¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
{
  "scripts": {
    "dev": "NODE_ENV=development webpack serve -c ./webpack.config.js",
    "build": "NODE_ENV=production webpack -c ./webpack.config.js"
  }
}
```

ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œè¿™é‡Œçš„å¼€å‘æ¨¡å¼ï¼ˆdevï¼‰ï¼Œæ˜¯ä¸æ˜¯å¤šäº†ä¸ª serve çš„å­å‘½ä»¤ï¼Ÿè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦è®²çš„åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œéœ€è¦ä¸€ä¸ªå¼€å‘æœåŠ¡æ¥è®©ç¼–è¯‘çš„ä»£ç èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å®‰è£…Webpackå¼€å‘æœåŠ¡çš„ä¾èµ–æ¨¡å— webpack-dev-server ï¼š

```shell
npm i --save-dev webpack-dev-server
```

ä½ å®‰è£…åï¼Œè¦åœ¨Webpacké…ç½®æ–‡ä»¶æ·»åŠ å¯¹åº”çš„æœåŠ¡é…ç½®ï¼š

```javascript
{
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
  devServer: {
    static: {
      directory: path.join(__dirname),
    },
    compress: true,
    port: 6001,
    hot: false,
    compress: false,
  }
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
}
```

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬è¿˜è¦æ–­ç‚¹åˆ°æºç æŒ‡å®šä½ç½®çš„å†…å®¹ï¼Œè¿™é‡Œå°±éœ€è¦æ–°å¢ä¸€ä¸ªé…ç½®å†…å®¹ï¼Œä¹Ÿå°±æ˜¯sourceMapçš„é…ç½®ï¼Œé…ç½®ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
{
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
  devtool: 'inline-cheap-module-source-map', 
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
}
```

è¿™é‡Œçš„devtoolè¿˜æœ‰å…¶å®ƒçš„é€‰é¡¹ï¼Œè¯¦æƒ…ä½ å¯ä»¥å‚è€ƒä¸‹[å®˜æ–¹æ–‡æ¡£](https://webpack.js.org/configuration/devtool/#devtool)ã€‚

å¦å¤–ï¼Œå¼€å‘è¿‡ç¨‹ä¸­è¿˜éœ€è¦HTMLé¡µé¢æ¥æ‰¿è½½è¿è¡Œç¼–è¯‘åçš„JavaScriptå’ŒCSSä»£ç ã€‚è¿™é‡Œä½ éœ€è¦åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°åˆ›å»ºä¸€ä¸ªHTMLæ–‡ä»¶ index.htmlï¼Œç”¨äºè®¿é—®å¤„ç†ï¼ŒåŒæ—¶è¿˜éœ€è¦è®© webpack-dev-serverçŸ¥é“å®ƒåº”è¯¥è®¿é—®å“ªä¸ªHTMLæ–‡ä»¶çš„é…ç½®å¤„ç†ã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦å…ˆé…ç½®å¥½æœåŠ¡çš„è®¿é—®é¡µé¢ã€‚

é…ç½®æœåŠ¡çš„è®¿é—®é¡µé¢ï¼Œé¦–å…ˆä½ è¦å®‰è£… html-webpack-plugin æ’ä»¶æ¥å¤„ç†HTMLé¡µé¢ï¼š

```xml
npm i --save-dev html-webpack-plugin
```

å†é…ç½® html-webpack-plugin åˆ° webpack.confg.js æ–‡ä»¶ä¸­ï¼š

```javascript
{
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
  plugins: [
    new HtmlWebpackPlugin({
      title: 'Hello Vue',
      filename: 'index.html',
      template:'./index.html',
      minify: false,
      inject: false,
      templateParameters: {
        publicPath: path.join(__dirname),
        js: [
          './node_modules/vue/dist/vue.runtime.global.js',
          './index.js'
        ],
        css: [
          './index.css'
        ],
      },
    })
  ]
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
}
```

ç„¶åå†é…ç½®HTMLæ¨¡æ¿æ–‡ä»¶ï¼š

```xml
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="<%= htmlWebpackPlugin.options.templateParameters.css[0] %>" />
    <script src="<%= htmlWebpackPlugin.options.templateParameters.js[0] %>"></script>
  </head>
  <body>
    <div id="app"></div>
  </body>
  <script src="<%= htmlWebpackPlugin.options.templateParameters.js[1] %>"></script>
</html>
```

è‡³æ­¤ï¼Œä½ å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨å¼€å‘æ¨¡å¼è¿›è¡ŒVue.js 3çš„é¡¹ç›®å¼€å‘äº†ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
npm run dev
```

å†è®¿é—®å‘½ä»¤è¡Œæ‰€æç¤ºçš„è®¿é—®é“¾æ¥ï¼Œä½ å°±å¯ä»¥åœ¨æµè§ˆå™¨é¢„è§ˆåˆ°å®é™…ä»£ç æ¸²æŸ“ç»“æœäº†ã€‚

### ç”Ÿäº§æ¨¡å¼å¤„ç†

å¥½äº†ï¼Œå¤„ç†å®Œå¼€å‘æ¨¡å¼åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¿˜è¦å¤„ç†ç”Ÿäº§æ¨¡å¼ã€‚

ç”Ÿäº§æ¨¡å¼æœ€é‡è¦çš„æ˜¯**ä»£ç ç¼–è¯‘å®Œåè¦è¿›è¡Œå‹ç¼©å¤„ç†ï¼Œå‡å°‘ä½“ç§¯**ã€‚è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å‹ç¼©JavaScriptå’ŒCSSçš„ç»“æœä»£ç ï¼Œä½ å¯ä»¥é€‰æ‹©å®‰è£…Webpackç”Ÿæ€é‡Œçš„å‹ç¼©ä»£ç æ’ä»¶ï¼Œå…·ä½“æœ‰å‹ç¼©JavaScriptä»£ç çš„æ’ä»¶TerserPluginå’Œå‹ç¼©CSSä»£ç çš„æ’ä»¶ CssMinimizerPluginï¼Œè¿™å‡ ä¸ªæ’ä»¶æ˜¯Webpackå®˜æ–¹æ–‡æ¡£çš„æ¨èæ’ä»¶ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å®‰è£…å‘½ä»¤ï¼š

```shell
npm i --save-dev css-minimizer-webpack-plugin terser-webpack-plugin 
```

ç„¶åå†è¿›è¡Œwebpack.config.js æ–‡ä»¶çš„é…ç½®ï¼š

```javascript
{
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
  optimization: {
    minimizer: [
      new TerserPlugin({}),
      new CssMinimizerPlugin({}),
    ],
  },
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
}
```

å¦‚æœè¿™ä¸ªæ—¶å€™ï¼Œä½ è¿˜æƒ³æŠŠHTMLæ¨¡æ¿åœ¨ç”Ÿäº§æ¨¡å¼ä¸­éƒ½æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥è¿™ä¹ˆé…ç½®å¤„ç†ï¼š

```javascript
{
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
  plugins: [
    new HtmlWebpackPlugin({
      title: 'Hello Vue',
      filename: 'index.html',
      template:'./index.html',
      minify: false,
      inject: false,
      templateParameters: {
        publicPath: path.join(__dirname),
        js: [
          'https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js',
          './index.js'
        ],
        css: [
          './index.css'
        ],
      },
    })
  ]
  // å…¶å®ƒ Webpacké…ç½®ä»£ç 
}
```

æ³¨æ„äº†ï¼Œè¿™é‡Œçš„ [https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js](https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js) åªæ˜¯ä¸´æ—¶æ¨¡æ‹ŸCDNçš„Vue.js 3è¿è¡Œæ—¶æ–‡ä»¶ï¼Œå®é™…ä¼ä¸šçº§é¡¹ç›®è¦æ¢æˆå…¬å¸å†…éƒ¨çš„CDNèµ„æºã€‚

å¥½äº†ï¼Œæˆ‘è¿™é‡Œå°±å·²ç»æŠŠWebpackç¼–è¯‘Vue.js3é¡¹ç›®çš„ç”Ÿäº§æ¨¡å¼å’Œå¼€å‘æ¨¡å¼éƒ½é…ç½®å¥½äº†ã€‚ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸¤ç§æ¨¡å¼æœ‰å¾ˆå¤šé…ç½®æ˜¯é‡å çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°æˆ‘ä»¬åˆšåˆšæåˆ°çš„Node.jsè¿›ç¨‹ç¯å¢ƒå˜é‡æ¥åšåŒºåˆ†åˆ¤æ–­å¤„ç†ï¼ŒåŒæ—¶å¯ä»¥åŠ ä¸Šä¸€ä¸ª webpack-merge æ¥è¾…åŠ©å¤„ç†é…ç½®çš„åˆå¹¶ã€‚

æœ€ç»ˆé…ç½®ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
const path = require('path');
const webpackMerge = require('webpack-merge').default;
const { VueLoaderPlugin } = require('vue-loader/dist/index')
const MiniCssExtractPlugin = require('mini-css-extract-plugin');
const CssMinimizerPlugin = require("css-minimizer-webpack-plugin");
const TerserPlugin = require("terser-webpack-plugin");
const HtmlWebpackPlugin = require('html-webpack-plugin');

const baseConfig = {
  mode: process.env.NODE_ENV,
  entry: {
    'index' : path.join(__dirname, 'src/index.js'),
  },
  output: {
    path: path.join(__dirname, 'dist'),
    filename: '[name].js',
  },
  module: {
    rules: [
      {
        test: /\.vue$/,
        use: [
          'vue-loader'
        ]
      },
      {  
        test: /\.(css|less)$/,
        use: [
          MiniCssExtractPlugin.loader,
          'css-loader',
        ]
      },
      { 
        test: /\.(png|svg|jpg|jpeg|gif)$/i,
        type: 'asset/resource',
      }
    ]
  },
  plugins: [
    new VueLoaderPlugin(), 
    new MiniCssExtractPlugin({
      filename: '[name].css'
    }),  
  ],
  externals: {
    'vue': 'window.Vue'
  }
}

if (process.env.NODE_ENV === 'development') {
  config = webpackMerge(baseConfig, {
    devtool: 'inline-cheap-module-source-map', 
    devServer: {
      static: {
        directory: path.join(__dirname),
      },
      port: 6001,
      hot: false,
      compress: false,
    },
    plugins: [
      new HtmlWebpackPlugin({
        title: 'Hello Vue',
        filename: 'index.html',
        template:'./index.html',
        minify: false,
        inject: false,
        templateParameters: {
          publicPath: path.join(__dirname),
          js: [
            './node_modules/vue/dist/vue.runtime.global.js',
            './index.js'
          ],
          css: [
            './index.css'
          ],
        },
      })
    ]
  })
} else {
  config = webpackMerge(baseConfig, {
    optimization: {
      minimizer: [
        new TerserPlugin({}),
        new CssMinimizerPlugin({}),
      ],
    },
    plugins: [
      new HtmlWebpackPlugin({
        title: 'Hello Vue',
        filename: 'index.html',
        template:'./index.html',
        minify: false,
        inject: false,
        templateParameters: {
          publicPath: path.join(__dirname),
          js: [
            'https://unpkg.com/vue@3.2.37/dist/vue.runtime.global.js',
            './index.js'
          ],
          css: [
            './index.css'
          ],
        },
      })
    ]
  })
}

module.exports = config;
```

ä¸Šè¿°çš„é…ç½®å†…å®¹å°±æ˜¯æœ¬æ¬¡Vue.js 3é¡¹ç›®é…ç½®Webpackç¼–è¯‘çš„æ ¸å¿ƒä»£ç ï¼Œæ¶µç›–äº†å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼ã€‚ç°åœ¨ä½ åº”è¯¥å·²ç»æ¯”è¾ƒæ¸…æ™°åœ°äº†è§£åˆ°ä¸€ä¸ªå®Œæ•´çš„Vue.js 3é¡¹ç›®çš„Webpacké…ç½®æµç¨‹äº†ï¼Œæ¥ä¸‹æ¥å°±æ„‰å¿«åœ°è¿›è¡ŒVue.js 3ä»£ç çš„å¼€å‘å§ï¼

## æ€»ç»“

è¿™èŠ‚è¯¾æˆ‘ä»¬è®²äº†è¿™ä¹ˆå¤šå…³äºWebpackçš„Vue.js 3é¡¹ç›®ç¼–è¯‘é…ç½®çš„çŸ¥è¯†ï¼Œæ ¸å¿ƒå±•ç¤ºäº†ä¼ä¸šçº§é¡¹ç›®æ˜¯æ€ä¹ˆåšç¼–è¯‘é…ç½®çš„ã€‚

ç”¨Webpackæ­å»ºVue.js 3é¡¹ç›®ï¼Œä¸»è¦åŒ…æ‹¬é…ç½®é¡¹ç›®ç›®å½•ã€æ ¹æ®è¦æ±‚å®‰è£…ä¾èµ–ï¼ˆPluginå’ŒLoaderï¼‰ã€å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„è®¾ç½®è¿™å‡ ä¸ªæ­¥éª¤ï¼Œå…¶ä¸­ä½ è¦ç‰¹åˆ«æ³¨æ„å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„é…ç½®å¤ç”¨å’Œé…ç½®éš”ç¦»ã€‚

æˆ‘ä»¬å‰é¢ä¹Ÿè¯´äº†ï¼Œæˆ‘ä»¬é€‰æ‹©Webpackï¼Œæ˜¯ä¸ºäº†é¢å‘ä¼ä¸šçº§é¡¹ç›®çš„å­¦ä¹ ç›®æ ‡è€ƒè™‘ã€‚ç›®å‰æˆ‘æ‰€æ¥è§¦åˆ°çš„å¤§å‚ï¼Œä¸»æµçš„æ„å»ºé…ç½®è¿˜æ˜¯Webpackï¼Œé™¤äº†ç”Ÿæ€ä¸°å¯Œçš„åŸå› å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹æ˜¯ä¼ä¸šä¸­å¾ˆå¤šå†å²é¡¹ç›®éƒ½æ˜¯ç”¨Webpackè¿›è¡Œæ„å»ºçš„ï¼Œå½¢æˆäº†ä¸€ä¸ªæ¯”è¾ƒç¨³å®šçš„ä»£ç ä¼ æ‰¿ã€‚ä½†æ˜¯ï¼Œä½ ä¹Ÿä¸èƒ½å› ä¸ºè¿™æ ·å°±å¿½ç•¥äº†Viteè¿™ä¸ªVue.js 3å®˜æ–¹çš„â€œäº²å„¿å­â€æŠ€æœ¯å·¥å…·ã€‚

ä½ éœ€è¦çš„æ˜¯ä¸¾ä¸€åä¸‰ï¼Œç”¨Webpackç”Ÿäº§å’Œå¼€å‘æ¨¡å¼é…ç½®ï¼Œç±»æ¯”å­¦ä¹ Viteç›¸å…³çš„æŠ€æœ¯çŸ¥è¯†ç‚¹ï¼Œå› ä¸ºåŒç±»å‹çš„æŠ€æœ¯åŸºæœ¬éƒ½æ˜¯ç›¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œæœ¬èŠ‚è¯¾æåˆ°ç”Ÿäº§å’Œå¼€å‘æ¨¡å¼ï¼Œå°±ä¸æ˜¯Webpackç‹¬æœ‰çš„æ¦‚å¿µï¼Œæ˜¯å¤§éƒ¨åˆ†æ„å»ºå·¥å…·éƒ½æœ‰çš„æ¦‚å¿µï¼ŒViteä¹Ÿæœ‰ç›¸å…³æ¦‚å¿µã€‚ä¸ä»…ä»…æ˜¯è¿™èŠ‚è¯¾ï¼Œæˆ‘å¸Œæœ›ä½ åç»­æŠ€æœ¯å­¦ä¹ éƒ½è¦å­¦ä¼šä¸¾ä¸€åä¸‰ï¼Œäº’ç›¸æ¯”å¯¹ã€‚

## æ€è€ƒé¢˜

Webpackä»è¯ç”Ÿåˆ°ç°åœ¨è¿™ä¹ˆä¹…ï¼Œæ ¸å¿ƒä¹Ÿè¿­ä»£äº†å¾ˆå¤šå¤§ç‰ˆæœ¬ï¼Œé‚£ä¸åŒç‰ˆæœ¬åœ¨æ‰“åŒ…æ„å»ºä¸Šæœ‰ä»€ä¹ˆå·®å¼‚å—ï¼Ÿ

æœŸå¾…ä½ çš„åˆ†äº«ã€‚å¦‚æœä»Šå¤©çš„è¯¾ç¨‹è®©ä½ æœ‰æ‰€æ”¶è·ï¼Œæ¬¢è¿ä½ æŠŠæ–‡ç« åˆ†äº«ç»™æœ‰éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼

### [å®Œæ•´çš„ä»£ç åœ¨è¿™é‡Œ](https://github.com/FE-star/vue3-course/tree/main/chapter/02)
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>Geek_b640fe</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>â€˜NODE_ENVâ€™ ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶
windows ç¯å¢ƒå¿…é¡»å®‰è£… cross-env æ¨¡å—ï¼Œå¹¶åœ¨å¯åŠ¨å‘½ä»¤å‰å®‰è£…
npm i -D cross-env

    &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;cross-env NODE_ENV=development webpack serve -c .&#47;webpack.config.js&quot;,
        &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack -c .&#47;webpack.config.js&quot;
    },</p>2022-12-07</li><br/><li><span>é£å¤ªå¤§å¤ªå¤§</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Webpack 3 4 5æ¯ä¸ªç‰ˆæœ¬å·®å¼‚è¿˜æŒºå¤§çš„ï¼Œpluginå˜æ›´ï¼Œè¯­æ³•å˜æ›´ï¼Œå¯¹ç¼“å­˜çš„ä½¿ç”¨ç¨‹åº¦ï¼Œæ‰“åŒ…æ„å»ºåŠ é€Ÿé‚£ä¸ªç‰ˆæœ¬çš„æ–¹æ¡ˆéƒ½ä¸åŒï¼Œç‰ˆæœ¬è¶Šé«˜è¶Šæ–¹ä¾¿</p>2022-11-23</li><br/><li><span>ZR-rd</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œå¤§å‚ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ CDN æ¥å¯¼å…¥ Vue ç­‰ç¬¬ä¸‰æ–¹åº“çš„å—ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ç›´æ¥æ‰“åŒ…åˆ° bundle ä¸­å‘¢ï¼Ÿè¿™æ ·æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹å‘¢ï¼Ÿ</p>2022-12-01</li><br/><li><span>ä¸«å¤´</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<p>webpack.default.js
webpack.dev.js
webpack.prod.js
ä¸åŒç¯å¢ƒç‹¬ç«‹æ–‡ä»¶ï¼Œä¼šä¸ä¼šæ›´æ¸…æ™°äº›</p>2022-12-05</li><br/><li><span>å¥ç‰Œå“¥.</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>devé…ç½®çš„devServeræŠŠstatic.directoryä¿®æ”¹æˆ path.join(__dirname, &#39;public&#39;)ï¼Œæœ¬åœ°node_modulesçš„vueè¿è¡Œæ—¶æ–‡ä»¶å°±åŠ è½½ä¸æˆåŠŸäº†ï¼Œindex.htmlå·²æ”¾åœ¨publicæ–‡ä»¶å¤¹é‡Œã€‚è¯·é—®ä¸‹è¿™ä¸ªæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>2023-01-16</li><br/><li><span>å®šå®‡</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æƒ³å•ä¸€ä¸‹ï¼Œå¦‚æœåœ¨webpackè¼¸å‡ºæª”æ¡ˆæœ‰åŠ hashå€¼çš„è©±
ex:
```
output: {
      path: path.join(__dirname, &#39;..&#47;dist&#39;),
      publicPath: &#39;&#47;&#39;,
      filename: &#39;[name].[hash].js&#39;,
}
```

åœ¨HtmlWebpackPluginé‚£é‚Šè¦æ€éº¼è¨­ç½®å‘¢ï¼Ÿ</p>2022-12-22</li><br/><li><span>æˆ‘åªæƒ³è¦ç®€å•çš„å°å¹¸ç¦ğŸ‘£</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å®Œæ•´ä»£ç åœ°å€æ‰“ä¸å¼€ï¼Œèƒ½æ¢ä¸€ä¸ªåˆ«çš„åœ°å€å—</p>2022-12-20</li><br/><li><span>é˜¿é˜³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>åœ¨ test: &#47;\.(css|less)$&#47;ä¸­ï¼Œlessæ–‡ä»¶ä¹Ÿèƒ½ç›´æ¥ç”¨css-loaderè¿›è¡Œå¤„ç†å˜›ï¼Ÿä¸æ˜¯éœ€è¦ç”¨less-loaderè¿›è¡Œå¤„ç†ä¹ˆï¼Ÿ</p>2022-12-04</li><br/><li><span>é˜¿é˜³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>windowsç¯å¢ƒä¸‹ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡NODE_ENVéœ€è¦ç”¨åˆ°cross-envè¿™ä¸ªåŒ…å§ï¼Ÿ</p>2022-12-04</li><br/><li><span>è«æ¯”æ–¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<p>è¿˜æœ‰è€å¸ˆï¼Œæˆ‘æƒ³è¡¥å……ä¸€ç‚¹ç‚¹ï¼Œåœ¨line 50 ifè¯­å¥å‰ï¼Œå¯ä»¥ç”³æ˜configï¼Œlet configï¼›</p>2022-12-03</li><br/><li><span>ä¸æ˜¯ç‰›ä»”ä½†å¾ˆå¿™á¥¬ğŸ™‚á­„</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¿™ä¸ªè¯¾æ˜¯çº¯éŸ³é¢‘è¯¾ï¼Ÿæ²¡æœ‰è§†é¢‘ï¼Ÿ</p>2022-11-28</li><br/><li><span>joker</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Viteä»¥åä¼šè®²å—</p>2022-11-23</li><br/><li><span>WGHä¸¶</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ¨èèµ„æ–™ï¼šã€Šwebpackå®æˆ˜ï¼šå…¥é—¨ã€è¿›é˜¶ä¸è°ƒä¼˜ã€‹ã€‚</p>2022-11-25</li><br/><li><span>hao-kuai</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>åœ¨ä½¿ç”¨ä½“éªŒä¸Šæ¥è¯´ï¼šviteä¹‹äºwebpackå°±åƒwebstormä¹‹äºvscode</p>2025-01-06</li><br/><li><span>ifelse</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>å­¦ä¹ æ‰“å¡</p>2024-08-29</li><br/>
</ul>