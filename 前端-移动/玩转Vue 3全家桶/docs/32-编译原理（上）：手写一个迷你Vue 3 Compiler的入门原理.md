ä½ å¥½ï¼Œæˆ‘æ˜¯å¤§åœ£ã€‚

å‰é¢æˆ‘ä»¬ç”¨äº†å››è®²ï¼Œå­¦ä¹ äº†Vueåœ¨æµè§ˆå™¨ä¸­æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œä½ å¯ä»¥å‚è€ƒä¸Šä¸€è®²ç»“å°¾çš„Vueæ‰§è¡Œå…¨æ™¯å›¾æ¥å›é¡¾ä¸€ä¸‹ã€‚åœ¨Vueä¸­ï¼Œç»„ä»¶éƒ½æ˜¯ä»¥è™šæ‹ŸDOMçš„å½¢å¼å­˜åœ¨ï¼ŒåŠ è½½å®Œæ¯•ä¹‹åæ³¨å†Œeffectå‡½æ•°ã€‚è¿™æ ·ç»„ä»¶å†…éƒ¨çš„æ•°æ®å˜åŒ–ä¹‹åï¼Œç”¨Vueçš„å“åº”å¼æœºåˆ¶åšåˆ°äº†é€šçŸ¥ç»„ä»¶æ›´æ–°ï¼Œå†…éƒ¨åˆ™ä½¿ç”¨patchå‡½æ•°å®ç°äº†è™šæ‹ŸDOMçš„æ›´æ–°ï¼Œä¸­é—´æˆ‘ä»¬ä¹Ÿå­¦ä¹ äº†ä½è¿ç®—ã€æœ€é•¿é€’å¢å­åºåˆ—ç­‰ç®—æ³•ã€‚

è¿™æ—¶å€™ä½ è‚¯å®šè¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œé‚£å°±æ˜¯è™šæ‹ŸDOMæ˜¯ä»å“ªæ¥çš„ï¼Ÿæˆ‘ä»¬æ˜æ˜å†™çš„æ˜¯templateå’ŒJSXï¼Œè¿™ä¹Ÿæ˜¯åƒé€Vueæºç æœ€åä¸€ä¸ªéš¾ç‚¹ï¼šVueä¸­çš„Compilerã€‚

ä¸‹å›¾å°±æ˜¯Vueæ ¸å¿ƒæ¨¡å—ä¾èµ–å…³ç³»å›¾ï¼Œreactivityå’Œruntimeæˆ‘ä»¬å·²ç»å‰–æå®Œæ¯•ï¼Œè¿·ä½ ç‰ˆæœ¬çš„ä»£ç ä½ å¯ä»¥åœ¨[GitHub](https://github.com/shengxinjing/weiyouyi)ä¸­çœ‹åˆ°ã€‚ä»Šå¤©å¼€å§‹æˆ‘å°†ç”¨ä¸‰è®²çš„å†…å®¹ï¼Œç»™ä½ è¯¦ç»†è®²è§£ä¸€ä¸‹Vueåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­åšäº†ä»€ä¹ˆã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/59/15/59f10ba0b6a6ed5fb956ca05016fde15.jpg?wh=1888x982)

ç¼–è¯‘åŸç†ä¹Ÿå±äºè®¡ç®—æœºä¸­çš„ä¸€ä¸ªé‡è¦å­¦ç§‘ï¼ŒVueçš„compileræ˜¯åœ¨Vueåœºæ™¯ä¸‹çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å®ç°templateåˆ°renderå‡½æ•°çš„è½¬å˜ã€‚

æˆ‘ä»¬ç¬¬ä¸€æ­¥éœ€è¦å…ˆæŒæ¡ç¼–è¯‘åŸç†çš„åŸºæœ¬æ¦‚å¿µã€‚Vueå®˜æ–¹æä¾›äº†æ¨¡æ¿ç¼–è¯‘çš„[åœ¨çº¿æ¼”ç¤º](https://vue-next-template-explorer.netlify.app/#%7B%22src%22%3A%22%3Cdiv%20id%3D%5C%22app%5C%22%3E%5Cn%20%20%20%20%3Cdiv%20%40click%3D%5C%22%28%29%3D%3Econsole.log%28xx%29%5C%22%20%3Aid%3D%5C%22name%5C%22%3E%7B%7Bname%7D%7D%3C%2Fdiv%3E%5Cn%20%20%20%20%3Ch1%20%3Aname%3D%5C%22title%5C%22%3E%E7%8E%A9%E8%BD%ACvue3%3C%2Fh1%3E%5Cn%20%20%20%20%3Cp%20%3E%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%3C%2Fp%3E%5Cn%3C%2Fdiv%3E%5Cn%22%2C%22ssr%22%3Afalse%2C%22options%22%3A%7B%22mode%22%3A%22module%22%2C%22filename%22%3A%22Foo.vue%22%2C%22prefixIdentifiers%22%3Afalse%2C%22hoistStatic%22%3Atrue%2C%22cacheHandlers%22%3Atrue%2C%22scopeId%22%3Anull%2C%22inline%22%3Afalse%2C%22ssrCssVars%22%3A%22%7B%20color%20%7D%22%2C%22compatConfig%22%3A%7B%22MODE%22%3A3%7D%2C%22whitespace%22%3A%22condense%22%2C%22bindingMetadata%22%3A%7B%22TestComponent%22%3A%22setup-const%22%2C%22setupRef%22%3A%22setup-ref%22%2C%22setupConst%22%3A%22setup-const%22%2C%22setupLet%22%3A%22setup-let%22%2C%22setupMaybeRef%22%3A%22setup-maybe-ref%22%2C%22setupProp%22%3A%22props%22%2C%22vMySetupDir%22%3A%22setup-const%22%7D%2C%22optimizeBindings%22%3Afalse%7D%7D)ã€‚ä¸‹å›¾å·¦ä¾§ä»£ç æ˜¯æˆ‘ä»¬å†™çš„templateï¼Œå³ä¾§ä»£ç å°±æ˜¯compileræ¨¡å—è§£æˆçš„renderå‡½æ•°ï¼Œæˆ‘ä»¬ä»Šå¤©çš„ä»»åŠ¡å°±æ˜¯èƒ½å¤Ÿå®ç°ä¸€ä¸ªè¿·ä½ çš„compilerã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ6ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/18/88/42/176ddd62.jpg" width="30px"><span>ç¥ç˜¦</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>â€œtokenizer çš„è¿·ä½ å®ç°â€è¿™ä¸ªåœ°æ–¹â€œæŠŠæ¨¡æ¿ä¸­çš„â€è¿™å‡ ä¸ªå­—åé¢ä¸€å¤§æ®µç©ºç™½å‘¢ï¼Œä½ ä»¬é‚£è¾¹èƒ½çœ‹åˆ°å—ï¼Ÿæ£€æŸ¥ä¸‹å‘¢</div>2022-01-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/aa/a8/6ca767ca.jpg" width="30px"><span>openbilibili</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>templateä¸­çš„pæ ‡ç­¾ ä¸èƒ½æœ‰ç©ºæ ¼ ä¸ç„¶è§£æä¸äº†</div>2022-01-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/65/25/c6de04bc.jpg" width="30px"><span>æ–œæœˆæµ®äº‘</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>hoistedå¼€å¤´çš„å˜é‡ç”¨äºé™æ€èŠ‚ç‚¹æå‡ï¼Œè¯´ç™½äº†å°±æ˜¯åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åªéœ€è¦è¿›è¡Œä¸€æ¬¡åˆ›å»ºï¼Œæœ‰æ•ˆèŠ‚çœä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚

è¯è¯´æœ€åçš„generateä»£ç æ˜æ˜¾ä¸å¯¹å•Šï¼ŒcreateVnodeçš„åæ‹¬å·é˜”æ­ªäº†å“¦~ğŸ™‚</div>2022-01-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/25/91/09/6f0b987a.jpg" width="30px"><span>é™ˆåšæ³“</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>const [key, val] = token.val.replace(&#39;=&#39;,&#39;~&#39;).split(&#39;~&#39;)  
æ˜¯ä¸æ˜¯å¯ä»¥å†™æˆ
const [key, val] = token.val.split(&#39;=&#39;)  

å¤‡æ³¨é‡Œ &#47;&#47; trnsformText    ä¼°è®¡æ˜¯æ‹¼é”™äº† </div>2022-05-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2c/e6/eb/58da8565.jpg" width="30px"><span>Blueberry</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>templateè¯­æ³•éœ€è¦ç»è¿‡è¿™ä¹ˆä¸€ç³»åˆ—çš„ç¼–è¯‘ï¼Œé‚£hå‡½æ•°å‘¢ï¼Œæ˜¯ç»è¿‡ä»€ä¹ˆå˜æˆäº†æœ€åçš„renderè¯­æ³•?</div>2022-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/7c/b8/b4e0dfb0.jpg" width="30px"><span>åå­—å¥½é•¿çš„å¤§æ—</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>PatchFlags è¿™ä¸ªå˜é‡æ²¡æœ‰ç»™ï¼Ÿï¼Ÿ</div>2022-02-04</li><br/>
</ul>