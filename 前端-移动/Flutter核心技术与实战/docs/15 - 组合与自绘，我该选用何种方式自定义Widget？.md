ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚

åœ¨ä¸Šä¸€æ¬¡åˆ†äº«ä¸­ï¼Œæˆ‘ä»¬è®¤è¯†äº†Flutterä¸­æœ€å¸¸ç”¨ä¹Ÿæœ€ç»å…¸çš„å¸ƒå±€Widgetï¼Œå³å•å­å®¹å™¨Containerã€å¤šå­å®¹å™¨Row/Columnï¼Œä»¥åŠå±‚å å®¹å™¨Stackä¸Positionedï¼Œä¹Ÿå­¦ä¹ äº†è¿™äº›ä¸åŒå®¹å™¨ä¹‹é—´çš„æ‘†æ”¾å­Widgetçš„å¸ƒå±€è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒä»¬ï¼Œæ¥å®ç°å­æ§ä»¶çš„å¯¹é½ã€åµŒå¥—ã€å±‚å ç­‰ï¼Œå®ƒä»¬ä¹Ÿæ˜¯æ„å»ºä¸€ä¸ªç•Œé¢ç²¾ç¾çš„Appæ‰€å¿…é¡»çš„å¸ƒå±€æ¦‚å¿µã€‚

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸é‡åˆ°ä¸€äº›å¤æ‚çš„UIéœ€æ±‚ï¼Œå¾€å¾€æ— æ³•é€šè¿‡ä½¿ç”¨Flutterçš„åŸºæœ¬Widgetï¼Œé€šè¿‡è®¾ç½®å…¶å±æ€§å‚æ•°æ¥æ»¡è¶³ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦é’ˆå¯¹ç‰¹å®šçš„åœºæ™¯è‡ªå®šä¹‰Widgetäº†ã€‚

åœ¨Flutterä¸­ï¼Œè‡ªå®šä¹‰Widgetä¸å…¶ä»–å¹³å°ç±»ä¼¼ï¼šå¯ä»¥ä½¿ç”¨åŸºæœ¬Widgetç»„è£…æˆä¸€ä¸ªé«˜çº§åˆ«çš„Widgetï¼Œä¹Ÿå¯ä»¥è‡ªå·±åœ¨ç”»æ¿ä¸Šæ ¹æ®ç‰¹æ®Šéœ€æ±‚æ¥ç”»ç•Œé¢ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šåˆ†åˆ«ä¸ä½ ä»‹ç»ç»„åˆå’Œè‡ªç»˜è¿™ä¸¤ç§è‡ªå®šä¹‰Widgetçš„æ–¹å¼ã€‚

## ç»„è£…

ä½¿ç”¨ç»„åˆçš„æ–¹å¼è‡ªå®šä¹‰Widgetï¼Œå³é€šè¿‡æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„å¸ƒå±€æ–¹å¼ï¼Œæ‘†æ”¾é¡¹ç›®æ‰€éœ€è¦çš„åŸºç¡€Widgetï¼Œå¹¶åœ¨æ§ä»¶å†…éƒ¨è®¾ç½®è¿™äº›åŸºç¡€Widgetçš„æ ·å¼ï¼Œä»è€Œç»„åˆæˆä¸€ä¸ªæ›´é«˜çº§çš„æ§ä»¶ã€‚

è¿™ç§æ–¹å¼ï¼Œå¯¹å¤–æš´éœ²çš„æ¥å£æ¯”è¾ƒå°‘ï¼Œå‡å°‘äº†ä¸Šå±‚ä½¿ç”¨æˆæœ¬ï¼Œä½†ä¹Ÿå› æ­¤å¢å¼ºäº†æ§ä»¶çš„å¤ç”¨æ€§ã€‚åœ¨Flutterä¸­ï¼Œ**ç»„åˆçš„æ€æƒ³å§‹ç»ˆè´¯ç©¿åœ¨æ¡†æ¶è®¾è®¡ä¹‹ä¸­**ï¼Œè¿™ä¹Ÿæ˜¯Flutteræä¾›äº†å¦‚æ­¤ä¸°å¯Œçš„æ§ä»¶åº“çš„åŸå› ä¹‹ä¸€ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132" width="30px"><span>å´å°å®‰</span> ğŸ‘ï¼ˆ16ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¤§å‰ç«¯çš„ç•Œé¢ä¸æ˜¯æå€¡å°½é‡å‡å°‘å›¾å±‚çš„æ•°é‡ï¼Ÿè¿™æ ·ä¸€ç›´åµŒå¥—ä¸‹å»å›¾å±‚ä¼¼ä¹å¤ªå¤šï¼Œè¿™äº›å¸ƒå±€çš„æ§ä»¶æ˜¯ä¸æ˜¯ä¸ç®—å›¾å±‚ï¼Ÿä¸å‚ä¸æ¸²æŸ“ï¼Ÿ</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg" width="30px"><span>å’Œå°èƒ–</span> ğŸ‘ï¼ˆ12ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>å…³äºç¬¬äºŒé“æ€è€ƒé¢˜ç›®çš„è§£å†³æ–¹æ³•ï¼Œè¯·è€å¸ˆçœ‹ä¸€ä¸‹ï¼š

&#47;&#47;ç»˜åˆ¶è‡ªå®šä¹‰viewï¼Œå…¶ä¸­ç”»ç¬” paint ï¼Œç”»å¸ƒ canvasï¼Œè€Œ CustomPainter è´Ÿè´£å…·ä½“çš„ç»˜åˆ¶é€»è¾‘å¤„ç†
class WheelPainter extends CustomPainter {
  List&lt;double&gt; _list;
  List&lt;Color&gt; _listColor;
  double _total; &#47;&#47;æ€»ä»½æ•°

  WheelPainter(this._list, this._listColor);

  @override
  void paint(Canvas canvas, Size size) {
    double wheelSize = min(size.width, size.height) &#47; 2; &#47;&#47;é¥¼å›¾çš„å°ºå¯¸
    &#47;&#47;ç”¨ä¸€ä¸ªçŸ©å½¢æ¡†æ¥åŒ…è£¹é¥¼å›¾
    Rect boundingRect = Rect.fromCircle(
        center: Offset(wheelSize, wheelSize), radius: wheelSize);
    &#47;&#47;æ±‚å‡ºæ•°ç»„ä¸­æ‰€æœ‰æ•°å€¼çš„å’Œ
    _total = _list.reduce((value, element) =&gt; value + element);
    print(&quot;æ€»ä»½é¢æ˜¯ï¼š$_total&quot;);
    &#47;&#47;æ±‚å‡ºæ¯ä¸€ä»½æ‰€å çš„è§’åº¦
    double radius = (2 * pi) &#47; _total; &#47;&#47;æ±‚å‡ºæ¯ä¸€ä»½çš„å¼§åº¦
    print(&quot;æ€»è§’åº¦æ˜¯${2 * pi},æ¯ä»½é¢è§’åº¦æ˜¯:$radius&quot;);
    &#47;&#47;å¾ªç¯ç»˜åˆ¶æ¯ä¸€ä»½æ‰‡å½¢
    for (int i = 0; i &lt; _list.length; i++) {
      &#47;&#47; æ±‚å‡ºåˆå§‹è§’åº¦
      double startRadius;
      if (i == 0) {
        startRadius = 0;
      } else {
        startRadius =
            _list.sublist(0, i).reduce((value, element) =&gt; value + element) *
                radius;
      }
      &#47;&#47;æ±‚å‡ºæ»‘è¿‡è§’åº¦ï¼Œå³å½“å‰ä»½é¢ä¹˜ä»¥æ¯ä»½æ‰€å è§’åº¦
      double sweepRadius = radius * _list[i];
      print(&quot;èµ·å§‹è§’åº¦ï¼š$startRadius,åˆ’è¿‡è§’åº¦ï¼š$sweepRadius&quot;);

      &#47;&#47;&#47; ç»˜åˆ¶æ‰‡å½¢ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç»˜åˆ¶çŸ©å½¢æ‰€åœ¨çš„çŸ©å½¢ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯èµ·å§‹è§’åº¦ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯çŸ©å½¢åˆ’è¿‡çš„è§’åº¦
      &#47;&#47;&#47; ç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨æ‰‡å½¢æ˜¯å¦æ˜¯å®å¿ƒï¼Œå¦åˆ™å°±åªæ˜¯ç»˜åˆ¶è¾¹æ¡†æ˜¯ç©ºå¿ƒçš„ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯ç”»ç¬”
      canvas.drawArc(boundingRect, startRadius, sweepRadius, true,
          getPaintByColor(_listColor[i]));
    }
  }

  &#47;&#47;æ ¹æ®ä¸åŒçš„ color æ¥è·å–å¯¹åº”çš„ç”»ç¬”
  Paint getPaintByColor(Color color) {
    Paint paint = Paint();
    paint.color = color;
    return paint;
  }

  &#47;&#47;åˆ¤æ–­æ˜¯å¦éœ€è¦é‡ç»˜
  @override
  bool shouldRepaint(CustomPainter oldDelegate) =&gt; oldDelegate != this;
}

Padding getCustomPaint() {
  return Padding(
      padding: EdgeInsets.all(10),
      child: CustomPaint(
        size: Size(200, 200), 
        painter: WheelPainter(
            List.of([1.0, 2.0, 3.0, 4.0, 20]),
            List.of([
              Colors.red,
              Colors.blue,
              Colors.green,
              Colors.amber,
              Colors.black54
            ])),
      ));
}</div>2019-09-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/69/10/0c6f68d7.jpg" width="30px"><span>wanggw</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>åŠŸèƒ½ç®—æ˜¯å·®ä¸å¤šå®ç°äº†ï¼Œä½†æ˜¯è¿˜å­˜åœ¨ä¸€ä¸ªæ ¸å¿ƒçš„é—®é¢˜ä¸çŸ¥é“åº”è¯¥è§£å†³ï¼Œå°±æ˜¯æˆ‘æ€ä¹ˆè·å–Textå±•ç¤ºæ–‡æœ¬çš„è¡Œæ•°ï¼Œæˆ‘éœ€è¦è¡Œæ•°æ‰èƒ½æ§åˆ¶ more æŒ‰é’®çš„æ˜¾ç¤ºå’Œéšè—ï¼Œå¦åˆ™æˆ‘é»˜è®¤è¶…è¿‡2è¡Œæ˜¾ç¤º more æŒ‰é’®ï¼Œå½“æ–‡æœ¬åªæœ‰1è¡Œçš„æ—¶å€™ï¼Œmore æŒ‰é’®ä¹Ÿæ˜¾ç¤ºäº†ğŸ˜‚ã€‚æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚è¿™æ˜¯æˆ‘å†™çš„ä¾‹å­ï¼šhttps:&#47;&#47;github.com&#47;wanggw911&#47;flutter_hello&#47;blob&#47;master&#47;lib&#47;widget&#47;Listview02.dart</div>2019-08-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/18/7cbc34eb.jpg" width="30px"><span>davidzhou</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æˆ‘çš„æ€è·¯è¿™æ ·ï¼Œå…ˆè‡ªå®šä¹‰ä¸€ä¸ªstatefulwidgetï¼Œé‡Œé¢ç”¨è¿‡ä¸€ä¸ªå˜é‡æ§åˆ¶ä¸¤ä¸ªtextï¼Œå› ä¸ºtextæ˜¯statelesswidgetï¼Œæ— æ³•åŠ¨æ€å»åˆ·æ–°ï¼Œä¸€ä¸ªwidgetè®¾ç½®Maxlines=2ï¼Œå¦ä¸€ä¸ªä¸è®¾ç½®ï¼Œmoreæ˜¯ä¸€ä¸ªfloatbuttonï¼Œç‚¹å‡»äº‹ä»¶é‡Œé¢å®ç°setstateæ”¹å˜å…ˆå‰å®šä¹‰çš„å˜é‡å°±è¡Œäº†</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/31/c6/238570f9.jpg" width="30px"><span>ç¸ä¸¶</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼ŒFlutterä»£ç è§„èŒƒæ–¹é¢ä¼šè®²å—ï¼Œå¦‚æœä»£ç å…¨å†™åœ¨ä¸€ä¸ªDartæ–‡ä»¶é‡Œï¼Œæœ‰ç‚¹å¤ªå†—æ‚äº†ï¼Œè¿˜æ˜¯è¯´éµå¾ªSRPï¼Œä¸€ä¸ªç±»ä¸€ä¸ªDartæ–‡ä»¶ï¼Ÿ</div>2019-08-02</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132" width="30px"><span>Geek_e7jq8k</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è¯·é—®ä¸‹ï¼Œå†æ··åˆå¼€å‘çš„åœºæ™¯ä¸‹,moduleç±»å‹çš„å¯¹äºroot Widgetï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨MaterialAppæˆ–è€…CupertinoAppäºŒé€‰ä¸€ä¹ˆï¼Ÿå¦‚æœä¸ä½¿ç”¨è¿™ä¸¤ä¸ªåŸºç¡€çš„widgetAppï¼Œé™¤äº†ä¸èƒ½äº«å—å°è£…å¥½çš„Themeã€å°è£…å¥½çš„Widgetç»„ä»¶è¿™äº›ä¾¿åˆ©å¤–ï¼Œæ˜¯å¦æœ‰æ— æ³•å®ç°çš„åŸºç¡€åŠŸèƒ½ï¼ˆæ¯”å¦‚åœ¨iOSä¸­çš„å³æ»‘è¿”å›ç­‰ç­‰ï¼‰ï¼Ÿ åŒæ—¶æƒ³é—®ä¸‹ç›®å‰å›½å†…å¾ˆå¤šAppåœ¨å®‰å“ä¸Šçš„è¡¨ç°éƒ½ä¸æ˜¯Materialé£æ ¼çš„ï¼ŒåŒæ—¶ä¹Ÿä¸å®Œå…¨æ˜¯Cupertinoé£æ ¼ï¼Œæ‰€ä»¥åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸»æµçš„åšæ³•æ˜¯ä½¿ç”¨ MaterialApp&#47;CupertinoApp&#47;å®Œå…¨è‡ªå®šä¹‰ è¿™ä¸‰ç§çš„å“ªä¸€ç§å‘¢ï¼Ÿä»¥åŠåœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„æ˜¯å¦æœ‰ä»€ä¹ˆå¼Šç«¯å‘¢ï¼Ÿ</div>2019-10-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8b/5f/ecf0e687.jpg" width="30px"><span>Neil é™ˆè£</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆï¼Œæˆ‘æƒ³ç»˜åˆ¶ä¸€ä¸ªå›´æ£‹æ¸¸æˆçš„æ£‹ç›˜ï¼Œå¹¶åœ¨ä¸Šé¢å®ç°è½å­ã€æå­ç­‰å„ç§æ“ä½œã€‚å¤§è‡´ä¼°è®¡äº†ä¸€ä¸‹ï¼Œå¦‚æœç”¨ç»„åˆçš„æ–¹æ¡ˆï¼Œç®—ä¸Šæ£‹å­ï¼Œæ£‹ç›˜ï¼Œå„ç§çº¿ï¼Œè‡³å°‘ä¼šæœ‰æ¥è¿‘400ä¸ª widget. è¿™ç§æƒ…å†µä¸‹æ€§èƒ½ä¼šæœ‰é—®é¢˜å—ï¼Ÿæˆ‘æƒ³çŸ¥é“ widget æ•°é‡ä¸€èˆ¬åœ¨å¤šå°‘ä»¥å†…é‡‡ç”¨ç»„åˆä¸ä¼šå‡ºç°æ€§èƒ½é—®é¢˜ï¼Œè¿™ä¸ªæœ‰æ²¡æœ‰ä¸€ä¸ªæŒ‡å¯¼æ€§çš„æœ€ä½³å®è·µï¼Ÿå¦‚æœä¸€ä¸Šæ¥å°±ç”¨è‡ªç»˜çš„æ–¹æ¡ˆçš„è¯ï¼Œæ‹…å¿ƒå„ç§æ“ä½œçš„äº¤äº’åŠŸèƒ½ä¸å®¹æ˜“å®ç°ã€‚è°¢è°¢ï¼</div>2019-12-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/6e/23/9fce5f72.jpg" width="30px"><span>æ¯›å“¥æ¥äº†</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>æˆ‘æ˜¯ç”¨Builder(builder: (Buildcontext context){})æ¥åˆ›å»ºdescriptioné‚£ä¸ªTextç»„ä»¶ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡context.size.heightè·å–Textçš„é«˜åº¦ï¼Œç„¶åå°±èƒ½åˆ¤æ–­æŒ‰é’®ä½•æ—¶å±•ç¤ºäº†</div>2019-10-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/6c/cf/baa4ee4d.jpg" width="30px"><span>æµ£ç†Šç‰¹å·¥é˜Ÿ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è¯·é—®è€å¸ˆï¼ŒmoreæŒ‰é’®é‚£é‡Œçš„å·¦å³æ¸éšæ˜¯æ€ä¹ˆå®ç°çš„å•Šï¼Œæˆ‘ç”¨TextOverflow.fadeæ˜¯å‘ä¸‹æ¸éšçš„å•Š</div>2019-09-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/83/b2/e83dd93c.jpg" width="30px"><span>ğŸŒ™</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœè¯´å°½é‡ä½¿ç”¨statelessï¼Œä½†æ˜¯åªè¦éœ€è¦äº¤äº’éƒ½å¿…é¡»æ˜¯statefulå§ï¼Ÿæ€ä¹ˆå°½é‡æ¥ä½¿ç”¨æˆstatelesså‘¢ï¼Ÿ</div>2019-08-23</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/sgEfkeMSIIibeH4l0HS8uwM6PGY3DSHoW5tV9l1hDQ06tr3OnI7F545Wdxsh59rqOKnzjLUpCcEqic3P9zZbKzPQ/132" width="30px"><span>æ¥¼å¤–æ¥¼</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å“ªäº›ç®—æ˜¯éå¯è§†å®¹å™¨å‘¢ï¼Ÿ</div>2019-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/49/a9/eede1288.jpg" width="30px"><span>Simon</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆï¼ŒFlutterå…¶ä¸­ä¸€ä¸ªæ¸¸æˆå¼•æ“flameï¼Œä¹Ÿæ˜¯é€šè¿‡è‡ªç»˜çš„æ–¹å¼å®ç°çš„å—ï¼Ÿ</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/59/ed/15465917.jpg" width="30px"><span>Captain</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œpiæ˜¯åœ¨å“ªé‡Œå®šä¹‰çš„ï¼Ÿ</div>2019-11-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/1f/86/3a7eeac4.jpg" width="30px"><span>leslee</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆæˆ‘æŠŠä½ çš„æ¡ˆä¾‹è·‘èµ·æ¥äº†, ä½†æ˜¯æˆ‘æŠŠ æˆ‘æŠŠè®¡æ•°å™¨é‚£ä¸ªæ¡ˆåˆ—çš„ä»£ç é‡Œé¢çš„ MaterialApp çš„ themeData çš„ primaryColor çš„é¢œè‰²æ”¹æˆä½ çš„ ligjtblue[800] åä»–æŠ¥é”™, æŠ¥ type color is not a subtype of type materialcolor æˆ‘çœ‹äº†æ–‡æ¡£ç¡®å®é¢œè‰²æ˜¯åˆ†å¥½å‡ ä¸ªç±»å‹,   å¯æ˜¯ä¸ºä»€ä¹ˆä½ çš„å¯ä»¥è¿è¡Œæˆ‘çš„ä¸å¯ä»¥è¿è¡Œ........</div>2019-10-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f7/16/20562cdf.jpg" width="30px"><span>ç¦»å°˜ä¸ç¦»äººà¸„à¸´à¸”à¸–à¸¶à¸‡</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åŠŸèƒ½éƒ½å®ç°äº†ï¼ŒæŠ½è±¡äº†ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶ï¼šhttps:&#47;&#47;github.com&#47;lichenbuliren&#47;flutter_study&#47;blob&#47;master&#47;lib&#47;components&#47;appUpdateItemCard.dartï¼›
åŸºæœ¬æ€è·¯ï¼š
1ã€ç”¨ Contaner  çš„ decoration ç»˜åˆ¶ä¸€ä¸ªåœ†è§’ç™½è‰²æ¸å˜çš„ç™½åº•ï¼›
2ã€æŠ½å– UI ç»„ä»¶ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ä¸ª ã€showMoreã€ çŠ¶æ€
3ã€æè¿°æ–‡æœ¬ç»„ä»¶æ ¹æ® ã€showMoreã€ æ¥åŠ¨æ€è®¾ç½® ã€maxLinesã€å±æ€§å€¼ï¼Œå¹¶ä¸”è®¾ç½® ã€overflowã€ä¸ºçœç•¥å·
å”¯ä¸€å­˜åœ¨çš„å°ç‘•ç–µå°±æ˜¯æˆ‘çš„ FlatButton  æ§ä»¶ä¸­çš„æ–‡æœ¬ä¸€ç›´å­˜åœ¨ paddingï¼›æ‰‹åŠ¨è®¾ç½®äº† 0 ä¹Ÿä¸ç”Ÿæ•ˆï¼›å› ä¸ºæˆ‘çœ‹è¯¥ç« èŠ‚é‡Œé¢çš„ ã€moreã€æ–‡æœ¬åº”è¯¥æ˜¯é å³å¯¹é½çš„ï¼Œè¿™é‡Œéº»çƒ¦è€å¸ˆå¸®å¿™çœ‹ä¸‹ï¼Œæˆ‘å°è¯•äº†å„ç§æ–¹æ¡ˆéƒ½æ²¡æ³•å®ç°</div>2019-10-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/1e/e0/238fda97.jpg" width="30px"><span>ğŸŒ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘æŠŠæè¿°ä¿¡æ¯è¿™å—ææˆäº†ä¸€ä¸ªæœ‰çŠ¶æ€çš„widgetï¼Œè¿™æ ·æ€§èƒ½åº”è¯¥ä¼šæ›´å¥½äº›

class DescriptionModel extends StatefulWidget {
  String desc;

  DescriptionModel({Key key, this.desc}) : super(key: key);

  _DescriptionModelState createState() =&gt; _DescriptionModelState();
}

class _DescriptionModelState extends State&lt;DescriptionModel&gt; {

  bool flag = false;

  void changeFlag (){
    print(flag);
    setState(() {
      flag = !flag;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: &lt;Widget&gt;[
        Text(widget.desc, maxLines: flag ? null : 2,),
        Positioned(
          bottom: 0,
          right: -5,
          child: FlatButton(
            &#47;&#47; color: Colors.white,
            highlightColor: Colors.transparent,
            splashColor: Colors.transparent,
            onPressed: changeFlag,
            child: Container(child: Text(&#39;More&#39;, style: TextStyle(color: Colors.blue),), padding: EdgeInsets.fromLTRB(5,0,5,0), color: Colors.white,)
          ),
        )
      ],
    );
  }
}

åŠŸèƒ½æ˜¯å®ç°äº†ï¼Œä½†æ˜¯è¿™ä¸ªæŒ‰é’®æ‘†æ”¾çš„ä½ç½®è®©æˆ‘å¾ˆå¤´ç–¼ï¼Œè€Œä¸” æŒ‰é’®çš„æ ·å¼ä¹Ÿä¸çŸ¥é“è¯¥æ€ä¹ˆå»æ”¹å˜ï¼Œæˆ‘æƒ³å»æ”¹å˜æŒ‰é’®çš„å®½é«˜ä»¥ä¾¿è®©æŒ‰é’®æ˜¾ç¤ºçš„æ›´æ­£å¸¸äº›ã€‚</div>2019-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg" width="30px"><span>å’Œå°èƒ–</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œæ²¡å¤ªæ˜ç™½ç¬¬äºŒé“é¢˜çš„æ„æ€ï¼Œä¼ å…¥çš„æ•°ç»„çš„å€¼æ˜¯å¼§åº¦å—ï¼Ÿé‚£è¿™æ ·çš„è¯ï¼Œä¼ å…¥çš„æ•°ç»„çš„æ‰€æœ‰å…ƒç´ åŠ èµ·æ¥å¾—å¤Ÿ 2Ï€ æ˜¯å—ï¼Ÿ</div>2019-09-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/93/80/ccf2f428.jpg" width="30px"><span>ç°ç°</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>class UpdateItemWidget extends StatefulWidget {
  final model;
  final onPressed;

  UpdateItemWidget({Key key, this.model, this.onPressed}) : super(key: key);
  @override
  State&lt;StatefulWidget&gt; createState() {
    return _UpdateItemState();
  }
}
class _UpdateItemState extends State&lt;UpdateItemWidget&gt; {
  bool collapse = true;
  @override
  void initState() {
    super.initState();
  }
  @override
  Widget build(BuildContext context) {
    return Column(
      children: &lt;Widget&gt;[
        buildTopRow(context),
        buildBottomRow(context),
      ],
    );
  }
 ....
  Widget buildBottomRow(BuildContext context) {
    return Padding(
      padding: EdgeInsets.fromLTRB(15, 0, 15, 0),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: &lt;Widget&gt;[
          Row(
            children: &lt;Widget&gt;[
              Expanded(
                child: Text(
                  widget.model.appDescription,
                  maxLines: collapse ? 2 : null,
                  overflow: collapse ? TextOverflow.ellipsis : null),
              ),
              Container(
                width: !collapse ? 0 : null,
                child: FlatButton(
                  onPressed: () {
                    setState(() {collapse = false;});
                    },
                  child: Text(&#39;More&#39;, style: TextStyle(color: Colors.blue),),
                )
              ),
            ],
          ),
          Padding(
            padding: EdgeInsets.fromLTRB(0, 10, 0, 0),
            child: Text(&quot;${widget.model.appVersion} â€¢ ${widget.model.appSize} MB&quot;),
          )
        ],
      ),
    );
  }
}
</div>2019-08-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>è®¸ç«¥ç«¥</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œç”¨Positionedç»„ä»¶è®¾ç½®
right: 0,
bottom: 0,
FlatButtonç»„ä»¶æ€»å¯¹é½ä¸äº†æœ€ä¸‹è¾¹ã€‚</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>è®¸ç«¥ç«¥</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>class BottomRow extends StatefulWidget {
  const BottomRow({
    Key key,
    this.model,
  }): super(key: key);

  final UpdatedItemModel model;

  @override
  State&lt;StatefulWidget&gt; createState() {
    return _BottomRow();
  }
}

class _BottomRow extends State&lt;BottomRow&gt; {

  UpdatedItemModel model;
  bool open = false;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: EdgeInsets.fromLTRB(15, 0, 15, 0),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: &lt;Widget&gt;[
          Stack(
            children: &lt;Widget&gt;[
              Container(
                child: Text(widget.model.appDescription, maxLines: open ? 100 : 2,),
              ),
              Positioned(
                right: 0,
                bottom: 0,
                child: FlatButton(
                  onPressed: () {
                    setState(() {
                      open = !open;
                    });
                  },
                  child: Container(
                    decoration: const BoxDecoration(
                      gradient: LinearGradient(
                        colors: &lt;Color&gt;[
                          Colors.white,
                          Colors.grey,
                        ]
                      )
                    ),
                    child: Text(&#39;OPEN&#39;, style: TextStyle(color: Color(0xFF007AFE), fontSize: 14),),
                    padding: EdgeInsets.all(2),
                  ),

                )
              )
            ],
          ),
          Padding(
            padding: EdgeInsets.fromLTRB(0, 10, 0, 0),
            child: Text(&#39;${widget.model.appDate} â€¢ ${widget.model.appSize} MB&#39;),
          ),
        ],
      ),
    );
  }

}</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/97/b6/58a450f6.jpg" width="30px"><span>Geek_ymdxk2</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œflutterçš„textfieldé•¿æŒ‰å¤åˆ¶ï¼ŒæŠŠè¾“å…¥æ¡†çš„å†…å®¹åˆ é™¤åé•¿æŒ‰å°±ä¸å¼¹å‡ºå¤åˆ¶äº†ï¼Œæœ‰ä»€ä¹ˆè§£å†³æ–¹æ¡ˆå—</div>2019-08-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg" width="30px"><span>å¤§åœŸè±†</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ä¸€çœ‹åˆ°Canvasï¼Œå°±çŸ¥é“åˆæŠŠrnå’Œweexç»™ç§’æ€äº†ï¼Œè¿™ä¸¤å®¶ä¼™æ²¡æœ‰ç”»å¸ƒã€‚ã€‚ã€‚æ²¡æ³•ç»˜åˆ¶</div>2019-08-01</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/gYGeUZCuibranJRR5aL5ib5w48hXibEMb8MZDZjF5icOK7n48WkfIjT9lF5iaiaptIfTPvUp7Qp9ibn1m3f7icmFroYz8g/132" width="30px"><span>æœ±æ–‡åš</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>class UpdateItemInfoRender extends StatefulWidget {
  final String info;

  UpdateItemInfoRender({Key key, this.info}) : super(key: key);

  @override
  State&lt;StatefulWidget&gt; createState() {
    &#47;&#47; TODO: implement createState
    return _UpdateItemInfoRender();
  }
}

class _UpdateItemInfoRender extends State&lt;UpdateItemInfoRender&gt;
    with WidgetsBindingObserver {
  bool flag = false;

  void initState() {
    super.initState();
    WidgetsBinding.instance.addPostFrameCallback((_) {
      setState(() {
        flag = context.size.height &gt; 40.0;
      });
    });
  }

  @override
  Widget build(BuildContext context) {
    &#47;&#47; TODO: implement build
    return Stack(
      children: &lt;Widget&gt;[
        Text(
          &#39;${widget.info}&#39;,
          style: TextStyle(fontSize: 14),
          maxLines: flag ? 2 : null,
        ),
        flag ? Positioned(
                right: -5,
                bottom: 0,
                child: FlatButton(
                  onPressed: () =&gt; setState(() {
                    flag = !flag;
                  }),
                  child: Container(
                    width: 60,
                    padding: EdgeInsets.only(left: 20),
                    decoration: BoxDecoration(
                        gradient: LinearGradient(colors: [
                      Colors.white.withOpacity(.7),
                      Colors.white.withOpacity(1),
                      Colors.white.withOpacity(1),
                      Colors.white.withOpacity(1),
                    ])),
                    alignment: Alignment.center,
                    child: Text(
                      &#39;more&#39;,
                      style: TextStyle(color: Colors.blueAccent, fontSize: 14),
                    ),
                  ),
                ),
              )
            : Container()
      ],
    );
  }
}</div>2020-03-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/gYGeUZCuibranJRR5aL5ib5w48hXibEMb8MZDZjF5icOK7n48WkfIjT9lF5iaiaptIfTPvUp7Qp9ibn1m3f7icmFroYz8g/132" width="30px"><span>æœ±æ–‡åš</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ç¬¬äºŒé¢˜
class WheelPainter extends CustomPainter {
  List&lt;double&gt; list;

  WheelPainter(this.list);

  &#47;&#47;è®¾ç½®ä¸åŒé¢œè‰²çš„ç”»ç¬”
  Paint getColorPint(Color color) {
    return Paint()..color = color;
  }

  @override
  void paint(Canvas canvas, Size size) {
    &#47;&#47;è®¡ç®—é¥¼å›¾åŠå¾„
    double wheelSize = min(size.width, size.height) &#47; 2;
    int num = list.length;
    double sum = list.reduce((current, next) =&gt; current + next);
    Rect rect = Rect.fromCircle(center: Offset(wheelSize, wheelSize), radius: wheelSize);
    double start = 0;
    double step = 0;
    for (var i = 0; i &lt; num; i++) {
      step = (2 * pi) * (list[i] &#47; sum);
      canvas.drawArc(rect, start, step, true,
          getColorPint(i % 2 == 0 ? Colors.red : Colors.green));
      start += step;
    }
  }

  @override
  bool shouldRepaint(CustomPainter oldDelegate) {
    &#47;&#47; TODO: implement shouldRepaint
    return oldDelegate != this;
  }
}

class Cake extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    &#47;&#47; TODO: implement build
    return CustomPaint(
      size: Size(200, 200),
      painter: WheelPainter([1, 2, 3, 4, 4, 2]),
    );
  }
}</div>2020-03-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/cd/ab/1c3dc64b.jpg" width="30px"><span>å¤ç›®ğŸ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ºä»€ä¹ˆæˆ‘çš„è°·æ­Œå›¾ç‰‡é‚£è¡Œé«˜åº¦å¾ˆå°ï¼Œæ€ä¹ˆè‡ªå®šä¹‰é«˜åº¦å‘¢ï¼Ÿ</div>2021-02-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/cd/ab/1c3dc64b.jpg" width="30px"><span>å¤ç›®ğŸ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ€ä¹ˆç”»kçº¿å›¾å‘¢</div>2021-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/cd/ab/1c3dc64b.jpg" width="30px"><span>å¤ç›®ğŸ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>èµğŸ‘</div>2021-02-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/e7/2e/f317f6ad.jpg" width="30px"><span>ä¼Šåˆ©ä¸¹æ€’é£</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æœ‰äº†CustomPainterå¯ä»¥å¼€å‘æ¸¸æˆäº†â€¦</div>2020-07-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/97/1d/4bac8dbf.jpg" width="30px"><span>VI jolie</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆå…³äºæ€è€ƒé¢˜æœ‰æ²¡æœ‰æ‚¨çš„è§£å†³æ–¹æ³•å•Š</div>2020-07-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ab/16/0f83cab6.jpg" width="30px"><span>smilingmiao</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>äº¤ä¸ªä½œä¸š

class WheelPainter extends CustomPainter {
  final List&lt;double&gt; arcs; &#47;&#47; å­˜æ”¾å„ä¸ªåœ†å¼§æ‰€å æ•´ä½“çš„æ¯”ä¾‹å€¼
  WheelPainter(this.arcs);

  &#47;&#47; è®¾ç½®ç”»ç¬”é¢œè‰²
  Paint getColoredPaint(Color color) { &#47;&#47; æ ¹æ®é¢œè‰²è¿”å›ä¸åŒçš„ç”»ç¬”
    Paint paint = Paint();
    paint.color = color;
    return paint;
  }

  int random(int maxBound) {
    return Random().nextInt(maxBound);
  }
  
  Color randomColor() {
    return Color.fromARGB(255, random(255), random(255), random(255));
  }

  double min(a, b) {
    if (a &gt;= b) {
      return b;
    } else {
      return a;
    }
  }

  @override
  void paint(Canvas canvas, Size size) { &#47;&#47; ç»˜åˆ¶é€»è¾‘
    double wheelSize = min(size.width, size.height) &#47; 2;
    Rect boundingRect = Rect.fromCircle(center: Offset(wheelSize, wheelSize), radius: wheelSize);

    double startAngle = 0;
    arcs.forEach((arc) {
      print(arc);
      double sweepAngle = (2 * pi) * arc;
      canvas.drawArc(boundingRect, startAngle, sweepAngle, true, getColoredPaint(randomColor()));
      startAngle = startAngle + (2 * pi) * arc;
    });
  }

  &#47;&#47; åˆ¤æ–­æ˜¯å¦éœ€è¦é‡ç»˜ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•çš„åšä¸‹æ¯”è¾ƒå³å¯
  @override
  bool shouldRepaint(CustomPainter oldDelegate) =&gt; oldDelegate != this;
}</div>2020-05-27</li><br/>
</ul>