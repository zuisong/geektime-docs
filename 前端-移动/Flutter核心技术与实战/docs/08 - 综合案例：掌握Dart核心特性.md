ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚

åœ¨å‰ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘é¦–å…ˆä¸ä½ ä¸€èµ·å­¦ä¹ äº†Dartç¨‹åºçš„åŸºæœ¬ç»“æ„å’Œè¯­æ³•ï¼Œè®¤è¯†äº†Dartè¯­è¨€ä¸–ç•Œçš„åŸºæœ¬æ„æˆè¦ç´ ï¼Œä¹Ÿå°±æ˜¯ç±»å‹ç³»ç»Ÿï¼Œä»¥åŠå®ƒä»¬æ˜¯æ€ä¹ˆè¡¨ç¤ºä¿¡æ¯çš„ã€‚ç„¶åï¼Œæˆ‘å¸¦ä½ å­¦ä¹ äº†Darté¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬æ€è·¯ï¼ŒçŸ¥é“äº†å‡½æ•°ã€ç±»ä¸è¿ç®—ç¬¦è¿™äº›å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­å¸¸è§çš„æ¦‚å¿µï¼Œåœ¨Dartä¸­çš„å·®å¼‚åŠå…¸å‹ç”¨æ³•ï¼Œç†è§£äº†Dartæ˜¯æ€ä¹ˆå¤„ç†ä¿¡æ¯çš„ã€‚

å¯ä»¥çœ‹åˆ°ï¼ŒDartå¸çº³äº†å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ä¼˜ç‚¹ï¼Œåœ¨å…³äºå¦‚ä½•è¡¨è¾¾ä»¥åŠå¤„ç†ä¿¡æ¯ä¸Šï¼Œæ—¢ç®€å•åˆç®€æ´ï¼Œè€Œä¸”åˆä¸å¤±å¼ºå¤§ã€‚ä¿—è¯è¯´ï¼Œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚é‚£ä¹ˆä»Šå¤©ï¼Œæˆ‘å°±ç”¨ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹ï¼ŒæŠŠå‰é¢å­¦ä¹ çš„å…³äºDartçš„é›¶æ•£çŸ¥è¯†ä¸²èµ·æ¥ï¼Œå¸Œæœ›ä½ å¯ä»¥åŠ¨æ‰‹è¯•éªŒä¸€ä¸‹è¿™ä¸ªæ¡ˆä¾‹ï¼Œå€Ÿæ­¤æŒæ¡å¦‚ä½•ç”¨Dartç¼–ç¨‹ã€‚

æœ‰äº†å‰é¢å­¦ä¹ çš„çŸ¥è¯†ç‚¹ï¼Œå†åŠ ä¸Šä»Šå¤©çš„ç»¼åˆæ¡ˆä¾‹ç»ƒä¹ ï¼Œæˆ‘è®¤ä¸ºä½ å·²ç»æŒæ¡äº†Dartæœ€å¸¸ç”¨çš„80%çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨åŸºæœ¬æ²¡æœ‰è¯­è¨€éšœç¢çš„æƒ…å†µä¸‹å»ä½¿ç”¨Flutteräº†ã€‚è‡³äºå‰©ä¸‹çš„é‚£20%çš„ç‰¹æ€§ï¼Œå› ä¸ºä½¿ç”¨è¾ƒå°‘ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šåœ¨æœ¬ä¸“æ åšé‡ç‚¹è®²è§£ã€‚å¦‚æœä½ å¯¹è¿™éƒ¨åˆ†å†…å®¹æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥è®¿é—®[å®˜æ–¹æ–‡æ¡£](https://dart.dev/tutorials)å»åšè¿›ä¸€æ­¥äº†è§£ã€‚

æ­¤å¤–ï¼Œå…³äºDartä¸­çš„å¼‚æ­¥å’Œå¹¶å‘ï¼Œæˆ‘ä¼šåœ¨åé¢çš„ç¬¬23ç¯‡æ–‡ç« â€œå•çº¿ç¨‹æ¨¡å‹æ€ä¹ˆä¿è¯UIè¿è¡Œæµç•…ï¼Ÿâ€ä¸­è¿›è¡Œæ·±å…¥ä»‹ç»ã€‚

## æ¡ˆä¾‹ä»‹ç»
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/08/fd/3f3dca30.jpg" width="30px"><span>relax</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>èƒ½ä¸èƒ½æ‰€æœ‰çš„ç¤ºä¾‹ä»£ç æ”¾åˆ°ä¸€ä¸ªgitä¸‹é¢</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/77/ff/4ce0aa51.jpg" width="30px"><span>Î©</span> ğŸ‘ï¼ˆ36ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>Item operator+(Item item) =&gt; I...
double get price =&gt; bookings...

è¿™ä¸ªæ”¹é€ +å·çš„ä»£ç è¿˜æ˜¯æ— æ³•çœ‹æ‡‚
</div>2019-07-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/24/07/380666e3.jpg" width="30px"><span>bytecode</span> ğŸ‘ï¼ˆ13ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>double get price() {
  double sum = 0.0;
  for(var i in bookings) {
    sum += i.price;
  }
  return sum;
} 

æ–‡ä¸­è¿™é‡Œçš„price()æ˜¯å¤šäº†æ‹¬å·()ï¼Œè¦å»æ‰()</div>2019-07-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/a9/09/fd67d691.jpg" width="30px"><span>jia58960</span> ğŸ‘ï¼ˆ10ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å¤§æ¦‚èƒ½çœ‹æ‡‚å¹¶å®ç°ä»£ç ï¼Œä½†æ„é€ å‡½æ•°ä¸­çš„å±æ€§ä»€ä¹ˆæ—¶å€™ç”¨this.å±æ€§ï¼Œä»€ä¹ˆæ—¶å€™ä¸ç”¨thisï¼Œå¸Œæœ›è€å¸ˆèƒ½å›ç­”ä¸‹ã€‚</div>2019-07-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/93/80/ccf2f428.jpg" width="30px"><span>ç°ç°</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

class Meta {
  double price;
  String name;
  Meta(this.name, this.price);
}

&#47;&#47; å®šä¹‰å•†å“Itemç±»
class Item extends Meta {
  int count;
  Item(name, price, this.count): super(name, price);
  Item operator+(Item item) =&gt; Item(name + item.name, price * count + (item.price * item.count), 1);
}

&#47;&#47;å®šä¹‰è´­ç‰©è½¦ç±»
class ShoppingCart extends Meta with PrintHelper {
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;

  double get price =&gt; bookings.reduce((value, element) =&gt; (value + element)).price;
&#47;&#47;  ShoppingCart(name, this.code): date = DateTime.now(), super(name,0);
  ShoppingCart({name}): this.withCode(name: name, code: null);
  ShoppingCart.withCode({name, this.code}): date = DateTime.now(), super(name, 0);
  getInfo () =&gt; &#39;&#39;&#39;
     è´­ç‰©è½¦ä¿¡æ¯:
     
     ----------------
     å•†å“å    å•ä»·    æ•°é‡    æ€»ä»·
     ----------------
     ${bookings.map((item) =&gt; &#39;${item.name}  ${item.price}  ${item.count}  ${item.price * item.count}&#39;).join(&#39;\n     &#39;)}
     
     ================
     ç”¨æˆ·åï¼š $name
     ä¼˜æƒ ç ï¼š ${code ?? &quot;æ²¡æœ‰&quot;}
     æ€»ä»·ï¼š $price
     æ—¥æœŸï¼š $date
  &#39;&#39;&#39;;
}

void main() {
  ShoppingCart.withCode(name: &#39;å¼ ä¸‰&#39;, code: &#39;123456&#39;)
  ..bookings = [Item(&#39;è‹¹æœ&#39;, 10.0, 3), Item(&#39;é¸­æ¢¨&#39;, 20.0, 1)]
  ..printInfo();

  ShoppingCart(name: &#39;æå››&#39;)
  ..bookings = [Item(&#39;é¦™è•‰&#39;, 2.4, 2), Item(&#39;èŠ’æœ&#39;, 6.8, 4)]
  ..printInfo();
}</div>2019-07-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/3b/b8c00291.jpg" width="30px"><span>Uncle.Wang</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Meta {
  double price;
  String name;
  &#47;&#47; æˆå‘˜å˜é‡åˆå§‹åŒ–è¯­æ³•ç³–
  Meta(this.name, this.price);
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

class Item extends Meta with PrintHelper {
  int count;
  Item(name, price, {int count = 1}): super(name, price) {
    this.count = count;
  }
  &#47;&#47; é‡è½½ + è¿ç®—ç¬¦ï¼Œå°†å•†å“å¯¹è±¡åˆå¹¶ä¸ºå¥—é¤å•†å“
  Item operator+(Item item) =&gt; Item(name + item.name, price + item.price); 
    @override
  getInfo() =&gt; &#39;&#39;&#39;
    å•†å“å: $name
    å•ä»·: $price
    æ•°é‡: $count
    ---------------
&#39;&#39;&#39;;
}

&#47;&#47;with è¡¨ç¤ºä»¥éç»§æ‰¿çš„æ–¹å¼å¤ç”¨äº†å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åŠå‡½æ•°
class ShoppingCart extends Meta with PrintHelper{
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;
  &#47;&#47; ä»¥å½’çº³åˆå¹¶æ–¹å¼æ±‚å’Œ
  double get price =&gt; bookings.reduce((value, element) =&gt; value + element).price;
  &#47;&#47; é»˜è®¤åˆå§‹åŒ–å‡½æ•°ï¼Œè½¬å‘è‡³ withCode å‡½æ•°
  ShoppingCart({name}) : this.withCode(name:name, code:null);
  &#47;&#47;withCode åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code}) : date = DateTime.now(), super(name,0);

  getBookingInfo() {
    String str = &quot;&quot;;
    for (Item item in bookings) {
      str += item.getInfo();
    }
    return str;
  }

  &#47;&#47;?? è¿ç®—ç¬¦è¡¨ç¤ºä¸º code ä¸ä¸º nullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼ &quot; æ²¡æœ‰ &quot;
  @override
  getInfo() =&gt; &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
  ç”¨æˆ·å: $name
  ä¼˜æƒ ç : ${code??&quot; æ²¡æœ‰ &quot;}
  æ€»ä»·: $price
  Date: $date
  å•†å“åˆ—è¡¨ï¼š
    ---------------
${ getBookingInfo() }
-----------------------------
&#39;&#39;&#39;;
}

void main() {
  ShoppingCart.withCode(name:&#39;å¼ ä¸‰&#39;, code:&#39;123456&#39;)
  ..bookings = [Item(&#39;è‹¹æœ&#39;,10.0, count: 10), Item(&#39;é¸­æ¢¨&#39;,20.0, count: 5)]
  ..printInfo();

  ShoppingCart(name:&#39;æå››&#39;)
  ..bookings = [Item(&#39;é¦™è•‰&#39;,15.0), Item(&#39;è¥¿ç“œ&#39;,40.0)]
  ..printInfo();
}
</div>2019-08-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epxMjZcn8LFy6PIT7uGzUOHTCZosTwh39jBKlyW3Ffzyscm14PQGh3QZ1GrEGF4UWxwKZrAib8AXCA/132" width="30px"><span>æ±Ÿå®å½­äºæ™</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Meta {
  double price;
  String name;
  &#47;&#47; æˆå‘˜å˜é‡åˆå§‹åŒ–è¯­æ³•ç³–
  Meta(this.name, this.price);
}

class Item extends Meta{
  Item(name, price) : super(name, price);
  &#47;&#47; é‡è½½ + è¿ç®—ç¬¦ï¼Œå°†å•†å“å¯¹è±¡åˆå¹¶ä¸ºå¥—é¤å•†å“
  Item operator+(Item item) =&gt; Item(name + item.name, price + item.price); 
}

class Items {
  Item item;
  double num;
  Items(this.item, this.num);
  double get totalPrice =&gt; item.price * num; 
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

&#47;&#47;with è¡¨ç¤ºä»¥éç»§æ‰¿çš„æ–¹å¼å¤ç”¨äº†å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åŠå‡½æ•°
class ShoppingCart extends Meta with PrintHelper{
  DateTime date;
  String code;
  List&lt;Items&gt; bookings;
  &#47;&#47; ä»¥å½’çº³åˆå¹¶æ–¹å¼æ±‚å’Œ
  double get shopPrice {
     double result = 0.0;
     bookings.forEach((element) =&gt; result+=element.totalPrice);
     return result;
  }

  &#47;&#47; é»˜è®¤åˆå§‹åŒ–å‡½æ•°ï¼Œè½¬å‘è‡³ withCode å‡½æ•°
  ShoppingCart({name}) : this.withCode(name:name, code:null);
  &#47;&#47;withCode åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code}) : date = DateTime.now(), super(name,0);

  &#47;&#47;?? è¿ç®—ç¬¦è¡¨ç¤ºä¸º code ä¸ä¸º nullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼ &quot; æ²¡æœ‰ &quot;
  @override
  String getInfo() {
  String bookingsResult = &#39;å•†å“æ˜ç»†: \n&#39;;
  bookings.forEach((item) =&gt; bookingsResult += &#39;  å•†å“åç§°ï¼š${item.item.name}  å•ä»·ï¼š${item.item.price} æ•°é‡ ï¼š${item.num}  æ€»ä»·ï¼š${item.totalPrice}\n&#39;);

  return &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
  ç”¨æˆ·å: $name
  ä¼˜æƒ ç : ${code??&quot; æ²¡æœ‰ &quot;}
  $bookingsResult
  æ€»ä»·: $shopPrice
  Date: $date
-----------------------------
&#39;&#39;&#39;;
  }
}

void main() {
  ShoppingCart.withCode(name:&#39;å¼ ä¸‰&#39;, code:&#39;123456&#39;)
  ..bookings = [Items(Item(&#39;è‹¹æœ&#39;,10.0),5.0), Items(Item(&#39;é¸­æ¢¨&#39;,20.0),10.0)]
  ..printInfo();

  ShoppingCart(name:&#39;æå››&#39;)
  ..bookings = [Items(Item(&#39;é¦™è•‰&#39;,15.0),10.0), Items(Item(&#39;è¥¿ç“œ&#39;,40.0),1.0)]
  ..printInfo();
}
</div>2019-07-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/48/55/48de9a24.jpg" width="30px"><span>Carlo</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>çœ‹åˆ°ä¸€æ®µä»£ç ï¼š
firebaseService.login().then(
                        (value) {
                          print(value.toJson());
                        },
                        onError: (err) {
                          print(err);
                        },
                      );

è¯·é—®è¿™ä¸ªonErroræ˜¯æ€ä¹ˆå›äº‹å•Šã€‚ä¸ºä»€ä¹ˆä¼šè¢«æ‰§è¡Œå‘¢ï¼Ÿ  è¿™æ˜¯dartç‰¹æœ‰çš„è¯­æ³•ä¹ˆï¼Ÿ
æˆ‘æ‰€çŸ¥é“çš„ä¸€èˆ¬sync functionçš„è¯­æ³•æ˜¯

thisFunction()
    .catch(console.error)
    .then(() =&gt; console.log(&#39;We do cleanup here&#39;));</div>2019-10-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg" width="30px"><span>å’Œå°èƒ–</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæ‚¨çš„ç¬¬äºŒä¸ªé¢˜ç›®ï¼Œæˆ‘ç†è§£æ˜¯è¦åšæ¯ä¸€ç§å•†å“çš„åˆ†ç±»ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ç”¨äº†ä»¥å‰è¯­è¨€çš„æ€è·¯æ¥åšäº†ã€‚éº»çƒ¦è€å¸ˆï¼Œçœ‹çœ‹æ˜¯å¦æ­£ç¡®ã€‚

å…³é”®ä»£ç å¦‚ä¸‹ï¼š
&#47;&#47;å®šä¹‰è´­ç‰©è½¦ç±»
class ShoppingCar extends Meta with PrintHelper {
  DateTime date; &#47;&#47;è´­ç‰©æ—¥æœŸ
  String code; &#47;&#47;ä¼˜æƒ åˆ¸
  List&lt;Item&gt; _bookings; &#47;&#47;å®šä¹‰ç§æœ‰å±æ€§
  num count; &#47;&#47;å•†å“æ•°é‡

  &#47;&#47;æ±‚å‡ºæ€»ä»·
  double get price =&gt;
      books.reduce((value, element) =&gt; value + element).price;

  List&lt;Item&gt; get books =&gt; _bookings;

  &#47;&#47;ç»™bookingså®šä¹‰setæ–¹æ³•
  set book(List&lt;Item&gt; bookings) {
    this._bookings = bookings;
    this.count = bookings.length;
  }

  &#47;&#47;è·å–åˆ†ç±»äº§å“ä¿¡æ¯
  String getGoodsInfo() {
    StringBuffer temp = new StringBuffer();
    Map map = new Map&lt;String, List&lt;Item&gt;&gt;();
    books.forEach((item) {
      if (!map.containsKey(item.name)) {
        List list = new List&lt;Item&gt;();
        list.add(item);
        map[item.name] = list;
      } else {
        (map[item.name] as List&lt;Item&gt;).add(item);
      }
    });
    map.forEach((k, v) {
      temp.write(&quot;å•†å“åç§°ï¼š$k,è¯¥ç§å•†å“æ•°é‡ï¼š${(v as List).length},è¯¥ç§å•†å“å•ä»·ï¼š${(v as List&lt;Item&gt;)[0].price}å…ƒ\n&quot;);
      print(&quot;$k,$v&quot;);
    });
    return temp.toString();
  }

  &#47;&#47;è¿™ç§è¡¨è¾¾å¼èµ‹å€¼è¿˜æ˜¯æŒºæ–¹ä¾¿çš„
  ShoppingCar.withCode({name, this.code}): this.date = DateTime.now(),super(name, 0.0);

  ShoppingCar({name}) : this.withCode(name: name, code: null);

  @override
  getInfo() {
    return &#39;&#39;&#39;
      è´­ç‰©è½¦ä¿¡æ¯ï¼š
      ----------------------
      ç”¨æˆ·åï¼š$name
      ä¼˜æƒ ç ï¼š${code ?? &quot;æ²¡æœ‰ä¼˜æƒ åˆ¸å•Š&quot;}
      å•†å“æ€»é‡ï¼š$count
      æ€»ä»·ï¼š$price  
      æ—¥æœŸï¼š$date
      ${getGoodsInfo()}
      ----------------------
  &#39;&#39;&#39;;
  }
}

è¿è¡Œåä¿¡æ¯å¦‚ä¸‹ï¼šè´­ç‰©è½¦ä¿¡æ¯ï¼š
      ----------------------
      ç”¨æˆ·åï¼šå°æ
      ä¼˜æƒ ç ï¼šæ²¡æœ‰ä¼˜æƒ åˆ¸å•Š
      å•†å“æ€»é‡ï¼š3
      æ€»ä»·ï¼š29.0  
      æ—¥æœŸï¼š2019-08-14 22:01:24.437085
      å•†å“åç§°ï¼šè‹¹æœ,è¯¥ç§å•†å“æ•°é‡ï¼š2,è¯¥ç§å•†å“å•ä»·ï¼š10.0å…ƒ
      å•†å“åç§°ï¼šæ¢¨,è¯¥ç§å•†å“æ•°é‡ï¼š1,è¯¥ç§å•†å“å•ä»·ï¼š9.0å…ƒ
      ----------------------</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/c9/36/8e7aec6c.jpg" width="30px"><span>åˆ˜è£æ¸…</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åœ¨vs codeå·²ç»å®‰è£…dartã€code runneræ’ä»¶ï¼Œæœ¬åœ°ä¹Ÿå®‰è£…å®Œdart SDKï¼Œç„¶åé€šè¿‡vs codeè¿è¡Œdart æç¤ºï¼šdart : æ— æ³•å°†â€œdartâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°...
ä½†åœ¨cmd æ§åˆ¶æ¿ä¸­å°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè¿™æ˜¯ä¸ºå’‹å•Šï¼Œvs codeéœ€è¦é¢å¤–é…ç½®å’‹å—</div>2019-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/83/e8/f726c635.jpg" width="30px"><span>åŠ æ¸©åçš„å•¤é…’</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç›´æ¥é€šè¿‡mixinå…³é”®å­—å®šä¹‰PrintHelperä¹Ÿæ¯”è¾ƒç®€å•ï¼š
mixin  PrintHelper {
  void printInfo() =&gt; print(getInfo());
  String getInfo();
}

</div>2019-12-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/55/75/7045c225.jpg" width="30px"><span>åº†</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>
class Meta {
  double price;
  String name;
  &#47;&#47;æˆå‘˜å˜é‡åˆå§‹åŒ–è¯­æ³•ç³–
  Meta(this.name, this.price);
}

class Item extends Meta{
  Item(name, price) : super(name, price);
  &#47;&#47;é‡è½½+è¿ç®—ç¬¦ï¼Œå°†å•†å“å¯¹è±¡åˆå¹¶ä¸ºå¥—é¤å•†å“
  Item operator+(Item item) =&gt; Item(name + item.name, price + item.price); 
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

&#47;&#47;withè¡¨ç¤ºä»¥éç»§æ‰¿çš„æ–¹å¼å¤ç”¨äº†å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åŠå‡½æ•°
class ShoppingCart extends Meta with PrintHelper{
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;
  &#47;&#47;ä»¥å½’çº³åˆå¹¶æ–¹å¼æ±‚å’Œ
  double get price =&gt; bookings.reduce((value, element) =&gt; value + element).price;
  &#47;&#47;é»˜è®¤åˆå§‹åŒ–å‡½æ•°ï¼Œè½¬å‘è‡³withCodeå‡½æ•°
  ShoppingCart({name}) : this.withCode(name:name, code:null);
  &#47;&#47;withCodeåˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code}) : date = DateTime.now(), super(name,0);

  &#47;&#47;??è¿ç®—ç¬¦è¡¨ç¤ºä¸ºcodeä¸ä¸ºnullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼&quot;æ²¡æœ‰&quot;
  @override
  getInfo() =&gt; &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
  ç”¨æˆ·å: $name
  ä¼˜æƒ ç : ${code??&quot;æ²¡æœ‰&quot;}
  æ€»ä»·: $price
  Date: $date
  ç‰©å“æ•°é‡: ${bookings.length}
&#39;&#39;&#39;;

printDetails(){
   bookings.forEach((item){
     print(&quot;ç‰©å“ &quot;+item.name + &quot; ä»·æ ¼ ${item.price}&quot;);
   });

   print(&quot;-----------------------------&quot;);

}

}

void main() {
  ShoppingCart.withCode(name:&#39;å¼ ä¸‰&#39;, code:&#39;123456&#39;)
  ..bookings = [Item(&#39;è‹¹æœ&#39;,10.0), Item(&#39;é¸­æ¢¨&#39;,20.0)]
  ..printInfo()
  ..printDetails();

  ShoppingCart(name:&#39;æå››&#39;)
  ..bookings = [Item(&#39;é¦™è•‰&#39;,15.0), Item(&#39;è¥¿ç“œ&#39;,40.0)]
  ..printInfo()
  ..printDetails();
}</div>2019-12-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/5b/5b/6980ae63.jpg" width="30px"><span>DERUWE</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä½¿ç”¨äº†è¿™ä¸ªItem operator+(Item item) =&gt; Item(name + item.name, price + item.price);æœ€åçš„bookingså°±å˜ä¸ºé•¿åº¦ä¸º1çš„å—</div>2019-12-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/26/3c/9ef80bfe.jpg" width="30px"><span>icer</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Meta {
  double price;
  String name;
  Meta(this.name,this.price);
}

class Item2 extends Meta {
  int num;
  Item2(String name, double price,{this.num=1}) :super(name, price);
  Item2 operator + (Item2 item) =&gt; Item2(name + item.name,price * num + item.price * item.num);
}

abstract class printHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

class ShoppingCart2 extends Meta with printHelper {
  DateTime date;
  String code;
  List&lt;Item2&gt; bookings;

  ShoppingCart2({name}) : this.withCode(name:name,code:null);
  ShoppingCart2.withCode({name,this.code}) : date = DateTime.now(),super(name, 0);

  double get price =&gt; bookings.reduce((value,element) =&gt; value + element).price;

  String get cardInfo {
    String str = &quot;&quot;;
    bookings.forEach((v) =&gt;
    str +=&#39;${v.name} ----- ${v.num}\n&#39;);
    return str;
  }

  getInfo() {
    return
          &quot;&quot;&quot;
        è´­ç‰©è½¦ä¿¡æ¯:
        -----------------------------
        ç”¨æˆ·å: $name
        ä¼˜æƒ ç : ${code??&quot;æ²¡æœ‰&quot;}
        $cardInfo
        æ€»ä»·:   $price
        æ—¥æœŸ:   $date
        -----------------------------
        &quot;&quot;&quot;;
  }
</div>2019-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/61/32/e9046955.jpg" width="30px"><span>å…¥å¤œã€æ¸å¾®å‡‰</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åœ¨ä¸€ä¸ªé“å‹çš„å›ç­”ä¸Šç¨åŠ æ”¹åŠ¨ï¼ŒåŠ äº†ä¸€ä¸ªå•†å“æ€»æ•°å’Œè´­ç‰©è½¦ä¸ºç©ºçš„æƒ…å†µï¼Œè€å¸ˆå¸®å¿™çœ‹çœ‹æœ‰æ²¡æœ‰å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚
class Meta {
  double price;
  String name;
  String info;
  &#47;&#47;æˆå‘˜å˜é‡åˆå§‹åŒ–è¯­æ³•ç³–
  Meta(this.name, this.price);
}
class Item extends Meta {
  int count;
  Item(name, price, {int count = 1}) : super(name, price) {
    this.count = count;
    this.info = &#39;&#39;&#39;
 å•†å“å: $name
   å•ä»·: $price
   æ•°é‡: $count
   ---------------
  &#39;&#39;&#39;;
  }
  
  Item operator +(Item item) =&gt;
      Item(name + item.name, price + item.price, count: count + item.count);
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

&#47;&#47;withè¡¨ç¤ºä»¥éç»§æ‰¿çš„æ–¹å¼å¤ç”¨äº†å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åŠå‡½æ•°
class ShoppingCart extends Meta with PrintHelper {
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;
  &#47;&#47;ä»¥å½’çº³åˆå¹¶æ–¹å¼æ±‚å’Œ
  double get price =&gt;bookings != null ?
      bookings.reduce((value, element) =&gt; value + element).price : 0.00;
  int get count =&gt; bookings != null ? bookings.reduce((value, element) =&gt; value + element).count : 0;
  &#47;&#47;é»˜è®¤åˆå§‹åŒ–å‡½æ•°ï¼Œè½¬å‘è‡³withCodeå‡½æ•°
  ShoppingCart({name, List&lt;Item&gt; bookings})
      : this.withCode(name: name, code: null, bookings: bookings);
  &#47;&#47;withCodeåˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code, this.bookings})
      : date = DateTime.now(),
        super(name, 0) {
        if (bookings != null) {
            String str = &quot;&quot;;
            for (Item item in bookings) {
              str += item.info;
            }
            info = str;
        }
  }

  &#47;&#47;??è¿ç®—ç¬¦è¡¨ç¤ºä¸ºcodeä¸ä¸ºnullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼&quot;æ²¡æœ‰&quot;
  @override
  getInfo() =&gt; &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
  ç”¨æˆ·å: $name
  ä¼˜æƒ ç : ${code ?? &quot;æ²¡æœ‰&quot;}
  å•†å“æ€»æ•°: $count
  æ€»ä»·: $price
  Date: $date
  å•†å“åˆ—è¡¨: 
  ${info ?? &quot;è´­ç‰©è½¦ä¸ºç©º&quot;}
-----------------------------
&#39;&#39;&#39;;
}

void main() {
  ShoppingCart.withCode(
      name: &#39;å¼ ä¸‰&#39;,
      code: &#39;123456&#39;,
      bookings: [Item(&#39;è‹¹æœ&#39;, 10.0, count: 1), Item(&#39;é¸­æ¢¨&#39;, 20.0, count: 2)])
    ..printInfo();

  ShoppingCart(
      name: &#39;æå››&#39;, bookings: [Item(&#39;é¦™è•‰&#39;, 15.0), Item(&#39;è¥¿ç“œ&#39;, 40.0, count: 4)])
    ..printInfo();

  ShoppingCart(name: &#39;ç‹äº”&#39;)..printInfo();
}</div>2019-11-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/93/7b/97d45363.jpg" width="30px"><span>ç‹—å­ä¸è¦å–å¥¶èŒ¶</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœæ–¹ä¾¿çš„è¯ èƒ½å¦é™„ä¸Šè¯¾åé—®é¢˜çš„ è§£æ³•ã€‚æ–¹ä¾¿å¯¹ä¸€ä¸‹~è‡ªå·±çš„æ€è·¯</div>2019-10-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/97/80740db0.jpg" width="30px"><span>JW</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¥½ï¼æˆ‘è¿è¡Œä»£ç å‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œæ˜¯ç¯å¢ƒçš„é—®é¢˜å—ï¼Ÿ

Unhandled exception:
NoSuchMethodError: No static method &#39;withCode&#39; declared in class &#39;ShoppingCart&#39;.
Receiver: ShoppingCart
Tried calling: withCode(name: &quot;å¼ ä¸‰&quot;, code: &quot;123456&quot;)
#0      NoSuchMethodError._throwNew (dart:core-patch&#47;dart:core&#47;errors_patch.dart:203)
#1      main (file:&#47;&#47;&#47;Users&#47;jw&#47;flutter_app&#47;lib&#47;dart_sample.dart:55:16)
#2      _startIsolate.&lt;anonymous closure&gt; (dart:isolate-patch&#47;dart:isolate&#47;isolate_patch.dart:279)
#3      _RawReceivePortImpl._handleMessage (dart:isolate-patch&#47;dart:isolate&#47;isolate_patch.dart:165)</div>2019-09-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/08/f7/2c3238bd.jpg" width="30px"><span>Lihyper</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>äº¤ä½œä¸šäº†,è€å¸ˆ

main() {
  ShopCart.withCode(&quot;å¼ ä¸‰&quot;, &quot;123456&quot;)
    ..bookings = [Item(&quot;è‹¹æœ&quot;, 10.0, 3), Item(&quot;æ¨±æ¡ƒ&quot;, 100.0, 1)]
    ..printInfo();
}

class Meta {
  double price;
  String name;
  int count;

  Meta(this.name, this.price, this.count);
}

class Item extends Meta {
  Item(name, price, count) : super(name, price, count);

  Item operator +(Item other) =&gt; Item(name + other.name,
      price * count + other.price * other.count, count + other.count);
}

class ShopCart extends Meta with PrintHelper {
  String code;
  List&lt;Item&gt; bookings;
  DateTime date;

  &#47;&#47; æ²¡æœ‰é‡è½½,æ‰€ä»¥å‡ºç°äº†å¯é€‰å‚æ•°
  &#47;&#47;ShopCart(String name) : this.withCode(name,null);

  ShopCart(String name, String code) : this.withCode(name, code);

  ShopCart.withCode(String name, this.code)
      : date = DateTime.now(),
        super(name, 0, 0);

  get price {
    &#47;&#47;a??bè¿ç®—ç¬¦a!=null ? a:b;
    if (bookings == null || bookings.isEmpty) {
      return 0;
    }
    return bookings.reduce((value, element) =&gt; value + element).price;
  }

  get count {
    if (bookings == null || bookings.isEmpty) {
      return 0;
    }
    return bookings.reduce((value, element) =&gt; value + element).count;
  }

  getListInfo() {
    String bookInfo = &quot;&quot;;
    if (bookings == null || bookings.isEmpty) {
      return bookInfo;
    }
    bookings.forEach((item) =&gt;
        bookInfo += &quot;å•†å“åç§°:${item.name} å•ä»·:${item.price} æ•°é‡:${item.count}\n&quot;);
    return bookInfo;
  }

  getInfo() =&gt; &#39;&#39;&#39;
  è´­ç‰©è½¦ä¿¡æ¯:
  ---------------------
  ç”¨æˆ·å: $name 
  ä¼˜æƒ ç : ${code ?? &quot;æ²¡æœ‰&quot;}
  å•†å“æ˜ç»†:\n ${getListInfo()}
  æ€»ä»·: $price
  æ€»æ•°é‡: $count
  Date: $date
  ---------------------
  
  &#39;&#39;&#39;;
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());

  getInfo();
}</div>2019-08-30</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTK95MP7iatc1WcDdusl6mWibiaGXQebI2WFbfTjANfH2eaQX07u7nTnQ6JGOaYKibXYOjPwXDT2FBhUXg/132" width="30px"><span>Geek_614299</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ShoppingCartç±»ä¸­çš„ double get price {...}çœ‹ä¸æ‡‚ï¼Œæ„æ€æ˜¯é‡å†™Metaç±»ä¸­priceå±æ€§ï¼Ÿä¸€å®šè¦å¸¦getï¼ˆæˆ–è€…getçš„æ„æ€ï¼‰ï¼Ÿæ¥è‡ªjså¼€å‘è€…çš„äºŒè¿é—®å·
</div>2019-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/83/b2/e83dd93c.jpg" width="30px"><span>ğŸŒ™</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>double get price =&gt; bookings.reduce((value, element) =&gt; value + element).price;è¿™ä¸ªnameä¹Ÿä¼šæ‹¼æ¥èµ·æ¥ï¼Ÿ</div>2019-08-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/59/a6/4e185fcb.jpg" width="30px"><span>æ›¹æ˜†</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œdouble get price {...}è¿™ä¸ªè¯­æ³•æ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Ÿè¿˜æœ‰dartæ–¹æ³•ä¸ç”¨å†™è¿”å›å€¼å¾—å—ï¼Ÿ</div>2019-08-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/d3/98/60d13550.jpg" width="30px"><span>Bryan</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>get price åˆ©ç”¨ reduce çš„æ–¹æ³•é‚£é‡Œï¼Œæ¯æ¬¡ reduce éƒ½ä¼šè°ƒç”¨é‡è½½çš„ + é€ æˆä¸€ä¸ªæ–°ç±»çš„å®ä¾‹åŒ–ï¼Œè¿™æ ·ä¸ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ</div>2019-08-12</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/pYVcoj11tKBribn2L05X16icJ4hkMg7fh0iaAnZjGfiawunst0a7mRQiaI5unFy3PUZdY9a1u1IXicOw4muedQGrubibQ/132" width="30px"><span>Todd</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>abstract class printHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

class Meta {
  double price;
  String name;
  &#47;&#47; 1.å•†å“æ•°é‡å±æ€§ï¼›
  int quantity;
  Meta(this.name, this.price, this.quantity);
}

&#47;&#47; å®šä¹‰å•†å“ Item ç±»
class Item extends Meta {
  Item(name, price, quantity) : super(name, price, quantity);
  &#47;&#47; é‡è½½äº† + è¿ç®—ç¬¦ï¼Œåˆå¹¶å•†å“ä¸ºå¥—é¤å•†å“
  Item operator +(Item item) =&gt; Item(name + item.name,
      price * quantity + item.price * item.quantity, quantity + item.quantity);

  @override
  String toString() {
    &#47;&#47; 2.è´­ç‰©è½¦ä¿¡æ¯å¢åŠ å•†å“åˆ—è¡¨ä¿¡æ¯ï¼ˆåŒ…æ‹¬å•†å“åç§°ï¼Œæ•°é‡åŠå•ä»·ï¼‰è¾“å‡ºï¼Œå®ç°å°ç¥¨çš„åŸºæœ¬åŠŸèƒ½ã€‚
    return &#39;${name}, ${price}, ${quantity}&#39;;
  }
}

&#47;&#47; å®šä¹‰è´­ç‰©è½¦ç±»
class ShoppingCart extends Meta with printHelper {
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;

  double get price =&gt; bookings.reduce((v, e) =&gt; v + e).price;
  int get quantity =&gt; bookings.reduce((v, e) =&gt; v + e).quantity;

  &#47;&#47; é»˜è®¤åˆå§‹åŒ–æ–¹æ³•ï¼Œè½¬å‘åˆ° withCode é‡Œ
  ShoppingCart({name}) : this.withCode(name: name, code: null);
  &#47;&#47;withCode åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code})
      : date = DateTime.now(),
        super(name, 0, 0);
  &#47;&#47;?? è¿ç®—ç¬¦è¡¨ç¤ºä¸º code ä¸ä¸º nullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼ &quot; æ²¡æœ‰ &quot;
  getInfo() =&gt; &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
ç”¨æˆ·å: $name
ä¼˜æƒ ç : ${code ?? &quot; æ²¡æœ‰ &quot;}
æ€»ä»·æ ¼: $price
æ€»ä»¶æ•°: $quantity
Date: $date
-----------------------------
å•†å“åˆ—è¡¨ä¿¡æ¯ï¼š
åç§°, ä»·æ ¼, æ•°é‡
${bookings.join(&#39;\n&#39;)}
-----------------------------
  &#39;&#39;&#39;;
}

void main() {
  ShoppingCart.withCode(name: &#39;å¼ ä¸‰&#39;, code: &#39;123&#39;)
    ..bookings = [Item(&#39;è‹¹æœ&#39;, 10.0, 3), Item(&#39;é¸­æ¢¨&#39;, 20.0, 5)]
    ..printInfo();

  ShoppingCart.withCode(name: &#39;å¼ q&#39;)
    ..bookings = [Item(&#39;è‹¹æœ&#39;, 10.0, 7), Item(&#39;é¸­æ¢¨&#39;, 20.0, 4)]
    ..printInfo();
}
</div>2019-08-10</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/qoEev6CRRTKAlHibxGcfbFIBaUbLS6XUQ5cRylZI6hYV66m4PSOMQo5vmv1GUiaicLUn9oouQb74tJ26JI88oSq5g/132" width="30px"><span>jimzqw</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Meta {
  double price;
  String name;
  &#47;&#47; æˆå‘˜å˜é‡åˆå§‹åŒ–è¯­æ³•ç³–
  Meta(this.name, this.price);
}

class Item extends Meta{
int count;
  Item(name, price, this.count) : super(name, price);
  &#47;&#47; é‡è½½ + è¿ç®—ç¬¦ï¼Œå°†å•†å“å¯¹è±¡åˆå¹¶ä¸ºå¥—é¤å•†å“
  Item operator+(Item item) =&gt; Item(name + item.name, price*count + item.price*item.count, count + item.count); 
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

&#47;&#47;with è¡¨ç¤ºä»¥éç»§æ‰¿çš„æ–¹å¼å¤ç”¨äº†å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åŠå‡½æ•°
class ShoppingCart extends Meta with PrintHelper{
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;
  &#47;&#47; ä»¥å½’çº³åˆå¹¶æ–¹å¼æ±‚å’Œ
  double get price =&gt; bookings.reduce((value, element) =&gt; value + element).price;

  int get count =&gt; bookings.reduce((value, element) =&gt; value + element).count;
  &#47;&#47; é»˜è®¤åˆå§‹åŒ–å‡½æ•°ï¼Œè½¬å‘è‡³ withCode å‡½æ•°
  ShoppingCart({name}) : this.withCode(name:name, code:null);
  &#47;&#47;withCode åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code}) : date = DateTime.now(), super(name,0);

  &#47;&#47;?? è¿ç®—ç¬¦è¡¨ç¤ºä¸º code ä¸ä¸º nullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼ &quot; æ²¡æœ‰ &quot;
  @override
  getInfo() =&gt; &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
  ç”¨æˆ·å: $name
  ä¼˜æƒ ç : ${code??&quot; æ²¡æœ‰ &quot;}
  æ€»ä»·: $price
  æ•°é‡ï¼š $count
  Date: $date
-----------------------------
&#39;&#39;&#39;;
}

void main() {
  ShoppingCart.withCode(name:&#39;å¼ ä¸‰&#39;, code:&#39;123456&#39;)
  ..bookings = [Item(&#39;è‹¹æœ&#39;,10.0, 2), Item(&#39;é¸­æ¢¨&#39;,20.0, 1)]
  ..printInfo();

  ShoppingCart(name:&#39;æå››&#39;)
  ..bookings = [Item(&#39;é¦™è•‰&#39;,15.0, 2), Item(&#39;è¥¿ç“œ&#39;,40.0, 1)]
  ..printInfo();
}
</div>2019-07-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/7a/90/dc3537e7.jpg" width="30px"><span>ç¥ç»è›™</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Meta {
  double price;
  String name;
  Meta(this.name, this.price);
}

abstract class PrintHelper{
  printInfo()=&gt;print(getInfo());
  getInfo();
}

class Item extends Meta {
  &#47;&#47; å•†å“æ•°é‡
  int total;
  &#47;&#47; totalå¯é€‰ï¼Œé»˜è®¤1
  Item(name, price, {this.total=1}):super(name,price) ;
  Item operator+(Item item) =&gt; Item(name + item.name, price + item.price*item.total);
}

class ShoppingCart extends Meta with PrintHelper{
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;

  double get price =&gt; bookings.reduce((value, element) =&gt; value + element).price;
  &#47;&#47; è·å–è´­ç‰©è½¦åˆ—è¡¨
  String get _info =&gt; bookings.fold(&#39;å•†å“\tæ•°é‡\tå•ä»·&#39;,(value, element) =&gt; 
                                    &#39;$value\n    ${element.name}\t${element.total}\t${element.price}&#39;);
  ShoppingCart({name}): this.withCode(name: name, code: null);
  ShoppingCart.withCode({name, this.code}): date=DateTime.now(), super(name, 0);
  
  @override
  getInfo() {
    return &#39;&#39;&#39;
    è´­ç‰©è½¦ä¿¡æ¯:
    ç”¨æˆ·å: $name
    ä¼˜æƒ ç : ${code??&quot;æ— &quot;}
    -----------------------------
    $_info
    -----------------------------
    æ€»ä»·: $price
    æ—¥æœŸ: ${date.toString()}
    &#39;&#39;&#39;;
  }
}

void main() {
  ShoppingCart(name:&#39;å¼ ä¸‰&#39;)
    ..bookings = [Item(&#39;è‹¹æœ&#39;, 10.0), Item(&#39;è‰è“&#39;,16.0, total: 3),  Item(&#39;é¸­æ¢¨&#39;, 20.0, total: 2)]
    ..printInfo();
}</div>2019-07-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/56/b7/4258025c.jpg" width="30px"><span>top_founder</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>withcodeä¸­çš„nameï¼Œå‰é¢æ˜¯ä¸æ˜¯å°‘å†™äº†this. ï¼Ÿå¦‚æœä¸åŠ ï¼Œè¾“å‡ºçš„nameæ— å€¼</div>2019-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/af/dc/88c34436.jpg" width="30px"><span>keep</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œä¸ºä»€ä¹ˆdartä¸å¯ä»¥ç›´æ¥è°ƒç”¨å…¶ä»–è¯­è¨€çš„åŠ¨æ€åº“ï¼Ÿæ˜¯dartæ²¡æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Ÿ</div>2019-07-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/35/88/4dfad2fd.jpg" width="30px"><span>å¾è¥¿æ–‡</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>&#47;&#47; æ€è€ƒé¢˜
class Meta {
  String name;
  double price;
  double count;
  &#47;&#47; æˆå‘˜å˜é‡åˆå§‹åŒ–è¯­æ³•ç³–
  Meta(this.name, this.price, this count);
}

class Item extends Meta{
  Item(name, price, count) : super(name, price, count);
  &#47;&#47; é‡è½½ + è¿ç®—ç¬¦ï¼Œå°†å•†å“å¯¹è±¡åˆå¹¶ä¸ºå¥—é¤å•†å“
  Item operator+(Item item) =&gt; Item(name + item.name, count + item.count, price * count + item.price * item.count); 
}

abstract class PrintHelper {
  printInfo() =&gt; print(getInfo());
  getInfo();
}

&#47;&#47;with è¡¨ç¤ºä»¥éç»§æ‰¿çš„æ–¹å¼å¤ç”¨äº†å¦ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡åŠå‡½æ•°
class ShoppingCart extends Meta with PrintHelper{
  DateTime date;
  String code;
  List&lt;Item&gt; bookings;
  &#47;&#47; ä»¥å½’çº³åˆå¹¶æ–¹å¼æ±‚å’Œ
  double get price =&gt; bookings.reduce((value, element) =&gt; value + element).price;
  double get countNum =&gt; bookings.reduce((value, element) =&gt; value + element).count;
  &#47;&#47; é»˜è®¤åˆå§‹åŒ–å‡½æ•°ï¼Œè½¬å‘è‡³ withCode å‡½æ•°
  ShoppingCart({name}) : this.withCode(name:name, code:null);
  &#47;&#47;withCode åˆå§‹åŒ–æ–¹æ³•ï¼Œä½¿ç”¨è¯­æ³•ç³–å’Œåˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œèµ‹å€¼ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–æ–¹æ³•
  ShoppingCart.withCode({name, this.code}) : date = DateTime.now(), super(name,0);

  &#47;&#47;?? è¿ç®—ç¬¦è¡¨ç¤ºä¸º code ä¸ä¸º nullï¼Œåˆ™ç”¨åŸå€¼ï¼Œå¦åˆ™ä½¿ç”¨é»˜è®¤å€¼ &quot; æ²¡æœ‰ &quot;
  @override
  getInfo() =&gt; &#39;&#39;&#39;
è´­ç‰©è½¦ä¿¡æ¯:
-----------------------------
  ç”¨æˆ·å: $name
  ä¼˜æƒ ç : ${code??&quot; æ²¡æœ‰ &quot;}
  æ€»ä»·: $price
  æ€»æ•°é‡: $countNum
  Date: $date
-----------------------------
&#39;&#39;&#39;;
}

void main() {
  ShoppingCart.withCode(name:&#39;å¼ ä¸‰&#39;, code:&#39;123456&#39;)
  ..bookings = [Item(&#39;è‹¹æœ&#39;,10.0,3), Item(&#39;é¸­æ¢¨&#39;,20.0,2)]
  ..printInfo();

  ShoppingCart(name:&#39;æå››&#39;)
  ..bookings = [Item(&#39;é¦™è•‰&#39;,15.0, 1), Item(&#39;è¥¿ç“œ&#39;,40.0, 4)]
  ..printInfo();
}
</div>2019-07-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/55/50/09c6ce64.jpg" width="30px"><span>å¤§ç¥ç•™æ¡å‘½</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘æƒ³ç”¨æ³›å‹æ¥å–åå° data ä¸­çš„æ•°æ®ã€‚æˆ‘çŸ¥é“é™åˆ¶ç»§æ‰¿äº†æŸä¸ªç±»çš„æ˜¯å¯ä»¥çš„ã€‚æˆ‘æƒ³ä¼ å…¥çš„ç±»é™åˆ¶ä¸ºå®ç°äº†fromJsonMapè¿™ä¸ªå·¥å‚æ–¹æ³•çš„å¯ä»¥å—ã€‚</div>2019-07-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1c/9f/9f9f02c3.jpg" width="30px"><span>allen</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ShoppingCart.withCodeè¿™ä¸ªwithCodeæ–¹æ³•æ˜¯è‡ªå·±å®šä¹‰çš„ä¹ˆï¼Œè¿˜æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œæˆ‘æ²¡è§åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œè¿˜æ˜¯è¯´ç›´æ¥èƒ½ç±»ååŠ æ–¹æ³•åå®šä¹‰çš„</div>2019-07-17</li><br/>
</ul>