ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚ä»Šå¤©ï¼Œæˆ‘å’Œä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼Œä»å¤œé—´æ¨¡å¼è¯´èµ·ï¼Œå¦‚ä½•å®šåˆ¶ä¸åŒé£æ ¼çš„Appä¸»é¢˜ã€‚

åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¸ä½ ä»‹ç»äº†ç»„è£…ä¸è‡ªç»˜è¿™ä¸¤ç§è‡ªå®šä¹‰Widgetçš„æ–¹å¼ã€‚å¯¹äºç»„è£…ï¼Œæˆ‘ä»¬æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„å¸ƒå±€é¡ºåºå»åˆ†è§£ç›®æ ‡è§†å›¾ï¼Œå°†åŸºæœ¬çš„Widgetå°è£…åˆ°Columnã€Rowä¸­ï¼Œä»è€Œåˆæˆæ›´é«˜çº§åˆ«çš„Widgetï¼›è€Œå¯¹äºè‡ªç»˜ï¼Œæˆ‘ä»¬åˆ™é€šè¿‡æ‰¿è½½ç»˜åˆ¶é€»è¾‘çš„è½½ä½“CustomPainterï¼Œåœ¨å…¶paintæ–¹æ³•ä¸­ä½¿ç”¨ç”»ç¬”Paintä¸ç”»å¸ƒCanvasï¼Œç»˜åˆ¶ä¸åŒé£æ ¼ã€ä¸åŒç±»å‹çš„å›¾å½¢ï¼Œä»è€Œå®ç°åŸºäºè‡ªç»˜çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚

å¯¹äºä¸€ä¸ªäº§å“æ¥è¯´ï¼Œåœ¨ä¸šåŠ¡æ—©æœŸå…¶å®æ›´å¤šçš„æ˜¯å¤„ç†åŸºæœ¬åŠŸèƒ½æœ‰å’Œæ— çš„é—®é¢˜ï¼šå·¥ç¨‹å¸ˆæ¥è´Ÿè´£å®ç°åŠŸèƒ½ï¼ŒPMè´Ÿè´£åŠŸèƒ½å¥½ç”¨ä¸å¥½ç”¨ã€‚åœ¨äº§å“çš„åŸºæœ¬åŠŸèƒ½å·²ç»å®Œå–„ï¼Œåšåˆ°äº†å…­ä¸ƒååˆ†çš„æ—¶å€™ï¼Œå†å¾€ä¸Šçš„å¦‚ä½•åšå¢é•¿å°±éœ€è¦è¿è¥æ¥ä»‹å…¥äº†ã€‚

åœ¨è¿™å…¶ä¸­ï¼Œå¦‚ä½•é€šè¿‡ç”¨æˆ·åˆ†å±‚å»å®ç°Appçš„ä¸ªæ€§åŒ–æ˜¯å¸¸è§çš„å¢é•¿è¿è¥æ‰‹æ®µï¼Œè€Œä¸»é¢˜æ ·å¼æ›´æ¢åˆ™æ˜¯å®ç°ä¸ªæ€§åŒ–ä¸­çš„ä¸€é¡¹é‡è¦æŠ€æœ¯æ‰‹æ®µã€‚

æ¯”å¦‚ï¼Œå¾®åšã€UCæµè§ˆå™¨å’Œç”µå­ä¹¦å®¢æˆ·ç«¯éƒ½æä¾›äº†å¯¹å¤œé—´æ¨¡å¼çš„æ”¯æŒï¼Œè€Œæ·˜å®ã€äº¬ä¸œè¿™æ ·çš„ç”µå•†ç±»åº”ç”¨ï¼Œè¿˜ä¼šåœ¨ç‰¹å®šçš„ç”µå•†æ´»åŠ¨æ—¥è‡ªåŠ¨æ›´æ–°ä¸»é¢˜æ ·å¼ï¼Œå°±è¿ç°åœ¨çš„æ‰‹æœºæ“ä½œç³»ç»Ÿä¹Ÿæä¾›äº†ç³»ç»Ÿçº§åˆ‡æ¢å±•ç¤ºæ ·å¼çš„èƒ½åŠ›ã€‚

é‚£ä¹ˆï¼Œè¿™äº›åœ¨åº”ç”¨å†…åˆ‡æ¢æ ·å¼çš„åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿåœ¨Flutterä¸­ï¼Œåœ¨æ™®é€šçš„åº”ç”¨ä¸Šå¢åŠ åˆ‡æ¢ä¸»é¢˜çš„åŠŸèƒ½åˆè¦åšå“ªäº›äº‹æƒ…å‘¢ï¼Ÿè¿™äº›é—®é¢˜ï¼Œæˆ‘éƒ½ä¼šåœ¨ä»Šå¤©çš„è¿™ç¯‡æ–‡ç« ä¸­ä¸ä½ è¯¦ç»†åˆ†äº«ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/99/87/5066026c.jpg" width="30px"><span>dao</span> ğŸ‘ï¼ˆ12ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>import &#39;package:flutter&#47;cupertino.dart&#39;;
import &#39;package:flutter&#47;material.dart&#39;;

void main() =&gt; runApp(MyThemePage());

class MyThemePage extends StatelessWidget {
  &#47;&#47; iOS æµ…è‰²ä¸»é¢˜
  final ThemeData kIOSTheme = ThemeData(
      brightness: Brightness.light,
      accentColor: Colors.white,
      primaryColor: Colors.blue,
      iconTheme: IconThemeData(color: Colors.grey),
      textTheme: TextTheme(body1: TextStyle(color: Colors.black)));

  &#47;&#47; Android æ·±è‰²ä¸»é¢˜
  final ThemeData kAndroidTheme = ThemeData(
      brightness: Brightness.dark, &#47;&#47; æ·±è‰²ä¸»é¢˜
      accentColor: Colors.black, &#47;&#47;(æŒ‰é’®)Widget å‰æ™¯è‰²ä¸ºé»‘è‰²
      primaryColor: Colors.cyan, &#47;&#47; ä¸»é¢˜è‰²ä¸ºé’è‰²
      iconTheme: IconThemeData(color: Colors.blue), &#47;&#47;icon ä¸»é¢˜è‰²ä¸ºè“è‰²
      textTheme: TextTheme(body1: TextStyle(color: Colors.red)) &#47;&#47; æ–‡æœ¬ä¸»é¢˜è‰²ä¸ºçº¢è‰²
      );

  Widget build(BuildContext context) {
    var theme = MyTheme(
      title: &#39;Flutter Demo Home Page&#39;,
      themes: [kIOSTheme, kAndroidTheme],
    );
    return MaterialApp(
      title: &#39;My Theme&#39;,
      theme: kAndroidTheme,
      home: theme,
    );
  }
}

class MyTheme extends StatefulWidget {
  MyTheme({Key key, this.title, this.themes}) : super(key: key);

  final String title;
  final List&lt;ThemeData&gt; themes;

  _MyThemeState createState() =&gt; _MyThemeState();
}

class _MyThemeState extends State&lt;MyTheme&gt; {
  bool isLight;

  @override
  void initState() {
    isLight = true;
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return Theme(
        child: Scaffold(
          appBar: AppBar(
            title: Text(&#39;Theme switch&#39;),
          ),
          floatingActionButton: FloatingActionButton(
            child: Text(isLight ? &#39;Night&#39; : &#39;Light&#39;),
            onPressed: () {
              setState(() {
                isLight = !isLight;
              });
            },
          ),
        ),
        data: isLight ? widget.themes[0] : widget.themes[1]);
  }
}
</div>2019-08-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/93/80/ccf2f428.jpg" width="30px"><span>ç°ç°</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>class _HomeState extends State&lt;Home&gt; with SingleTickerProviderStateMixin {
  TabController _controller;
  bool isNight = false;
  @override
  void initState() {
    super.initState();
    _controller = TabController(length: 2, vsync: this);
  }

  @override
  Widget build(BuildContext context) {
    return
      Theme(
        data: ThemeData(
          brightness: isNight ? Brightness.dark : Brightness.light,
        ),
        child: Stack(
          children: &lt;Widget&gt;[
            Scaffold(
              ...
            ),
            Positioned(
              bottom: 20,
              right: 20,
              child: FloatingActionButton(
                onPressed: () {setState(() {
                  isNight = !isNight;
                });},
                child: Text(isNight ? &#39;æ—¥é—´&#39; : &#39;å¤œé—´&#39;),
              ),
            )
          ],
        ),
      );
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }
}
</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/77/ff/4ce0aa51.jpg" width="30px"><span>Î©</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>defaultTargetPlatformè¿™ä¸ªå˜é‡å“ªé‡Œæ¥çš„ï¼Œæ–‡ç« ä¸­æ²¡æœ‰è¯´æ˜æ¸…æ¥š</div>2019-08-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/23/74/e0b9807f.jpg" width="30px"><span>å°ç±³</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ€è€ƒé¢˜ï¼š
1ã€å¢åŠ ä¸€ä¸ªå¸ƒå°”å˜é‡
      bool  _isLight = false
2ã€åœ¨ThemeDataä¸­ï¼Œæ ¹æ®_isLightæ¥æ˜¾ç¤ºæ˜¯å¦ä¸ºé«˜äº®æˆ–è€…æš—è‰²ã€‚
      brightness: _isLight ? Brightness.light : Brightness.dark
3ã€å¢åŠ ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®ï¼Œç‚¹å‡»æ”¹å˜_isLightå€¼ã€‚
      FlatButton(onPressed: (){setState(() { _isLight = !_isLight; });},child: Text(_isLight?&quot;ç™½å¤©&quot;:&quot;å¤œé—´&quot;))</div>2019-08-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/bc/06/d01b419f.jpg" width="30px"><span>æ–‡å¿ƒé›•é¾™</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç¬¬ä¸‰æ–¹æ’ä»¶ https:&#47;&#47;pub.dev&#47;packages&#47;dynamic_theme#-readme-tab-</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg" width="30px"><span>èœå¤´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Theme.of(context) æ–¹æ³•å°†å‘ä¸ŠæŸ¥æ‰¾ Widget æ ‘ï¼Œå¹¶è¿”å› Widget æ ‘ä¸­æœ€è¿‘çš„ä¸»é¢˜ Themeã€‚å¦‚æœ Widget
çš„çˆ¶ Widget ä»¬æœ‰ä¸€ä¸ªå•ç‹¬çš„ä¸»é¢˜å®šä¹‰ï¼Œåˆ™ä½¿ç”¨è¯¥ Theme
å¦‚æœä¸æ˜¯ï¼Œå°±ä½¿ç”¨ App å…¨å±€ Themeã€‚

è¿™ä¸ªè¡¨ç¤ºæ²¡å¤ªæ‡‚ã€‚
æœ€è¿‘ï¼Ÿæ˜¯è¡¨ç¤ºå…¶ç¬¬ä¸€ä¸ª superWidget å—ï¼Ÿ
çˆ¶ Widget ä»¬ï¼Ÿä¸€ä¸ª widget æœ‰å¤šä¸ªçˆ¶ widget?


</div>2019-11-15</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKJ3dLlYr6tznfnZXJNsD7Jw48BVnFSib3RO3VWEN0pgebRY1jaR8YXLQ6iaAjTsFiamOWSA3UPAa37A/132" width="30px"><span>Geek_e7jq8k</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®ä¸‹ï¼Œç›®å‰ä¸»æµçš„Appå†…UIçš„æ ·å¼åº”è¯¥ä¸ä¼šå±€é™äºThemeDataä¸­çš„å®šä¹‰çš„æƒ…å†µã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„Buttonï¼Œæ˜¯åœ¨ä»£ç ä¸­è®¾ç½®çš„ç‰¹æ®ŠColorï¼Œä¸æ˜¯Themedataé‡Œçš„ï¼Œè¿™ç§æƒ…å†µä¸‹çš„buttonï¼ˆæˆ–ç±»ä¼¼å®ç°çš„å…¨éƒ¨widgetï¼‰ï¼Œå¯¹äºæ—¥å¤œé—´åˆ‡æ¢è¿™ç§åŠ¨æ€å¤„ç†çš„æ—¶å€™ï¼Œæœ‰ç»Ÿä¸€çš„æ¢é¢œè‰²çš„æ–¹æ³•ä¹ˆï¼Ÿè¿˜æ˜¯éœ€è¦åœ¨æ¯ä¸ªwidgetä¸­éƒ½è¦å®ç°å¯¹åº”çš„é¢œè‰²å¤„ç†ï¼ŸåŒæ ·çš„å¯¹äºTextThemeï¼ŒThemeDataåªæä¾›äº†textTheme,primaryTextTheme,accentTextThemeä¸‰ç§ï¼Œå¦‚æœAppå†…æœ‰æ›´å¤šçš„é€šç”¨TextThemeï¼Œå¦‚ä½•åŠ¨æ€çš„ç»Ÿä¸€åˆ‡æ¢å‘¢ï¼Ÿ</div>2019-10-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/1e/e0/238fda97.jpg" width="30px"><span>ğŸŒ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœå…¨å±€æ›´æ”¹ä¸»é¢˜çš„è¯ï¼Œé‚£å²‚ä¸æ˜¯è¦æŠŠMaterialAppè¿™ä¸ªWidgetè®¾ç½®æˆæœ‰çŠ¶æ€çš„widget?è¿™æ ·å­æ˜¯ä¸æ˜¯æ›´è€—æ€§èƒ½</div>2019-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg" width="30px"><span>å’Œå°èƒ–</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œè¿™ä¸ªå…¨å±€ä¸»é¢˜çš„è®¾ç½®åªæ˜¯é’ˆå¯¹äºå¸ƒå±€ä¸­çš„å¯¹åº” widget æ²¡æœ‰è®¾ç½®æ ·å¼æ‰ä¼šç”Ÿæ•ˆå§ï¼Ÿä¾‹å¦‚æˆ‘åœ¨ ThemeData é‡Œé¢è®¾ç½®äº†æ–‡å­—é¢œè‰²ä¸ºé»‘è‰²ï¼Ÿä½†æ˜¯æˆ‘åœ¨å­ widget é‡Œé¢è®¾ç½®äº†ä¸€ä¸ªæ–‡å­—ä¼šçº¢è‰²ï¼Œé‚£ä¹ˆæ­¤æ—¶é»‘è‰²æ˜¯ä¸ç”Ÿæ•ˆçš„å§ï¼Ÿ</div>2019-09-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/01/1c/d638d46e.jpg" width="30px"><span>å®‹ä¸–é€š</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆï¼Œåœ¨flutter1.8.2ï¼Œ1.8.3ç‰ˆæœ¬ä¸­å¢åŠ äº†ThemeModeï¼Œæ˜¯ä¸æ˜¯ç”¨è¿™ä¸ªæ¥æ§åˆ¶ä¸»é¢˜æ˜æš—ä¼šæ›´å¥½ä¸€ç‚¹?</div>2019-08-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>è®¸ç«¥ç«¥</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆä½ å¥½ï¼Œè¿™ä¸ªThemeåº”è¯¥æ˜¯è¦å®šä¹‰ä¸ºçŠ¶æ€ï¼Œåœ¨setStateé‡Œé¢ä¿®æ”¹è¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯ä»£ç ä¸çŸ¥é“æ€ä¹ˆå†™ï¼Œè€å¸ˆèƒ½å¦ç»™ä¸€ä¸‹ä»£ç ã€‚</div>2019-08-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/98/02/74cb0645.jpg" width="30px"><span>å˜å•¦å„¿ã€‚</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œfinal ThemeData kIOSTheme = ThemeData(...çœç•¥)ï¼Œè¿™äº›è¯­æ³•æˆ‘æ²¡çœ‹æ˜ç™½ï¼Œèƒ½ç»™æˆ‘è§£é‡Šä¸‹å—ï¼Ÿæˆ–è€…å¯ä»¥æä¾›å‚è€ƒé“¾æ¥åœ°å€ï¼Ÿ</div>2021-07-05</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epk6XJfVGqsW1b5oiatsuvSRkCF4yo2KxSUSf5LHRRTbuCPKJrRiblqRbMZBuicQMgDTO1bRp6vXW7Lg/132" width="30px"><span>jayce</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æˆ‘æ¥è¯´ä¸ªappåˆ‡æ¢å¤œé—´æ¨¡å¼çš„,ThemeMode system, light, dark

Box mainBox;
void main() async {
  await Hive.initFlutter();
  mainBox = await Hive.openBox(&#39;main&#39;);
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    int modeIndex = mainBox.get(&#39;themeModeIndex&#39;);
    ThemeMode themeMode = modeIndex == null ? ThemeMode.system : ThemeMode.values[modeIndex];
    return MultiProvider(
      providers: [
        ChangeNotifierProvider&lt;ValueNotifier&lt;ThemeMode&gt;&gt;(
          create: (context) =&gt; ValueNotifier(themeMode),
        ),
      ],
      child: Consumer&lt;ValueNotifier&lt;ThemeMode&gt;&gt;(builder: (context, value, child) {
        mainBox.put(&#39;themeModeIndex&#39;, value.value.index);
        return MaterialApp(
          theme: ThemeData(
            brightness: Brightness.light,
            primaryColor: Colors.blue,
            scaffoldBackgroundColor: Colors.white,
          ),
          darkTheme: ThemeData(
            brightness: Brightness.dark,
            primaryColor: Colors.deepPurple,
            scaffoldBackgroundColor: Color(0xFF666666),
          ),
          themeMode: value.value,
          home: HomeScreen(),
        );
      }),
    );
  }
}</div>2021-02-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/aa/76/37c27871.jpg" width="30px"><span>æœ¨æœ¨äº¬å°¤</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ï¼Œè¯·é—®è°ƒå¤œé—´æ¨¡å¼çš„æ—¶å€™ï¼Œå¦‚æœæƒ³ç»™æ‰€æœ‰çš„é¡µé¢éƒ½åŠ ä¸€å±‚åŠé€æ˜çš„å›¾å±‚ï¼Œåº”è¯¥æ€ä¹ˆè°ƒå‚æ•°ã€‚ä¸å¯èƒ½æ¯ä¸ªé¡µé¢éƒ½æ·»åŠ å›¾å±‚ï¼Œç›®å‰çŸ¥é“å¯ä»¥åœ¨materialapp  themedata  scaffold  è°ƒå‚æ•°ã€‚</div>2020-05-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/bc/0e/c76861eb.jpg" width="30px"><span>jianwei</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>åœ¨å…¨å±€çš„themeä¸­å®šä¹‰å¤šä¸ª textTheme: TextTheme(body1: TextStyle(color: Colors.grey), body2: TextStyle(color: Colors.white), ...)ï¼Œç„¶åå†…éƒ¨widgetæŒ‰éœ€åŠ è½½ç›¸åº”çš„ theme.body1 or theme.body2</div>2020-01-07</li><br/>
</ul>