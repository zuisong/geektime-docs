ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚

åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·å­¦ä¹ äº†å¦‚ä½•åœ¨Flutterä¸­å®ç°åŠ¨ç”»ã€‚å¯¹äºç»„ä»¶åŠ¨ç”»ï¼ŒFlutterå°†åŠ¨ç”»çš„çŠ¶æ€ä¸æ¸²æŸ“è¿›è¡Œäº†åˆ†ç¦»ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨åŠ¨ç”»æ›²çº¿ç”Ÿæˆå™¨Animationã€åŠ¨ç”»çŠ¶æ€æ§åˆ¶å™¨AnimationControllerä¸åŠ¨ç”»è¿›åº¦ç›‘å¬å™¨ä¸€èµ·é…åˆå®ŒæˆåŠ¨ç”»æ›´æ–°ï¼›è€Œå¯¹äºè·¨é¡µé¢åŠ¨ç”»ï¼ŒFlutteræä¾›äº†Heroç»„ä»¶ï¼Œå¯ä»¥å®ç°å…±äº«å…ƒç´ å˜æ¢çš„é¡µé¢åˆ‡æ¢æ•ˆæœã€‚

åœ¨ä¹‹å‰çš„ç« èŠ‚é‡Œï¼Œæˆ‘ä»¬ä»‹ç»äº†å¾ˆå¤šFlutteræ¡†æ¶å‡ºè‰²çš„æ¸²æŸ“å’Œäº¤äº’èƒ½åŠ›ã€‚æ”¯æ’‘èµ·è¿™äº›å¤æ‚çš„èƒ½åŠ›èƒŒåï¼Œå®é™…ä¸Šæ˜¯åŸºäºå•çº¿ç¨‹æ¨¡å‹çš„Dartã€‚é‚£ä¹ˆï¼Œä¸åŸç”ŸAndroidå’ŒiOSçš„å¤šçº¿ç¨‹æœºåˆ¶ç›¸æ¯”ï¼Œå•çº¿ç¨‹çš„Dartå¦‚ä½•ä»è¯­è¨€è®¾è®¡å±‚é¢å’Œä»£ç è¿è¡Œæœºåˆ¶ä¸Šä¿è¯Flutter UIçš„æµç•…æ€§å‘¢ï¼Ÿ

å› æ­¤ä»Šå¤©ï¼Œæˆ‘ä¼šé€šè¿‡å‡ ä¸ªå°ä¾‹å­ï¼Œå¾ªåºæ¸è¿›åœ°å‘ä½ ä»‹ç»Dartè¯­è¨€çš„Event Loopå¤„ç†æœºåˆ¶ã€å¼‚æ­¥å¤„ç†å’Œå¹¶å‘ç¼–ç¨‹çš„åŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œä»è¯­è¨€è®¾è®¡å’Œå®è·µå±‚é¢ç†è§£Dartå•çº¿ç¨‹æ¨¡å‹ä¸‹çš„ä»£ç è¿è¡Œæœ¬è´¨ï¼Œä»è€Œæ‡‚å¾—åç»­å¦‚ä½•åœ¨å·¥ä½œä¸­ä½¿ç”¨Futureä¸Isolateï¼Œä¼˜åŒ–æˆ‘ä»¬çš„é¡¹ç›®ã€‚

## Event Loopæœºåˆ¶

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹è¿™æ ·ä¸€ä¸ªæ¦‚å¿µï¼Œé‚£å°±æ˜¯**Dartæ˜¯å•çº¿ç¨‹çš„**ã€‚é‚£å•çº¿ç¨‹æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿè¿™æ„å‘³ç€Dartä»£ç æ˜¯æœ‰åºçš„ï¼ŒæŒ‰ç…§åœ¨mainå‡½æ•°å‡ºç°çš„æ¬¡åºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œï¼Œä¸ä¼šè¢«å…¶ä»–ä»£ç ä¸­æ–­ã€‚å¦å¤–ï¼Œä½œä¸ºæ”¯æŒFlutterè¿™ä¸ªUIæ¡†æ¶çš„å…³é”®æŠ€æœ¯ï¼ŒDartå½“ç„¶ä¹Ÿæ”¯æŒå¼‚æ­¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**å•çº¿ç¨‹å’Œå¼‚æ­¥å¹¶ä¸å†²çªã€‚**
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/0f/c2/9b/75ba46ad.jpg" width="30px"><span>jerry</span> ğŸ‘ï¼ˆ23ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ‚¨å¥½è€å¸ˆï¼Œå•çº¿ç¨‹æ¨¡å‹æ˜¯æŒ‡çš„äº‹ä»¶é˜Ÿåˆ—æ¨¡å‹ï¼Œå’Œç»˜åˆ¶ç•Œé¢çš„çº¿ç¨‹æ˜¯ä¸€ä¸ªå—</div>2019-10-29</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJEDNglUOrnn3bWOByASEZjMSGZl9EEiby6Z2hfQdCFLuP2FbphsEbSGEQyA1VmmhwqCPiaiaguHMoZQ/132" width="30px"><span>Geek_keyi</span> ğŸ‘ï¼ˆ16ï¼‰ ğŸ’¬ï¼ˆ6ï¼‰<div>å¯¹Dartå•çº¿ç¨‹æ¨¡å‹ç†è§£è¿˜æ˜¯è¿·æƒ‘ï¼Œè¯·æ•™ä¸€ä¸‹ï¼šå‡å¦‚æœ‰ä¸€ä¸ªä»»åŠ¡ï¼ˆè¯»å†™æ–‡ä»¶æˆ–è€…ç½‘ç»œï¼‰è€—æ—¶10ç§’ï¼Œå¹¶ä¸”åŠ å…¥åˆ°äº†äº‹ä»¶ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ‰§è¡Œå•è¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ä¸å°±æŠŠçº¿ç¨‹å¡ä¸»å—ï¼Ÿ</div>2019-09-25</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqr5ibqxYwcSgqPA7s49MZb1vEKKXT4mPTojwiclXkJf3ug26NuzTa6A5gbicR2rAUHdEkUAn13Rr2KQ/132" width="30px"><span>å´å°å®‰</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>ç°åœ¨æ‰‹æœºéƒ½æ˜¯å¤šæ ¸ï¼Œä½¿ç”¨futureæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡éƒ½æ˜¯æ”¾åœ¨å½“å‰çº¿ç¨‹ï¼Œè€Œè¦åœ¨å…¶ä»–çº¿ç¨‹æ‰§è¡Œå°±è¦è¿™ä¹ˆéº»çƒ¦ï¼Œè¿™æ ·å¤§éƒ¨åˆ†äººå†™çš„å¼‚æ­¥ä»»åŠ¡éƒ½å‘æŒ¥ä¸äº†å¤šæ ¸çš„æ€§èƒ½ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æµªè´¹ï¼Ÿ</div>2019-08-21</li><br/><li><img src="" width="30px"><span>Geek_20f143</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>    Future(() =&gt; print(&#39;a1&#39;))
        .then((_) {
      Future(() =&gt; print(&#39;a2&#39;));
    }).then((_) =&gt; print(&#39;a3&#39;));


Future(() =&gt; print(&#39;a1&#39;))
        .then((_) =&gt; Future(() =&gt; print(&#39;a2&#39;)))
        .then((_) =&gt; print(&#39;a3&#39;));

è€å¸ˆ,ä¸ºä»€ä¹ˆç¬¬ä¸€éƒ¨åˆ†æ‰“å°é¡ºåºæ˜¯a1 a3 a2... ç¬¬äºŒéƒ¨åˆ†æ‰“å°é¡ºåºæ˜¯a1 a2 a3
a2åŒºåˆ«é‚£éƒ¨åˆ†ä¸æ˜¯åªæ˜¯è¯­æ³•ç³–å—?</div>2019-12-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg" width="30px"><span>èœå¤´</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>1ã€å› ä¸ºä¸¤ä¸ª SendPort çš„ä½œç”¨ä¸ä¸€æ ·
ç¬¬ä¸€ä¸ª SendPort æ˜¯ä¸ºäº†è®©å¹¶å‘ Isolate å›ä¼ ä¸€ä¸ª SendPort
ç¬¬äºŒä¸ª SendPort æ˜¯ä¸ºäº†è®©å¹¶å‘ Isolate å›ä¼ ç»“æœ
å¯ä»¥æ”¹é€ æˆä¸€ä¸ª
ç›‘å¬ç¬¬ä¸€ä¸ª SendPort çš„å›è°ƒï¼Œæ ¹æ®ç»“æœç±»å‹å¤ç”¨è¿™ä¸ª SendPort
å¹¶ä¸”åœ¨è®¡ç®—ç»“æœå®Œæˆä¹‹åå…³æ‰ SendPort å³å¯
</div>2019-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/da/66/5858322e.jpg" width="30px"><span>æ»¡å¤§å¤§</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>await çš„ä¸Šä¸‹æ–‡å‡½æ•°å¹¶ä¸åŒ…å«è°ƒç”¨æ ˆï¼Œå› æ­¤ func åç»­ä»£ç ç»§ç»­æ‰§è¡Œï¼Œæ‰“å°â€œfunc afterâ€ã€‚è¿™é‡Œæ€ä¹ˆç†è§£ï¼Ÿ</div>2019-12-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/8d/94/150dfe78.jpg" width="30px"><span>GGL</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ7ï¼‰<div>&#47;&#47; ç¬¬ä¸€æ®µ
  Future(() =&gt; print(&#39;f6&#39;))
    .then((_) =&gt; Future(() =&gt; print(&#39;f7&#39;)))
    .then((_) =&gt; print(&#39;f8&#39;));

æ‰§è¡Œç»“æœä¸ºï¼šf6 f7 f8

  &#47;&#47; ç¬¬äºŒæ®µ
  Future(() =&gt; print(&#39;f6&#39;))
  .then((_) {
      Future(() =&gt; print(&#39;f7&#39;));
    })
  .then((_) =&gt; print(&#39;f8&#39;));

æ‰§è¡Œç»“æœä¸ºï¼šf6 f8 f7

è€å¸ˆï¼Œä¸Šé¢è¿™ä¸¤æ®µä»£ç ä¸ºä»€ä¹ˆæ‰§è¡Œç»“æœä¸ä¸€æ ·å‘¢ï¼Ÿ</div>2019-11-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/sgEfkeMSIIibeH4l0HS8uwM6PGY3DSHoW5tV9l1hDQ06tr3OnI7F545Wdxsh59rqOKnzjLUpCcEqic3P9zZbKzPQ/132" width="30px"><span>æ¥¼å¤–æ¥¼</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Dart ä¸­çš„ await å¹¶ä¸æ˜¯é˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯å¼‚æ­¥ç­‰å¾…ï¼Œè¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰é—®é¢˜ï¼Œawait å°±æ˜¯é˜»å¡åé¢ä»£ç æ‰§è¡Œï¼Œç­‰å¾…å¼‚æ­¥ä»£ç è¿”å›ã€‚éš¾é“æˆ‘ç†è§£æœ‰è¯¯ï¼Ÿ</div>2019-08-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/a7/be/b036d9c8.jpg" width="30px"><span>lk</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Future(() =&gt; print(&#39;f1&#39;))
      .then((_) async =&gt;  scheduleMicrotask(() =&gt; print(&#39;f2&#39;)))
      .then((_) =&gt; print(&#39;f3&#39;));
  Future(() =&gt; print(&#39;f4&#39;));</div>2019-08-29</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/h0KAdRFKjCOSLRjzictvlaHOxsEiaWMSqcO68oiaUqffzyYlEKrDRvicHociabv72HNuR2VdECr8mVFIRiayM0Dd7bNDnaiceicHysF7/132" width="30px"><span>Geek_869250</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆå¯ä»¥å’ŒJSçš„event loopåšä¸ªæ¯”è¾ƒå—
</div>2019-10-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/0b/73/4f1c9676.jpg" width="30px"><span>èˆ’å¤§é£</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œè¿˜æ˜¯æœ‰ç‚¹å›°æƒ‘ï¼Œå¸Œæœ›è§£ç­”ä¸‹ï¼Œä½ è¯´çš„:æ–‡ä»¶IOå’Œç½‘ç»œè°ƒç”¨å¹¶ä¸æ˜¯åœ¨dartå±‚åšçš„ï¼Œè€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹ï¼Œè¿™å¥è¯æ€ä¹ˆç†è§£ï¼Œæ˜¯å› ä¸ºdarté‡Œçš„æ–‡ä»¶IOå’Œç½‘ç»œè°ƒç”¨æ˜¯è¿™æ ·å°è£…å®ç°çš„å—?å¦‚æœä¸æ˜¯ï¼Œé‚£å…¶å®ƒè¯­è¨€ï¼Œæ¯”å¦‚Androidå¼€å‘ä¸­ä¸ºä»€ä¹ˆè¦å•ç‹¬å¼€çº¿ç¨‹å»åšIOå’Œç½‘ç»œè¯·æ±‚ï¼ŒAndroidå¼€å‘ä¸­çš„IOå’Œç½‘ç»œè¯·æ±‚ä¸æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥çº¿ç¨‹å—</div>2019-10-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLEIsgI4ub1VOKWtVOfouAzSqx8Yt8ibQEsAnwNJsJHmuJzzpQqG79HullvYwpic8hgiclgON2GwXSjw/132" width="30px"><span>cv0cv0</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>compute å‡½æ•°æ˜¯ä»€ä¹ˆåŒ…ï¼Ÿè‡ªåŠ¨å¯¼å…¥æ‰¾ä¸åˆ°è¿™ä¸ªå‡½æ•°ã€‚</div>2019-12-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg" width="30px"><span>èœå¤´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ªç–‘é—®
&#47;&#47;å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚ç¬¬ä¸€ä¸ªthenæ˜¯ä¸€ä¸ªFuture

Future f6 = Future(() =&gt; print(&#39;f6&#39;))

f6.then((_) =&gt; f7 = Future(() =&gt; print(&#39;f7&#39;)); return f7)
.then((_) =&gt; print(&#39;f8&#39;));

è€å¸ˆè¿™å—å„¿çš„è°ƒç”¨æ—¶åºä¸ºä»€ä¹ˆä¸æ˜¯ f6 f8 ..... f7

f7 ä¼šè¢«æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—é‡Œé¢äº† ä½†æ˜¯f6çš„ç¬¬äºŒä¸ª .then(() =&gt;print(&#39;8&#39;)) ä¸ºä»€ä¹ˆä¹Ÿä¼šè¢«æ”¾åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­
</div>2019-11-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/3b/44/dd534c9b.jpg" width="30px"><span>èœå¤´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ªç–‘é—®
&#47;&#47;å£°æ˜äº†ä¸€ä¸ªåŒ¿åFutureï¼Œå¹¶æ³¨å†Œäº†ä¸¤ä¸ªthenã€‚ç¬¬ä¸€ä¸ªthenæ˜¯ä¸€ä¸ªFuture

Future f6 = Future(() =&gt; print(&#39;f6&#39;))

f6.then((_) =&gt; f7 = Future(() =&gt; print(&#39;f7&#39;)); return f7)
.then((_) =&gt; print(&#39;f8&#39;));

è€å¸ˆè¿™å—å„¿çš„è°ƒç”¨æ—¶åºä¸ºä»€ä¹ˆä¸æ˜¯ f6 f8 ..... f7
Future æ‰§è¡Œçš„ then ä¸æ˜¯å’Œ Future ä¸€ä¸ªäº‹ä»¶å¾ªç¯å—</div>2019-11-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/1d/25/c4cc1e9f.jpg" width="30px"><span>å·«å±±è€å¦–</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç¬¬ä¸€ä¸ªæ€è€ƒé¢˜ï¼Œæ˜¯å› ä¸ºisolateæ˜¯å•å‘é€šä¿¡çš„ï¼Œè¦è¾¾åˆ°åŒå‘é€šä¿¡éœ€è¦å›ä¼ ä¸€ä¸ªå‘é€é€šé“ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªSendPortã€‚ </div>2019-10-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/67/d1/1c69ad22.jpg" width="30px"><span>C</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>æœ‰ä¸ªç–‘é—®ï¼š
Future(() =&gt; print(&quot;f1&quot;))
  ..then((_) =&gt; Future(() =&gt; print(&quot;f2&quot;)))
  ..then((_) =&gt; print(&quot;f3&quot;));
Future(() =&gt; print(&quot;f4&quot;));
è¿™æ ·æ‰“å°å‡ºæ¥çš„ç»“æœä¸ºä»€ä¹ˆæ˜¯ f1 f3 f4 f2</div>2019-09-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg" width="30px"><span>å°æ°´æ»´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿˜æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¹¶å‘Isolateä¸­å¯ä»¥æ“ä½œwidgetå—</div>2019-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg" width="30px"><span>å°æ°´æ»´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>testIsolate() async{
  print(await asyncFactoriali(4));
}
&#47;&#47; åŒæ­¥è®¡ç®—é˜¶ä¹˜
int syncFactorial(n) =&gt; n &lt; 2 ? n : n * syncFactorial(n-1);


&#47;&#47; å¹¶å‘è®¡ç®—é˜¶ä¹˜
Future&lt;dynamic&gt; asyncFactoriali(n) async{
  final response = ReceivePort();&#47;&#47; åˆ›å»ºç®¡é“
  &#47;&#47; åˆ›å»ºå¹¶å‘ Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“
  await Isolate.spawn(_isolate,response.sendPort);
  response.listen((data){
    if (data is SendPort){
      data.send(n);
    } else {
      print(&quot;&gt;&gt;&gt;&gt;&gt;&gt;$data&quot;);
    }
  });
}

&#47;&#47;Isolate å‡½æ•°ä½“ï¼Œå‚æ•°æ˜¯ä¸» Isolate ä¼ å…¥çš„ç®¡é“
_isolate(initialReplyTo) async {
  final port = ReceivePort();&#47;&#47; åˆ›å»ºç®¡é“
  initialReplyTo.send(port.sendPort);&#47;&#47; å¾€ä¸» Isolate å›ä¼ ç®¡é“
  final message = await port.first as int;&#47;&#47; ç­‰å¾…ä¸» Isolate å‘é€æ¶ˆæ¯ (å‚æ•°å’Œå›ä¼ ç»“æœçš„ç®¡é“)
  initialReplyTo.send(syncFactorial(message));&#47;&#47; è°ƒç”¨åŒæ­¥è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°å›ä¼ ç»“æœ
}

</div>2019-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/89/e3/aa57d3b2.jpg" width="30px"><span>å°æ°´æ»´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å¦‚æœä¸»Isolateåˆ›å»ºä¸¤ä¸ªå¹¶å‘Isolateï¼Œç„¶åæŠŠä¸€ä¸ªæ•°ç»„åˆ†åˆ«ä¼ é€’ç»™ä¸¤ä¸ªå¹¶å‘Isolateï¼Œä¸¤ä¸ªå¹¶å‘Isolateéƒ½å»æ“ä½œæ•°ç»„ï¼Œè¿™æ ·å®‰å…¨å—ï¼Ÿ</div>2019-08-29</li><br/><li><img src="" width="30px"><span>bo_oc</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Future(() =&gt; print(&#39;f1&#39;))
        .then((_){ scheduleMicrotask(()=&gt;print(&#39;f2&#39;)); })
        .then((_){ scheduleMicrotask(()=&gt;print(&#39;f3&#39;)); });
    Future(() =&gt; print(&#39;f4&#39;));</div>2019-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/b6/18/ede273fe.jpg" width="30px"><span>ptlCoder</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>åƒç›´æ¥ä½¿ç”¨isolateè¿™ç§ç®¡é“æœºåˆ¶çš„åœºæ™¯å¤šä¸å¤šï¼Ÿä¸ªäººæ„Ÿè§‰è¿™ç§å†™æ³•ç¹çä¸å®¹æ˜“æ‡‚</div>2019-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg" width="30px"><span>å¤§åœŸè±†</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>èƒ½å¦è¿™æ ·è®¤ä¸ºï¼Œdartçš„è¿™ç§çº¿ç¨‹æ¨¡å‹æ—¢è§£å†³äº†Android&#47;iOSè¿™ç§å¤šçº¿ç¨‹æœºåˆ¶å› ä¸ºçº¿ç¨‹æŠ¢å ç­‰åŸå› å¯¼è‡´IOå¯†é›†å‹è®¡ç®—ä¸ç»™åŠ›ï¼Œä¹Ÿè§£å†³äº†jsè¿™ç§çº¯å•çº¿ç¨‹æ¨¡å‹å¯¼è‡´çš„CPUå¯†é›†å‹è®¡ç®—ä¸ç»™åŠ›çš„é—®é¢˜</div>2019-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/1d/64/52a5863b.jpg" width="30px"><span>å¤§åœŸè±†</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œèƒ½å¦è¿™æ ·ç†è§£ï¼Œjsæ˜¯å•çº¿ç¨‹ï¼Œç„¶åä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„æ¨¡å‹ï¼Œå’Œflutterä¸€æ ·ï¼ŒI&#47;Oæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æ–‡ä»¶ï¼Œç½‘ç»œéƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœä¸€ä¸ªWhile(true)çš„æ­»å¾ªç¯ï¼Œjså°±å¡æ­»äº†ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚è€Œè¿™ç§æƒ…å†µflutteræ²¡é—®é¢˜ï¼ŒWhile(true)çš„æ­»å¾ªç¯å¯ä»¥æ”¾åˆ°å¦å¤–ä¸€ä¸ªisolateé‡Œé¢ï¼Œå†…å­˜å’Œä¸»isolateä¹Ÿæ˜¯éš”ç¦»çš„ï¼Œä¸å½±å“ä¸»isolateå’Œä¸»çº¿ç¨‹ã€‚</div>2019-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/4b/71/591ae170.jpg" width="30px"><span>å¤§æ’</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¼€å¯ä¸€ä¸ªIsolateä¼šä¸ä¼šå¾ˆæ¶ˆè€—èµ„æºï¼Ÿ</div>2019-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/12/3c/2e7fd24f.jpg" width="30px"><span>Geek_0d3a08</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>2.Future(() =&gt; print(&#39;f1&#39;))
      .then((_) async =&gt; await Future.microtask(() =&gt; print(&#39;f2&#39;)))
      .then((_) =&gt; print(&#39;f3&#39;));
  Future(() =&gt; print(&#39;f4&#39;));</div>2019-08-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/12/3c/2e7fd24f.jpg" width="30px"><span>Geek_0d3a08</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>1.å¯ä»¥ï¼Œå†™æ³•æ”¹ä¸€ä¸‹å°±è¡Œ
&#47;&#47; å¹¶å‘è®¡ç®—é˜¶ä¹˜
asyncFactoriali(n) async {
  final response = ReceivePort(); &#47;&#47; åˆ›å»ºç®¡é“
  &#47;&#47; åˆ›å»ºå¹¶å‘ Isolateï¼Œå¹¶ä¼ å…¥ç®¡é“
  await Isolate.spawn(_isolate, response.sendPort);
  response.listen((value){
    if(value is SendPort) {
      final answer = ReceivePort();
      &#47;&#47; å¾€ Isolate å›ä¼ çš„ç®¡é“ä¸­å‘é€å‚æ•°ï¼ŒåŒæ—¶ä¼ å…¥ answer ç®¡é“
      value.send([n, answer.sendPort]);
    }
    print(&quot;============$value&quot;);
  });

}

&#47;&#47;Isolate å‡½æ•°ä½“ï¼Œå‚æ•°æ˜¯ä¸» Isolate ä¼ å…¥çš„ç®¡é“
_isolate(initialReplyTo) async {
  final port = ReceivePort(); &#47;&#47; åˆ›å»ºç®¡é“
  initialReplyTo.send(port.sendPort); &#47;&#47; å¾€ä¸» Isolate å›ä¼ ç®¡é“
  final message = await port.first as List; &#47;&#47; ç­‰å¾…ä¸» Isolate å‘é€æ¶ˆæ¯ (å‚æ•°å’Œå›ä¼ ç»“æœçš„ç®¡é“)
  final data = message[0] as int; &#47;&#47; å‚æ•°
&#47;&#47;  final send = message[1] as SendPort;&#47;&#47; å›ä¼ ç»“æœçš„ç®¡é“
  initialReplyTo.send(syncFactorial(data)); &#47;&#47; è°ƒç”¨åŒæ­¥è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°å›ä¼ ç»“æœ
}

&#47;&#47; åŒæ­¥è®¡ç®—é˜¶ä¹˜
int syncFactorial(n) =&gt; n &lt; 2 ? n : n * syncFactorial(n - 1);

main()  =&gt;  asyncFactoriali(4);</div>2019-08-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/e7/5c/38afffa2.jpg" width="30px"><span>day day up</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>1.å› ä¸ºæ¥æ”¶æ–¹è¦ç­‰å¾…å‘é€æ–¹ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦ä¸¤ä¸ªç®¡é“ï¼Ÿ
2.Future(() =&gt; print(&#39;f1&#39;))
  .then((_) async =&gt; await Future(() =&gt; print(&#39;f2&#39;)))
  .then((_) =&gt; print(&#39;f3&#39;));
Future(() =&gt; null).then((_)=&gt;print(&#39;f4&#39;));
</div>2019-08-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/25/c8/7a950a91.jpg" width="30px"><span>æ·¡ï½</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æƒ³é—®ä¸‹  ä¸ºä»€ä¹ˆäº‹ä»¶é˜Ÿåˆ— Event Queueäº‹ä»¶é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯ä¸ºç©ºçš„æ—¶å€™ appå°±é€€å‡ºäº†å‘¢ï¼Ÿä¸ä¼šæ— é™å¾ªç¯å—ï¼Ÿæ— çº¿å¾ªç¯çš„è¯ä¼šä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</div>2019-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/81/45/9aa91b75.jpg" width="30px"><span>çŸ®ä¸ªå­å…ˆç”ŸğŸ˜</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆ,æœ‰ç¯‡å¹…è®²è§£ä¸‹StreamControllerå“åº”å¼ç¼–ç¨‹å—,å’Œevent_busçš„åŒºåˆ«</div>2019-08-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg" width="30px"><span>è®¸ç«¥ç«¥</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘æ¥å›ç­”ä¸€ä¸‹æ€è€ƒé¢˜ï¼š
1.å› ä¸ºå‘é€ç®¡é“æ˜¯å•å‘çš„ï¼Œæ‰€ä»¥åˆ›å»ºä¸¤ä¸ªç®¡é“ï¼Œè®©ä¸€ä¸ªä½œä¸ºå›ä¼ æ¶ˆæ¯çš„ç®¡é“ã€‚
2.
Future(() =&gt; print(&#39;f1&#39;))
      .then((_) async =&gt; await Future(() =&gt; print(&#39;f2&#39;)))
      .then((_) =&gt; print(&#39;f3&#39;));
    Future(() async =&gt; await(Future(() =&gt; print(&#39;f4&#39;))));</div>2019-08-20</li><br/>
</ul>