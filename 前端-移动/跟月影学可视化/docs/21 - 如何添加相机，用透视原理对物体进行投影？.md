ä½ å¥½ï¼Œæˆ‘æ˜¯æœˆå½±ã€‚

ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬åœ¨ç»˜åˆ¶3Då‡ ä½•ä½“çš„æ—¶å€™ï¼Œå®é™…ä¸Šæœ‰ä¸€ä¸ªå‡è®¾ï¼Œé‚£å°±æ˜¯è§‚å¯Ÿè€…å§‹ç»ˆä»ä¸‰ç»´ç©ºé—´åæ ‡ç³»çš„æ­£é¢ï¼Œä¹Ÿå°±æ˜¯zè½´æ­£æ–¹å‘ï¼Œçœ‹å‘åæ ‡åŸç‚¹ã€‚ä½†åœ¨çœŸå®ä¸–ç•Œçš„æ¨¡å‹é‡Œï¼Œè§‚å¯Ÿè€…å¯ä»¥å¤„åœ¨ä»»ä½•ä¸€ä¸ªä½ç½®ä¸Šã€‚

é‚£ä»Šå¤©ï¼Œæˆ‘ä»¬å°±åœ¨ä¸ŠèŠ‚è¯¾çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥ä¸€ä¸ªç©ºé—´è§‚å¯Ÿè€…çš„è§’è‰²ï¼Œæˆ–è€…è¯´æ˜¯ç›¸æœºï¼ˆCameraï¼‰ï¼Œæ¥æ€»ç»“ä¸€ä¸ªæ›´é€šç”¨çš„ç»˜å›¾æ¨¡å‹ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½ç»˜åˆ¶å‡ºï¼Œä»ä¸‰ç»´ç©ºé—´ä¸­ä»»æ„ä¸€ä¸ªä½ç½®è§‚å¯Ÿç‰©ä½“çš„æ•ˆæœäº†ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥è¯´è¯´ä»€ä¹ˆæ˜¯ç›¸æœºã€‚

## å¦‚ä½•ç†è§£ç›¸æœºå’Œè§†å›¾çŸ©é˜µï¼Ÿ

æˆ‘ä»¬ç°åœ¨å‡è®¾ï¼Œåœ¨WebGLçš„ä¸‰ç»´ä¸–ç•Œä»»æ„ä½ç½®ä¸Šæœ‰ä¸€ä¸ªç›¸æœºï¼Œå®ƒå¯ä»¥ç”¨ä¸€ä¸ªä¸‰ç»´åæ ‡ï¼ˆPositionï¼‰å’Œä¸€ä¸ªä¸‰ç»´å‘é‡æ–¹å‘ï¼ˆLookAt Targetï¼‰æ¥è¡¨ç¤ºã€‚

åœ¨åˆå§‹æƒ…å†µä¸‹ï¼Œç›¸æœºçš„å‚è€ƒåæ ‡å’Œä¸–ç•Œåæ ‡æ˜¯é‡åˆçš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ç§»åŠ¨æˆ–è€…æ—‹è½¬ç›¸æœºçš„æ—¶å€™ï¼Œç›¸æœºçš„å‚è€ƒåæ ‡å’Œä¸–ç•Œåæ ‡å°±ä¸é‡åˆäº†ã€‚

è€Œæˆ‘ä»¬æœ€ç»ˆè¦åœ¨Canvasç”»å¸ƒä¸Šç»˜åˆ¶å‡ºçš„æ˜¯ï¼Œä»¥ç›¸æœºä¸ºè§‚å¯Ÿè€…çš„å›¾å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ç”¨ä¸€ä¸ªå˜æ¢ï¼Œå°†ä¸–ç•Œåæ ‡è½¬æ¢ä¸ºç›¸æœºåæ ‡ã€‚è¿™ä¸ªå˜æ¢çš„çŸ©é˜µå°±æ˜¯**è§†å›¾çŸ©é˜µ**ï¼ˆViewMatrixï¼‰ã€‚

è®¡ç®—è§†å›¾çŸ©é˜µæ¯”è¾ƒç®€å•çš„ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å…ˆè®¡ç®—ç›¸æœºçš„æ¨¡å‹çŸ©é˜µï¼Œç„¶åå¯¹çŸ©é˜µä½¿ç”¨lookAtå‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å¾—åˆ°çš„çŸ©é˜µå°±æ˜¯è§†å›¾çŸ©é˜µçš„é€†çŸ©é˜µã€‚ç„¶åï¼Œæˆ‘ä»¬å†å¯¹è¿™ä¸ªé€†çŸ©é˜µæ±‚ä¸€æ¬¡é€†ï¼Œå°±å¯ä»¥å¾—åˆ°è§†å›¾çŸ©é˜µäº†ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ1ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/21/7e/fb725950.jpg" width="30px"><span>ç½— ä¹¾ æ—</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç¬¬ä¸€é¢˜ï¼š

    const sphereGeometry = new Sphere(gl, {
      widthSegments: 160,
    });

ç¬¬äºŒé¢˜ï¼š
const fragment = &#47;* glsl *&#47; `
      precision highp float;
      varying vec3 vNormal;

      uniform vec3 uColor;

      void main() {
          vec3 normal = normalize(vNormal);
          float lighting = dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));
          gl_FragColor.rgb = uColor + lighting * 0.1;
          gl_FragColor.a = 1.0;
      }
    `;
    function  createProgram(r,g,b){
      return new Program(gl,{
        vertex,
        fragment,
        uniforms:{
          uColor:{value:new Vec3(r,g,b)}
        }
      })
    }
    const program_red =createProgram(1.0,0,0);
    const program_green =createProgram(0,1.0,0);
    const program_blue = createProgram(0.0,0,1.0);
    const program_yellow =  createProgram(1.0,1.0,0);

    const torus = new Mesh(gl, {geometry: torusGeometry, program:program_red});
    torus.position.set(0, 1.3, 0);
    torus.setParent(scene);

    const sphere = new Mesh(gl, {geometry: sphereGeometry, program:program_green});
    sphere.position.set(1.3, 0, 0);
    sphere.setParent(scene);

    const cube = new Mesh(gl, {geometry: cubeGeometry, program:program_blue});
    cube.position.set(0, -1.3, 0);
    cube.setParent(scene);

    const cylinder = new Mesh(gl, {geometry: cylinderGeometry, program:program_yellow});
    cylinder.position.set(-1.3, 0, 0);
    cylinder.setParent(scene);

æœ›è€å¸ˆæŒ‡æ­£
</div>2020-08-11</li><br/>
</ul>