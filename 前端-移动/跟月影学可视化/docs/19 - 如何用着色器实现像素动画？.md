ä½ å¥½ï¼Œæˆ‘æ˜¯æœˆå½±ã€‚

ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬ä»¥HTML/CSSä¸ºä¾‹ï¼Œè®²äº†ä¸‰ç§åŠ¨ç”»çš„å®ç°æ–¹æ³•ï¼Œä»¥åŠæ ‡å‡†çš„åŠ¨ç”»æ¨¡å‹ã€‚æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼š

- å›ºå®šå¸§åŠ¨ç”»ï¼šä¸ºæ¯ä¸€å¸§å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼Œç„¶åæŠŠCSSå…³é”®å¸§åŠ¨ç”»çš„easing-functionè®¾ä¸ºstep-endè¿›è¡Œå¾ªç¯æ’­æ”¾ã€‚
- å¢åŠ å¢é‡åŠ¨ç”»ï¼šåœ¨æ¯å¸§ç»™å…ƒç´ çš„ç›¸å…³å±æ€§å¢åŠ ä¸€å®šçš„é‡ï¼Œæ¯”å¦‚å¢åŠ ä¸€ä¸ªrotateè§’åº¦ã€‚
- æ—¶åºåŠ¨ç”»ï¼šé€šè¿‡æ§åˆ¶æ—¶é—´å’ŒåŠ¨ç”»å‡½æ•°æ¥æè¿°åŠ¨ç”»ï¼Œé¦–å…ˆå®šä¹‰åˆå§‹æ—¶é—´å’Œå‘¨æœŸï¼Œç„¶ååœ¨updateä¸­è®¡ç®—å½“å‰ç»è¿‡æ—¶é—´å’Œè¿›åº¦pï¼Œæœ€åé€šè¿‡pæ¥æ›´æ–°åŠ¨ç”»å…ƒç´ çš„å±æ€§ã€‚
- æ ‡å‡†åŠ¨ç”»æ¨¡å‹ï¼šå…ˆå®šä¹‰Animatorç±»ï¼Œç„¶åä½¿ç”¨çº¿æ€§æ’å€¼å®ç°åŒ€é€Ÿè¿åŠ¨çš„åŠ¨ç”»ï¼Œä»¥åŠé€šè¿‡ç¼“åŠ¨å‡½æ•°å®ç°å˜é€Ÿè¿åŠ¨çš„åŠ¨ç”»ã€‚

è€ŒWebGLå®ç°åŠ¨ç”»çš„æ–¹å¼å’Œä»¥ä¸Šè¿™äº›æ–¹å¼éƒ½æœ‰å·®åˆ«ã€‚æ‰€ä»¥è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±æ¥ç€æ¥è®²æ€ä¹ˆç”¨ç€è‰²å™¨æ¥å®ç°åŠ¨ç”»ã€‚

å› ä¸ºå®ç°å›ºå®šå¸§åŠ¨ç”»æœ€ç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥è¯´å®ƒã€‚

## å¦‚ä½•ç”¨ç€è‰²å™¨å®ç°å›ºå®šå¸§åŠ¨ç”»

æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­æ›¿æ¢çº¹ç†åæ ‡çš„æ–¹å¼ï¼Œæ¥éå¸¸ç®€å•åœ°å®ç°å›ºå®šå¸§åŠ¨ç”»ã€‚ä¸ºäº†æ–¹ä¾¿å¯¹æ¯”ï¼Œæˆ‘è¿˜æ˜¯ç”¨ä¸Šä¸€èŠ‚è¯¾å®ç°ä¼šé£çš„å°é¸Ÿçš„ä¾‹å­æ¥è®²ï¼Œé‚£ç‰‡å…ƒç€è‰²å™¨ä¸­çš„ä»£ç å’Œæœ€ç»ˆè¦å®ç°çš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºã€‚

```
#ifdef GL_ES
precision highp float;
#endif

varying vec2 vUv;
uniform sampler2D tMap;
uniform float fWidth;
uniform vec2 vFrames[3];
uniform int frameIndex;

void main() {
  vec2 uv = vUv;
  for (int i = 0; i < 3; i++) {
    uv.x = mix(vFrames[i].x, vFrames[i].y, vUv.x) / fWidth;
    if(float(i) == mod(float(frameIndex), 3.0)) break;
  }
  vec4 color = texture2D(tMap, uv);
  gl_FragColor = color;
}
```

![](https://static001.geekbang.org/resource/image/e5/8a/e5cfe9afc454013c3913bfbb03b9548a.gif?wh=491%2A136 "ä¼šé£çš„å°é¸Ÿ")

åˆ©ç”¨ç‰‡å…ƒç€è‰²å™¨å®ç°å›ºå®šå¸§åŠ¨ç”»çš„å…³é”®éƒ¨åˆ†ï¼Œæ˜¯mainå‡½æ•°ä¸­çš„forå¾ªç¯ã€‚å› ä¸ºæˆ‘ä»¬çš„åŠ¨ç”»åªæœ‰3å¸§ï¼Œæ‰€ä»¥æœ€å¤šåªéœ€è¦å¾ªç¯3æ¬¡ã€‚

æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼ŒvFramesã€‚å®ƒæ˜¯æ¯ä¸€å¸§åŠ¨ç”»çš„å›¾ç‰‡èµ·å§‹xå’Œç»“æŸxåæ ‡ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸¤ä¸ªåæ ‡å’ŒvUv.xè®¡ç®—æ’å€¼ï¼Œæœ€åé™¤ä»¥å›¾ç‰‡çš„æ€»å®½åº¦fWidthï¼Œå°±èƒ½å¾—åˆ°å¯¹åº”çš„çº¹ç†xåæ ‡ã€‚æ›¿æ¢çº¹ç†åæ ‡ä¹‹åï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä¸ªä¼šé£çš„å°é¸Ÿäº†ã€‚

å®ç°è¿™ä¸ªå›ºå®šå¸§åŠ¨ç”»å¯¹åº”çš„JavaScriptä»£ç å¦‚ä¸‹ï¼š

```
const canvas = document.querySelector('canvas');
const renderer = new GlRenderer(canvas);
const textureURL = 'https://p.ssl.qhimg.com/t01f265b6b6479fffc4.png';
(async function () {
  const texture = await renderer.loadTexture(textureURL);
  const program = renderer.compileSync(fragment, vertex);
  renderer.useProgram(program);
  renderer.uniforms.tMap = texture;
  renderer.uniforms.fWidth = 272;
  renderer.uniforms.vFrames = [2, 88, 90, 176, 178, 264];
  renderer.uniforms.frameIndex = 0;
  setInterval(() => {
    renderer.uniforms.frameIndex++;
  }, 200);
  const x = 43 / canvas.width;
  const y = 30 / canvas.height;
  renderer.setMeshData([{
    positions: [
      [-x, -y],
      [-x, y],
      [x, y],
      [x, -y],
    ],
    attributes: {
      uv: [
        [0, 0],
        [0, 1],
        [1, 1],
        [1, 0],
      ],
    },
    cells: [[0, 1, 2], [2, 0, 3]],
  }]);
  renderer.render();
}());

```

å®é™…ä¸ŠWebGLå®ç°å›ºå®šå¸§åŠ¨ç”»çš„æ€è·¯ï¼Œå’Œä¸Šä¸€èŠ‚è¯¾çš„æ€è·¯æ˜¯ç±»ä¼¼çš„ã€‚åªä¸è¿‡ï¼Œä¸Šä¸€èŠ‚è¯¾æˆ‘ä»¬ç›´æ¥ç”¨CSSçš„background-imageï¼Œæ¥åˆ‡æ¢background-positionå°±å¯ä»¥å®ç°åŠ¨ç”»ã€‚è€Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦å°†å›¾ç‰‡çº¹ç†tMapä¼ è¿›å»ï¼Œç„¶åæ ¹æ®ä¸åŒçš„frameIndexæ¥è®¡ç®—å‡ºå¯¹åº”çš„çº¹ç†åæ ‡ï¼Œå¹¶ä¸”è¿™ä¸ªè®¡ç®—æ˜¯åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­è¿›è¡Œçš„ã€‚

## å¦‚ä½•ç”¨ç€è‰²å™¨å®ç°éå›ºå®šå¸§åŠ¨ç”»

å¥½äº†ï¼ŒçŸ¥é“äº†æ€ä¹ˆå®ç°å›ºå®šå¸§åŠ¨ç”»ã€‚æ¥ç€ï¼Œæˆ‘ä»¬å†æ¥è¯´å¢é‡åŠ¨ç”»å’Œæ—¶åºåŠ¨ç”»çš„å®ç°ã€‚ç”±äºè¿™ä¸¤ç§åŠ¨ç”»éƒ½è¦å°†ä¸æ—¶é—´æœ‰å…³çš„å‚æ•°ä¼ ç»™ç€è‰²å™¨ï¼Œå¤„ç†è¿‡ç¨‹éå¸¸ç›¸ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç»Ÿç§°ä¸ºéå›ºå®šå¸§åŠ¨ç”»ï¼Œæ”¾åœ¨ä¸€èµ·æ¥è¯´ã€‚

ç”¨Shaderå®ç°éå›ºå®šå¸§åŠ¨ç”»ï¼Œæœ¬è´¨ä¸Šå’Œä¸Šä¸€èŠ‚è¯¾çš„å®ç°æ–¹æ³•æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œä»¥åŠæ ‡å‡†åŠ¨ç”»æ¨¡å‹æ¥å®ç°å®ƒã€‚åªä¸è¿‡ï¼Œç”¨Shaderæ¥å®ç°éå›ºå®šå¸§åŠ¨ç”»æ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æ“ä½œæ›´å¤šçš„å±æ€§ï¼Œå®ç°æ›´ä¸°å¯Œçš„æ•ˆæœã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬è¯¦ç»†æ¥è¯´è¯´ã€‚

### 1. ç”¨é¡¶ç‚¹ç€è‰²å™¨å®ç°éå›ºå®šå¸§åŠ¨ç”»

æˆ‘ä»¬çŸ¥é“ï¼ŒWebGLæœ‰ä¸¤ç§Shaderï¼Œåˆ†åˆ«æ˜¯é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨æ¥å®ç°åŠ¨ç”»ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹é¡¶ç‚¹ç€è‰²å™¨æ˜¯æ€ä¹ˆå®ç°åŠ¨ç”»çš„ã€‚

```
attribute vec2 a_vertexPosition;
attribute vec2 uv;

varying vec2 vUv;
uniform float rotation;

void main() {
  gl_PointSize = 1.0;
  vUv = uv;
  float c = cos(rotation);
  float s = sin(rotation);
  mat3 transformMatrix = mat3(
    c, s, 0,
    -s, c, 0,
    0, 0, 1
  );
  vec3 pos = transformMatrix * vec3(a_vertexPosition, 1);
  gl_Position = vec4(pos, 1);
}
```

åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬å…ˆç»˜åˆ¶å‡ºä¸€ä¸ªçº¢è‰²çš„æ­£æ–¹å½¢ï¼Œç„¶åç”¨ä¸‰ç»´é½æ¬¡çŸ©é˜µå®ç°æ—‹è½¬ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æŠŠé¡¶ç‚¹åæ ‡è¿›è¡ŒçŸ©é˜µè¿ç®—ï¼Œå†é…åˆä¸‹é¢çš„JavaScriptä»£ç ï¼Œå°±èƒ½è®©è¿™ä¸ªæ­£æ–¹å½¢æ—‹è½¬äº†ã€‚

```
renderer.uniforms.rotation = 0.0;

requestAnimationFrame(function update() {
  renderer.uniforms.rotation += 0.05;
  requestAnimationFrame(update);
});
```

![](https://static001.geekbang.org/resource/image/2d/cb/2dbbyy2470cb07ed2e67e4d43aee21cb.gif?wh=983%2A488 "é€†æ—¶é’ˆæ—‹è½¬çš„çº¢è‰²æ­£æ–¹å½¢")

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šä¸€èŠ‚è¯¾å¾—åˆ°çš„æ ‡å‡†åŠ¨ç”»æ¨¡å‹æ¥å®ç°ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å®šä¹‰ä¸€ä¸ªæ–°çš„Animatorå¯¹è±¡ï¼Œç„¶ååœ¨Animatorå¯¹è±¡çš„æ–¹æ³•ä¸­æ›´æ–°rotationå±æ€§ã€‚ä½¿ç”¨æ ‡å‡†æ¨¡å‹èƒ½æ›´åŠ ç²¾ç¡®åœ°æ§åˆ¶å›¾å½¢çš„æ—‹è½¬æ•ˆæœï¼Œä»£ç å¦‚ä¸‹ï¼š

```
const animator = new Animator({duration: 2000, iterations: Infinity});
animator.animate(renderer, ({target, timing}) => {
  target.uniforms.rotation = timing.p * 2 * Math.PI;
});
```

æ€»ä¹‹ï¼ŒWebGLå®ç°éå›ºå®šå¸§åŠ¨ç”»çš„æ–¹æ³•ä¸ä¸ŠèŠ‚è¯¾çš„æ–¹å¼åŸºæœ¬ä¸Šä¸€æ ·ã€‚åªä¸è¿‡ï¼Œå‰ä¸€èŠ‚è¯¾æˆ‘ä»¬ç›´æ¥ä¿®æ”¹HTMLå…ƒç´ çš„å±æ€§ï¼Œè€Œè¿™ä¸€èŠ‚è¯¾æˆ‘ä»¬å°†å±æ€§é€šè¿‡uniformå˜é‡ä¼ ç»™ç€è‰²å™¨æ‰§è¡Œæ¸²æŸ“ã€‚

### 2. ç”¨ç‰‡å…ƒç€è‰²å™¨å®ç°éå›ºå®šå¸§åŠ¨ç”»

é™¤äº†ç”¨é¡¶ç‚¹ç€è‰²å™¨ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ç”¨ç‰‡å…ƒç€è‰²å™¨å®ç°åŠ¨ç”»ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å·²ç»ç”¨ç‰‡å…ƒç€è‰²å™¨å®ç°äº†ä¸å°‘åŠ¨ç”»ã€‚æ¯”å¦‚è¯´ï¼Œå½“æˆ‘ä»¬å°†æ—¶é—´å‚æ•°uTimeé€šè¿‡uniformä¼ ç»™ç€è‰²å™¨çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨å®ç°åŠ¨ç”»ã€‚

è¿˜æ˜¯ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†æ—‹è½¬æ”¾åˆ°ç‰‡å…ƒç€è‰²å™¨ä¸­å¤„ç†ï¼Œå…¶å®ä¹Ÿèƒ½å®ç°ç±»ä¼¼çš„æ—‹è½¬æ•ˆæœã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```
#ifdef GL_ES
precision highp float;
#endif

varying vec2 vUv;
uniform vec4 color;
uniform float rotation;

void main() {
  vec2 st = 2.0 * (vUv - vec2(0.5));
  float c = cos(rotation);
  float s = sin(rotation);
  mat3 transformMatrix = mat3(
    c, s, 0,
    -s, c, 0,
    0, 0, 1
  );
  vec3 pos = transformMatrix * vec3(st, 1.0);
  float d1 = 1.0 - smoothstep(0.5, 0.505, abs(pos.x));
  float d2 = 1.0 - smoothstep(0.5, 0.505, abs(pos.y));
  gl_FragColor = d1 * d2 * color;
}
```

![](https://static001.geekbang.org/resource/image/81/34/8176f915e61f55ae0c54da3283b23134.gif?wh=843%2A488 "é¡ºæ—¶é’ˆæ—‹è½¬çš„çº¢è‰²æ­£æ–¹å½¢")

ä½ å‘ç°äº†å—ï¼Œé¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨å®ç°çš„æ—‹è½¬åŠ¨ç”»æ–¹å‘æ­£å¥½ç›¸åã€‚ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µå‘¢ï¼Ÿå› ä¸ºåœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥æ”¹å˜äº†é¡¶ç‚¹åæ ‡ï¼Œæ‰€ä»¥è¿™æ ·å®ç°çš„æ—‹è½¬åŠ¨ç”»å’ŒWebGLåæ ‡ç³»ï¼ˆå³æ‰‹ç³»ï¼‰çš„æ–¹å‘ä¸€è‡´ï¼Œè§’åº¦å¢å¤§å‘ˆé€†æ—¶é’ˆæ–¹å‘æ—‹è½¬ã€‚è€Œåœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬çš„ç»˜åˆ¶åŸç†æ˜¯é€šè¿‡è·ç¦»åœºç€è‰²æ¥å®ç°çš„ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ—‹è½¬å®é™…ä¸Šæ”¹å˜çš„æ˜¯è·ç¦»åœºçš„è§’åº¦è€Œä¸æ˜¯å›¾å½¢è§’åº¦ï¼Œæœ€ç»ˆç»˜åˆ¶çš„å›¾å½¢ä¹Ÿæ˜¯ç›¸å¯¹äºè·ç¦»åœºçš„ã€‚åˆå› ä¸ºè·ç¦»åœºé€†æ—¶é’ˆæ—‹è½¬ï¼Œæ‰€ä»¥å›¾å½¢å°±é¡ºæ—¶é’ˆæ—‹è½¬äº†ã€‚

æœ€åæˆ‘å†è¡¥å……ä¸€ç‚¹ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒåŠ¨ç”»å¦‚æœèƒ½ä½¿ç”¨é¡¶ç‚¹ç€è‰²å™¨å®ç°ï¼Œæˆ‘ä»¬ä¼šå°½é‡åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­å®ç°ã€‚å› ä¸ºåœ¨ç»˜åˆ¶ä¸€å¸§ç”»é¢çš„æ—¶å€™ï¼Œé¡¶ç‚¹ç€è‰²å™¨çš„è¿ç®—é‡ä¼šå¤§å¤§å°‘äºç‰‡å…ƒç€è‰²å™¨ï¼Œæ‰€ä»¥ä½¿ç”¨é¡¶ç‚¹ç€è‰²å™¨æ¶ˆè€—çš„æ€§èƒ½æ›´å°‘ã€‚

ä½†æ˜¯ï¼Œåœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­å®ç°éå›ºå®šå¸§åŠ¨ç”»ä¹Ÿæœ‰ä¼˜åŠ¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰‡å…ƒç€è‰²å™¨çš„æŠ€å·§ï¼Œå¦‚é‡å¤ã€éšæœºã€å™ªå£°ç­‰ç­‰æ¥ç»˜åˆ¶æ›´åŠ å¤æ‚çš„æ•ˆæœã€‚

æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ï¼Œä½¿ç”¨å–å°æ•°å’Œå–æ•´æ•°çš„å‡½æ•°ï¼Œå†ç”¨ä¹‹å‰ç½‘æ ¼åŒ–çš„æ€è·¯ï¼Œæ¥åˆ©ç”¨ç½‘æ ¼å®ç°äº†å¤§é‡çš„é‡å¤åŠ¨ç”»ã€‚è¿™ä¸ªåšæ³•å……åˆ†åˆ©ç”¨äº†GPUçš„å¹¶è¡Œæ•ˆç‡ï¼Œæ¯”ç”¨å…¶ä»–æ–¹å¼æŠŠå›¾å½¢ä¸€ä¸ªä¸€ä¸ªåœ°ç»˜åˆ¶å‡ºæ¥æ€§èƒ½è¦é«˜å¾—å¤šã€‚

```
#ifdef GL_ES
precision highp float;
#endif

varying vec2 vUv;
uniform float rotation;

float random (vec2 st) {
    return fract(sin(dot(st.xy,
                        vec2(12.9898,78.233)))*
        43758.5453123);
}

vec3 hsb2rgb(vec3 c){
  vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0), 6.0)-3.0)-1.0, 0.0, 1.0);
  rgb = rgb * rgb * (3.0 - 2.0 * rgb);
  return c.z * mix(vec3(1.0), rgb, c.y);
}

void main() {
  vec2 f_uv = fract(vUv * 10.0);
  vec2 i_uv = floor(vUv * 10.0);
  vec2 st = 2.0 * (f_uv - vec2(0.5));
  float c = 0.7 * cos(rotation);
  float s = 0.7 * sin(rotation);
  mat3 transformMatrix = mat3(
    c, s, 0,
    -s, c, 0,
    0, 0, 1
  );
  vec3 pos = transformMatrix * vec3(st, 1.0);
  float d1 = 1.0 - smoothstep(0.5, 0.505, abs(pos.x));
  float d2 = 1.0 - smoothstep(0.5, 0.505, abs(pos.y));
  gl_FragColor = d1 * d2 * vec4(hsb2rgb(vec3(random(i_uv), 1.0, 1.0)), 1.0);
}
```

![](https://static001.geekbang.org/resource/image/9b/8c/9b7fe730d2f82df5f05b015eb08aab8c.gif?wh=1029%2A635 "å¤§é‡é‡å¤çš„æ—‹è½¬æ­£æ–¹å½¢")

## å¦‚ä½•åœ¨ç€è‰²å™¨ä¸­å®ç°ç¼“åŠ¨å‡½æ•°ä¸éçº¿æ€§æ’å€¼

åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Shaderçš„çŸ©é˜µè¿ç®—å®ç°äº†æ—‹è½¬åŠ¨ç”»ã€‚åŒæ ·ï¼Œè½¨è¿¹åŠ¨ç”»ä¹Ÿå¯ä»¥ç”¨ShaderçŸ©é˜µè¿ç®—å®ç°ã€‚

æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬è¦åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶ä¸€ä¸ªçº¢è‰²çš„æ–¹å—ï¼Œåˆ©ç”¨å®ƒå®ç°è½¨è¿¹åŠ¨ç”»ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç€è‰²å™¨ï¼Œå®ƒé€šè¿‡è®¾ç½®translationæ¥æ”¹å˜å›¾å½¢ä½ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
attribute vec2 a_vertexPosition;
attribute vec2 uv;

varying vec2 vUv;
uniform vec2 translation;

void main() {
  gl_PointSize = 1.0;
  vUv = uv;
  mat3 transformMatrix = mat3(
    1, 0, 0,
    0, 1, 0,
    translation, 1
  );
  vec3 pos = transformMatrix * vec3(a_vertexPosition, 1);
  gl_Position = vec4(pos, 1);
}

```

ç„¶åï¼Œåœ¨JavaScriptä¸­ï¼Œæˆ‘ä»¬å°†translationä¾ç…§æ—¶é—´å˜åŒ–ä¼ ç»™ä¸Šé¢çš„ç€è‰²å™¨ï¼Œå°±å¯ä»¥è®©æ–¹å—ç§»åŠ¨ã€‚é‚£åˆ©ç”¨ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬å°±è®©æ–¹å—æ²¿æ°´å¹³æ–¹å‘å‘å³åŒ€é€Ÿè¿åŠ¨ä¸€æ®µè·ç¦»ã€‚

```
const canvas = document.querySelector('canvas');
const renderer = new GlRenderer(canvas);
const program = renderer.compileSync(fragment, vertex);
renderer.useProgram(program);
renderer.uniforms.color = [1, 0, 0, 1];
renderer.uniforms.translation = [-0.5, 0];

const animator = new Animator({duration: 2000});
animator.animate(renderer, ({target, timing}) => {
  target.uniforms.translation = [-0.5 * (1 - timing.p) + 0.5 * timing.p, 0];
});

renderer.setMeshData([{
  positions: [
    [-0.25, -0.25],
    [-0.25, 0.25],
    [0.25, 0.25],
    [0.25, -0.25],
  ],
  attributes: {
    uv: [
      [0, 0],
      [0, 1],
      [1, 1],
      [1, 0],
    ],
  },
  cells: [[0, 1, 2], [2, 0, 3]],
}]);
renderer.render();

```

![](https://static001.geekbang.org/resource/image/be/cf/beeb13aa9565a4b066883d8a08632acf.gif?wh=906%2A373 "æ°´å¹³å‘å³åŒ€é€Ÿè¿åŠ¨çš„çº¢è‰²æ­£æ–¹å½¢")

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç¼“åŠ¨å‡½æ•°æ¥å®ç°éåŒ€é€Ÿè¿åŠ¨ã€‚è€Œä¸”æˆ‘ä»¬æ—¢å¯ä»¥å°†ç¼“åŠ¨å‡½æ•°ç”¨JavaScriptè®¡ç®—ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°†ç¼“åŠ¨å‡½æ•°æ”¾åœ¨Shaderä¸­ã€‚å¦‚æœå°†ç¼“åŠ¨å‡½æ•°ç”¨JavaScriptè®¡ç®—ï¼Œé‚£ä¹ˆæ–¹æ³•å’Œä¸Šä¸€èŠ‚è¯¾å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯ç»™Animatorä¼ ä¸€ä¸ªeasingå‡½æ•°è¿›å»å°±å¯ä»¥äº†ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†é‡å¤äº†ã€‚ä½†å¦‚æœè¦å°†ç¼“åŠ¨å‡½æ•°å†™åœ¨Shaderä¸­ï¼Œå…¶å®æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ã€‚

æˆ‘ä»¬ä»¥å‰é¢é¡¶ç‚¹ç€è‰²å™¨å®ç°éå›ºå®šå¸§åŠ¨ç”»çš„ä»£ç ä¸ºä¾‹ï¼Œè¿™æ¬¡ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨Animatorï¼Œè€Œæ˜¯ç›´æ¥å°†æ—¶é—´uTimeå‚æ•°ä¼ å…¥Shaderï¼Œç„¶ååœ¨Shaderä¸­åŠ å…¥ç¼“åŠ¨å‡½æ•°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨smooth(0.0, 1.0, p)æ¥è®©æ–¹å—åšå¹³æ»‘åŠ é€Ÿã€å‡é€Ÿè¿åŠ¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥æ›¿æ¢ç¼“åŠ¨å‡½æ•°ï¼Œæ¯”å¦‚clamp(p * p, 0.0, 1.0)æˆ–è€…clamp(p * (2 - p) * 0.0, 1.0)æ¥å®ç°åŒ€åŠ é€Ÿã€åŒ€å‡é€Ÿçš„è¿åŠ¨æ•ˆæœã€‚ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š

```
attribute vec2 a_vertexPosition;
attribute vec2 uv;

varying vec2 vUv;
uniform vec4 uFromTo;
uniform float uTime;

float easing(in float p) {
  return smoothstep(0.0, 1.0, p);
  // return clamp(p * p, 0.0, 1.0);
  // return clamp(p * (2 - p) * 0.0, 1.0);
}

void main() {
  gl_PointSize = 1.0;
  vUv = uv;
  vec2 from = uFromTo.xy;
  vec2 to = uFromTo.zw;
  float p = easing(uTime / 2.0);
  vec2 translation = mix(from, to, p);
  mat3 transformMatrix = mat3(
    1, 0, 0,
    0, 1, 0,
    translation, 1
  );
  vec3 pos = transformMatrix * vec3(a_vertexPosition, 1);
  gl_Position = vec4(pos, 1);
}
```

æ€»ä¹‹ï¼Œå› ä¸ºShaderæ˜¯åœ¨GPUä¸­è¿ç®—çš„ï¼Œæ‰€ä»¥æ‰€æœ‰é¡¶ç‚¹éƒ½æ˜¯è¢«å¹¶è¡Œå¤„ç†çš„ã€‚å› æ­¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­æ‰§è¡Œç¼“åŠ¨å‡½æ•°ä¼šæ›´å¿«ã€‚

ä¸è¿‡ï¼Œç›´æ¥ç”¨JavaScriptè®¡ç®—å’Œæ”¾åœ¨é¡¶ç‚¹ç€è‰²å™¨é‡Œè®¡ç®—ï¼Œå·®åˆ«ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œä½†å¦‚æœæŠŠå®ƒæ”¾åœ¨ç‰‡å…ƒç€è‰²å™¨é‡Œè®¡ç®—ï¼Œå› ä¸ºè¦æŠŠæ¯ä¸ªåƒç´ ç‚¹éƒ½è®¡ç®—ä¸€éï¼Œæ‰€ä»¥æ€§èƒ½æ¶ˆè€—åè€Œæ›´å¤§ä¸€äº›ã€‚é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦åœ¨ç€è‰²å™¨ä¸­è®¡ç®—easingå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥åˆ©ç”¨easingæ§åˆ¶åŠ¨ç”»è¿‡ç¨‹ï¼Œè¿˜å¯ä»¥åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ç”¨easingæ¥å®ç°éçº¿æ€§çš„æ’å€¼ã€‚

é‚£ä»€ä¹ˆæ˜¯éçº¿æ€§æ’å€¼å‘¢ï¼Ÿæˆ‘ä»¬ä¾ç„¶é€šè¿‡ä¾‹å­æ¥è¿›ä¸€æ­¥ç†è§£ã€‚

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œé¡¶ç‚¹ç€è‰²å™¨å®šä¹‰çš„å˜é‡åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œéƒ½ä¼šè¢«çº¿æ€§æ’å€¼ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥çœ‹æˆ‘ä¸‹é¢ç»™å‡ºçš„é¡¶ç‚¹ç€è‰²å™¨ã€ç‰‡å…ƒç€è‰²å™¨ï¼Œä»¥åŠJavaScriptä¸­çš„ä»£ç ã€‚

```
//é¡¶ç‚¹ç€è‰²å™¨
attribute vec2 a_vertexPosition;
attribute vec2 uv;
attribute vec4 color;

varying vec2 vUv;
varying vec4 vColor;
uniform vec4 uFromTo;
uniform float uTime;

void main() {
  gl_PointSize = 1.0;
  vUv = uv;
  vColor = color;
  gl_Position = vec4(a_vertexPosition, 1, 1);
}

//ç‰‡å…ƒç€è‰²å™¨

#ifdef GL_ES
precision highp float;
#endif

varying vec2 vUv;
varying vec4 vColor;

void main() {
  gl_FragColor = vColor;
}

//JavaScriptä¸­çš„ä»£ç 
renderer.setMeshData([{
  positions: [
    [-0.5, -0.25],
    [-0.5, 0.25],
    [0.5, 0.25],
    [0.5, -0.25],
  ],
  attributes: {
    uv: [
      [0, 0],
      [0, 1],
      [1, 1],
      [1, 0],
    ],
    color: [
      [1, 0, 0, 1],
      [1, 0, 0, 1],
      [0, 0.5, 0, 1],
      [0, 0.5, 0, 1],
    ],
  },
  cells: [[0, 1, 2], [2, 0, 3]],
}]);
renderer.render();
```

![](https://static001.geekbang.org/resource/image/28/eb/28934b0fd2dayy775f20b48cb18d1ceb.jpg?wh=758%2A371 "ä»å·¦å¾€å³ï¼Œç”±çº¢è‰²çº¿æ€§è¿‡æ¸¡åˆ°ç»¿è‰²")

é€šè¿‡æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªé•¿æ–¹å½¢ï¼Œå®ƒçš„é¢œè‰²ä¼šä»å·¦åˆ°å³ï¼Œç”±çº¢è‰²çº¿æ€§åœ°è¿‡æ¸¡åˆ°ç»¿è‰²ã€‚å¦‚æœæƒ³è¦å®ç°éçº¿æ€§çš„é¢œè‰²è¿‡æ¸¡ï¼Œæˆ‘ä»¬å°±ä¸èƒ½é‡‡ç”¨è¿™ç§æ–¹å¼äº†ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨uniformçš„æ–¹å¼ï¼Œé€šè¿‡easingå‡½æ•°æ¥å®ç°ã€‚

```
#ifdef GL_ES
precision highp float;
#endif

float easing(in float p) {
  return smoothstep(0.0, 1.0, p);
  // return clamp(p * p, 0.0, 1.0);
  // return clamp(p * (2 - p) * 0.0, 1.0);
}

varying vec2 vUv;
uniform vec4 fromColor;
uniform vec4 toColor;

void main() {
  float d = easing(vUv.x);
  gl_FragColor = mix(fromColor, toColor, d);
}
```

æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨smoothstepè¿™ç§easingå‡½æ•°ï¼Œæ¥å®ç°å¦‚ä¸‹çš„æ’å€¼æ•ˆæœï¼š

![](https://static001.geekbang.org/resource/image/87/38/87519e16885ca453475173318d459d38.jpg?wh=741%2A382)

å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åƒåˆ©ç”¨JavaScripté‚£æ ·ï¼Œåœ¨Shaderé‡Œå®ç°è´å¡å°”æ›²çº¿ç¼“åŠ¨ã€‚

```
// http://www.flong.com/texts/code/shapers_bez/
// Helper functions:
float slope_from_t (float t, float A, float B, float C){
  float dtdx = 1.0/(3.0*A*t*t + 2.0*B*t + C); 
  return dtdx;
}

float x_from_t (float t, float A, float B, float C, float D){
  float x = A*(t*t*t) + B*(t*t) + C*t + D;
  return x;
}

float y_from_t (float t, float E, float F, float G, float H){
  float y = E*(t*t*t) + F*(t*t) + G*t + H;
  return y;
}

float cubic_bezier (float x, float a, float b, float c, float d){
  float y0a = 0.00; // initial y
  float x0a = 0.00; // initial x 
  float y1a = b;    // 1st influence y   
  float x1a = a;    // 1st influence x 
  float y2a = d;    // 2nd influence y
  float x2a = c;    // 2nd influence x
  float y3a = 1.00; // final y 
  float x3a = 1.00; // final x 

  float A = x3a - 3.0 *x2a + 3.0 * x1a - x0a;
  float B = 3.0 * x2a - 6.0 * x1a + 3.0 * x0a;
  float C = 3.0 * x1a - 3.0 * x0a;   
  float D = x0a;

  float E = y3a - 3.0 * y2a + 3.0 * y1a - y0a;    
  float F = 3.0 * y2a - 6.0 * y1a + 3.0 * y0a;             
  float G = 3.0 * y1a - 3.0 * y0a;             
  float H = y0a;

  // Solve for t given x (using Newton-Raphelson), then solve for y given t.
  // Assume for the first guess that t = x.
  float currentt = x;
  const int nRefinementIterations = 5;
  for (int i=0; i < nRefinementIterations; i++){
    float currentx = x_from_t(currentt, A,B,C,D); 
    float currentslope = slope_from_t(currentt, A,B,C);
    currentt -= (currentx - x)*(currentslope);
    currentt = clamp(currentt, 0.0, 1.0);
  } 

  float y = y_from_t(currentt, E,F,G,H);
  return y;
}
```

ä½¿ç”¨è´å¡å°”æ›²çº¿ç¼“åŠ¨å‡½æ•°ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ç°æ›´åŠ ä¸°å¯Œå¤šå½©çš„æ’å€¼æ•ˆæœã€‚

![](https://static001.geekbang.org/resource/image/24/42/24453cd8f4382c7411da6409aa8cd942.jpg?wh=719%2A298 "è´å¡å°”æ›²çº¿æ’å€¼è‰²å¸¦")

## å¦‚ä½•åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­å®ç°éšæœºç²’å­åŠ¨ç”»

æˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨ç‰‡å…ƒç€è‰²å™¨è¿˜å¯ä»¥å®ç°éå¸¸å¤æ‚çš„å›¾å½¢åŠ¨ç”»ï¼ŒåŒ…æ‹¬ç²’å­åŠ¨ç”»ã€ç½‘æ ¼åŠ¨ç”»ä»¥åŠç½‘æ ¼å™ªå£°åŠ¨ç”»ç­‰ç­‰ã€‚ç½‘æ ¼åŠ¨ç”»å’Œç½‘æ ¼å™ªå£°æˆ‘ä»¬å‰é¢éƒ½è¯¦ç»†è®²è¿‡ï¼Œè¿™é‡Œæˆ‘ä»¬å°±é‡ç‚¹æ¥è¯´è¯´æ€ä¹ˆå®ç°ç²’å­åŠ¨ç”»æ•ˆæœã€‚

```
#ifdef GL_ES
precision highp float;
#endif

...

float sdf_circle(vec2 st, vec2 c, float r) {
  return 1.0 - length(st - c) / r;
}

varying vec2 vUv;
uniform float uTime;

void main() {
  vec2 st = vUv;
  float rx = mix(-0.2, 0.2, noise(vec2(7881.32, 0) + random(st) + uTime));
  float ry = mix(-0.2, 0.2, noise(vec2(0, 1433.59) + random(st) + uTime));
  float dis = distance(st, vec2(0.5));
  dis = pow((1.0 - dis), 2.0);
  float d = sdf_circle(st + vec2(rx, ry), vec2(0.5), 0.2);
  d = smoothstep(0.0, 0.1, d);
  gl_FragColor = vec4(dis * d * vec3(1.0), 1.0);
}
```

å¦‚ä¸Šé¢ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨éšæœº+å™ªå£°æ¥å®ç°ä¸€ä¸ªç²’å­æ•ˆæœã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è®¾ç½®éšæœºæ•°ç”¨æ¥ç”Ÿæˆè·ç¦»åœºçš„åˆå§‹å€¼ï¼Œç„¶åè®¾ç½®å™ªå£°ç”¨æ¥å½¢æˆä½ç§»ï¼Œæœ€åä¼ å…¥uTimeå˜é‡æ¥å®ç°åŠ¨ç”»ã€‚

è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½ç»˜åˆ¶å‡ºæ•°é‡éå¸¸å¤šçš„ç‚¹ï¼Œå¹¶ä¸”è®©å®ƒä»¬æ²¿ç€éšæœºè½¨è¿¹è¿åŠ¨ã€‚æœ€ç»ˆçš„è§†è§‰æ•ˆæœå¦‚ä¸‹ï¼š

![](https://static001.geekbang.org/resource/image/02/a4/0282f5561b0c323f2d81dde6f4f3aaa4.gif?wh=810%2A520 "ç²’å­åŠ¨ç”»æ•ˆæœ")

åƒè¿™æ ·æµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œå› ä¸ºå®ç°çš„è¿‡ç¨‹ä¸­ä¼šæ¶‰åŠéå¸¸å¤šç‚¹çš„è¿ç®—ï¼Œå¦‚æœä¸ç”¨shaderï¼Œæˆ‘ä»¬å‡ ä¹æ˜¯æ— æ³•å®Œæˆçš„ã€‚

## è¦ç‚¹æ€»ç»“

è¿™èŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ äº†ç”¨WebGLå®ç°åŠ¨ç”»çš„æ–¹æ³•ã€‚

å¦‚æœæ˜¯å®ç°å›ºå®šå¸§åŠ¨ç”»ï¼Œåœ¨WebGLä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‡†å¤‡å¥½çš„å›¾ç‰‡ä½œä¸ºçº¹ç†ï¼Œç„¶ååŠ¨æ€ä¿®æ”¹çº¹ç†åæ ‡ã€‚

å¦‚æœæ˜¯å®ç°éå›ºå®šå¸§åŠ¨ç”»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡uniformï¼Œå°†å˜åŒ–çš„å±æ€§ä½œä¸ºå‚æ•°ä¼ ç»™ç€è‰²å™¨å¤„ç†ã€‚ä¸ŠèŠ‚è¯¾çš„æ ‡å‡†åŠ¨ç”»æ¨¡å‹åœ¨WebGLä¸­ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒè®¡ç®—å‡ºå±æ€§ï¼Œå†ä¼ å…¥ç€è‰²å™¨æ‰§è¡Œæ¸²æŸ“ã€‚

å®é™…ä¸Šï¼Œä»Šå¤©è®²çš„æ–¹æ³•ï¼Œä¸ç”¨HTML/CSSã€SVGã€Canvas2Då®ç°åŠ¨ç”»çš„åŸºæœ¬åŸç†æ˜¯ä¸€æ ·çš„ã€‚åªä¸è¿‡ï¼ŒWebGLä¸­çš„å¾ˆå¤šè®¡ç®—ï¼Œæ˜¯éœ€è¦ç”¨JavaScriptå’ŒGLSLï¼Œä¹Ÿå°±æ˜¯Shaderæ¥é…åˆè¿›è¡Œçš„ã€‚

è¿™èŠ‚è¯¾çš„å®æˆ˜ä¾‹å­æ¯”è¾ƒå¤šï¼Œæˆ‘å»ºè®®ä½ å¥½å¥½ç ”ç©¶ä¸€ä¸‹ã€‚æ¯•ç«Ÿï¼Œä½¿ç”¨ç‰‡å…ƒç€è‰²å™¨å®ç°åŠ¨ç”»æ•ˆæœçš„æ€è·¯ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨åç»­è¯¾ç¨‹ä¸­ç»å¸¸ç”¨åˆ°ã€‚

## å°è¯•ç‰›åˆ€

1. ä»Šå¤©ï¼Œæˆ‘ä»¬åœ¨Shaderä¸­é€šè¿‡çŸ©é˜µè¿ç®—å®ç°äº†å›¾å½¢çš„æ—‹è½¬å’Œå¹³ç§»ï¼Œä½ èƒ½ç”¨å­¦åˆ°çš„çŸ¥è¯†å®Œå–„çŸ©é˜µè¿ç®—ï¼Œæ¥å®ç°ç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»å’Œæ‰­æ›²å˜æ¢ï¼Œä»¥åŠå®ƒä»¬çš„ç»„åˆæ•ˆæœå—ï¼Ÿ
2. ç»“åˆä»Šå¤©çš„å†…å®¹ï¼Œä½ å¯ä»¥è¯•ç€å®ç°ä¸€ä¸ªç²’å­æ•ˆæœï¼šè®©ä¸€å¼ å›¾ç‰‡ä»ä¸­å¿ƒçˆ†ç‚¸å¼€æ¥ï¼Œç‚¸æˆç¢ç‰‡å¹¶æœ€ç»ˆæ¶ˆå¤±ã€‚

æ¬¢è¿åœ¨ç•™è¨€åŒºå’Œæˆ‘è®¨è®ºï¼Œåˆ†äº«ä½ çš„ç­”æ¡ˆå’Œæ€è€ƒï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™ä½ çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ï¼

* * *

## æºç 

æœ¬èŠ‚è¯¾å®Œæ•´ç¤ºä¾‹ä»£ç è§[GitHubä»“åº“](https://github.com/akira-cn/graphics/tree/master/animate_webgl)
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ3ï¼‰</strong></div><ul>
<li><span>æœ‰ä¸€ç§è¸å®</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>åˆ©ç”¨é¡¶ç‚¹ç€è‰²å™¨å®ç°å›¾ç‰‡ä¸­å¿ƒçˆ†ç‚¸ï¼ŒåŸºæœ¬æ€è·¯å°±æ˜¯ç»™æ¯ä¸€ä¸ªç²’å­åˆ†é… 4 ä¸ªé¡¶ç‚¹åæ ‡ã€4 ä¸ª çº¹ç†åæ ‡ï¼Œä¸è¿‡éœ€è¦å¯ç”¨ Uint32Array å­˜å‚¨ cells æ•°æ®ï¼Œå¦å¤–å¾ˆå¥½å¥‡å¦‚ä½•åˆ©ç”¨ç‰‡å…ƒç€è‰²å™¨å®ç°ï¼Ÿ
</p>2024-02-01</li><br/><li><span>kaimo</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ä½¿ç”¨return clamp(p * (2 - p) * 0.0, 1.0);æ‰§è¡ŒæŠ¥é”™</p>2022-11-10</li><br/><li><span>Geek3340</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>if(float(i) == mod(float(frameIndex), 3.0)) break;
ç¬¬ä¸€ä¸ªä¾‹å­ æ²¡çœ‹åˆ°</p>2021-07-01</li><br/>
</ul>