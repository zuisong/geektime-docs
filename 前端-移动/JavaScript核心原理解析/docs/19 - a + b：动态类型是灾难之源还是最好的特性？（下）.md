ä½ å¥½ï¼Œæˆ‘æ˜¯å‘¨çˆ±æ°‘ã€‚

ä¸Šä¸€è®²ï¼Œæˆ‘ä»¬è¯´åˆ°å¦‚ä½•å°†å¤æ‚çš„ç±»å‹è½¬æ¢ç¼©å‡åˆ°ä¸¤æ¡ç®€å•çš„è§„åˆ™ï¼Œä»¥åŠä¸¤ç§ä¸»è¦ç±»å‹ã€‚è¿™ä¸¤æ¡ç®€å•è§„åˆ™æ˜¯ï¼š

1. ä»å€¼xåˆ°å¼•ç”¨ï¼šè°ƒç”¨Object(x)å‡½æ•°ã€‚
2. ä»å¼•ç”¨xåˆ°å€¼ï¼šè°ƒç”¨x.valueOf()æ–¹æ³•ï¼›æˆ–ï¼Œè°ƒç”¨å››ç§å€¼ç±»å‹çš„åŒ…è£…ç±»å‡½æ•°ï¼Œä¾‹å¦‚Number(x)ï¼Œæˆ–è€…String(x)ç­‰ç­‰ã€‚

ä¸¤ç§ä¸»è¦ç±»å‹åˆ™æ˜¯**å­—ç¬¦ä¸²**å’Œ**æ•°å­—å€¼**ã€‚

å½“ç±»å‹è½¬æ¢ç³»ç»Ÿè¢«ç¼©å‡æˆè¿™æ ·ä¹‹åï¼Œæœ‰äº›é—®é¢˜å°±å˜å¾—å¥½è§£é‡Šäº†ï¼Œä½†ä¹Ÿç¡®å®æœ‰äº›é—®é¢˜å˜å¾—æ›´åŠ éš¾è§£ã€‚ä¾‹å¦‚@graybernhardt åœ¨è®²æ¼”ä¸­æå‡ºçš„çµé­‚å‘é—®ï¼Œå°±æ˜¯ï¼š

- å¦‚æœå°†æ•°ç»„è·Ÿå¯¹è±¡ç›¸åŠ ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

å¦‚æœä½ å¿˜äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸€èµ·æ¥å›é¡¾ä¸€ä¸‹è¿™å››ä¸ªç›´å‡»ä½ çµé­‚æ·±å¤„çš„ç¤ºä¾‹ï¼Œç®€å•åœ°è¯´ï¼Œè¿™äº›ç¤ºä¾‹å°±æ˜¯â€œæ•°ç»„ä¸å¯¹è±¡â€ç›¸åŠ çš„å››ç§æƒ…å†µï¼Œç»“æœéƒ½å®Œå…¨ä¸åŒã€‚

```
> [] + {}
'[object Object]'

> {} + []
0

> {} + {}
NaN

> [] + []
''
```

è€Œè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸¤è®²çš„æ ‡é¢˜ä¸­â€œa + bâ€è¿™ä¸ªè¡¨è¾¾å¼çš„ç”±æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚ä½•å‡†ç¡®åœ°è§£é‡Šâ€œä¸¤ä¸ªæ“ä½œæ•°ç›¸åŠ â€ï¼Œä¸å¦‚ä½•å…¨é¢ç†è§£JavaScriptçš„ç±»å‹ç³»ç»Ÿçš„è½¬æ¢è§„åˆ™ï¼Œå…³ç³»åŒªæµ…ï¼

## é›†ä¸­ç²¾åŠ›åŠå¤§äº‹

ä¸€èˆ¬æ¥è¯´ï¼Œè¿ç®—ç¬¦å¾ˆå®¹æ˜“çŸ¥é“æ“ä½œæ•°çš„ç±»å‹ï¼Œä¾‹å¦‚â€œa - bâ€ä¸­çš„å‡å·ï¼Œæˆ‘ä»¬ä¸€çœ‹å°±çŸ¥é“æ„å›¾ï¼Œæ˜¯ä¸¤ä¸ªæ•°å€¼æ±‚å·®ï¼Œæ‰€ä»¥aå’Œbéƒ½åº”è¯¥æ˜¯æ•°å€¼ï¼›åˆä¾‹å¦‚â€œobj.xâ€ä¸­çš„ç‚¹å·ï¼Œæˆ‘ä»¬ä¸€çœ‹ä¹ŸçŸ¥é“ï¼Œæ˜¯å–**å¯¹è±¡obj**çš„å±æ€§å**å­—ç¬¦ä¸²x**ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ16ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/10/04/8d/005c2ff3.jpg" width="30px"><span>weineel</span> ğŸ‘ï¼ˆ11ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å¼ºè¡Œæ‰¾åˆ°ä¸€ç§æ–¹æ³•, ä½†å’Œæœ¬èŠ‚æ‰€è®²æ²¡å•¥å…³ç³»ï¼š

Object.defineProperty(global, &#39;x&#39;, {
    get: function() {
        return Math.random();
    }
})

x === x &#47;&#47; false</div>2019-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/8e/3a/6b76f2f5.jpg" width="30px"><span>é™ˆå¼º</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™é‡Œæ˜¯ä¸€ä¸ªæ‹“å±•é˜…è¯»ï¼šhttps:&#47;&#47;2ality.com&#47;2012&#47;01&#47;object-plus-object.html

ä¸ºä»€ä¹ˆ{} + {} åœ¨æµè§ˆå™¨ä¸­æ‰“å°çš„æ˜¯ &quot;[object Object][object Object]&quot;
å› ä¸ºâ€œthe Node.js REPL parses its input differently from either Firefox or Chrome (which even uses the same V8 JavaScript engine as Node.js). The following input is parsed as expressions and the results are less surprising:â€
å®é™…ä¸Šchromeè‡ªå·±åŠ äº†console.log()ï¼Œç›¸å½“äº({} + {})ï¼Œfirefoxçš„æ§åˆ¶å°ä¼šè¾“å‡ºNaNã€‚
&#47;&#47; test in chrome
{} + {} &#47;&#47; &quot;[object Object][object Object]&quot;
{} + {} === &quot;[object Object][object Object]&quot; &#47;&#47; false
({} + {}) === &quot;[object Object][object Object]&quot; &#47;&#47; true</div>2020-04-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/eb/d3/92573feb.jpg" width="30px"><span>Geek_185c7d</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è¯·é—®è€å¸ˆï¼Œä¸ºä»€ä¹ˆ{} + {} åœ¨æµè§ˆå™¨ä¸­æ‰“å°çš„æ˜¯ &quot;[object Object][object Object]&quot;</div>2020-01-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg" width="30px"><span>æ™“å°ä¸œ</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>éš¾é“æ˜¯è¿™ä¸ªå—ï¼Œ å¦‚æœä½œä¸ºæ ‡è¯†ç¬¦var  x ç¡®å®æ²¡æƒ³å‡ºã€‚
&gt;&gt; Symbol() === Symbol() &#47;&#47; false</div>2019-12-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1e/7d/67/791d0f5e.jpg" width="30px"><span>æ¸…æ³¢</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘åœ¨æµè§ˆå™¨æ§åˆ¶å°ï¼Œnodeç¯å¢ƒæ§åˆ¶å°æˆ–è€…ä»£ç ä¸­ï¼š{} + {}çš„æ‰§è¡Œç»“æœéƒ½æ˜¯&quot;[object Object][object Object]&quot;ï¼Œä½†æ˜¯æ•™ç¨‹ä¸­çš„ç»“æœæ˜¯NaNï¼Œæ˜¯ä¸æ˜¯è¿˜æœ‰å…¶ä»–ç†è§£æ–¹å¼ï¼Ÿ</div>2022-01-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/cb/ce/d9e00eb5.jpg" width="30px"><span>undefined</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>&gt; node -v
v12.20.1

&gt; node -p &#39;{} + {}&#39;
NaN

&gt; node -p &#39;({} + {})&#39;
[object Object][object Object]

&gt; node -p &quot;eval(&#39;{} + {}&#39;)&quot;
NaN

&gt; node -p &quot;eval(&#39;({} + {})&#39;)&quot;
[object Object][object Object]
</div>2021-04-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/05/31/6370001e.jpg" width="30px"><span>wheatup</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å’Œsprintyçš„æ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡é¿å…äº†æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼š

with ({ get x() { return Symbol() } }) {
	console.log(x === x);  &#47;&#47; false
}
è¿™ä¸ªèƒ½æˆåŠŸçš„åŸå› æ˜¯è¿™é‡Œçš„ x å…¶å®æ˜¯æœ‰ [withObj].x å–å€¼çš„ä¸€ä¸ªæ“ä½œï¼Œç„¶ååˆ©ç”¨getterè¿”å›ä¸åŒçš„å€¼é€ æˆçš„ã€‚

---

çœŸè¦è¯´åˆ©ç”¨æœ¬èŠ‚è¯¾å­¦åˆ°çš„å†…å®¹çš„è¯ï¼Œå¯ä»¥æŠŠé¢˜ç›®çš„ x === x æ¢æˆ x &gt;= xï¼Œå•çº¯çš„x === xæ˜¯ä¸ä¼šè§¦å‘éšå¼ç±»å‹è½¬æ¢çš„ï¼Œè€Œjsåœ¨æ¯”è¾ƒå¤§å°æ—¶ä¸€å®šä¼šå°†å¯¹è±¡è½¬æ¢æˆæ•°å€¼å†è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¼šè°ƒç”¨[Symbol.toPrimitive]ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•åšäº›æ‰‹è„šï¼š

let x = {
	[Symbol.toPrimitive]() {
		return Math.random();
	}
};

console.log(x &gt;= x); &#47;&#47; trueå’Œfalseéƒ½æœ‰å¯èƒ½</div>2020-06-10</li><br/><li><img src="" width="30px"><span>æ²¹èœ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼ŒNumber([]) == Number([]) æ˜¯trueï¼Œä½†[] == [] æ˜¯falseï¼ŒåŠ¨æ€ç±»å‹è½¬æ¢å¦‚ä½•è§£é‡Šè¿™ä¸ªæ¡ˆä¾‹å‘¢ï¼Ÿ
------------
var x = [];
x === x &#47;&#47; true;
x === [] &#47;&#47; false;
[] === x &#47;&#47; false;
[] === [] &#47;&#47;false;</div>2020-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/a3/ea/53333dd5.jpg" width="30px"><span>HoSalt</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ã€ŒDate() ç±»ä¸­ä»ç„¶æ˜¯ä¼šè°ƒç”¨ toString æˆ– valueOf çš„ï¼Œè¿™æ˜¯å› ä¸ºåœ¨å®ƒçš„Symbol.toPrimitiveå®ç°ä¸­ä»…æ˜¯è°ƒæ•´äº†ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨é¡ºåºï¼Œè€Œä¹‹åä»ç„¶æ˜¯è°ƒç”¨åŸå§‹çš„ã€å†…ç½®çš„ToPrimitive()æ–¹æ³•çš„ã€
è°ƒæ•´é¡ºåºæ˜¯å€¼hintå€¼ä¸ºdefaultçš„æƒ…å†µä¸‹ï¼Ÿ</div>2020-05-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/bb/01/568ac2d6.jpg" width="30px"><span>K4SHIFZ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è‡ªåŠ¨åˆ†å·æ’å…¥å¹¶ä¸ä¼šå°†{}+{} å˜æˆ{};+{} å§ï¼Ÿå› ä¸ºæ²¡æœ‰è¡Œç»“æŸç¬¦ã€‚</div>2020-03-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg" width="30px"><span>æ™“å°ä¸œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæˆ‘æµ‹å¾ˆå¤šä»£ç å¾—å‡ºä¸€ä¸ªæ€»ç»“ï¼š
å‚ä¸ + æˆ– - è¿ç®— + - åªè®¤é‚£äº”ç§å€¼ç±»å‹æ•°æ®ï¼Œ
ä»åŒ…è£…å¯¹è±¡å®ä¾‹ï¼ˆStringï¼Œ Numberï¼Œ Boolean, Symbolï¼‰ï¼Œå’Œæ•°ç»„Object å¯¹è±¡è°ƒç”¨valueOfå¯ä»¥çœ‹å‡º
åªè¦valueOf è¿”å›äº”ç§å€¼ç±»å‹æ•°æ®ï¼Œ å°±ä¸ä¼štoString()æ–¹æ³•ï¼Œ åä¹‹å¦‚æœè¿˜æ˜¯å¯¹è±¡ç±»å‹ï¼Œå³ä½¿æ˜¯åŒ…è£…å¯¹è±¡å®ä¾‹ï¼Œè¿˜æ˜¯ä¼šè°ƒç”¨toStringæ–¹æ³•
æ€»ç»“æ˜¯ï¼š åœ¨toPrimitiveï¼ˆï¼‰ä¸­è¦è·å–äº”ç§å€¼ç±»å‹æ•°æ®åŒ…æ‹¬undefined å’Œ nullï¼Œ å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¼•æ“éƒ½æ˜¯æŒ‰æ•°æ®å€¼ç±»å‹è¿›è¡Œé¢„æµ‹ï¼š å¦‚ä¸‹ï¼š
{}; + []
String(1) + [];
1 - [];
éƒ½æ˜¯valueOf -&gt; toString è¿‡ç¨‹

æœ€ç»ˆåœ¨toPrimitivie() ä¸­ æ ¹æ® + æˆ–è€… - ä»¥åŠè¿ç®—ç¬¦ä¸¤ä¾§å€¼ç±»å‹ è°ƒç”¨ç›¸åº”String æˆ–è€…Number è¿›è¡Œè½¬æ¢ æ±‚å€¼
æ‰€ä»¥æœ€ç»ˆçš„ç»“æœåªæœ‰ä¸‰ç§ å­—ç¬¦ä¸²ã€æ•°å€¼ã€å’Œ NaN

ç›´æ¥toStringå°±æ˜¯åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­(ç›®å‰å‘ç°è¿™ä¸€ç§é™¤äº†Date)
`${x}`

æµ‹è¯•ä»£ç å¦‚ä¸‹ 
ä»£ç é“¾æ¥ https:&#47;&#47;repl.it&#47;@XiaoDHuang&#47;MadEuphoricTabs

let valueOf = Array.prototype.valueOf
let toString = Array.prototype.toString;

Array.prototype.valueOf = function() {
    console.log(this.flag + &quot; valueOf&quot;)
    return valueOf.call(this);
}

Array.prototype.toString = function() {
    console.log(this.flag + &#39; toString&#39;);
    return toString.call(this);
}

var x = [];

x.flag = &#39;{}; + []&#39;;
{}; + x;

x.flag = &#39;String(1) + []&#39;;
console.log(1 + x);

x.flag = &#39;1 - []&#39;;
console.log(1 - x);

x.flag = &#39;`${x}`&#39;
console.log(`${x}`);</div>2019-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/13/7b/74e90531.jpg" width="30px"><span>Astrogladiator-åŸƒè’‚çº³åº¦æ–¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>https:&#47;&#47;developer.mozilla.org&#47;en-US&#47;docs&#47;Web&#47;JavaScript&#47;Equality_comparisons_and_sameness

çœ‹äº†ä¸‹mdnï¼Œè¿˜çœŸæ˜¯åªæœ‰NaNè¿™ä¹ˆä¸€ç§æƒ…å†µã€‚

If Type(x) is different from Type(y), return false.
If Type(x) is Number or BigInt, then
Return ! Type(x)::equal(x, y).
Return ! SameValueNonNumeric(x, y).

Assert: Type(x) is not Number or BigInt.
Assert: Type(x) is the same as Type(y).
If Type(x) is Undefined, return true.
If Type(x) is Null, return true.
If Type(x) is String, then
If x and y are exactly the same sequence of code units (same length and same code units at corresponding indices), return true; otherwise, return false.
If Type(x) is Boolean, then
If x and y are both true or both false, return true; otherwise, return false.
If Type(x) is Symbol, then
If x and y are both the same Symbol value, return true; otherwise, return false.
If x and y are the same Object value, return true. Otherwise, return false.

æŒ‰ç…§https:&#47;&#47;tc39.es&#47;ecma262&#47;#sec-samevaluenonnumericçš„è¯´æ˜æµ‹è¯•äº†ä¸‹ä¹Ÿæ²¡æœ‰æ‰¾åˆ°å…¶ä»–çš„å¯èƒ½

å¥½å¥‡è¿™ä¸ªç­”æ¡ˆæ˜¯ä»€ä¹ˆ
</div>2019-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3a/93/d7be8a1a.jpg" width="30px"><span>æ™“å°ä¸œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆè¿™ä¸ªâ€œå…¶ä¸­çš„ boolean æ˜¯é€šè¿‡æŸ¥è¡¨æ¥è¿›è¡Œçš„â€œ  è¿™ä¸ªæŸ¥è¡¨è¯¥å¦‚ä½•ç†è§£ï¼Ÿï¼Ÿï¼Ÿ</div>2019-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/18/65/35361f02.jpg" width="30px"><span>æ½‡æ½‡é›¨æ­‡</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ7ï¼‰<div>æƒ³ä¸å‡ºå•¦â€¦â€¦NaNä¸æ˜¯å”¯ä¸€çš„å—</div>2019-12-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/ea/05/9976b871.jpg" width="30px"><span>westfall</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å…³äº chrome æ§åˆ¶å° {} + {} æ‰“å°å‡º &quot;[object Object][object Object]&quot;ï¼Œæ‰¾åˆ°ä¸€ä¸ªè§£é‡Šï¼Œchrome ä¼šå°†æ‰€æœ‰å·² &#39;{&#39; å¼€å¤´ï¼Œå·² &#39;}&#39; ç»“å°¾çš„è¾“å…¥å¼ºè¡Œç”¨ () åŒ…èµ·æ¥ï¼Œå› æ­¤è¾“å…¥ {} å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„æ±‚å€¼ ({})ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¯­å¥å—ï¼ŒåŒæ · {} + {} å¾—åˆ°çš„æ˜¯ ({} + {})ã€‚æºç åœ¨æ­¤ï¼šhttps:&#47;&#47;chromium.googlesource.com&#47;chromium&#47;src.git&#47;+&#47;4fd348fdb9c0b3842829acdfb2b82c86dacd8e0a%5E!&#47;#F2</div>2021-02-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/81/fa/542577c8.jpg" width="30px"><span>ğŸ‘£</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>new Object === new Object</div>2022-03-25</li><br/>
</ul>