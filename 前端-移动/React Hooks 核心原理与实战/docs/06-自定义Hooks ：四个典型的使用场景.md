ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚

æˆ‘åœ¨å¼€ç¯‡è¯å°±è¯´è¿‡ï¼Œè¦ç”¨å¥½ React Hooksï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯è¦èƒ½å¤Ÿä» Hooks çš„è§’åº¦å»æ€è€ƒé—®é¢˜ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹å…¶å®ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯åœ¨é‡åˆ°ä¸€ä¸ªåŠŸèƒ½å¼€å‘çš„éœ€æ±‚æ—¶ï¼Œé¦–å…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼š**è¿™ä¸ªåŠŸèƒ½ä¸­çš„å“ªäº›é€»è¾‘å¯ä»¥æŠ½å‡ºæ¥æˆä¸ºç‹¬ç«‹çš„ Hooksï¼Ÿ**

è¿™ä¹ˆé—®çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬å°½å¯èƒ½åœ°æŠŠä¸šåŠ¡é€»è¾‘æ‹†æˆç‹¬ç«‹çš„ Hooks ï¼Œè¿™æ ·æœ‰åŠ©äºå®ç°ä»£ç çš„æ¨¡å—åŒ–å’Œè§£è€¦ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿åé¢çš„ç»´æŠ¤ã€‚å¦‚æœä½ åŸºç¡€ç¯‡çš„çŸ¥è¯†æŒæ¡å¾—ç‰¢å›ºçš„è¯ï¼Œå°±ä¼šå‘ç°ï¼Œè¿™æ˜¯å› ä¸º Hooks æœ‰ä¸¤ä¸ªéå¸¸æ ¸å¿ƒçš„ä¼˜ç‚¹ï¼š

- ä¸€æ˜¯æ–¹ä¾¿è¿›è¡Œé€»è¾‘å¤ç”¨ï¼›
- äºŒæ˜¯å¸®åŠ©å…³æ³¨åˆ†ç¦»ã€‚

æ¥ä¸‹æ¥æˆ‘å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥å¸¦ä½ è®¤è¯†ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰Hooksï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºã€‚ç„¶åï¼Œæˆ‘ä»¬å†é€šè¿‡å…¶å®ƒ3ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œæ¥çœ‹çœ‹è‡ªå®šä¹‰Hooks å…·ä½“æœ‰ä»€ä¹ˆç”¨ï¼Œä»è€Œå¸®ä½ æŒæ¡ä» Hooks è§’åº¦å»è§£å†³é—®é¢˜çš„æ€è€ƒæ–¹å¼ã€‚

# å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ Hooksï¼Ÿ

è‡ªå®šä¹‰ Hooks åœ¨å½¢å¼ä¸Šå…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯**å£°æ˜ä¸€ä¸ªåå­—ä»¥ use å¼€å¤´çš„å‡½æ•°**ï¼Œæ¯”å¦‚ useCounterã€‚è¿™ä¸ªå‡½æ•°åœ¨å½¢å¼ä¸Šå’Œæ™®é€šçš„ JavaScript å‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½ å¯ä»¥ä¼ é€’ä»»æ„å‚æ•°ç»™è¿™ä¸ª Hookï¼Œä¹Ÿå¯ä»¥è¿”å›ä»»ä½•å€¼ã€‚

ä½†æ˜¯è¦æ³¨æ„ï¼ŒHooks å’Œæ™®é€šå‡½æ•°åœ¨è¯­ä¹‰ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå°±åœ¨äº**å‡½æ•°ä¸­æœ‰æ²¡æœ‰ç”¨åˆ°å…¶å®ƒ Hooksã€‚**

ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ª useXXX çš„å‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨å¹¶æ²¡æœ‰ç”¨ä»»ä½•å…¶å®ƒ Hooksï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯ä¸€ä¸ª Hookï¼Œè€Œåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ã€‚ä½†æ˜¯å¦‚æœç”¨äº†å…¶å®ƒ Hooks ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª Hookã€‚

ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ç¬¬3è®²ä¸­æˆ‘ä»¬çœ‹åˆ°è¿‡ä¸€ä¸ªç®€å•è®¡æ•°å™¨çš„å®ç°ï¼Œå½“æ—¶æŠŠä¸šåŠ¡é€»è¾‘éƒ½å†™åœ¨äº†å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œä½†å…¶å®æ˜¯å¯ä»¥æŠŠä¸šåŠ¡é€»è¾‘æå–å‡ºæ¥æˆä¸ºä¸€ä¸ª Hookã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```
import { useState, useCallback }from 'react';
 
function useCounter() {
  // å®šä¹‰ count è¿™ä¸ª state ç”¨äºä¿å­˜å½“å‰æ•°å€¼
  const [count, setCount] = useState(0);
  // å®ç°åŠ  1 çš„æ“ä½œ
  const increment = useCallback(() => setCount(count + 1), [count]);
  // å®ç°å‡ 1 çš„æ“ä½œ
  const decrement = useCallback(() => setCount(count - 1), [count]);
  // é‡ç½®è®¡æ•°å™¨
  const reset = useCallback(() => setCount(0), []);
  
  // å°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œ export å‡ºå»ä¾›è°ƒç”¨è€…ä½¿ç”¨
  return { count, increment, decrement, reset };
}
```

æœ‰äº†è¿™ä¸ª Hookï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š

```
import React from 'react';

function Counter() {
  // è°ƒç”¨è‡ªå®šä¹‰ Hook
  const { count, increment, decrement, reset } = useCounter();

  // æ¸²æŸ“ UI
  return (
    <div>
      <button onClick={decrement}> - </button>
      <p>{count}</p>
      <button onClick={increment}> + </button>
      <button onClick={reset}> reset </button>
    </div>
  );
}
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠåŸæ¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®ç°çš„é€»è¾‘æå–äº†å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå•ç‹¬çš„ Hookï¼Œ**ä¸€æ–¹é¢èƒ½è®©è¿™ä¸ªé€»è¾‘å¾—åˆ°é‡ç”¨ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿèƒ½è®©ä»£ç æ›´åŠ è¯­ä¹‰åŒ–**ï¼Œ**å¹¶ä¸”æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚**

ä»è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ Hooks çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š

1. åå­—ä¸€å®šæ˜¯ä»¥ use å¼€å¤´çš„å‡½æ•°ï¼Œè¿™æ · React æ‰èƒ½å¤ŸçŸ¥é“è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª Hookï¼›
2. å‡½æ•°å†…éƒ¨ä¸€å®šè°ƒç”¨äº†å…¶å®ƒçš„ Hooksï¼Œå¯ä»¥æ˜¯å†…ç½®çš„ Hooksï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒè‡ªå®šä¹‰ Hooksã€‚è¿™æ ·æ‰èƒ½å¤Ÿè®©ç»„ä»¶åˆ·æ–°ï¼Œæˆ–è€…å»äº§ç”Ÿå‰¯ä½œç”¨ã€‚

å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œå®ç°äº†è®¡æ•°å™¨ä¸šåŠ¡é€»è¾‘çš„æ‹†åˆ†å’Œé‡ç”¨ã€‚ä¸è¿‡é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œä½ ä¹Ÿçœ‹åˆ°äº†åˆ›å»ºè‡ªå®šä¹‰ Hook æ˜¯å¦‚æ­¤ä¹‹ç®€å•ï¼Œå’Œè¿‡å»çš„é«˜é˜¶ç»„ä»¶è®¾è®¡æ¨¡å¼ç›¸æ¯”ï¼Œç®€ç›´æ˜¯å¤©ä¸Šåœ°ä¸‹çš„åŒºåˆ«ã€‚ä¹Ÿæ­£å› å¦‚æ­¤ï¼ŒHooks å‡ºç°åå°±å¾—åˆ°äº†è¿…é€Ÿçš„æ™®åŠã€‚

é‚£ä¹ˆï¼Œåœ¨æ—¥å¸¸å¼€å‘çš„æ—¶å€™ï¼Œé™¤äº†è§£è€¦ä¸šåŠ¡ç›¸å…³çš„é€»è¾‘ï¼Œè¿˜æœ‰å“ªäº›åœºæ™¯éœ€è¦å»åˆ›å»ºè‡ªå®šä¹‰ Hooks å‘¢ï¼Ÿä¸‹é¢æˆ‘å°±å†ç»™ä½ ä»‹ç»ä¸‰ä¸ªå…¸å‹çš„ä¸šåŠ¡åœºæ™¯ã€‚

# å°è£…é€šç”¨é€»è¾‘ï¼šuseAsync

åœ¨ç»„ä»¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›å¸¸ç”¨çš„é€šç”¨é€»è¾‘ã€‚è¿‡å»å¯èƒ½ä¼šå› ä¸ºé€»è¾‘é‡ç”¨æ¯”è¾ƒç¹çï¼Œè€Œç»å¸¸åœ¨æ¯ä¸ªç»„ä»¶ä¸­å»è‡ªå·±å®ç°ï¼Œé€ æˆç»´æŠ¤çš„å›°éš¾ã€‚ä½†ç°åœ¨æœ‰äº† Hooksï¼Œå°±å¯ä»¥å°†æ›´å¤šçš„é€šç”¨é€»è¾‘é€šè¿‡ Hooks çš„å½¢å¼è¿›è¡Œå°è£…ï¼Œæ–¹ä¾¿è¢«ä¸åŒçš„ç»„ä»¶é‡ç”¨ã€‚

æ¯”å¦‚è¯´ï¼Œåœ¨æ—¥å¸¸ UI çš„å¼€å‘ä¸­ï¼Œæœ‰ä¸€ä¸ªæœ€å¸¸è§çš„éœ€æ±‚ï¼š**å‘èµ·å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®å¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š**ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦å…³å¿ƒè¯·æ±‚æ­£ç¡®è¿”å›æ—¶ï¼ŒUI ä¼šå¦‚ä½•å±•ç°æ•°æ®ï¼›è¿˜éœ€è¦å¤„ç†è¯·æ±‚å‡ºé”™ï¼Œä»¥åŠå…³æ³¨ Loading çŠ¶æ€åœ¨ UI ä¸Šå¦‚ä½•æ˜¾ç¤ºã€‚

æˆ‘ä»¬å¯ä»¥é‡æ–°çœ‹ä¸‹åœ¨ç¬¬1è®²ä¸­çœ‹åˆ°çš„å¼‚æ­¥è¯·æ±‚çš„ä¾‹å­ï¼Œä» Server ç«¯è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œå¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼š

```
import React from "react";

export default function UserList() {
  // ä½¿ç”¨ä¸‰ä¸ª state åˆ†åˆ«ä¿å­˜ç”¨æˆ·åˆ—è¡¨ï¼Œloading çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€
  const [users, setUsers] = React.useState([]);
  const [loading, setLoading] = React.useState(false);
  const [error, setError] = React.useState(null);

  // å®šä¹‰è·å–ç”¨æˆ·çš„å›è°ƒå‡½æ•°
  const fetchUsers = async () => {
    setLoading(true);
    try {
      const res = await fetch("https://reqres.in/api/users/");
      const json = await res.json();
      // è¯·æ±‚æˆåŠŸåå°†ç”¨æˆ·æ•°æ®æ”¾å…¥ state
      setUsers(json.data);
    } catch (err) {
      // è¯·æ±‚å¤±è´¥å°†é”™è¯¯çŠ¶æ€æ”¾å…¥ state
      setError(err);
    }
    setLoading(false);
  };

  return (
    <div className="user-list">
      <button onClick={fetchUsers} disabled={loading}>
        {loading ? "Loading..." : "Show Users"}
      </button>
      {error && 
        <div style={{ color: "red" }}>Failed: {String(error)}</div>
      }
      <br />
      <ul>
        {users && users.length > 0 &&
          users.map((user) => {
            return <li key={user.id}>{user.first_name}</li>;
          })}
      </ul>
    </div>
  );
}
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº† usersã€loading å’Œ error ä¸‰ä¸ªçŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬åœ¨å¼‚æ­¥è¯·æ±‚çš„ä¸åŒé˜¶æ®µå»è®¾ç½®ä¸åŒçš„çŠ¶æ€ï¼Œè¿™æ · UI æœ€ç»ˆèƒ½å¤Ÿæ ¹æ®è¿™äº›çŠ¶æ€å±•ç°å‡ºæ¥ã€‚åœ¨æ¯ä¸ªéœ€è¦å¼‚æ­¥è¯·æ±‚çš„ç»„ä»¶ä¸­ï¼Œå…¶å®éƒ½éœ€è¦é‡å¤ç›¸åŒçš„é€»è¾‘ã€‚

äº‹å®ä¸Šï¼Œåœ¨å¤„ç†è¿™ç±»è¯·æ±‚çš„æ—¶å€™ï¼Œæ¨¡å¼éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œé€šå¸¸éƒ½ä¼šéµå¾ªä¸‹é¢æ­¥éª¤ï¼š

1. åˆ›å»º dataï¼Œloadingï¼Œerror è¿™3ä¸ª stateï¼›
2. è¯·æ±‚å‘å‡ºåï¼Œè®¾ç½® loading state ä¸º trueï¼›
3. è¯·æ±‚æˆåŠŸåï¼Œå°†è¿”å›çš„æ•°æ®æ”¾åˆ°æŸä¸ª state ä¸­ï¼Œå¹¶å°† loading state è®¾ä¸º falseï¼›
4. è¯·æ±‚å¤±è´¥åï¼Œè®¾ç½® error state ä¸º trueï¼Œå¹¶å°† loading state è®¾ä¸º falseã€‚

æœ€åï¼ŒåŸºäº dataã€loadingã€error è¿™3ä¸ª state çš„æ•°æ®ï¼ŒUI å°±å¯ä»¥æ­£ç¡®åœ°æ˜¾ç¤ºæ•°æ®ï¼Œæˆ–è€… loadingã€error è¿™äº›åé¦ˆç»™ç”¨æˆ·äº†ã€‚

æ‰€ä»¥ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œå¯ä»¥å¾ˆå¥½åœ°å°†è¿™æ ·çš„é€»è¾‘æå–å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ã€‚æ¯”å¦‚ä»£ç å¯ä»¥è¿™æ ·å®ç°ï¼š

```
import { useState } from 'react';

const useAsync = (asyncFunction) => {
  // è®¾ç½®ä¸‰ä¸ªå¼‚æ­¥é€»è¾‘ç›¸å…³çš„ state
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  // å®šä¹‰ä¸€ä¸ª callback ç”¨äºæ‰§è¡Œå¼‚æ­¥é€»è¾‘
  const execute = useCallback(() => {
    // è¯·æ±‚å¼€å§‹æ—¶ï¼Œè®¾ç½® loading ä¸º trueï¼Œæ¸…é™¤å·²æœ‰æ•°æ®å’Œ error çŠ¶æ€
    setLoading(true);
    setData(null);
    setError(null);
    return asyncFunction()
      .then((response) => {
        // è¯·æ±‚æˆåŠŸæ—¶ï¼Œå°†æ•°æ®å†™è¿› stateï¼Œè®¾ç½® loading ä¸º false
        setData(response);
        setLoading(false);
      })
      .catch((error) => {
        // è¯·æ±‚å¤±è´¥æ—¶ï¼Œè®¾ç½® loading ä¸º falseï¼Œå¹¶è®¾ç½®é”™è¯¯çŠ¶æ€
        setError(error);
        setLoading(false);
      });
  }, [asyncFunction]);

  return { execute, loading, data, error };
};
```

é‚£ä¹ˆæœ‰äº†è¿™ä¸ª Hookï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å°±åªéœ€è¦å…³å¿ƒä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„éƒ¨åˆ†ã€‚æ¯”å¦‚ä»£ç å¯ä»¥ç®€åŒ–æˆè¿™æ ·çš„å½¢å¼ï¼š

```
import React from "react";
import useAsync from './useAsync';

export default function UserList() {
  // é€šè¿‡ useAsync è¿™ä¸ªå‡½æ•°ï¼Œåªéœ€è¦æä¾›å¼‚æ­¥é€»è¾‘çš„å®ç°
  const {
    execute: fetchUsers,
    data: users,
    loading,
    error,
  } = useAsync(async () => {
    const res = await fetch("https://reqres.in/api/users/");
    const json = await res.json();
    return json.data;
  });
  
  return (
    // æ ¹æ®çŠ¶æ€æ¸²æŸ“ UI...
  );
}
```

é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬**åˆ©ç”¨äº† Hooks èƒ½å¤Ÿç®¡ç† React ç»„ä»¶çŠ¶æ€çš„èƒ½åŠ›ï¼Œå°†ä¸€ä¸ªç»„ä»¶ä¸­çš„æŸä¸€éƒ¨åˆ†çŠ¶æ€ç‹¬ç«‹å‡ºæ¥ï¼Œä»è€Œå®ç°äº†é€šç”¨é€»è¾‘çš„é‡ç”¨**ã€‚

ä¸è¿‡åœ¨è¿™é‡Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼šè¿™ç§ç±»å‹çš„å°è£…æˆ‘å†™ä¸€ä¸ªå·¥å…·ç±»ä¸å°±å¯ä»¥äº†ï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦é€šè¿‡ Hooks è¿›è¡Œå°è£…å‘¢ï¼Ÿ

ç­”æ¡ˆå¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ã€‚å› ä¸ºåœ¨ Hooks ä¸­ï¼Œä½ å¯ä»¥ç®¡ç†å½“å‰ç»„ä»¶çš„ stateï¼Œä»è€Œå°†æ›´å¤šçš„é€»è¾‘å†™åœ¨å¯é‡ç”¨çš„ Hooks ä¸­ã€‚ä½†æ˜¯è¦çŸ¥é“ï¼Œåœ¨æ™®é€šçš„å·¥å…·ç±»ä¸­æ˜¯æ— æ³•ç›´æ¥ä¿®æ”¹ç»„ä»¶ state çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ— æ³•åœ¨æ•°æ®æ”¹å˜çš„æ—¶å€™è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚

# ç›‘å¬æµè§ˆå™¨çŠ¶æ€ï¼šuseScroll

è™½ç„¶ React ç»„ä»¶åŸºæœ¬ä¸Šä¸éœ€è¦å…³å¿ƒå¤ªå¤šçš„æµè§ˆå™¨ APIï¼Œä½†æ˜¯æœ‰æ—¶å€™å´æ˜¯å¿…é¡»çš„ï¼š

- ç•Œé¢éœ€è¦æ ¹æ®åœ¨çª—å£å¤§å°å˜åŒ–é‡æ–°å¸ƒå±€ï¼›
- åœ¨é¡µé¢æ»šåŠ¨æ—¶ï¼Œéœ€è¦æ ¹æ®æ»šåŠ¨æ¡ä½ç½®ï¼Œæ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºä¸€ä¸ªâ€œè¿”å›é¡¶éƒ¨â€çš„æŒ‰é’®ã€‚

è¿™éƒ½éœ€è¦ç”¨åˆ°æµè§ˆå™¨çš„ API æ¥ç›‘å¬è¿™äº›çŠ¶æ€çš„å˜åŒ–ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä»¥æ»šåŠ¨æ¡ä½ç½®çš„åœºæ™¯ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹åº”è¯¥å¦‚ä½•ç”¨ Hooks ä¼˜é›…åœ°ç›‘å¬æµè§ˆå™¨çŠ¶æ€ã€‚

æ­£å¦‚ Hooks çš„å­—é¢æ„æ€æ˜¯â€œé’©å­â€ï¼Œå®ƒå¸¦æ¥çš„ä¸€å¤§å¥½å¤„å°±æ˜¯ï¼š**å¯ä»¥è®© React çš„ç»„ä»¶ç»‘å®šåœ¨ä»»ä½•å¯èƒ½çš„æ•°æ®æºä¸Šã€‚è¿™æ ·å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶èƒ½å¤Ÿè‡ªåŠ¨åˆ·æ–°**ã€‚æŠŠè¿™ä¸ªå¥½å¤„å¯¹åº”åˆ°æ»šåŠ¨æ¡ä½ç½®è¿™ä¸ªåœºæ™¯å°±æ˜¯ï¼šç»„ä»¶éœ€è¦ç»‘å®šåˆ°å½“å‰æ»šåŠ¨æ¡çš„ä½ç½®æ•°æ®ä¸Šã€‚

è™½ç„¶è¿™ä¸ªé€»è¾‘åœ¨å‡½æ•°ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥å®ç°ï¼Œä½†æ˜¯æŠŠè¿™ä¸ªé€»è¾‘å®ç°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„Hooksï¼Œæ—¢å¯ä»¥è¾¾åˆ°é€»è¾‘é‡ç”¨ï¼Œåœ¨è¯­ä¹‰ä¸Šä¹Ÿæ›´åŠ æ¸…æ™°ã€‚è¿™ä¸ªå’Œä¸Šé¢çš„ useAsync çš„ä½œç”¨æ˜¯éå¸¸ç±»ä¼¼çš„ã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥çœ‹è¿™ä¸ª Hooks åº”è¯¥å¦‚ä½•å®ç°ï¼š

```
import { useState, useEffect } from 'react';

// è·å–æ¨ªå‘ï¼Œçºµå‘æ»šåŠ¨æ¡ä½ç½®
const getPosition = () => {
  return {
    x: document.body.scrollLeft,
    y: document.body.scrollTop,
  };
};
const useScroll = () => {
  // å®šä¸€ä¸ª position è¿™ä¸ª state ä¿å­˜æ»šåŠ¨æ¡ä½ç½®
  const [position, setPosition] = useState(getPosition());
  useEffect(() => {
    const handler = () => {
      setPosition(getPosition(document));
    };
    // ç›‘å¬ scroll äº‹ä»¶ï¼Œæ›´æ–°æ»šåŠ¨æ¡ä½ç½®
    document.addEventListener("scroll", handler);
    return () => {
      // ç»„ä»¶é”€æ¯æ—¶ï¼Œå–æ¶ˆäº‹ä»¶ç›‘å¬
      document.removeEventListener("scroll", handler);
    };
  }, []);
  return position;
};

```

æœ‰äº†è¿™ä¸ª Hookï¼Œä½ å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç›‘å¬å½“å‰æµè§ˆå™¨çª—å£çš„æ»šåŠ¨æ¡ä½ç½®äº†ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±å±•ç¤ºäº†â€œè¿”å›é¡¶éƒ¨â€è¿™æ ·ä¸€ä¸ªåŠŸèƒ½çš„å®ç°ï¼š

```
import React, { useCallback } from 'react';
import useScroll from './useScroll';

function ScrollTop() {
  const { y } = useScroll();

  const goTop = useCallback(() => {
    document.body.scrollTop = 0;
  }, []);

  const style = {
    position: "fixed",
    right: "10px",
    bottom: "10px",
  };
  // å½“æ»šåŠ¨æ¡ä½ç½®çºµå‘è¶…è¿‡ 300 æ—¶ï¼Œæ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®
  if (y > 300) {
    return (
      <button onClick={goTop} style={style}>
        Back to Top
      </button>
    );
  }
  // å¦åˆ™ä¸ render ä»»ä½• UI
  return null;
}

```

é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•å°†æµè§ˆå™¨çŠ¶æ€å˜æˆå¯è¢« React ç»„ä»¶ç»‘å®šçš„æ•°æ®æºï¼Œä»è€Œåœ¨ä½¿ç”¨ä¸Šæ›´åŠ ä¾¿æ·å’Œç›´è§‚ã€‚å½“ç„¶ï¼Œé™¤äº†çª—å£å¤§å°ã€æ»šåŠ¨æ¡ä½ç½®è¿™äº›çŠ¶æ€ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›æ•°æ®ä¹Ÿå¯ä»¥è¿™æ ·æ“ä½œï¼Œæ¯”å¦‚ cookiesï¼ŒlocalStorage, URLï¼Œç­‰ç­‰ã€‚ä½ éƒ½å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹æ³•æ¥å®ç°ã€‚

# æ‹†åˆ†å¤æ‚ç»„ä»¶

å‡½æ•°ç»„ä»¶è™½ç„¶å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œä½†æ˜¯å½“æŸä¸ªç»„ä»¶åŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å¾ˆå¤šåŒå­¦ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ç»„ä»¶ä»£ç å¾ˆå®¹æ˜“å˜å¾—ç‰¹åˆ«é•¿ï¼Œæ¯”å¦‚è¶…è¿‡500è¡Œï¼Œç”šè‡³1000è¡Œã€‚è¿™å°±å˜å¾—éå¸¸éš¾ç»´æŠ¤äº†ã€‚

è®¾æƒ³å½“ä½ æ¥æ‰‹æŸä¸ªé¡¹ç›®ï¼Œå‘ç°ä¸€ä¸ªå‡½æ•°åŠ¨è¾„å°±è¶…è¿‡äº†500è¡Œï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆæ„Ÿå—ï¼Ÿæ‰€ä»¥**â€œä¿æŒæ¯ä¸ªå‡½æ•°çš„çŸ­å°â€**è¿™æ ·é€šç”¨çš„æœ€ä½³å®è·µï¼ŒåŒæ ·é€‚ç”¨äºå‡½æ•°ç»„ä»¶ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½è®©ä»£ç å§‹ç»ˆæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚

é‚£ä¹ˆç°åœ¨çš„å…³é”®é—®é¢˜å°±æ˜¯ï¼Œæ€ä¹ˆæ‰èƒ½è®©å‡½æ•°ç»„ä»¶ä¸ä¼šå¤ªè¿‡å†—é•¿å‘¢ï¼Ÿåšæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯**å°½é‡å°†ç›¸å…³çš„é€»è¾‘åšæˆç‹¬ç«‹çš„ Hooksï¼Œç„¶ååœ¨å‡½æ•°ç»„ä¸­ä½¿ç”¨è¿™äº› Hooksï¼Œé€šè¿‡å‚æ•°ä¼ é€’å’Œè¿”å›å€¼è®© Hooks ä¹‹é—´å®Œæˆäº¤äº’**ã€‚

è¿™é‡Œå¯ä»¥æ³¨æ„ä¸€ç‚¹ï¼Œæ‹†åˆ†é€»è¾‘çš„ç›®çš„ä¸ä¸€å®šæ˜¯ä¸ºäº†é‡ç”¨ï¼Œè€Œå¯ä»¥æ˜¯ä»…ä»…ä¸ºäº†ä¸šåŠ¡é€»è¾‘çš„éš”ç¦»ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸ä¸€å®šè¦æŠŠ Hooks æ”¾åˆ°ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å¯ä»¥å’Œå‡½æ•°ç»„ä»¶å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™ä¹ˆåšçš„åŸå› å°±åœ¨äºï¼Œè¿™äº› Hooks æ˜¯å’Œå½“å‰å‡½æ•°ç»„ä»¶ç´§å¯†ç›¸å…³çš„ï¼Œæ‰€ä»¥å†™åˆ°ä¸€èµ·ï¼Œåè€Œæ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚

ä¸ºäº†è®©ä½ å¯¹è¿™ä¸€ç‚¹æœ‰æ›´ç›´è§‚çš„æ„Ÿå—ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚è®¾æƒ³ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å±•ç¤ºä¸€ä¸ªåšå®¢æ–‡ç« çš„åˆ—è¡¨ï¼Œå¹¶ä¸”æœ‰ä¸€åˆ—è¦æ˜¾ç¤ºæ–‡ç« çš„åˆ†ç±»ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›è¡¨æ ¼è¿‡æ»¤åŠŸèƒ½ï¼Œä»¥ä¾¿èƒ½å¤Ÿåªæ˜¾ç¤ºæŸä¸ªåˆ†ç±»çš„æ–‡ç« ã€‚

ä¸ºäº†æ”¯æŒè¿‡æ»¤åŠŸèƒ½ï¼Œåç«¯æä¾›äº†ä¸¤ä¸ª APIï¼šä¸€ä¸ªç”¨äºè·å–æ–‡ç« çš„åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªç”¨äºè·å–æ‰€æœ‰çš„åˆ†ç±»ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨å‰ç«¯å°†æ–‡ç« åˆ—è¡¨è¿”å›çš„æ•°æ®åˆ†ç±» ID æ˜ å°„åˆ°åˆ†ç±»çš„åå­—ï¼Œä»¥ä¾¿æ˜¾ç¤ºåœ¨åˆ—è¡¨é‡Œã€‚

è¿™æ—¶å€™ï¼Œå¦‚æœæŒ‰ç…§ç›´è§‚çš„æ€è·¯å»å®ç°ï¼Œé€šå¸¸éƒ½ä¼šæŠŠé€»è¾‘éƒ½å†™åœ¨ä¸€ä¸ªç»„ä»¶é‡Œï¼Œæ¯”å¦‚ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š

```
function BlogList() {
  // è·å–æ–‡ç« åˆ—è¡¨...
  // è·å–åˆ†ç±»åˆ—è¡¨...
  // ç»„åˆæ–‡ç« æ•°æ®å’Œåˆ†ç±»æ•°æ®...
  // æ ¹æ®é€‰æ‹©çš„åˆ†ç±»è¿‡æ»¤æ–‡ç« ...
  
  // æ¸²æŸ“ UI ...
}
```

ä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯åœ¨å†™ä¸€ä¸ªå…¶å®ƒçš„æ™®é€šå‡½æ•°ï¼Œä¼šä¸ä¼šå°†å…¶ä¸­ä¸€äº›é€»è¾‘å†™æˆå•ç‹¬çš„å‡½æ•°å‘¢ï¼Ÿç›¸ä¿¡ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå› ä¸ºè¿™æ ·åšå¯ä»¥éš”ç¦»ä¸šåŠ¡é€»è¾‘ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ¥šã€‚

ä½†æˆ‘å´å‘ç°å¾ˆå¤šåŒå­¦åœ¨å†™å‡½æ•°ç»„ä»¶æ—¶æ²¡æœ‰æ„è¯†åˆ° Hooks å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œæ‰€ä»¥é€šå¸¸ä¸ä¼šè¿™ä¹ˆå»åšéš”ç¦»ï¼Œè€Œæ˜¯ä¹ æƒ¯äºä¸€è·¯å†™ä¸‹æ¥ï¼Œè¿™å°±ä¼šé€ æˆæŸä¸ªå‡½æ•°ç»„ä»¶ç‰¹åˆ«é•¿ã€‚è¿˜æ˜¯è€ç”Ÿå¸¸è°ˆçš„é‚£å¥è¯ï¼Œ**æ”¹å˜è¿™ä¸ªçŠ¶å†µçš„å…³é”®ä»ç„¶åœ¨äºå¼€å‘æ€è·¯çš„è½¬å˜**ã€‚æˆ‘ä»¬è¦çœŸæ­£**æŠŠ Hooks å°±çœ‹æˆæ™®é€šçš„å‡½æ•°ï¼Œèƒ½éš”ç¦»çš„å°½é‡å»åšéš”ç¦»**ï¼Œä»è€Œè®©ä»£ç æ›´åŠ æ¨¡å—åŒ–ï¼Œæ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚

é‚£ä¹ˆé’ˆå¯¹è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å°†å…¶æ‹†åˆ†æˆ4ä¸ª Hooksï¼Œæ¯ä¸€ä¸ª Hook éƒ½å°½é‡å°ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
import React, { useEffect, useCallback, useMemo, useState } from "react";
import { Select, Table } from "antd";
import _ from "lodash";
import useAsync from "./useAsync";

const endpoint = "https://myserver.com/api/";
const useArticles = () => {
  // ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ useAsync è·å–æ–‡ç« åˆ—è¡¨
  const { execute, data, loading, error } = useAsync(
    useCallback(async () => {
      const res = await fetch(`${endpoint}/posts`);
      return await res.json();
    }, []),
  );
  // æ‰§è¡Œå¼‚æ­¥è°ƒç”¨
  useEffect(() => execute(), [execute]);
  // è¿”å›è¯­ä¹‰åŒ–çš„æ•°æ®ç»“æ„
  return {
    articles: data,
    articlesLoading: loading,
    articlesError: error,
  };
};
const useCategories = () => {
  // ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ useAsync è·å–åˆ†ç±»åˆ—è¡¨
  const { execute, data, loading, error } = useAsync(
    useCallback(async () => {
      const res = await fetch(`${endpoint}/categories`);
      return await res.json();
    }, []),
  );
  // æ‰§è¡Œå¼‚æ­¥è°ƒç”¨
  useEffect(() => execute(), [execute]);

  // è¿”å›è¯­ä¹‰åŒ–çš„æ•°æ®ç»“æ„
  return {
    categories: data,
    categoriesLoading: loading,
    categoriesError: error,
  };
};
const useCombinedArticles = (articles, categories) => {
  // å°†æ–‡ç« æ•°æ®å’Œåˆ†ç±»æ•°æ®ç»„åˆåˆ°ä¸€èµ·
  return useMemo(() => {
    // å¦‚æœæ²¡æœ‰æ–‡ç« æˆ–è€…åˆ†ç±»æ•°æ®åˆ™è¿”å› null
    if (!articles || !categories) return null;
    return articles.map((article) => {
      return {
        ...article,
        category: categories.find(
          (c) => String(c.id) === String(article.categoryId),
        ),
      };
    });
  }, [articles, categories]);
};
const useFilteredArticles = (articles, selectedCategory) => {
  // å®ç°æŒ‰ç…§åˆ†ç±»è¿‡æ»¤
  return useMemo(() => {
    if (!articles) return null;
    if (!selectedCategory) return articles;
    return articles.filter((article) => {
      console.log("filter: ", article.categoryId, selectedCategory);
      return String(article?.category?.name) === String(selectedCategory);
    });
  }, [articles, selectedCategory]);
};

const columns = [
  { dataIndex: "title", title: "Title" },
  { dataIndex: ["category", "name"], title: "Category" },
];

export default function BlogList() {
  const [selectedCategory, setSelectedCategory] = useState(null);
  // è·å–æ–‡ç« åˆ—è¡¨
  const { articles, articlesError } = useArticles();
  // è·å–åˆ†ç±»åˆ—è¡¨
  const { categories, categoriesError } = useCategories();
  // ç»„åˆæ•°æ®
  const combined = useCombinedArticles(articles, categories);
  // å®ç°è¿‡æ»¤
  const result = useFilteredArticles(combined, selectedCategory);

  // åˆ†ç±»ä¸‹æ‹‰æ¡†é€‰é¡¹ç”¨äºè¿‡æ»¤
  const options = useMemo(() => {
    const arr = _.uniqBy(categories, (c) => c.name).map((c) => ({
      value: c.name,
      label: c.name,
    }));
    arr.unshift({ value: null, label: "All" });
    return arr;
  }, [categories]);

  // å¦‚æœå‡ºé”™ï¼Œç®€å•è¿”å› Failed
  if (articlesError || categoriesError) return "Failed";

  // å¦‚æœæ²¡æœ‰ç»“æœï¼Œè¯´æ˜æ­£åœ¨åŠ è½½
  if (!result) return "Loading...";

  return (
    <div>
      <Select
        value={selectedCategory}
        onChange={(value) => setSelectedCategory(value)}
        options={options}
        style={{ width: "200px" }}
        placeholder="Select a category"
      />
      <Table dataSource={result} columns={columns} />
    </div>
  );
}
```

é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±æŠŠä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„é€»è¾‘æ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„ Hook äº†ï¼Œä¸ä»…éš”ç¦»äº†ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿè®©ä»£ç åœ¨è¯­ä¹‰ä¸Šæ›´åŠ æ˜ç¡®ã€‚æ¯”å¦‚è¯´æœ‰ useArticlesã€useCategories è¿™æ ·ä¸ä¸šåŠ¡ç›¸å…³çš„åå­—ï¼Œå°±éå¸¸æ˜“äºç†è§£ã€‚

è™½ç„¶è¿™ä¸ªä¾‹å­ä¸­æŠ½å–å‡ºæ¥çš„ Hooks éƒ½éå¸¸ç®€å•ï¼Œç”šè‡³çœ‹ä¸Šå»æ²¡æœ‰å¿…è¦ã€‚ä½†æ˜¯å®é™…çš„å¼€å‘åœºæ™¯ä¸€å®šæ˜¯æ¯”è¿™ä¸ªå¤æ‚çš„ï¼Œæ¯”å¦‚å¯¹äº API è¿”å›çš„æ•°æ®éœ€è¦åšä¸€äº›æ•°æ®çš„è½¬æ¢ï¼Œè¿›è¡Œæ•°æ®çš„ç¼“å­˜ï¼Œç­‰ç­‰ã€‚é‚£ä¹ˆè¿™æ—¶å°±è¦é¿å…æŠŠè¿™äº›é€»è¾‘éƒ½æ”¾åˆ°ä¸€èµ·ï¼Œè€Œæ˜¯å°±è¦æ‹†åˆ†åˆ°ç‹¬ç«‹çš„ Hooksï¼Œä»¥å…äº§ç”Ÿè¿‡äºå¤æ‚çš„ç»„ä»¶ã€‚åˆ°æ—¶å€™ä½ ä¹Ÿå°±æ›´èƒ½æ›´ä½“ä¼šåˆ° Hooks å¸¦ç»™ä½ çš„æƒŠå–œäº†ã€‚

# å°ç»“

å¥½äº†ï¼Œè¿™ä¸€è®²æˆ‘ä¸»è¦ç»™ä½ ä»‹ç»äº†è‡ªå®šä¹‰ Hooks çš„æ¦‚å¿µï¼Œä»¥åŠå…¸å‹çš„å››ä¸ªä½¿ç”¨åœºæ™¯ï¼š

1. æŠ½å–ä¸šåŠ¡é€»è¾‘ï¼›
2. å°è£…é€šç”¨é€»è¾‘ï¼›
3. ç›‘å¬æµè§ˆå™¨çŠ¶æ€ï¼›
4. æ‹†åˆ†å¤æ‚ç»„ä»¶ã€‚

å…¶ä¸­ï¼Œæˆ‘é€šè¿‡å››ä¸ªæ¡ˆä¾‹æ¥å¸®åŠ©ä½ çœŸæ­£ç†è§£ Hooks ï¼Œå¹¶ç†Ÿç»ƒæŒæ¡è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•ã€‚åº”å§‹ç»ˆè®°å¾—ï¼Œè¦ç”¨Hooks çš„æ€è·¯å»è§£å†³é—®é¢˜ï¼Œå‘æŒ¥ Hooks çš„æœ€å¤§ä»·å€¼ï¼Œå°±æ˜¯è¦ç»å¸¸å»æ€è€ƒå“ªäº›é€»è¾‘åº”è¯¥å°è£…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ Hookï¼Œä¿è¯æ¯ä¸ª Hook çš„çŸ­å°ç²¾æ‚ï¼Œä»è€Œè®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚

# æ€è€ƒé¢˜

åœ¨ useCounter è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¯å›ºå®šè®©æ•°å­—æ¯æ¬¡åŠ ä¸€ã€‚å‡å¦‚è¦åšä¸€ä¸ªæ”¹è¿›ï¼Œå…è®¸çµæ´»é…ç½®ç‚¹å‡»åŠ å·æ—¶åº”è¯¥åŠ å‡ ï¼Œæ¯”å¦‚è¯´æ¯æ¬¡åŠ 10ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ

æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„æ€è€ƒå’Œæƒ³æ³•ï¼Œæˆ‘ä¼šå’Œä½ äº¤æµè®¨è®ºã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>Bugèˆ¬çš„å­˜åœ¨</span> ğŸ‘ï¼ˆ32ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ã€Šæ‹†åˆ†å¤æ‚ç»„ä»¶ã€‹ è¿™ä¸ªä¾‹å­ï¼Œæœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼Œè±ç„¶å¼€æœ—ï¼Œæ„Ÿè°¢-</p>2021-06-06</li><br/><li><span>å‡¡å‡¡</span> ğŸ‘ï¼ˆ17ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>import { useState, useCallback } from &#39;react&#39;;

const useCounter = (step) =&gt; {
  const [counter, setCounter] = useState(0);
  const increment = useCallback(() =&gt; setCounter(counter + step), [counter, step]);
  const decrement = useCallback(() =&gt; setCounter(counter - step), [counter, step]);
  const reset = useCallback(() =&gt; setCounter(0), []);
  
  return {counter, increment, decrement, reset};
}

export default useCounter;</p>2021-06-05</li><br/><li><span>Tristan</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>é†é†çŒé¡¶å•Šï¼Œæ•¢é—®å¦‚ä½•ä¿å…»å¤´å‘ï¼Ÿ</p>2021-07-29</li><br/><li><span>æ±Ÿè°¢æœ¨</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>è€å¸ˆï¼ŒuseMemoã€useCallbackå¯¹æ•°æ®è¿›è¡Œç¼“å­˜æ—¶ï¼Œä¾èµ–é¡¹æ˜¯è¿›è¡Œæµ…æ¯”è¾ƒï¼Ÿ å¦‚æœå­˜åœ¨ä¾èµ–é¡¹æ˜¯æ·±å±‚å¯¹è±¡çš„æ•°æ®å‘ç”Ÿå˜åŒ–ä¼šå½±å“ç¼“å­˜è®¡ç®—ç»“æœï¼Ÿ</p>2021-08-17</li><br/><li><span>Free fall</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>const useCounter = (initCount = 0) =&gt; {
  const [count, setCount] = useState(initCount)

  const increase = useCallback((body) =&gt; {
    setCount((count) =&gt; (count += body))
  }, [])

  return [count, increase]
}</p>2021-06-05</li><br/><li><span>é‡ç”Ÿ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è‡ªå®šä¹‰hooksä¸€èˆ¬æ”¾åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹</p>2021-06-18</li><br/><li><span>Isaac</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>è€å¸ˆï¼Œè‡ªå®šä¹‰ hooks å¿…é¡»è¦ä»¥ usexxxå¼€å¤´å—ï¼Ÿ</p>2021-06-09</li><br/><li><span>å°ä¸ªå­å¤–æ˜Ÿäººï¼šï¼‰</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¿™èŠ‚è¯¾è¶…çº§æ£’ï¼è°¢è°¢è€å¸ˆã€‚åŠªåŠ›åœ¨å®è·µä¸­ï¼Œä½¿ç”¨è¿™èŠ‚è¯¾çš„å†…å®¹</p>2021-06-08</li><br/><li><span>æ»¡æœˆ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>import React, { useState, useCallback } from &#39;react&#39;;

function useCounter() {
  const [count, setCount] = useState(0);
  const increment = useCallback(
    (delta = 1) =&gt; setCount(count + delta),
    [count],
  );
  const decrement = useCallback(
    (delta = 1) =&gt; setCount(count - delta),
    [count],
  );
  const reset = useCallback(() =&gt; setCount(0), []);
  return {
    count,
    increment,
    decrement,
    reset,
  };
}

export default function Counter() {
  &#47;&#47; è°ƒç”¨è‡ªå®šä¹‰ Hook
  const { count, increment, decrement, reset } = useCounter();

  &#47;&#47; æ¸²æŸ“ UI
  return (
    &lt;div&gt;
      &lt;button onClick={() =&gt; decrement()}&gt; - &lt;&#47;button&gt;
      &lt;p&gt;{count}&lt;&#47;p&gt;
      &lt;button onClick={() =&gt; increment(2)}&gt; + &lt;&#47;button&gt;
      &lt;button onClick={reset}&gt; reset &lt;&#47;button&gt;
    &lt;&#47;div&gt;
  );
}</p>2021-06-06</li><br/><li><span>Geek_71adef</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¯·é—®å¦‚ä½•åŒºåˆ« è‡ªå®šä¹‰hookæ˜¯åœ¨usehookä¼ å‚ï¼Œè¿˜æ˜¯åœ¨usehooké‡Œé¢çš„æ–¹æ³•ä¼ å‚ï¼Ÿ</p>2021-06-06</li><br/><li><span>xgqfrms</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ7ï¼‰<p>å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨ await å¤„ç† res å‘€

```js
&#47;&#47; return await res.json();

 return res.json();

```</p>2021-06-05</li><br/><li><span>ä½™ç†™</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è¿™ä¸€èŠ‚æ€»ç»“å¾—éå¸¸å¥½ï¼Œå®˜æ–¹æ–‡æ¡£å’Œç½‘ä¸Šæ–‡ç« æ²¡å†™å‡ºæ¥çš„å¹²è´§ğŸ‘</p>2021-06-27</li><br/><li><span>å‚»å­æ¥äº†å¿«è·‘ä¸¶</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è€å¸ˆï¼Œåé¢çš„è¯¾ç¨‹èƒ½ä¸èƒ½å‡ºé—¨æ›´æ·±å…¥çš„ï¼Œæ¯”å¦‚fibierï¼Œhooksçš„åº•å±‚å®ç°å•Šï¼Œè¿™ç§ï¼Œä»¥åŠfiberçš„å„ç§è°ƒåº¦ï¼Œå•¥çš„</p>2021-12-03</li><br/><li><span>åˆ«æ‹¦æˆ‘è®©æˆ‘å­¦</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>useScrollä¸­getPositionä¸­åº”è¯¥å°†document.body.scrollTopæ”¹ä¸ºdocument.documentElement.scrollTopã€‚</p>2021-07-09</li><br/><li><span>å±±åŸæ—§å®¢</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ5ï¼‰<p>
import React from &quot;react&quot;;
import useAsync from &#39;.&#47;useAsync&#39;;

export default function UserList() {
  &#47;&#47; é€šè¿‡ useAsync è¿™ä¸ªå‡½æ•°ï¼Œåªéœ€è¦æä¾›å¼‚æ­¥é€»è¾‘çš„å®ç°
  const {
    execute: fetchUsers,
    data: users,
    loading,
    error,
  } = useAsync(async () =&gt; {
    const res = await fetch(&quot;https:&#47;&#47;reqres.in&#47;api&#47;users&#47;&quot;);
    const json = await res.json();
    return json.data;
  });
  
  return (
    &#47;&#47; æ ¹æ®çŠ¶æ€æ¸²æŸ“ UI...
  );
}

æˆ‘éªŒè¯äº†è¿™ä¸ªæ¡ˆä¾‹å¿…é¡»æ‰§è¡Œå‰¯ä½œç”¨useEffect(() =&gt; fetchUsers(), []);æ‰èƒ½å‘èµ·å¼‚æ­¥æ•°æ®è¯·æ±‚ï¼Œå¦‚æœåœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­å†ä¼ å…¥useEffect(() =&gt; fetchUsers(), [fetchUsers]);ä¼šé™·å…¥å¼‚æ­¥æ•°æ®è¯·æ±‚æ­»å¾ªç¯ã€‚</p>2021-06-09</li><br/>
</ul>