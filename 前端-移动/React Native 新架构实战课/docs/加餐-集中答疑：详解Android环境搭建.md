ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å®ä¼Ÿã€‚

ä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šä¸ºä½ è§£ç­”å¦‚ä½•æ­å»º Android ç¯å¢ƒã€‚

åœ¨å†™è¿™èŠ‚è¯¾ä¹‹å‰ï¼Œæˆ‘è‡ªå·±é‡è£…ç³»ç»Ÿé‡æ–°æ­å»ºäº†ä¸€æ¬¡ç¯å¢ƒã€‚æˆ‘ä½¿ç”¨çš„ç”µè„‘æ˜¯ Macbook Pro 2016 ç‰ˆï¼Œç³»ç»Ÿç‰ˆæœ¬æ˜¯ 12.6.3ï¼Œä¾›ä½ å‚è€ƒã€‚

æ€»ä½“ä¸Šè¯´ï¼Œæ­å»º Android ç¯å¢ƒæ¯”æ­å»º iOS ç¯å¢ƒé‡åˆ°çš„ç½‘ç»œé—®é¢˜æ›´å°‘ï¼Œå› æ­¤æˆ‘æ›´å»ºè®®æ–°æ‰‹ç›´æ¥æ­å»º Android ç¯å¢ƒã€‚å¹¶åœ¨æ¯æ­å»ºä¸€æ­¥ä¹‹ååšä¸€æ¬¡æ£€æŸ¥ï¼Œæ¯”å¦‚ç›¸å…³åŒ…çš„ç‰ˆæœ¬æ£€æŸ¥ï¼Œè¿™å¯èƒ½ä¼šè®©ä½ å°‘èµ°å¼¯è·¯ã€‚

ä¸‹é¢æˆ‘æ¥åˆ†äº«ä¸€ä¸‹ï¼Œæˆ‘æ­å»º Android React Native å¼€å‘ç¯å¢ƒçš„è¯¦ç»†æ­¥éª¤ï¼Œä½ ä¹Ÿå¯ä»¥è·Ÿç€ä¸€èµ·åŠ¨èµ·æ‰‹æ¥ã€‚

## Homebrew

ç¬¬ä¸€æ­¥æ˜¯å®‰è£… Homebrewï¼Œåç»­å¾ˆå¤šç¨‹åºçš„å®‰è£…éƒ½ä¼šå€ŸåŠ© Homebrew è¿›è¡Œã€‚

Homebrew æ˜¯ macOS çš„ä¸€ä¸ªè½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚ç›´æ¥ä½¿ç”¨ [Homebrew å®˜æ–¹æ–‡æ¡£](https://brew.sh/)è¿›è¡Œå®‰è£…ï¼Œæˆ‘è¿™è¾¹å‡ºç°äº†ç½‘ç»œæŠ¥é”™ã€‚æŠ¥é”™çš„å†…å®¹æ˜¯ `unable to access github`ï¼Œä¹Ÿå°±æ˜¯è®¿é—®ä¸åˆ° GitHub åœ°å€ã€‚è§£å†³æ–¹æ¡ˆè¦ä¹ˆæ˜¯ä¿æŒè‡ªå·±çš„ç½‘ç»œç•…é€šï¼Œè¦ä¹ˆä½¿ç”¨ç›¸å…³çš„é•œåƒæºã€‚

çŸ¥ä¹ä¸Šæœ‰å¤§ç‰›æä¾›äº† Homebrew [é•œåƒæºåŠå·¥å…·](https://zhuanlan.zhihu.com/p/111014448)ï¼Œä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ä¸€é”®å®‰è£…ã€‚

```bash
$ /bin/zsh -c "$(curl -fsSL <https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh>)"
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/e6/dc/e67948373afe7be627ce7814yy7ae5dc.png?wh=1920x1259)

å®‰è£…å®Œæˆåï¼Œé‡å¯å½“å‰ Terminalï¼Œbrew å°±å®‰è£…æˆåŠŸäº†ã€‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦å®‰è£…æˆåŠŸã€‚

```plain
$ brew --version
Homebrew 3.6.15
```

## Node å’Œ NPM

ç¬¬äºŒæ­¥æ˜¯å®‰è£… Node å’Œ NPMï¼Œæ­å»º JavaScript ç¯å¢ƒã€‚

Node æ˜¯ React Native åº”ç”¨ç¨‹åºä¸­ï¼ŒJavaScript ç›¸å…³æœåŠ¡çš„è¿è¡Œç¯å¢ƒï¼Œæ¯”å¦‚æ„å»ºæœåŠ¡å°±æ˜¯é€šè¿‡ Node ç¯å¢ƒæä¾›çš„ã€‚å®‰è£… Node æ—¶ï¼Œä¼šè‡ªåŠ¨å®‰è£… NPM åŒ…ç®¡ç†å™¨ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬ç®¡ç†ç›¸å…³ä¾èµ–ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ Homebrew è¿›è¡Œ Node çš„å®‰è£…ã€‚

```bash
$ brew install node
```

å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ£€æŸ¥ Node å’Œ NPM æ˜¯å¦å®‰è£…æˆåŠŸã€‚

```bash
$ node --version
v19.7.0
$ npm --version
9.5.0
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/22/37/22c3ac2eeaff6a51fd0b08c1fa935c37.png?wh=1920x386)

ä¸ºä¿è¯åç»­ç½‘ç»œçš„ç•…é€šï¼Œä½ æœ€å¥½å°† NPM çš„ registry è®¾ç½®ä¸ºæ·˜å®æºã€‚åˆ‡æ¢å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
$ npx nrm use taobao
```

## Watchman

ç¬¬ä¸‰æ­¥ï¼Œæ˜¯å®‰è£…ä¸€ä¸ªåä¸º Watchman çš„å·¥å…·ã€‚å®ƒæ˜¯ç”± Facebook å¼€å‘çš„ä¸€ä¸ªå·¥å…·ï¼Œåªè¦ä½ çš„æ–‡ä»¶æœ‰ä¸€äº›å˜åŒ–ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œä½ çš„é¡¹ç›®ã€‚

æˆ‘ä»¬ä½¿ç”¨ Homebrew æ¥å®‰è£… Watchmanã€‚

```plain
$ brew install watchman
```

å®‰è£…å®Œæˆåï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚

```plain
$ watchman --version
2023.02.20.00
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/d8/aa/d841d889eae880be5faabc685a979aaa.png?wh=1920x1256)

## å®‰è£… JDK

ç¬¬å››æ­¥æ˜¯å®‰è£… Java Development Kitï¼ˆJDKï¼‰ï¼Œæ­å»º Java å¼€å‘ç¯å¢ƒã€‚

ä¼—æ‰€å‘¨çŸ¥ï¼ŒAndroid ä¾èµ– Java å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæˆ‘ä»¬æ­å»º Java ç¯å¢ƒä½¿ç”¨çš„å·¥å…·æ˜¯ Zuluã€‚Zulu æ˜¯ä¸€æ¬¾ Java è¿è¡Œç¯å¢ƒï¼Œå®ƒæ˜¯åŸºäº OpenJDKï¼ˆä¸€ä¸ª Java ç¼–ç¨‹è¯­è¨€çš„å¼€æºå®ç°çš„æºä»£ç ï¼‰æ„å»ºçš„ã€‚Zulu æä¾›äº† Intel å’Œ M1 Mac çš„ JDKï¼Œè¿™ä½¿å¾— JDK çš„å®‰è£…æ›´ä¸ºæ–¹ä¾¿ã€‚

ç”±äº Zulu æ˜¯ä¸€ä¸ªå›¾å½¢ç•Œé¢ç¨‹åºï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œä¸ºäº†æ–¹ä¾¿è¿™é‡Œæˆ‘ä»¬å€ŸåŠ© Cask ä¸€é”®å®‰è£…ã€‚ä½ éœ€è¦å…ˆå€ŸåŠ© Homebrew å®‰è£… Cask å†å®‰è£… Zuluã€‚å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
$ brew tap homebrew/cask-versions
$ brew install --cask zulu11
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/50/77/50dd88byy16ed17f35d9a2e7751a7377.png?wh=1920x1156)

å½“ä½ å®‰è£…æˆåŠŸåï¼Œä½ å¯ä»¥è¿è¡Œ `java --version` æ£€æŸ¥ Java è¿è¡Œæ—¶ç¯å¢ƒï¼ˆJREï¼‰çš„ç‰ˆæœ¬ï¼Œæˆ–è¿è¡Œ `javac --version` æ£€æŸ¥ Java å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ä¸­ Java ç¼–è¯‘å™¨ï¼ˆjavacï¼‰çš„ç‰ˆæœ¬ã€‚

```bash
$ java --version
java 16.0.2 2021-07-20 
$ javac --version
javac 16.0.2  
```

## å®‰è£… Android Studio

ç¬¬äº”æ­¥æ˜¯å®‰è£… Android Studioï¼Œå®ƒæ˜¯æ­å»º Android å¼€å‘ç¯å¢ƒçš„å‰ææ¡ä»¶ã€‚

Android Studio æ˜¯ Android å¼€å‘çš„å®˜æ–¹é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ã€‚ä½ éœ€è¦å®‰è£… Android Studio æ‰èƒ½åœ¨æœ¬æœºæ„å»º React Native åº”ç”¨ç¨‹åºï¼Œå¹¶è¿è¡Œåœ¨çœŸæœºæˆ–æ¨¡æ‹Ÿå™¨ä¸Šã€‚

ä½ å¯ä»¥ä» [Android Studio å®˜æ–¹ç½‘ç«™](https://developer.android.com/studio)ä¸‹è½½å’Œå®‰è£… Android Studioã€‚åœ¨ Android Studio å®‰è£…å‘å¯¼ä¸­ï¼Œé€‰æ‹©é»˜è®¤é€‰é¡¹å¹¶è®¾ç½®ç›¸å…³é•œåƒå®‰è£…é»˜è®¤ä¾èµ–å³å¯ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/b2/b5/b28d50c33b97b8bf5a719794dyyc0eb5.png?wh=1920x1205)

```bash
è…¾è®¯ï¼š https://mirrors.cloud.tencent.com/AndroidSDK/

é˜¿é‡Œï¼š https://mirrors.aliyun.com/android.googlesource.com/
```

è¿™ä¸€æ­¥çš„å®Œæ•´æµç¨‹æ¯”è¾ƒé•¿ï¼Œç»†èŠ‚æ¯”è¾ƒå¤šï¼Œå› æ­¤æˆ‘å½•äº†ä¸€ä¸ªå°è§†é¢‘ï¼Œä¾›ä½ å‚è€ƒï¼š

## å®‰è£… **Android SDK**

ç¬¬å…­æ­¥æ˜¯å®‰è£… Android SDKã€‚

åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŠŠ Android Studio å’Œé»˜è®¤ä¾èµ–å®‰è£…å¥½äº†ï¼Œé™¤äº†é»˜è®¤ä¾èµ–ï¼Œä½ è¿˜éœ€è¦å®‰è£…ï¼š

- `Android SDK Platform 33`
- `Intel x86 Atom_64 System Image` æˆ– `Google APIs Intel x86 Atom System Image`(Inter CPU) æˆ– `Google APIs ARM 64 v8a System Image` (Apple CPU)
- `Android SDK Build-Tools` 33.0.0 ç‰ˆæœ¬

å®‰è£…çš„ç¬¬ä¸€éƒ¨åˆ†çš„æ˜¯ `Android SDK Platform`ã€‚å®ƒæ˜¯æŒ‡é’ˆå¯¹ Android ç‰¹å®šç‰ˆæœ¬çš„ Android å¹³å°ç»„ä»¶ï¼ŒåŒ…æ‹¬åº“ã€å·¥å…·å’Œæ¡†æ¶ç­‰ã€‚

å®‰è£…çš„ç¬¬äºŒéƒ¨åˆ†çš„æ˜¯ `System Image`ã€‚å®ƒæ˜¯é’ˆå¯¹ç‰¹å®šå¤„ç†å™¨æ¶æ„çš„ Android ç³»ç»Ÿé•œåƒï¼Œè¯¥é•œåƒä¸»è¦ç”¨äºåœ¨æ¨¡æ‹Ÿå™¨ä¸Šæ¨¡æ‹Ÿå…·æœ‰ç‰¹å®š CPU å’Œ Google API çš„ Android è®¾å¤‡ã€‚å¸¦æœ‰ Intel å­—æ ·çš„é€‚é…çš„æ˜¯ Intel CPUï¼Œå¸¦æœ‰ ARM å­—æ ·çš„é€‚é…çš„æ˜¯è‹¹æœ CPUï¼Œæ­¤å¤–å¸¦æœ‰ Google å­—æ ·è¡¨ç¤ºé›†æˆäº† Google çš„ APIã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒIntel CPU é€‰æ‹© `Google APIs Intel x86 Atom System Image`ï¼Œè‹¹æœ CPU é€‰æ‹© `Google APIs ARM 64 v8a System Image`ã€‚

å®‰è£…çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ `Android SDK Build-Tools`ï¼Œä½ å¯ä»¥åœ¨ Android Studio çš„å·¦ä¸Šè§’æ‰¾åˆ° Preferenceï¼Œå¹¶æ‰“å¼€å®ƒã€‚ç„¶åæœç´¢ Android SDKï¼Œæ‰¾åˆ°å…¶ä¸­çš„ `SDK Platforms` å’Œ `SDK Tools` é…ç½®é¡µï¼Œç„¶åæŒ‰ä¸‹å›¾æ‰€ç¤ºå‹¾é€‰ï¼Œæœ€åç‚¹å‡» `Apply` å®Œæˆç›¸å…³é¡¹çš„å®‰è£…ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/87/c2/879b19e4c2053ece3f416a02564afdc2.png?wh=1920x1411)

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/41/27/411c92d3909937fbfdfefc9476946927.png?wh=1920x1397)

åŒæ ·ï¼Œè¿™ä¸€æ­¥æˆ‘ä¹Ÿå½•åˆ¶äº†è§†é¢‘ã€‚

## é…ç½® **Android ç¯å¢ƒå˜é‡**

ç¬¬ä¸ƒæ­¥æ˜¯é…ç½® Android ç¯å¢ƒå˜é‡ã€‚

ç”±äºåç»­æ“ä½œä¼šä¾èµ–äºä¸€äº›å‘½ä»¤è¡Œï¼Œå› æ­¤ä½ è¿˜éœ€è¦å°† Android ç¯å¢ƒå˜é‡æš´éœ²åˆ°å…¨å±€ï¼Œä»¥ä¾¿ä½¿ç”¨ã€‚

Zshï¼ˆZ shellï¼‰å’Œ Bashï¼ˆBourne Again SHellï¼‰æ˜¯ä¸¤ç§ä¸åŒçš„å‘½ä»¤å·¥å…·ï¼Œä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ£€æŸ¥ä½ ç”¨çš„æ˜¯å“ªç§å·¥å…·ã€‚

```bash
$ echo $SHELL
/bin/zsh
```

å¦‚æœä½ ç”¨çš„æ˜¯ Zshï¼Œé‚£ä¹ˆä½ éœ€è¦ä¿®æ”¹ `~/.zprofile` æˆ– `~/.zshrc` æ–‡ä»¶ã€‚å¦‚æœä½ ç”¨çš„æ˜¯ Bashï¼Œé‚£ä¹ˆä½ éœ€è¦ä¿®æ”¹ `~/.bash_profile` æˆ– `~/.bashrc` æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨è‡ªå¸¦çš„ `vi` ç¼–è¾‘å™¨è¿›è¡Œç¼–è¾‘ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```bash
$ vi ~/.zshrc
# æˆ– vi ~/.bashrc
```

æ¥ç€ï¼ŒæŒ‰ `i` é”®è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œå†ä½¿ç”¨ç®­å¤´é”®å°†å…‰æ ‡ç§»åŠ¨åˆ°æ’å…¥æ–‡æœ¬çš„ä½ç½®ï¼Œç„¶åå°†ä¸‹åˆ—å†…å®¹å¤åˆ¶ç²˜è´´åˆ°æ–‡æœ¬ä¸­ã€‚

```bash
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/emulator
export PATH=$PATH:$ANDROID_HOME/platform-tools
```

å®Œæˆæ’å…¥åï¼ŒæŒ‰ `Esc` é”®é€€å‡ºæ’å…¥æ¨¡å¼ï¼Œè¾“å…¥ `:wq` ä»¥ä¿å­˜æ›´æ”¹å¹¶é€€å‡º `vi` ç¼–è¾‘å™¨ã€‚

å†æ¥ç€ï¼Œä¸ºäº†è®©æ›´æ”¹ç”Ÿæ•ˆï¼Œä½ å¯ä»¥é‡å¯ç»ˆç«¯ï¼ˆShellï¼‰æˆ–è€…è¿è¡Œ `source ~/.zshrc` ä½¿é…ç½®ç”Ÿæ•ˆã€‚

æœ€åï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤æ£€æŸ¥ Android ç¯å¢ƒå˜é‡æ˜¯å¦è®¾ç½®æˆåŠŸã€‚

```bash
$ echo $ANDROID_HOME
/Users/jianghongwei/Library/Android/sdk
$ echo $PATH
/Users/local/bin...
```

è¿™ä¸€æ­¥ä¾ç„¶å¯ä»¥å‚è€ƒè§†é¢‘ã€‚

## å®‰è£… Android æ¨¡æ‹Ÿå™¨

ç¬¬å…«æ­¥æ˜¯å®‰è£… Android æ¨¡æ‹Ÿå™¨ã€‚å®‰è£… Android æ¨¡æ‹Ÿå™¨æ˜¯æ­å»º Android ç¯å¢ƒä¸­çš„æœ€åä¸€æ­¥ã€‚å½“ç„¶ä½ å¯ä»¥ä½¿ç”¨çœŸæœºè¿›è¡Œè°ƒè¯•ï¼Œä½†æ˜¯æ¨¡æ‹Ÿå™¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›´åŠ æ–¹ä¾¿ï¼Œå› æ­¤æˆ‘é€‰æ‹©å®‰è£…äº† Android æ¨¡æ‹Ÿå™¨ã€‚

å¦‚æœä½ è¿˜åœ¨ `Welcome to Android Studio` é¡µé¢ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ `More Actions` ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© `Virtual Device Manager`ã€‚å…¶ä»–æƒ…å†µï¼Œä½ å¯ä»¥åœ¨é¡¶éƒ¨èœå•æ ä¸­ç‚¹å‡» `Tools` &gt; `Virtual Device Manager`ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/a4/f9/a418d9789bca1a09b8fe26fefe46eff9.png?wh=1920x1709)

åœ¨ `Device Manager` ç•Œé¢ä¸­ï¼Œç‚¹å‡» `Create Virtual Device` æŒ‰é’®åˆ›å»ºè™šæ‹Ÿè®¾å¤‡ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/86/68/86dc18b83d13edc264f1991c1a884468.png?wh=1920x1558)

åœ¨ `Virtual Device Configuration` é¡µé¢é€‰æ‹©è™šæ‹Ÿç¡¬ä»¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªè®¾å¤‡ï¼Œæ¯”å¦‚ Pixel XLï¼Œç„¶åç‚¹å‡»Nextã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/66/12/66e0da248cbe35252ce5985909b65b12.png?wh=1920x1302)

æ¥ç€ï¼Œä½ ä¼šè¿›å…¥åˆ° `Virtual Device Configuration` é¡µé¢çš„ `System Image` ç³»ç»Ÿé•œåƒé€‰æ‹©æ­¥éª¤ï¼Œé€‰æ‹©æ¨¡æ‹Ÿå™¨çš„ Android ç‰ˆæœ¬ï¼Œç„¶åç‚¹å‡»ä¸‹è½½æŒ‰é’®è¿›è¡Œä¸‹è½½ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/0c/87/0cd0245881e69d4d3c5b9b6c2389a687.png?wh=1920x1319)

ç°åœ¨ï¼Œä½ å·²æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Android æ¨¡æ‹Ÿå™¨ã€‚å›åˆ° `Device Manager` é¡µé¢åï¼Œä½ å°†çœ‹åˆ°æ–°åˆ›å»ºçš„æ¨¡æ‹Ÿå™¨è®¾å¤‡ã€‚ç‚¹å‡» `Actions` ä¸­çš„æ’­æ”¾å›¾æ ‡ â–¶ï¸ å¯åŠ¨æ¨¡æ‹Ÿå™¨ã€‚æ¥ç€ä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œå¹¶åŠ è½½æ‰€é€‰çš„ Android ç³»ç»Ÿé•œåƒã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/04/9c/04ff8f12a9yy8a12115dcc4bdf95219c.png?wh=1920x1419)

å½“ä½ çœ‹åˆ° Android æ“ä½œç³»ç»Ÿç•Œé¢æ—¶ï¼Œä½ çš„æ¨¡æ‹Ÿå™¨å°±å®‰è£…å®Œæˆäº†ã€‚æ­¤æ—¶ï¼ŒAndroid ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºå’Œå¯åŠ¨ React Native é¡¹ç›®ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/3d/7b/3d844a5d4a3e2224442c8bfa9814607b.png?wh=1920x1186)

å‚è€ƒè§†é¢‘å¦‚ä¸‹ï¼š

## åˆ›å»º React Native é¡¹ç›®

ç¬¬ä¹æ­¥æ˜¯åˆ›å»º React Native é¡¹ç›®ã€‚

ä½ å¯ä»¥ä½¿ç”¨ React Native CLI æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ React Native é¡¹ç›®ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```bash
$ npx react-native@latest init AwesomeProject
```

è¿è¡Œä¸Šè¿°å‘½ä»¤åï¼Œä¼šä¾æ¬¡ä¸‹è½½ JavaScript/Java/Objective-C çš„ç›¸å…³ä¾èµ–å’Œé¡¹ç›®æ¨¡æ¿ï¼Œå¦‚æœæ²¡æœ‰é…ç½® NPMã€Maven æˆ– CocoaPods çš„ç›¸å…³é•œåƒï¼Œå¾ˆæœ‰å¯èƒ½ä¼šé‡åˆ°è¿è¡Œå¤±è´¥çš„é—®é¢˜ã€‚åœ¨è¿è¡Œå¤±è´¥åï¼Œä½ éœ€è¦ç¡®å®šä¸€ä¸‹æ˜¯ä¸Šè¿° 3 ä¸ªéƒ¨åˆ†ä¾èµ–ä¸­çš„å“ªéƒ¨åˆ†ä¾èµ–æ²¡æœ‰ä¸‹è½½æˆåŠŸã€‚

React Native iOS ç¯å¢ƒä¸­çš„ CocoaPods æŠ¥é”™ï¼Œæˆ‘å·²ç»åœ¨ [iOS ç¯å¢ƒæ­å»º](https://time.geekbang.org/column/article/635210)ä¸­è§£ç­”è¿‡äº†ï¼ŒNPM é•œåƒåœ¨å‰é¢æ­¥éª¤ä¸­ä¹Ÿå·²ç»åˆ‡æ¢åˆ°æ·˜å®æºï¼Œè¿™éƒ¨åˆ†é‡ç‚¹ä»‹ç» Android Maven é•œåƒæºçš„æ›¿æ¢ã€‚

ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ iOS Environment å®‰è£…å¤±è´¥çš„æŠ¥é”™ï¼Œä½†ç”±äºä½ è¦å®‰è£…çš„æ˜¯ React Native Androidï¼Œå› æ­¤ä½ å¯ä»¥é€‰æ‹©å¿½ç•¥ iOS çš„æŠ¥é”™ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/64/57/64abc00b51460b668a9eb1407c75c657.png?wh=1920x1237)

å†ä»”ç»†è§‚å¯Ÿå›¾ä¸­å†…å®¹ï¼Œä½ å¯ä»¥çœ‹åˆ° `Donwloading template` ã€`Copying template` ã€`Processing template` ä¸‰ä¸ªæ¨¡æ¿ç›¸å…³çš„æ­¥éª¤å·²ç»å¤„ç†å®Œæˆï¼ŒæŠ¥é”™çš„æ˜¯ `Installing Bundler` è¿™ä¸€æ­¥ã€‚

è¿™æ„å‘³ç€ï¼Œåˆ›å»º React Native é¡¹ç›®å·²ç»å®Œæˆï¼Œåªæ˜¯å®‰è£… Android ä¾èµ–å¤±è´¥äº†ï¼Œæ‰€ä»¥ä½ åªéœ€è¦åˆ‡æ¢ Maven é•œåƒæºï¼Œå†å®‰è£…å’Œå¯åŠ¨ React Native é¡¹ç›®å³å¯ã€‚

ä½ éœ€è¦æ‰“å¼€ `./android/build.gradle` æ–‡ä»¶ï¼Œå°† Maven æºåˆ‡æ¢ä¸ºé˜¿é‡Œæˆ–åä¸ºçš„é•œåƒæºï¼Œæ“ä½œæ–¹æ³•å¦‚ä¸‹ï¼š

```java
é˜¿é‡Œï¼šhttps://maven.aliyun.com/repository/public/
åä¸ºï¼šhttps://repo.huaweicloud.com/repository/maven/
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/21/77/219b77d5ccaa995b014029da0d953b77.png?wh=1920x1106)

åˆ‡æ¢å¥½æºä¹‹åï¼Œä½ éœ€è¦ `cd android` ç›®å½•ï¼Œç„¶åè¿è¡Œ `gradlew build` å‘½ä»¤ï¼ŒAndroid ä¾èµ–å®‰è£…æ˜¯ä½¿ç”¨ `gradlew` è¿›è¡Œç®¡ç†çš„ã€‚

```bash
$ cd android
$ ./gradlew build --refresh-dependencies
```

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/3b/13/3bef42bc9f712f980152c73a7c4db713.png?wh=1920x1101)

å‚è€ƒè§†é¢‘å¦‚ä¸‹ï¼š

## å¯åŠ¨ React Native é¡¹ç›®

æœ€åä¸€æ­¥å°±æ˜¯å¯åŠ¨ React Native é¡¹ç›®ã€‚

åœ¨ä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº† React Native é¡¹ç›®çš„åˆ›å»ºå’Œ Maven æºçš„åˆ‡æ¢ï¼Œæ‰€æœ‰å‡†å¤‡å·¥ä½œéƒ½å·²ç»å®Œæˆã€‚è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆï¼š

1. åœ¨æœ¬åœ°å¯åŠ¨ React Native æ„å»ºæœåŠ¡ï¼›
2. åœ¨æ¨¡æ‹Ÿå™¨ä¸­å®‰è£… React Native Android Appã€‚

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®ƒä¼šå¸®ä½ åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª React Native æ„å»ºæœåŠ¡ã€‚

```bash
# å¦‚æœåœ¨ Android ç›®å½•ï¼Œéœ€è¦ cd ../ åˆ°æ ¹ç›®å½•
$ npx react-native start
```

è¿è¡Œå®Œæˆåï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„ `Welcome to Metro` çš„æ¬¢è¿ç•Œé¢ï¼Œ`Metro` å°±æ˜¯ React Native çš„æ„å»ºæœåŠ¡ã€‚åŒæ—¶ï¼Œåº•éƒ¨ä¼šæ˜¾ç¤º `r` `d` `i` `a` å››ä¸ªé€‰é¡¹ï¼Œå…¶ä¸­ `a` é€‰é¡¹æ˜¯ `run on Android`ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä½ æŒ‰ä¸‹ `a` æŒ‰é’®ï¼Œå®ƒä¼šå¸®ä½ åœ¨æ¨¡æ‹Ÿå™¨ä¸Šå®‰è£… React Native Android åº”ç”¨ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/eb/9e/eb53c40bd6d2cbf87e87404dc5f5719e.png?wh=1920x1251)

æŒ‰ä¸‹ `a` æŒ‰é’®åï¼Œç¨ç­‰ä¸€ä¼šï¼Œå½“ä½ çœ‹åˆ° Welcome to React Native é¡µé¢æ—¶ï¼Œä½ çš„ React Native Android åº”ç”¨å°±å®‰è£…å®Œæˆäº†ã€‚

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/b3/1f/b3ca414c22bc7b37611e22b2fdc5ec1f.png?wh=1920x1294)

å‚è€ƒè§†é¢‘å¦‚ä¸‹ï¼š

è‡³æ­¤ï¼Œæ­å–œä½ ï¼ŒReact Native Android ç¯å¢ƒå·²ç»æ­å»ºæˆåŠŸäº†ã€‚

## **æ€»ç»“**

æ­å»ºå¼€å‘ç¯å¢ƒæ˜¯å¾ˆå¤šæ–°æ‰‹çš„ç—›ç‚¹ã€‚React Native é¡¹ç›®ä¾èµ–é¡¹ç¹å¤šï¼Œé¦–å…ˆæ˜¯ä¾èµ– Android ç¯å¢ƒï¼Œå…¶æ¬¡æ˜¯ä¾èµ– Node.js ç¯å¢ƒã€‚Android ç¯å¢ƒåˆä¾èµ– Java ç¯å¢ƒï¼Œè¿˜éœ€è¦å®‰è£… Android Studioã€Android SDK å’Œè™šæ‹Ÿæœºã€‚åŒæ—¶ï¼ŒNode.js å’Œ Java çš„ç¯å¢ƒæ­å»ºä¹Ÿéƒ½ä¾èµ– Homebrewï¼Œç¯ç¯ç›¸æ‰£ã€‚

## æ€è€ƒé¢˜

ä½ åœ¨æ­å»º React Native ç¯å¢ƒè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°è¿‡å“ªäº›é—®é¢˜ï¼Ÿèƒ½æŠŠä½ çš„è§£å†³æ–¹æ¡ˆå’Œå¤§å®¶åˆ†äº«åˆ†äº«å—ï¼Ÿ

æœŸå¾…ä½ çš„è¾“å‡ºï¼Œå¦‚æœè§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ï¼
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>å¤§å¤§å°å°</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>jdkæ¨èç”¨sdkmanï¼Œç±»ä¼¼nodeçš„nvmï¼Œæ–¹ä¾¿ç®¡ç†å¤šä¸ªjavaç‰ˆæœ¬ã€‚</p>2023-03-30</li><br/><li><span>äº”åç±³æ·±è“ï¼Œ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>å¤§å“¥ æ²¡æœ‰å¯¹åº”å¹³å°çš„ç¼–è¯‘æ‰“åŒ…è¿‡ç¨‹è®²è§£å—ï¼Ÿï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</p>2023-07-24</li><br/><li><span>handy</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>ä½¿ç”¨$ npx react-native@latest init AwesomeProjectè¿™ä¸ªå‘½ä»¤
åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ ï¼Œæç¤ºThe `init` command is deprecated.æ€ä¹ˆè§£å†³å‘¢</p>2025-01-02</li><br/><li><span>Geek1560</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ–°ç‰ˆæœ¬ Android studio é‡‡ç”¨è…¾è®¯æºæ²¡åŠ¨é™ ğŸ˜‚</p>2024-11-11</li><br/><li><span>é»‘é©¬æœ‰ç‚¹ç™½986</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>ç°åœ¨æœ‰å“ªäº›å…¬å¸ç”¨rn</p>2024-11-08</li><br/><li><span>åœ¨ç”·ç¥ç»è·¯ä¸Šè¶Šèµ°è¶Šè¿œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>Android Studioå¯åŠ¨AVDå¡åœ¨Starting Upï¼Œæ€ä¹ˆå¤„ç†ï¼Ÿ

avd.ini.encoding=UTF-8
path=&#47;Users&#47;Mao&#47;.android&#47;avd&#47;Pixel_XL_API_33.avd
path.rel=avd&#47;Pixel_XL_API_33.avd
target=android-33
</p>2024-06-18</li><br/><li><span>ç¾Šäº†ä¸ªç¾Š</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>ç°åœ¨24å¹´äº†ï¼Œå¯ä»¥å­¦å—</p>2024-06-12</li><br/><li><span>ç¾Šäº†ä¸ªç¾Š</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ²¡æœ‰windowsçš„å—ï¼Ÿ</p>2024-06-12</li><br/><li><span>Geek_a73298</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>é¢windowsçš„æ²¡æœ‰å˜›ï¼Ÿï¼Ÿï¼Ÿ</p>2024-04-24</li><br/><li><span>é»„ç§‘æ³½</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è¿™ä¸ªé”™è¯¯æœ‰ é‡åˆ°è¿‡å—ï¼Ÿè¦æ€ä¹ˆè§£å†³
Execution failed for task &#39;:app:buildCMakeDebug[arm64-v8a]&#39;.
&gt; com.android.ide.common.process.ProcessException: ninja: Entering directory `D:\RN_Project\study4\react-native-classroom-main\android\app\.cxx\Debug\3d212c3w\arm64-v8a&#39;
  [0&#47;2] Re-checking globbed directories...

  C++ build system [build] failed while executing:
      @echo off
      &quot;C:\\Users\\PC\\AppData\\Local\\Android\\Sdk\\cmake\\3.22.1\\bin\\ninja.exe&quot; ^
        -C ^
        &quot;D:\\RN_Project\\study4\\react-native-classroom-main\\android\\app\\.cxx\\Debug\\3d212c3w\\arm64-v8a&quot; ^
        appmodules ^
        react_codegen_RNCViewPager ^
        react_codegen_RTNCalculatorSpec ^
        react_codegen_RTNCenteredTextSpecs ^
        react_codegen_RTNCustomViewSpecs ^
        react_codegen_reactnativemmkv ^
        react_codegen_rngesturehandler_codegen ^
        react_codegen_rnscreens ^
        react_codegen_safeareacontext
    from D:\RN_Project\study4\react-native-classroom-main\android\app
  ninja: error: Stat(C:&#47;Users&#47;PC&#47;.gradle&#47;caches&#47;transforms-3&#47;b65107381eb04de4935992b7f9f75be6&#47;transformed&#47;jetified-react-android-0.72.0-debug&#47;prefab&#47;modules&#47;rrc_legacyviewmanagerinterop&#47;include&#47;react&#47;renderer&#47;components&#47;legacyviewmanagerinterop&#47;UnstableLegacyViewManagerInteropComponentDescriptor.h): Filename longer than 260 characters</p>2024-03-24</li><br/><li><span>Print JQKÂ°</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>åœ¨ä½¿ç”¨tcpä¸æœåŠ¡ç«¯è¿æ¥æ—¶ï¼Œåº”ç”¨åˆ‡åˆ°åå°åä¸æœåŠ¡ç«¯çš„ç½‘ç»œè¿æ¥å°±æ–­å¼€äº†ï¼Œå¦‚ä½•æ‰èƒ½å®ç°ç½‘ç»œä¿æŒè¿æ¥</p>2023-12-07</li><br/><li><span>mike</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è®²æ‰“åŒ…å‘å¸ƒäº†å—ï¼Ÿ</p>2023-11-24</li><br/><li><span>è¯·åŠ¡å¿…ä¼˜ç§€</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>ä¸ºå•¥æˆ‘è¿Homebrewéƒ½å®‰è£…å¤±è´¥</p>2023-11-06</li><br/><li><span>ä¾—å®¶äººá¯¤â¶á´³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>èŠ±äº†59å—ä¹°äº†7å¤©æœ‰æ•ˆæœŸï¼ŒçœŸæ˜¯ç‰›é€¼äº†ï¼</p>2023-10-12</li><br/><li><span>äº”åç±³æ·±è“ï¼Œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆ æœ‰windowsç¯å¢ƒçš„æ­å»ºæ•™ç¨‹å—</p>2023-07-06</li><br/>
</ul>