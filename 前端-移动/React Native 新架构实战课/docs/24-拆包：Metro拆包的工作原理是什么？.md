ä½ å¥½ï¼Œæˆ‘æ˜¯è’‹å®ä¼Ÿã€‚

åœ¨ä¸Šä¸€è®²æˆ‘ä»¬èŠäº†çƒ­æ›´æ–°ï¼Œä»Šå¤©è¿™ä¸€è®²æˆ‘ä»¬èŠèŠçƒ­æ›´æ–°ä¸­çš„æ‹†åŒ…ç¯èŠ‚ã€‚

çƒ­æ›´æ–°å’Œæ‹†åŒ…éƒ½æ˜¯å¤§å®¶èŠå¾—æ¯”è¾ƒå¤šçš„è¯é¢˜ï¼Œé€šå¸¸ä¸€ä¸ªèŠå¾—æ¯”è¾ƒå¤šçš„æŠ€æœ¯è¯é¢˜éƒ½ä¼šæœ‰ä¸€å¥—æˆç†Ÿçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæ¯”å¦‚çƒ­æ›´æ–°å¹³å°å°±æœ‰ CodePush è¿™æ ·çš„æˆç†Ÿæ–¹æ¡ˆï¼Œä½†æ‹†åŒ…å´æ²¡æœ‰ä¸€å¥—å¤§å®¶éƒ½å…¬è®¤æˆç†Ÿçš„æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¥‡æ€ªã€‚

ä¸šå†…æ²¡æœ‰æ–¹æ¡ˆï¼Œæ¢ä½œä»¥å‰å¤§å®¶å°±åªèƒ½è‡ªå·±â€œé€ è½®å­â€äº†ï¼Œä½†å»å¹´æˆ‘ä»¬å¼€æºäº† 58RN çš„æ‹†åŒ…å·¥å…· [metro-code-split](https://github.com/wuba/metro-code-split)ï¼Œä½ å¯ä»¥ç›´æ¥æ‹¿å»ç”¨ã€‚

metro-code-split æ˜¯æˆ‘ä»¬å›¢é˜Ÿçš„èµµç¦åŒå­¦å†™çš„ä¸€ä¸ªåŸºäº Metro çš„æ‹†åŒ…å·¥å…·ï¼Œå®ƒèƒ½å¸®ä½ å®ç° React Native çš„æ‹†åŒ…å·¥ä½œã€‚

è¦çŸ¥é“ï¼Œæ— è®ºæˆ‘ä»¬æ˜¯è¿è¡Œ npm start å¯åŠ¨æœ¬åœ°è°ƒè¯•ï¼Œè¿˜æ˜¯è¿è¡Œ npm run-ios æ„å»ºåº”ç”¨ï¼Œåº•å±‚éƒ½ä¼šç”¨åˆ° Metro æ‰“åŒ…å·¥å…·ã€‚

ç„¶è€Œï¼ŒFacebook å¼€æºçš„ Metro æ‰“åŒ…å·¥å…·ï¼Œæœ¬èº«å¹¶æ²¡æœ‰æ‹†åŒ…åŠŸèƒ½ã€‚å®ƒåªèƒ½å°† JavaScript ä»£ç ï¼Œæ‰“åŒ…æˆä¸€ä¸ª Bundle æ–‡ä»¶ï¼Œè€Œä¸” Metro ä¹Ÿä¸æ”¯æŒç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæ‰€ä»¥ç¤¾åŒºä¹Ÿæ²¡æœ‰ç¬¬ä¸‰æ–¹æ‹†åŒ…æ’ä»¶ã€‚ä½†å½“åˆï¼Œæˆ‘ä»¬åœ¨é˜…è¯» Metro æºç çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªå¯é…ç½®çš„å‡½æ•° [customSerializer](https://github.com/facebook/metro/blob/779e724885ec439a317edd7eb4356d01fe8d55a2/packages/metro/src/Server.js#L218-L224)ï¼Œä»è€Œæ‰¾åˆ°äº†ä¸å…¥ä¾µ Metro æºç ï¼Œé€šè¿‡[é…ç½®çš„æ–¹å¼](https://github.com/wuba/metro-code-split/blob/fce8183629d07bf34978c0f246c0a91a842ec4e9/src/config/craeteMustConfig.js#L33-L47)ç»™ Metro å†™ç¬¬ä¸‰æ–¹æ’ä»¶çš„æ–¹æ³•ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ5ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/11/d7/bd/50d98f9e.jpg" width="30px"><span>é»‘é©¬æœ‰ç‚¹ç™½986</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å…ˆè®²è®²metroå¦‚ä½•é…ç½®åˆ†åŒ…å§ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±è®²åŸç†å‘€ï¼Œå…ˆrunèµ·æ¥ã€‚</div>2023-02-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/61/c1/93031a2a.jpg" width="30px"><span>Aaaaaaaaaaayou</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å…³äºæ‹†åŒ…ï¼Œåˆ†äº«ä¸€ä¸‹æˆ‘å†™è¿‡çš„æ–‡ç«  https:&#47;&#47;juejin.cn&#47;post&#47;7056402608298131469?share_token=127d466c-9e55-45f8-9eec-4946389a3ec7

https:&#47;&#47;juejin.cn&#47;post&#47;7067895964794617892?share_token=1a0d8603-a165-4e3e-8445-58d584664897</div>2022-06-20</li><br/><li><img src="" width="30px"><span>Geek_e8d04f</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æŠŠdemoä¸‹ä¸‹æ¥ï¼Œbuildå‡ºæ¥çš„å…¬å…±åŒ…æ˜¯0kï¼Œå‡ºç°å¦‚ä¸‹è­¦å‘Šï¼Œæ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ

D:\software\metro-code-split-master\Example&gt;yarn build:dll
yarn run v1.22.21
$ mcs-scripts build -t dll -od public&#47;dll
                    Welcome to Metro!
              Fast - Scalable - Integrated


warning: failed to load the preRefPath correctly! are you setting the &quot;dll.referenceDir&quot; correctly?
warning: failed to load the dllRefPath correctly! are you setting the &quot;dll.referenceDir&quot; correctly?
info Writing bundle output to:, public\dll\_dll.ios.bundle
info Done writing bundle output
warn Assets destination folder is not set, skipping...
                    Welcome to Metro!
              Fast - Scalable - Integrated


warning: failed to load the preRefPath correctly! are you setting the &quot;dll.referenceDir&quot; correctly?
warning: failed to load the dllRefPath correctly! are you setting the &quot;dll.referenceDir&quot; correctly?
info Writing bundle output to:, public\dll\_dll.android.bundle
info Done writing bundle output
warn Assets destination folder is not set, skipping...
Done in 22.03s.</div>2024-01-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/18/7cbc34eb.jpg" width="30px"><span>davidzhou</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ‹†åŒ…èƒ½ç†è§£ä¸º webpack4 çš„ dllplugin æŠ€æœ¯å—</div>2023-04-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/e1/71/f0b1f069.jpg" width="30px"><span>éƒ­æ™ºå¼º</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘ç”¨ metro æ‹†åŒ…åï¼Œä¹Ÿå¯¼å‡ºäº† sourcemap æ–‡ä»¶ï¼Œæƒ³åš RN é‡Œçš„ js å¼‚å¸¸åè§£ï¼Œå¼‚å¸¸çš„è°ƒç”¨å †é‡Œæ˜¯ä¸€äº›æ•°å­—ï¼Œå…·ä½“åº”è¯¥è§£æå‘¢ï¼Ÿæˆ‘æ˜¯ iOSå¼€å‘</div>2022-05-30</li><br/>
</ul>