<!--geek time docs 🚀, MIT license-->


<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="极客时间文档">
      
      
        <meta name="author" content="zkep">
      
      
        <link rel="canonical" href="https://github.com/uaxe/geektime-docs/%E5%89%8D%E7%AB%AF-%E7%A7%BB%E5%8A%A8/React%20Native%20%E6%96%B0%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98%E8%AF%BE/21-%E6%B7%B7%E5%90%88%E5%BA%94%E7%94%A8%EF%BC%9A%E5%A6%82%E4%BD%95%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E9%9B%86%E6%88%90React%20Native%EF%BC%9F/">
      
      
        <link rel="prev" href="../20-Sentry%EF%BC%9A%E7%BA%BF%E4%B8%8A%E9%94%99%E8%AF%AF%E4%B8%8E%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%EF%BC%9F/">
      
      
        <link rel="next" href="../22-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E6%BB%A1%E8%B6%B3%E4%B8%9A%E5%8A%A1%E7%9A%84%E4%B8%AA%E6%80%A7%E5%8C%96%E9%9C%80%E6%B1%82%EF%BC%9F/">
      
      
      <link rel="icon" href="../../../None">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>21 混合应用：如何从零开始集成React Native？ - 极客时间文档</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#app" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            


          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="极客时间文档" class="md-header__button md-logo" aria-label="极客时间文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            极客时间文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              21 混合应用：如何从零开始集成React Native？
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/zkep/my-geektime" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    zkep/my-geektime
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../AI-%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="md-tabs__link">
          
  
    
  
  AI-大数据

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E4%BA%A7%E5%93%81-%E8%BF%90%E8%90%A5/" class="md-tabs__link">
          
  
    
  
  产品-运营

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  前端-移动

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E5%90%8E%E7%AB%AF-%E6%9E%B6%E6%9E%84/" class="md-tabs__link">
          
  
    
  
  后端-架构

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E7%AE%A1%E7%90%86-%E6%88%90%E9%95%BF/" class="md-tabs__link">
          
  
    
  
  管理-成长

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="md-tabs__link">
          
  
    
  
  计算机基础

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../%E8%BF%90%E7%BB%B4-%E6%B5%8B%E8%AF%95/" class="md-tabs__link">
          
  
    
  
  运维-测试

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="极客时间文档" class="md-nav__button md-logo" aria-label="极客时间文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    极客时间文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zkep/my-geektime" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    zkep/my-geektime
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../AI-%E5%A4%A7%E6%95%B0%E6%8D%AE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    AI-大数据
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E4%BA%A7%E5%93%81-%E8%BF%90%E8%90%A5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    产品-运营
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    前端-移动
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            前端-移动
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Android%E5%BC%80%E5%8F%91%E9%AB%98%E6%89%8B%E8%AF%BE/Android%E5%BC%80%E5%8F%91%E9%AB%98%E6%89%8B%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Android开发高手课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Flutter%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E6%88%98/Flutter%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%AE%9E%E6%88%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Flutter核心技术与实战
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../JavaScript%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/JavaScript%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    JavaScript核心原理解析
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../JavaScript%E8%BF%9B%E9%98%B6%E5%AE%9E%E6%88%98%E8%AF%BE/JavaScript%E8%BF%9B%E9%98%B6%E5%AE%9E%E6%88%98%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    JavaScript进阶实战课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../React%20Hooks%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/React%20Hooks%20%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E6%88%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    React Hooks 核心原理与实战
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" checked>
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    React Native 新架构实战课
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            React Native 新架构实战课
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../React%20Native%20%E6%96%B0%E6%9E%B6%E6%9E%84%E5%AE%9E%E6%88%98%E8%AF%BE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    React Native 新架构实战课
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%BC%80%E7%AF%87%E8%AF%8D-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E9%80%89%E6%8B%A9React%20Native%E5%81%9A%E4%BD%A0%E7%9A%84%E8%B7%A8%E7%AB%AF%E6%96%B9%E6%A1%88%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开篇词 为什么要选择React Native做你的跨端方案？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%8A%A0%E9%A4%90-%E9%9B%86%E4%B8%AD%E7%AD%94%E7%96%91%EF%BC%9A%E8%AF%A6%E8%A7%A3Android%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    加餐 集中答疑：详解Android环境搭建
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%8A%A0%E9%A4%90-%E9%9B%86%E4%B8%AD%E7%AD%94%E7%96%91%EF%BC%9A%E8%AF%A6%E8%A7%A3iOS%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    加餐 集中答疑：详解iOS环境搭建
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-%E5%AD%A6%E4%B9%A0React%20Native%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E6%8E%8C%E6%8F%A1%E5%93%AA%E4%BA%9B%E7%9F%A5%E8%AF%86%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01 学习React Native，你需要掌握哪些知识？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-Component%EF%BC%9A%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%9D%E8%B7%AF%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 Component：搭建静态页面的正确思路是什么？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-Style%EF%BC%9A%E5%85%B3%E4%BA%8E%E6%A0%B7%E5%BC%8F%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84%E4%B8%89%E4%BB%B6%E4%BA%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 Style：关于样式你需要知道的三件事
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-State%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%A9%E9%A1%B5%E9%9D%A2%E2%80%9C%E5%8A%A8%E2%80%9D%E8%B5%B7%E6%9D%A5%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 State：如何让页面“动”起来？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-Image%EF%BC%9A%E9%80%89%E6%8B%A9%E9%80%82%E5%90%88%E4%BD%A0%E7%9A%84%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 Image：选择适合你的图片加载方式
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-Pressable%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E4%BD%93%E9%AA%8C%E5%A5%BD%E7%9A%84%E7%82%B9%E6%8C%89%E7%BB%84%E4%BB%B6%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 Pressable：如何实现一个体验好的点按组件？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-TextInput%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E4%BD%93%E9%AA%8C%E5%A5%BD%E7%9A%84%E8%BE%93%E5%85%A5%E6%A1%86%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 TextInput：如何实现一个体验好的输入框？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-List%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E9%AB%98%E6%80%A7%E8%83%BD%E7%9A%84%E6%97%A0%E9%99%90%E5%88%97%E8%A1%A8%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 List：如何实现高性能的无限列表？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-Fast%20Refresh%EF%BC%9A%E6%8F%90%E9%AB%98UI%E8%B0%83%E8%AF%95%E6%95%88%E7%8E%87%E7%A5%9E%E5%99%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 Fast Refresh：提高UI调试效率神器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-Debug%EF%BC%9A%E8%A7%A3%E5%86%B3BUG%E6%80%9D%E8%B7%AF%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10 Debug：解决BUG思路有哪些？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-%E7%BB%84%E4%BB%B6%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E7%80%91%E5%B8%83%E6%B5%81%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11 组件实战：如何实现瀑布流？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12-%E9%A1%B5%E9%9D%A2%E5%AE%9E%E6%88%98%EF%BC%9A%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%94%B5%E5%95%86%E9%A6%96%E9%A1%B5%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12 页面实战：如何搭建一个电商首页？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%9B%B4%E6%92%AD%E5%8A%A0%E9%A4%90-%E4%B8%83%E5%B9%B4%EF%BC%8C%E6%88%91%E7%9A%84%E8%B7%A8%E7%AB%AF%E5%AE%9E%E8%B7%B5%E5%92%8C%E6%8E%A2%E7%B4%A2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    直播加餐 七年，我的跨端实践和探索
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13-%E7%94%9F%E6%80%81%EF%BC%9AReact%20Native%20Awesome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13 生态：React Native Awesome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14-Reanimated%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%8A%A8%E7%94%BB%E5%8F%98%E5%BE%97%E6%9B%B4%E6%B5%81%E7%95%85%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14 Reanimated：如何让动画变得更流畅？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15-Gesture%EF%BC%88%E4%B8%8A%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%8B%96%E6%8B%BD%E5%8A%A8%E6%95%88%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15 Gesture（上）：如何实现一个拖拽动效？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16-Gesture%EF%BC%88%E4%B8%AD%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%8D%95%E8%A7%86%E5%9B%BE%E5%A4%9A%E6%89%8B%E5%8A%BF%E7%9A%84%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16 Gesture（中）：如何解决单视图多手势的冲突问题？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17-Gesture%EF%BC%88%E4%B8%8B%EF%BC%89%EF%BC%9A%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%A4%9A%E8%A7%86%E5%9B%BE%E5%A4%9A%E6%89%8B%E5%8A%BF%E7%9A%84%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17 Gesture（下）：如何解决多视图多手势的冲突问题？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18-Navigation%EF%BC%9A%E9%A1%B5%E9%9D%A2%E4%B9%8B%E9%97%B4%E6%80%8E%E4%B9%88%E8%B7%B3%E8%BD%AC%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18 Navigation：页面之间怎么跳转？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19-Redux%EF%BC%9A%E5%A4%A7%E5%9E%8B%E5%BA%94%E7%94%A8%E5%BA%94%E8%AF%A5%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E7%8A%B6%E6%80%81%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19 Redux：大型应用应该如何管理状态？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20-Sentry%EF%BC%9A%E7%BA%BF%E4%B8%8A%E9%94%99%E8%AF%AF%E4%B8%8E%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20 Sentry：线上错误与性能监控怎么处理？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    21 混合应用：如何从零开始集成React Native？
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    21 混合应用：如何从零开始集成React Native？
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      App 混合开发指的是什么？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      环境配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="环境配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android" class="md-nav__link">
    <span class="md-ellipsis">
      Android
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Android">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      第一步：创建本地工程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      第二步：添加依赖
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      第三步：配置权限
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios" class="md-nav__link">
    <span class="md-ellipsis">
      iOS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iOS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      第一步：创建本地工程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios_1" class="md-nav__link">
    <span class="md-ellipsis">
      第二步：添加iOS端依赖的库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      载体页设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="载体页设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      载体页整体设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      如何初始化载体页？
    </span>
  </a>
  
    <nav class="md-nav" aria-label="如何初始化载体页？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android_1" class="md-nav__link">
    <span class="md-ellipsis">
      Android
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios_2" class="md-nav__link">
    <span class="md-ellipsis">
      iOS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      加载渲染
    </span>
  </a>
  
    <nav class="md-nav" aria-label="加载渲染">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#js-bundleandroid" class="md-nav__link">
    <span class="md-ellipsis">
      加载JS bundle（Android）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#js-bundleios" class="md-nav__link">
    <span class="md-ellipsis">
      加载JS bundle（iOS）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#react-native-bug" class="md-nav__link">
    <span class="md-ellipsis">
      React Native 问题排查与框架 Bug 修复
    </span>
  </a>
  
    <nav class="md-nav" aria-label="React Native 问题排查与框架 Bug 修复">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android-bug" class="md-nav__link">
    <span class="md-ellipsis">
      Android 问题排查与框架 bug 修复
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios_3" class="md-nav__link">
    <span class="md-ellipsis">
      iOS 问题排查
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      作业
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E6%BB%A1%E8%B6%B3%E4%B8%9A%E5%8A%A1%E7%9A%84%E4%B8%AA%E6%80%A7%E5%8C%96%E9%9C%80%E6%B1%82%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22 自定义组件：如何满足业务的个性化需求？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23-%E7%83%AD%E6%9B%B4%E6%96%B0%EF%BC%9A%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%83%AD%E6%9B%B4%E6%96%B0%E5%B9%B3%E5%8F%B0%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23 热更新：如何搭建一个热更新平台？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24-%E6%8B%86%E5%8C%85%EF%BC%9AMetro%E6%8B%86%E5%8C%85%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24 拆包：Metro拆包的工作原理是什么？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%90%88%E9%80%82%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25 性能优化：如何设计一个合适的性能优化方案？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../26-%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BC%98%E5%8C%96%EF%BC%9A%E5%A6%82%E4%BD%95%E6%8A%8A%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E5%88%B0%E6%9E%81%E8%87%B4%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26 客户端优化：如何把性能提升到极致？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E9%98%B6%E6%AE%B5%E6%B5%8B%E8%AF%95-React%20Native%E7%9A%84%E8%BF%99%E4%BA%9B%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%EF%BC%8C%E4%BD%A0%E9%83%BD%E6%8E%8C%E6%8F%A1%E4%BA%86%E5%90%97%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    阶段测试 React Native的这些核心知识，你都掌握了吗？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B-%E6%96%B0%E6%9E%B6%E6%9E%84%E6%8E%A2%E7%B4%A2%E4%B9%8B%E6%97%85%EF%BC%8C%E9%A9%AC%E4%B8%8A%E5%BC%80%E5%A7%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    总结与展望 新架构探索之旅，马上开始
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../27-%E8%B7%A8%E7%AB%AF%E7%9A%84%E6%9C%BA%E9%81%87%EF%BC%9A%E5%B0%8F%E7%A8%8B%E5%BA%8F%E3%80%81Flutter%E5%92%8CReact%20Native%E5%8E%9F%E7%90%86%E5%AF%B9%E6%AF%94/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    27 跨端的机遇：小程序、Flutter和React Native原理对比
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28-%E8%BF%BD%E6%9C%AC%E6%BA%AF%E6%BA%90%EF%BC%9A%E4%BB%8E%E7%AC%AC%E4%B8%80%E7%89%88React%20Native%E5%BC%80%E5%A7%8B%E5%AD%A6%E4%BC%9A%E8%AF%BB%E6%87%82%E6%BA%90%E7%A0%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    28 追本溯源：从第一版React Native开始学会读懂源码
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29-%E5%BC%84%E6%B8%85%E7%8E%B0%E7%8A%B6%EF%BC%9A%E6%96%B0%E6%9E%B6%E6%9E%84%E9%A2%84%E8%A7%88%E7%89%88%E7%A9%B6%E7%AB%9F%E9%95%BF%E4%BB%80%E4%B9%88%E6%A0%B7%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    29 弄清现状：新架构预览版究竟长什么样？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30-JavaScript%E5%BC%95%E6%93%8E%EF%BC%9A%E5%8F%8C%E5%90%91%E9%80%9A%E8%AE%AF%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    30 JavaScript引擎：双向通讯底层原理是什么？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31-%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%9ARN%E5%BA%95%E5%B1%82%E6%98%AF%E5%A6%82%E4%BD%95%E4%BF%9D%E9%9A%9C%E4%BA%A4%E4%BA%92%E4%BD%93%E9%AA%8C%E7%9A%84%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    31 多线程：RN底层是如何保障交互体验的？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../32-Fabric%EF%BC%9A%E6%96%B0%E6%B8%B2%E6%9F%93%E5%99%A8%E7%9A%84%E6%BC%94%E8%BF%9B%E4%B9%8B%E8%B7%AF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    32 Fabric：新渲染器的演进之路
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33-AI%E5%89%8D%E6%B2%BF%EF%BC%9AChatGPT%E8%B5%84%E6%96%99%E7%B2%BE%E9%80%89%E9%9B%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    33 AI前沿：ChatGPT资料精选集
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34-%E5%8D%87%E7%BA%A7%E6%94%B6%E7%9B%8A%EF%BC%9A%E8%BF%99%E4%B8%A4%E5%B9%B4React%20Native%E9%83%BD%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E5%8D%87%E7%BA%A7%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    34 升级收益：这两年React Native都做了哪些升级？
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35-%E8%87%AA%E5%8A%A8%E5%8C%96%EF%BC%9A%E5%8D%87%E7%BA%A70.72%E6%96%B0%E6%9E%B6%E6%9E%84%E7%9A%84%E6%AD%A5%E9%AA%A4%E5%92%8C%E5%85%B3%E9%94%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    35 自动化：升级0.72新架构的步骤和关键
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../36-%E5%8D%87%E6%96%B0%E4%B8%8D%E5%8D%87%E6%97%A7%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E5%A6%82%E4%BD%95%E5%8D%87%E7%BA%A7%E5%88%B0%E6%96%B0%E6%9E%B6%E6%9E%84%EF%BC%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    36 升新不升旧：自定义组件如何升级到新架构？
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Serverless%E5%85%A5%E9%97%A8%E8%AF%BE/Serverless%E5%85%A5%E9%97%A8%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Serverless入门课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../Vue%203%20%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%BE/Vue%203%20%E4%BC%81%E4%B8%9A%E7%BA%A7%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Vue 3 企业级项目实战课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../WebAssembly%E5%85%A5%E9%97%A8%E8%AF%BE/WebAssembly%E5%85%A5%E9%97%A8%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    WebAssembly入门课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../iOS%E5%BC%80%E5%8F%91%E9%AB%98%E6%89%8B%E8%AF%BE/iOS%E5%BC%80%E5%8F%91%E9%AB%98%E6%89%8B%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    iOS开发高手课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E4%BB%8E0%E6%89%93%E9%80%A0%E9%9F%B3%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E7%B3%BB%E7%BB%9F/%E4%BB%8E0%E6%89%93%E9%80%A0%E9%9F%B3%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    从0打造音视频直播系统
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%89%8D%E7%AB%AF%E5%85%A8%E9%93%BE%E8%B7%AF%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E8%AF%BE/%E5%89%8D%E7%AB%AF%E5%85%A8%E9%93%BE%E8%B7%AF%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    前端全链路优化实战课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%9B%BE%E8%A7%A3%20Google%20V8/%E5%9B%BE%E8%A7%A3%20Google%20V8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    图解 Google V8
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%BF%AB%E6%89%8B%20%C2%B7%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E5%BF%AB%E6%89%8B%20%C2%B7%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9F%B3%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    快手 · 移动端音视频开发实战
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%BF%AB%E6%89%8B%20%C2%B7%20%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8%E8%AF%BE/%E5%BF%AB%E6%89%8B%20%C2%B7%20%E9%9F%B3%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF%E5%85%A5%E9%97%A8%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    快手 · 音视频技术入门课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%90%9E%E5%AE%9A%E9%9F%B3%E9%A2%91%E6%8A%80%E6%9C%AF/%E6%90%9E%E5%AE%9A%E9%9F%B3%E9%A2%91%E6%8A%80%E6%9C%AF/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    搞定音频技术
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%94%BB%E5%85%8B%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF/%E6%94%BB%E5%85%8B%E8%A7%86%E9%A2%91%E6%8A%80%E6%9C%AF/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    攻克视频技术
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%9C%B1%E6%B6%9B%20%C2%B7%20Kotlin%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%B8%80%E8%AF%BE/%E6%9C%B1%E6%B6%9B%20%C2%B7%20Kotlin%E7%BC%96%E7%A8%8B%E7%AC%AC%E4%B8%80%E8%AF%BE/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    朱涛 · Kotlin编程第一课
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    浏览器工作原理与实践
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%8E%A9%E8%BD%ACVue%203%E5%85%A8%E5%AE%B6%E6%A1%B6/%E7%8E%A9%E8%BD%ACVue%203%E5%85%A8%E5%AE%B6%E6%A1%B6/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    玩转Vue 3全家桶
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%8E%B0%E4%BB%A3React%20Web%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%8E%B0%E4%BB%A3React%20Web%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    现代React Web开发实战
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%AF%B4%E9%80%8F%E4%BD%8E%E4%BB%A3%E7%A0%81/%E8%AF%B4%E9%80%8F%E4%BD%8E%E4%BB%A3%E7%A0%81/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    说透低代码
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/%E8%B7%9F%E6%9C%88%E5%BD%B1%E5%AD%A6%E5%8F%AF%E8%A7%86%E5%8C%96/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    跟月影学可视化
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E9%87%8D%E5%AD%A6%E5%89%8D%E7%AB%AF/%E9%87%8D%E5%AD%A6%E5%89%8D%E7%AB%AF/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    重学前端
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E5%90%8E%E7%AB%AF-%E6%9E%B6%E6%9E%84/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    后端-架构
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E7%AE%A1%E7%90%86-%E6%88%90%E9%95%BF/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    管理-成长
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    计算机基础
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../%E8%BF%90%E7%BB%B4-%E6%B5%8B%E8%AF%95/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    运维-测试
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    <span class="md-ellipsis">
      App 混合开发指的是什么？
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      环境配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="环境配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android" class="md-nav__link">
    <span class="md-ellipsis">
      Android
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Android">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      第一步：创建本地工程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      第二步：添加依赖
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      第三步：配置权限
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios" class="md-nav__link">
    <span class="md-ellipsis">
      iOS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="iOS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      第一步：创建本地工程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios_1" class="md-nav__link">
    <span class="md-ellipsis">
      第二步：添加iOS端依赖的库
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      载体页设计
    </span>
  </a>
  
    <nav class="md-nav" aria-label="载体页设计">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      载体页整体设计
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      如何初始化载体页？
    </span>
  </a>
  
    <nav class="md-nav" aria-label="如何初始化载体页？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android_1" class="md-nav__link">
    <span class="md-ellipsis">
      Android
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios_2" class="md-nav__link">
    <span class="md-ellipsis">
      iOS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      加载渲染
    </span>
  </a>
  
    <nav class="md-nav" aria-label="加载渲染">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#js-bundleandroid" class="md-nav__link">
    <span class="md-ellipsis">
      加载JS bundle（Android）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#js-bundleios" class="md-nav__link">
    <span class="md-ellipsis">
      加载JS bundle（iOS）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#react-native-bug" class="md-nav__link">
    <span class="md-ellipsis">
      React Native 问题排查与框架 Bug 修复
    </span>
  </a>
  
    <nav class="md-nav" aria-label="React Native 问题排查与框架 Bug 修复">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android-bug" class="md-nav__link">
    <span class="md-ellipsis">
      Android 问题排查与框架 bug 修复
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ios_3" class="md-nav__link">
    <span class="md-ellipsis">
      iOS 问题排查
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      总结
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      作业
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>21 混合应用：如何从零开始集成React Native？</h1>

<p>你好，我是蒋宏伟。</p>
<p>从今天开始，我们将进入 React Native 基础设施建设篇的学习。我也特地邀请了多年以来和我一起做 58RN 基建的两位老搭档：58RN Android 负责人况众文和58RN iOS 负责人朴惠姝一起来讲解。</p>
<p>在基础设施建设篇中，众文老师、惠姝老师会和我一起为你详细介绍怎么搭建 React Native 混合应用、怎么创建新架构的自定义组件，以及怎么自研热更新平台，又怎么进行性能优化。</p>
<p>无论你是 FE、Android 还是 iOS，相信基建篇的内容都能让你大有收获，甚至帮助你在公司中晋级。好了，下面我们正式开启基建篇的学习。</p>
<hr />
<p>你好，我是况众文，是 58RN 负责Android 端的同学。接下来基础设施建设篇中移动端相关的几讲，将由我和我的同事，负责iOS 端的同学朴惠姝一起来讲解。</p>
<p>这几讲是《混合应用：如何从零开始集成 React Native？》、《自定义组件：如何满足业务的个性化需求？》，以及《客户端优化：如何把性能提升到极致？》。在这三讲中，我们将结合自己在 React Native 开发的实际经验，以及真实的业务案例，和你一起循序渐进地走入混合开发的世界。</p>
<p>而且，我们这几讲将使用 React Native 最新框架来讲解，你也可以借此了解 Fabric、TurboModules、CodeGen、JSI、Hermes 等新概念。</p>
<p>但在正式开始讲解怎么做混合开发之前，想先用一些篇幅，简单跟你介绍一下什么是混合应用与混合开发，以及我们什么时候需要用到混合开发。</p>
<h2 id="app">App 混合开发指的是什么？</h2>
<p>App 混合开发，指的是<strong>一个 App 部分功能用 Native 构建，部分功能用跨端框架构建</strong>。目前比较流行的跨端框架有 H5、React Native、Flutter、布局动态化等。当然我们这门课主要是围绕着React Native来进行讲解。</p>
<p><img alt="" src="https://static001.geekbang.org/resource/image/be/24/bed77cfbc69b490ae759a3166fb88b24.png?wh=1854x594" /></p>
<p>以 Native 与 React Native 混合开发为例，在同一个 App 中，通常存在以下几种形态：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/db/fc/db3e0383979b499652d6dfef81a051fc.jpg?wh=1755x818" /></p>
<p>那么，Native 与 React Native 混合开发一般会用在哪儿呢？</p>
<p>首先是一些大型App中，比如美团、携程、京东、58等。这些大型 App 一般都非常复杂，整个框架需要包含模块化、组件化、插件化、跨端等能力。相比纯 React Native 工程，大型App的实际业务开发还需要考虑如何在已有原生项目中引入 React Native，作为原生框架的扩展能力。比如，部分业务可能对开发效率、多端一致性、动态更新能力有较强要求，就可以使用 React Native 来实现。</p>
<p>除了大型 App 外，如果你要对已上线的项目引入 React Native 也需要使用混合模式。因为原生改造成 React Native 并不是那么简单的事情，毕竟开发语言、页面管理、模块管理完全是另一套东西，而且一些原生页面，如启动页、首页等，出于性能考虑，大都还是会选择原生来实现。</p>
<p>当然一些新开发的轻量级 App，建议你选择纯 React Native 模式。因为新开发的 App 没有技术债，可以从0到1享受 React Native 跨端的优势，比如项目最关心的开发成本。</p>
<p>那么混合开发又有什么优点呢？简单说有这几点：</p>
<ul>
<li>开发效率高，一套代码可以在 Android、iOS 上运行；</li>
<li>更新部署方便，无须依赖应用市场发版，迭代更新速度快；</li>
<li>具备动态更新能力，特别是国内 App，以 Android 为例，受限于 Google Play，无法使用 Android App bundle，而插件化框架又存在稳定性问题。而业务快速迭代、Bug 响应速度都对动态更新能力有强烈的需求。</li>
</ul>
<p>但混合开发也不是万能的，它也有一些缺点，你要特别注意：</p>
<ul>
<li><strong>性能不佳</strong>。H5 渲染链路长；React Native 依托于 JS bridge 交互 （指旧版，最新架构使用 JSI）；虽然 Flutter 绘制流程直接使用 Skia，但依赖于原生的能力仍需异步交互；</li>
<li><strong>兼容性差</strong>。Android、iOS 各版本都存在各种兼容性问题，特别是 Android 碎片化严重；</li>
<li><strong>问题排查成本高</strong>。跨端框架一般涉及 Native、FE、Server，中间做了大量的桥接转换，排查链路比纯 Native 长；</li>
<li><strong>动态化能力受限</strong>。相比纯原生的插件化，跨端框架动态更新的业务如果涉及 Native 部分的组件更新，需要依赖 App 发版。</li>
</ul>
<p>现在一般大型 App 都是多套跨端框架并存的，比如 H5 + React Native + 布局动态化，或 H5 + Flutter，具体选型主要以业务场景、包大小、性能、运行内存、动态更新能力为标准进行。但这一讲我们会从 React Native视角带你一步步构建混合应用。</p>
<p>在React Native的混合开发中，我们需要关注下面这几个主要问题和流程：</p>
<ul>
<li>如何从 0～1 进行环境配置；</li>
<li>通用的 React Native 载体页如何设计，需要包含哪些能力；</li>
<li>如何调试打包发布；</li>
<li>遇到混合开发的 bug 如何进行排查与修复。</li>
</ul>
<p>这些问题和流程，我们将从 Android &amp; iOS 两端逐步讲解。</p>
<h2 id="_1">环境配置</h2>
<p>我们先从 Native 环境配置开始，先看看如何在 Android 端进行混合工程下的 React Native 环境配置。</p>
<h3 id="android">Android</h3>
<h4 id="_2">第一步：创建本地工程</h4>
<p>我们使用 Android Studio 创建一个新的 App 项目，如果你已经有了本地项目，可以跳过此步骤。填写完项目名称、包名、项目本地路径后，点击 “Finish” 按钮。你可以把这个项目名称取名为 “GeekTimeRNAndroid”。</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/00/78/00693ac394ea2b67f8b99913fc51fd78.jpg?wh=1792x1338" /></p>
<p>创建好的工程目录如下：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/7f/da/7fe5fe8662cce3e513ed0b89e2aa78da.jpg?wh=954x902" /></p>
<h4 id="_3">第二步：添加依赖</h4>
<p>创建好本地工程后，我们就要给它添加依赖。其实，React Native官方对集成到现有的原生应用提供了相应的<a href="https://reactnative.cn/docs/integration-with-existing-apps">文档</a>，你可以看看。</p>
<p>文档提示，我们需要“创建一个空目录用于存放 React Native 项目，然后在其中创建一个 /android 子目录，把你现有的 Android 项目拷贝到 /android 子目录中”。</p>
<p>当然，官方提供的方式是非常不错的，它更偏向于 React Native 的工程管理模式。而我们在实际开发中，特别是已经上线的项目里面，React Native 功能和其他业务功能一样，一般会被当成原生工程的子模块来管理，所以我们这边选择<strong>偏向混合工程管理方式</strong>来集成。</p>
<p>这里，给你画了一张几种模式的对比图，你可以看看：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/13/af/13e5c0527c254bc75a48ffb031ea36af.png?wh=766x1218" /></p>
<p>对比官方模式，我们采用混合工程模式，是基于以下几点考虑的：</p>
<ul>
<li>可以不侵入现有工程结构，React Native 模块会作为现有工程的一部分进行组织管理。</li>
<li>不会影响代码仓库管理，不用把Android、iOS 放在同一代码仓库下进行管理。</li>
<li>混合模式方便我们进行组件功能复用，你可以将 React Native 模块独立成组件，提供给其他 App 平台使用。</li>
</ul>
<p>那么，基于混合工程模式集成 React Native 模块需要哪些依赖项呢？我们结合<a href="https://reactnative.cn/docs/integration-with-existing-apps">文档</a>来看下，主要是：</p>
<ul>
<li><strong>react-native</strong>：React Native 的核心框架；</li>
<li><strong>JavaScript 引擎</strong>：可选 JSC、Hermes，用于执行 JavaScript。<br />
  接下来，我们参考文档进行如下操作：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># 切换到刚刚新建好的工程目录
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>cd /Users/kuangzhongwen/Desktop/project/GeekTimeRNAndroid
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a># 执行添加 react-native 命令，yarn 或 npm 都可以
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>yarn add react-native
</code></pre></div>
<p>执行 yarn add react-native 命令后，默认会安装最新版本的 React Native 包。</p>
<p>因为我们这个专栏主要是围绕 React Native 新架构讲解的，所以这边我们选择 React Native 0.68.0-rc3 版本。因此，我们指定 0.68.0-rc3 这个版本，执行如下命令：(<a href="https://github.com/facebook/react-native/tags">这里</a>可查看 react-native 版本)：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>yarn add react-native@0.68.0-rc3
</code></pre></div>
<p>执行以上命令成功之后，我们会发现 GeekTimeRNAndroid 工程下多了一个 node_modules 目录，里面不仅有 react-native 框架，还有 JavaScript 引擎编译好的产物，包括 aar 和 pom 依赖文件。接下来，我们可以参考官方提供的方式，将 node_modules 目录配置为 repository，然后在工程中引入相关依赖。</p>
<p>不过，这种方式并不太推荐，其实我们只需要 react-native 和 JavaScript 引擎这两个产物就可以了。获取这两个产物后，在 Android 自己进行二次封装，然后发布到公司的远程仓库，就不用忍受一大堆无用的文件存放在项目中了 （虽然可以用 git ignore 忽略）。</p>
<p>目前node_modules 目录里有这几个内容：</p>
<ol>
<li>…/GeekTimeRNAndroid/node_modules/react-native（本地安装好的 node_module 中的 react-native 框架编译产物）：<br />
<img alt="图片" src="https://static001.geekbang.org/resource/image/07/95/07fc4f77e3e9beef92d3bbd3a5b51e95.png?wh=904x1008" /></li>
<li>…/GeekTimeRNAndroid/node_modules/JavaScriptc-android（本地安装好的 node_module 中的 JSC 引擎编译产物）：<br />
<img alt="图片" src="https://static001.geekbang.org/resource/image/94/a5/943210c6d1ea945e04eb736ca0826ba5.png?wh=792x996" /></li>
<li>…/GeekTimeRNAndroid/node_modules/hermes-engine（本地安装好的 node_module 中的 Hermes 引擎编译产物）：<br />
<img alt="图片" src="https://static001.geekbang.org/resource/image/yy/1f/yy5e3402386d417d0ebe39de48f8fa1f.png?wh=708x480" /></li>
</ol>
<p>其中只有 react-native 框架是必需的，而具体选择 JSC 引擎还是 Hermes 引擎，你可以参考以下几个点：</p>
<ul>
<li>在启动性能上，Hermes 比 JSC 更快。Hermes 采用的是 AOT 提前编译的方案，它支持字节码文件，相比于 JSC，Hermes 不用先将 JavaScript 文本编译为字节码，节约了编译字节码的耗时，自然启动性能更好。</li>
<li>在运行性能上，JSC 比 Herems 更快。JSC 使用的是 JIT 即时编译方案，该方案支持动态缓存热点代码，因此运行性能上更快。</li>
</ul>
<p>但整体而言，由于 Hermes 引擎是专门为移动端定制的，<a href="https://www.callstack.com/blog/hermes-performance-on-ios">在引擎大小、启动速度、运行内存、通信性能等方面都优于 JSC</a>。如果你的是新项目，没有历史负担，建议你直接使用 Hermes 引擎。如果是之前已使用 JSC 引擎上线的项目，可以往 Hermes 引擎进行升级。</p>
<p>接下来，我们来给 GeekTimeRNAndroid 工程添加 react native 相关的依赖，包括：</p>
<ol>
<li>react-native.arr 文件；</li>
<li>react-native.aar 依赖的第三方库；</li>
<li>JavaScript 引擎 aar 文件。</li>
</ol>
<p>首先我们先来添加 react-native.arr 文件。我们将 …/GeekTimeRNAndroid/node_modules/react-native/ 目录下的 react-native-0.68.0-rc.3.aar 拷贝放置到 GeekTimeRNAndroid/libs 目录。注意，Android 引入本地 aar 文件需要在工程根目录 build.gradle 添加 flatDir 配置：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>allprojects {
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    repositories {
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>        google()
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        jcenter()
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>        // 添加 flatDir 配置
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>        flatDir {
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>            dirs &#39;libs&#39;
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>        }
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    }
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>}
</code></pre></div>
<p>然后在 GeekTimeRNAndroid/app 模块下的 build.gradle 添加依赖：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>implementation(name:&#39;react-native-0.68.0-rc.3&#39;, ext:&#39;aar&#39;)
</code></pre></div>
<p>接着，我们再将 …/GeekTimeRNAndroid/node_modules/react-native/ 目录下的 react-native-0.68.0-rc.3.pom 中的依赖库，按照 android gradle 依赖的方式进行添加，这些依赖主要是 react-native aar 本身远程依赖的第三方库。添加好的 app build.gradle 如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>dependencies {
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    implementation(name:&#39;react-native-0.68.0-rc.3&#39;, ext:&#39;aar&#39;)
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    implementation &#39;com.facebook.infer.annotation:infer-annotation:0.18.0&#39;
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    implementation &#39;javax.inject:javax.inject:1&#39;
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    implementation &#39;androidx.appcompat:appcompat:1.0.2&#39;
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    implementation &#39;com.facebook.fresco:imagepipeline-okhttp3:2.5.0&#39;
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>    implementation &#39;com.facebook.fresco:fresco:2.5.0&#39;
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    implementation &#39;com.facebook.soloader:soloader:0.10.3&#39;
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>    implementation &#39;com.google.code.findbugs:jsr305:3.0.2&#39;
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    implementation &#39;com.squareup.okhttp3:okhttp:4.9.2&#39;
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    implementation &#39;com.squareup.okhttp3:okhttp-urlconnection:4.9.2&#39;
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>    implementation &#39;com.squareup.okio:okio:2.9.0&#39;
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>}
</code></pre></div>
<p>最后，我们添加下 JavaScript 引擎 aar 就可以了。这边我们使用 JSC 引擎 (Hermes 引擎则是将 …/GeekTimeRNAndroid/node_modules/hermes-engine 下的 hermes-cppruntime-release.aar &amp; hermes-release.aar 拷贝到 libs 目录，并在 build.gradle 中添加依赖)。<br />
JSC aar 位于 …/GeekTimeRNAndroid/node_modules/jsc-android 目录下，主要是 jsc 的 so 动态库，将 android-jsc-r250230.aar 拷贝到 GeekTimeRNAndroid/libs 目录：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/e7/82/e718eaea509be293b4070e343a478282.png?wh=654x276" /></p>
<p>完整的 GeekTimeRNAndroid/app/build.gradle 依赖配置如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>dependencies {
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>    implementation(name:&#39;react-native-0.68.0-rc.3&#39;, ext:&#39;aar&#39;)
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    implementation(name:&#39;android-jsc-r250230&#39;, ext:&#39;aar&#39;)
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    implementation &#39;com.facebook.infer.annotation:infer-annotation:0.18.0&#39;
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    implementation &#39;javax.inject:javax.inject:1&#39;
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    implementation &#39;androidx.appcompat:appcompat:1.0.2&#39;
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>    implementation &#39;com.facebook.fresco:imagepipeline-okhttp3:2.5.0&#39;
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>    implementation &#39;com.facebook.fresco:fresco:2.5.0&#39;
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>    implementation &#39;com.facebook.soloader:soloader:0.10.3&#39;
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    implementation &#39;com.google.code.findbugs:jsr305:3.0.2&#39;
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    implementation &#39;com.squareup.okhttp3:okhttp:4.9.2&#39;
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>    implementation &#39;com.squareup.okhttp3:okhttp-urlconnection:4.9.2&#39;
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>    implementation &#39;com.squareup.okio:okio:2.9.0&#39;
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>}
</code></pre></div>
<p>到这里，React Native 相关的依赖配置已经完成，这时候你可以将 GeekTimeRNAndroid/node_modules 删除了。</p>
<h4 id="_4">第三步：配置权限</h4>
<p>配置好相关的依赖库后，我们需要来添加下权限和清单配置。这个很简单，我们只需要在 GeekTimeRNAndroid/app 的 AndroidManifest.xml 清单文件中声明网络权限就好了：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
</code></pre></div>
<p>不过，如果你还需要访问开发者菜单界面，就需要在 AndroidManifest.xml 中声明：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>&lt;activity android:name=&quot;com.facebook.react.devsupport.DevSettingsActivity&quot; /&gt;
</code></pre></div>
<p>至此，Android 混合工程中的 React Native 环境配置就已经完成了。接下来我们再看看，如何在 iOS 中进行 React Native 环境配置。</p>
<h3 id="ios">iOS</h3>
<h4 id="_5">第一步：创建本地工程</h4>
<p>首先，我们需要跟着 React Native 官方文档，在本地创建一个对应版本的 React Native 工程，这里我们假设项目需要 0.68.1 版本：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># 首先安装 react-native-cli, 否则无法使用 react-native 命令
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo npm install -g react-native-cli
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a># projectName 为工程名称
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>react-native init projectName --version 0.68.1
</code></pre></div>
<p>创建好后，我们再打开工程，在工程 node_modules/react-native/template/ 目录下执行 npm install，然后进入 /ios/ 目录下执行 pod install，结束后再打开 react native workspace 工程：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/c3/48/c3288c994c5a9d63e4a92c79452de648.png?wh=1568x1344" /></p>
<p>这就是iOS中创建一个新的工程，接入React Native功能的方案。那我们如何在已有的iOS工程中接入React Native呢？其实也比较简单。</p>
<p>首先，你需要将以下三个React Native源码引入到iOS工程中，这三个源码分别为Libraries、React，以及React Common：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/04/f9/04aa50941fyy62c76cd48de5585a1cf9.png?wh=241x419" /></p>
<p>然后你将这三个部分作为React Native功能模块，直接参考官方提供的podspec（三个不同模块的podspec请参考<a href="https://github.com/facebook/react-native">https://github.com/facebook/react-native</a>），并结合自己工程，选择合理的接入方案，集成到iOS工程中就可以了：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/8a/f6/8a278d85112d0b0c9d721b6d5369d0f6.png?wh=304x100" /></p>
<h4 id="ios_1">第二步：添加iOS端依赖的库</h4>
<p>接下来，我们需要修改Podfile，来引用其他依赖的第三方库，包括DoubleConverison、glog、RCT_Folly、libevent，等等。podspec配置文件则直接使用官方提供的文件：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/a6/33/a62d416f3497493d23b2605dc32b4133.png?wh=1268x274" /></p>
<p>之后，我们再执行pod install并构建工程文件xcworkspace，并打开工程文件，进行编译就可以了。</p>
<p>对比两端的操作，你可以看到，Android 与 iOS 中 React Native 混合应用的工程组织结构是一样的。与 React Native 新项目不同，在已有 Android 和 iOS 项目中接入 React Native，都是把 React Native 当成子模块进行引入的。</p>
<p>不过，环境配置流程中，Android 侧重于依赖 React Native 的框架 aar，以及 JavaScript 引擎 aar，而 iOS 则是使用源码方式集成 React Native 相关的依赖库。两方的核心都是依赖 React Native 框架、JavaScript 引擎，以及框架本身依赖的其他库。</p>
<h2 id="_6">载体页设计</h2>
<p>搭建好工程环境配置后，我们就要来设计一个 React Native 载体页了。载体页是加载渲染 React Native 的容器，在 Android 中为 Activity/Fragment，在 iOS 中为 ViewController。</p>
<p>按照官方的<a href="https://reactnative.cn/docs/integration-with-existing-apps">文档</a>，一个简单的载体页只需要初始化、加载渲染、生命周期管理、组件注册能力即可。以 Android 为例，搭建一个 Activity，构建 ReactRootView，初始化 ReactInstanceManager 就可以加载本地的 bundle 文件了。你可以按照官方文档，快速搭建一个 React Native 载体页试试。</p>
<p>但在实际开发中，我们使用 React Native，除了看中它跨平台的优势外，还需要它的热更新能力。并且，为了进行Bug调试和分析，需要具备错误处理、上报能力，以及复杂业务中，Native &amp; JavaScript 通信还需要提供通信能力。甚至，根据业务需求，还需要提供一些通用内置组件、组件注册能力，等等。</p>
<p>所以<strong>一个可用于商业上线的载体页</strong>，需要提供初始化、加载渲染 React Native 页面、热更新、缓存管理、生命周期管理、Native &amp; JavaScript 通信、错误处理、错误上报、内置基础组件、组件注册等能力。所以接下来，我们就基于此来进行载体页的整体设计。</p>
<h3 id="_7">载体页整体设计</h3>
<p>这里，直接根据上述要求设计好了一个载体页，你先整体看一看：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/53/79/53d89b657d6532f86563c19e7a7a0e79.jpg?wh=1482x1116" /></p>
<p>你可以看到，一个完整的载体页设计，应该包含下面几个部分：</p>
<ul>
<li><strong>UI 结构</strong>：在混合开发中，React Native 大部分以独立页面存在，载体页可以包含通用标题栏和 React Native 容器。当然也可以直接暴露容器视图，由使用方动态进行添加；</li>
<li><strong>对外能力</strong>：包含生命周期管理、Native 与 JavaScript 通信能力、内置的基础业务组件、组件注册能力、异常回调、错误上报等，同时还需要提供热更新、加载 bundle 的能力；</li>
<li><strong>热更新</strong>：请求远程服务器获取对应 bundle 是否有最新版本。有最新版本则下载并进行缓存，无最新版本则使用缓存进行加载 (无缓存则先下载)，其中包含预加载、异步更新等业务策略提升加载性能。</li>
<li><strong>缓存管理</strong>：通常 bundle 包随着业务体量增加，体积会越来越大。针对这种情况，我们的常用策略是拆包、按需加载，bundle 包在传输过程中会进行 zip 压缩、加密，下载成功后进行解压、校验。每个 bundle 文件都有对应的 id、版本号、content hash；</li>
<li><strong>bundle 加载</strong>：JavaScript 引擎读取 bundle 文件，常用引擎包括 JSC、Hermes；</li>
<li><strong>React Native 运行环境</strong>：整个 React Native 运行环境包含负责渲染的 RootView，框架内置核心组件、业务定制组件，执行脚本的 JavaScript 引擎，负责 Native 与 JavaScript 交互的 bridge/JSI。</li>
</ul>
<h3 id="_8">如何初始化载体页？</h3>
<p>讲完了载体页设计后，我们来看看如何对载体页进行初始化。这里我们说的初始化，除了自身业务封装的初始化外，核心还是 React Native 框架本身的初始化。接下来我们依然分成 Android、iOS 两端来分析。</p>
<h4 id="android_1">Android</h4>
<p>我们来看下 Android 端的初始化。不过为了方便后续代码的讲解，需要先带你了解下 React Native Android 中几个常用类的作用：</p>
<ul>
<li><strong>ReactContext</strong>：继承于 ContextWrapper，是 React Native 应用的上下文，管理着 CatalystInstance 以及三大线程 （UIThread、NativeModulesThread、JSThread）；</li>
<li><strong>ReactInstanceManager</strong>：总的管理类，管理 ReactPackage、ReactContext、ReactRootView、控制生命周期，同时还可以设置 JavaScript 引擎；</li>
<li><strong>ReactRootView</strong>：React Native 渲染的原生容器，继承于 FrameLayout；</li>
<li><strong>CatalystInstance</strong>：Java 层、C++ 层、JavaScript 层通信的总管理类，管理着 Java 层、JavaScript 层 Module 映射表与回调，是三端通信的桥梁。实现类为 CatalystInstanceImpl，支持向 JavaScript 注入全局变量、动态加载脚本文件、获取 NativeModules &amp; JSModules；</li>
<li><strong>JavaScriptModule</strong>：JS Module，负责 JavaScript 到 Java 的映射调用格式声明，由CatalystInstance 统一管理；</li>
<li><strong>NativeModule</strong>：Java Module，负责 Java 到 JavaScript 的映射调用格式声明，由CatalystInstance 统一管理；</li>
<li><strong>UIManager</strong>: 处理 UI 的渲染，JavaScript 层通过 C++ 层把创建 View 的请求发送给 Java 层的UIManagerModule。</li>
</ul>
<p>初始化的核心是通过 ReactInstanceManagerBuilder 构建 ReactInstanceManager，<a href="https://reactnative.cn/docs/integration-with-existing-apps">官方</a>提供了对 ReactInstanceManager 的构建说明。我们直接来看一段 Demo：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>ReactInstanceManagerBuilder builder = ReactInstanceManager.builder();
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>// 设置 application 上下文
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>builder.setApplication((Application) context.getApplicationContext());
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>// 添加包，一个 package 由多个组件构成，上述代码中的 MainReactPackage 是 RN 内置的 package 
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>builder.addPackage(new MainReactPackage());
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>// JS 异常回调处理实现，在这个实现中我们可以打印 JS 异常日志，上报错误
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>builder.setRedBoxHandler(mRedBoxHandler); 
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>// native module 异常回调处理实现，在这个实现中我们可以打印 native module 异常日志，上报错误
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>builder.setNativeModuleCallExceptionHandler(mNativeModuleExceptionHandler);
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>// JS bundle 中主入口的文件名，demo 中 &quot;index&quot; 表示入口文件名为 index.js
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>builder.setJSMainModulePath(&quot;index&quot;);
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>// 是否开启 dev 模式
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>builder.setUseDeveloperSupport(true);
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>// 设置创建时机
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>builder.setInitialLifecycleState(LifecycleState.BEFORE_CREATE); 
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>// 设置 JS 引擎，如果想使用 Hermes 引擎，可以这样设置，需要引入 Hermes 相关的 so 库
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>// builder.setJavaScriptExecutorFactory(new HermesExecutorFactory());
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>ReactInstanceManager reactInstanceManager = builder.build();
</code></pre></div>
<p>然后我们要获取 ReactContext，ReactContext 在后续加载渲染过程中会用到：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>reactInstanceManager.addReactInstanceEventListener(new ReactInstanceManager.ReactInstanceEventListener() {
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    @Override
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    public void onReactContextInitialized(ReactContext reactContext) {
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>       mReactContext = reactContext;
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    }
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>});
</code></pre></div>
<p>至此，Android 端的初始化工作就完成了，接着我们来看下 iOS 端的初始化逻辑。</p>
<h4 id="ios_2">iOS</h4>
<p>iOS 端初始化载体页比较简单，只需要下面几个步骤。</p>
<p>首先，我们要创建一个 Bridge。在 React Native 中，通过 Bridge 实现了 JavaScript 与原生框架之间的通信，调用 React Native 提供的 API ，就相当于通过 Bridge 调用原生的API。因此，我们需要创建一个 Bridge，与载体页一对一绑定。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a> RCTBridge *carrierBridge = [[RCTBridge alloc] initWithDelegate:self 
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>                                               launchOptions:nil];
</code></pre></div>
<p>接下来，我们需要创建一个 RCTRootView，用于展示 React Native 视图的组件RCTRootView，在 JavaScript 代码中 render() 部分的 UI 组件均会渲染到该 View 中，创建方式如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a> RCTRootView *rctView = [[RCTRootView alloc] initWithBridge:bridge 
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>                                             moduleName:moduleName 
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>                                             initialProperties:nil];
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a> [self.view addSubview:rctView];
</code></pre></div>
<p>到此， iOS 端初始化准备过程就完成了。你看，确实比较简单吧？</p>
<p>那么接下来，我们就需要获取 React Native 代码包，也就是 JS Bundle 资源。那么我们要怎么动态下载 JS Bundle资源呢？</p>
<p>我们可以采用热更新策略，动态下载 JS bundle 资源。每个不同的 JS bundle包都有它自己的标识 id，我们可以根据该 id 从服务器中获取该 JS bundle 资源对应的最新版本号，以及最新资源下载地址。</p>
<p>在获取 JS Bundle 的最新版本号后，如果用户之前浏览过当前 React Native 页面，还存在缓存，那么我们就可以检测缓存版本号是否与最新版本号相同。如果是相同的，就不需要重复下载了；如果不相同，那你还要根据最新资源下载地址，下载最新的资源包，并缓存到本地。</p>
<p>要是用户之前并没有浏览过当前 React Native 页面，或者缓存已被清空，你可以直接根据最新资源下载地址，下载最新的资源包，并缓存到本地。</p>
<p>你可以看一下这张整体流程图加深理解：</p>
<p><img alt="图片" src="https://static001.geekbang.org/resource/image/24/49/24560021a3f881746b0b2d76aa71bb49.jpg?wh=1052x874" /></p>
<h3 id="_9">加载渲染</h3>
<p>通过以上步骤，我们就能创建好载体页并成功下载 JS bundle了，那么现在就可以准备开始执行 JavaScript 代码并渲染 React Native 页面了。我们先来看下 Android 端是如何加载 JS bundle 文件的。</p>
<h4 id="js-bundleandroid">加载JS bundle（Android）</h4>
<p>Android 端通过 ReactContext 获取 CatalystInstance 对象，CatalystInstance 实现类为 CatalystInstanceImp。CatalystInstanceImpl 有一个非 public 方法 loadScriptFromFile()，我们通过这个方法就可以动态加载本地的 bundle 文件了。不过，由于 loadScriptFromFile() 为非 public，所以需要反射获取调用：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>CatalystInstance catalystInstance = mReactContext.getCatalystInstance();
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>Method loadScripFromFileMethod = CatalystInstanceImpl.class.getDeclaredMethod(&quot;loadScriptFromFile&quot;, String.class, String.class, boolean.class);
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>loadScripFromFileMethod.setAccessible(true);
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>// fileName 和 sourceURL 传入本地缓存的 bundle 路径，loadSynchronously 为是否同步加载
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>loadScripFromFileMethod.invoke(catalystInstance, fileName, sourceURL, loadSynchronously);
</code></pre></div>
<p>接着，我们再调用 ReactRootView startReactApplication 就可以开始加载渲染 React Native 页面了。这里要注意，startReactApplication() 中的参数 moduleName 必须对应 “index.js” 中的 “AppRegistry.registerComponent()” 的第一个参数：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>reactRootView.startReactApplication(reactInstanceManager, moduleName, launchOption);
</code></pre></div>
<p>我们还可以使用 catalystInstance.setGlobalVariable() 设置全局变量。设置好后，JavaScript 运行时可获取到这些全局变量了：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>catalystInstance.setGlobalVariable(&quot;xxx&quot;, xxx)
</code></pre></div>
<p>到这里，Android 端动态加载 bundle 就讲完了，我们继续来看 iOS 加载 bundle 的流程。</p>
<h4 id="js-bundleios">加载JS bundle（iOS）</h4>
<p>其实，iOS 端可以在包下载完成后初始化 Bridge（注： Bridge 在源码中是 JS Bridge 或者 JSI 的统称）。Bridge初始化后，我们就可以开始加载下载好的 JavaScript 包了。</p>
<p>整体的流程是这样的：</p>
<ul>
<li>在初始化Bridge时，在 setup 的过程中，首先会调用 bridge 的代理方法 (NSURL *)sourceURLForBridge : (RCTBridge *)bridge 方法，指定获取 JS bundle 的路径：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a> -(NSURL *)sourceURLForBridge:(RCTBridge *)bridge{
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>    NSString *bundlePath = [self getCurrentBundlePath:bundleid];
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    return bundlePath;
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>}
</code></pre></div>
<ul>
<li>确定 URL 之后，bridge 会调用 start 方法，开始加载 JS bundle 并调用以下方法：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a> [self loadSource:^(NSError *error, RCTSource *source) {
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>    if (error) {
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>      [weakSelf handleError:error];
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    }
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>    ...
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a> ]
</code></pre></div>
<ul>
<li>接下来会调用 bridge 的代理方法，我们可以在该方法中手动注入一些业务参数：</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>- (void)loadSourceForBridge:(RCTBridge *)bridge
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>                 onProgress:(RCTSourceLoadProgressBlock)onProgress
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>                 onComplete:(RCTSourceLoadBlock)loadCallback{
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>  [RCTJavaScriptLoader loadBundleAtURL:bridge.bundleURL onProgress:onProgress onComplete:^(NSError *error, RCTSource *source) {
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>      //手动注入一些业务参数
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>      NSString *string = &quot;;this.__xxx___ = &#39;yyy&#39;;&quot;
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>      NSData *stringData = [string dataUsingEncoding:NSUTF8StringEncoding];
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>      NSMutableData *newData = [NSMutableData dataWithData:stringData];
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>      [newData appendData:source.data];
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>      //生成新的Source去加载
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>      RCTSource * newSource = [RCTJavaScriptLoader getNewRCTSourceURL:source.url data:newData];
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>      loadCallback(error,newSource);
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>  }];
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>}
</code></pre></div>
<p>之后，bridge 会负责执行该 newSource，执行 JavaScript 代码并渲染出页面。</p>
<h2 id="react-native-bug">React Native 问题排查与框架 Bug 修复</h2>
<p>React Native 涉及 Native、FE、Server 三端，中间经过 JavaScript 环境、Server 数据、Native 环境的转换，如果出现了问题，排查链路很长。</p>
<p>而且，React Native 框架的不同版本在 Android、iOS 端都存在兼容性 bug，特别是用于混合工程时这个问题会更加明显。因为，React Native 的许多设计都是以纯 React Native 工程为出发点的，混合工程中随着业务越来越复杂，内存占用、兼容问题、多线程问题都会暴露出来。</p>
<p>接下来，我们就来看下在 Android、iOS 端分别要怎么进行 React Native 问题排查与框架 Bug 修复。</p>
<h3 id="android-bug">Android 问题排查与框架 bug 修复</h3>
<p>我们的问题排查思路很简单：只要有足够多的日志，就能帮我们足够快地定位问题。</p>
<p>所以我们首先要<strong>添加日志输出</strong>。我们可以通过 ReactInstanceManagerBuilder 获取 JavaScript、native 运行错误：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>ReactInstanceManagerBuilder builder = ReactInstanceManager.builder();
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>builder.setApplication((Application) context.getApplicationContext())
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>       .setRedBoxHandler(mExceptionHandler)
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>       .setNativeModuleCallExceptionHandler(mExceptionHandler);
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>private static class ExceptionHandler implements NativeModuleCallExceptionHandler, RedBoxHandler {
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>  @Override
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>  public void handleException(Exception e) {
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    // 处理 Native 异常
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>  }
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>  @Override
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>  public void handleRedbox(String s, StackFrame[] stackFrames, ErrorType errorType) {
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>    // 处理 JS 异常
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>  }
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>  @Override
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>  public boolean isReportEnabled() {
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>    return false;
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>  }
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>  @Override
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>  public void reportRedbox(Context context, String s, StackFrame[] stackFrames, String s1, ReportCompletedListener reportCompletedListener) {
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>  }
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>}
</code></pre></div>
<p>接着，用 AOP 切片的方式拦截 ReactNative JavaMethodWrapper 调用，并使用 AspectJ 在编译期对 ReactNative 框架字节码进行插桩：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>@Aspect
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>public class NativeModuleMethodInvokeAspect extends BaseAspect&lt;INativeModuleMethodInvokePointcut&gt; {
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    // 对 JavaMethodWrapper.invoke 方法调用进行插桩
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>    @Around(&quot;execution (* com.facebook.react.bridge.JavaMethodWrapper.invoke(..))&quot;)
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    public Object invokeNativeModuleMethod(ProceedingJoinPoint joinPoint) throws Throwable {
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>        INativeModuleMethodInvokePointcut pointcut = getPointcut();
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>        if(pointcut == null){
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>            return joinPoint.proceed(joinPoint.getArgs());
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>        }
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>        return pointcut.pointcut(joinPoint);
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>    }
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>}
</code></pre></div>
<p>下面这段代码是针对 Native Module 的调用做代码插桩，捕获 JavaScript 调用 Native Module 的异常：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>public class ModuleMethodInvokePointcut implements INativeModuleMethodInvokePointcut {
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    @Override
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    public Object pointcut(ProceedingJoinPoint proceedingJoinPoint) {
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>        Object object;
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>        Object target = proceedingJoinPoint.getTarget();
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>        try {
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>            object = proceedingJoinPoint.proceed();
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>        } catch (Throwable throwable) {
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>            // 异常时，通过 target 反射获取对应的 module 名称和方法
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>            throwable.printStackTrace();
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>            return null;
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>        }
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>        return object;
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>    }
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>}
</code></pre></div>
<p>然后我们就可以通过下面这两个命令查看 React Native 运行日志了：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>adb logcat | grep React
</code></pre></div>
<p>最后，如果有异常日志就会上报到后台，日志信息会包含系统、机型、运行环境，以及业务标识等。有了异常日志给我们提供的这些信息，你就可以通过线下、线上手段，快速排查 React Native 相关的 bug 了。</p>
<p>那么接下来，我们对React Native框架的Bug进行修复呢？</p>
<p>在 Android 混合工程中，React Native 是以 aar 方式引入的。所以建议你对它进行包装，自行发布 aar 管理。不过源码编译方式复杂，你可以通过编译期插桩的方式对 React Native aar 进行插桩，来修复 bug。</p>
<p>常用的插桩方式包括 ASM、Javasist、AspectJ 这几种。我们通常可以用 AspectJ 匹配具体类的具体方法进行插桩，实现 bug 修复。选择 AspectJ 的原因是，通常我们只需要对 React Native 的一些异常方法做切片，并不需要修改里面的逻辑，它足以满足我们修改 React Native 框架问题的需要。并且， AspectJ 在易用性、可读性上比 ASM、Javasist 都更优。</p>
<p>以上就是 Android 端进行 React Native 的问题排查与框架 Bug 修复的常用手段，接下来我们再看看 iOS 端的。</p>
<h3 id="ios_3">iOS 问题排查</h3>
<p>在iOS中，如果 React Native 页面在加载过程中或者运行过程中出现了异常，我们可以统一通过 typedef void (^RCTFatalHandler)(NSError *error); 来进行拦截。</p>
<p>首先我们要对原生的 RCTFatalHandler 中 error 参数进行改造，让 error 中带上 bridge 信息。具体改造代码如下：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>- (void)error{
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>    //改造error中带有bridge
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>    NSError *newError = [self getWBErrorBridge:error];
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>    RCTFatal(newError);
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>}
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>//error信息里带上Bridge
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>- (NSError *)getWBErrorBridge:(NSError *)error{
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    NSMutableDictionary *errorDic = [NSMutableDictionary dictionaryWithDictionary:error.userInfo];
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>    [errorDic setObject:self-&gt;_parentBridge forKey:@&quot;ErrorBridgeTag&quot;];
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>    NSError *newErr = [[NSError alloc]initWithDomain:error.domain code:error.code userInfo:errorDic];
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>    return newErr;
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>}
</code></pre></div>
<p>出现异常后，我们要从 Error 中获取 bridge ，并找出发生异常的载体页信息，获取对应的 JS Bundle 的 ID ，以确定到底哪一个页面出现了异常：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a> RCTSetFatalHandler(^(NSError *error) {
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>    dispatch_async(dispatch_get_main_queue(), ^{
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>        RNViewController *rnVC = nil;
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>        RCTBridge *bridge = (RCTBridge *)error.userInfo[@&quot;ErrorBridgeTag&quot;];
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>        if (bridge) {
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>           carrierVC = (RNViewController *)bridge.delegate;
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>        }
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>        NSString *descriptions = error.localizedDescription;
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>        NSLog(@&quot;error --- %@ --- %@&quot;, rnVC.rnModel.bundleID, descriptions);
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a>    }
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>}
</code></pre></div>
<p>这样，我们就可以在拦截异常后，对页面进行展示错误页面、自动修复、清空异常的 JS bundle 缓存等一系列操作了。</p>
<h2 id="_10">总结</h2>
<p>今天的这一讲，我们系统地讲解了混合开发的全流程。你可以根据官方文档快速搭建起 React Native 混合工程。我们这一讲是在官方教程的基础上，结合真实项目中的实战开发经验，从环境搭建、载体页设计、调试打包发布、问题排查与框架 Bug 修复几个方面来进行讲解的。这里我们再简单复习下几个重要知识点。</p>
<p>关于纯 React Native 工程和混合工程分别在哪些场景使用，我们在接入 React Native 时如何进行选择的问题，核心还是在于<strong>项目有没有历史包袱</strong>。</p>
<p>如果是一个新的项目，需要做到快速提效，并且不需要复杂的架构，这个时候你可以选择纯 React Native 模式。如果是已上线项目来接入 React Native，架构复杂，或者需要将 React Native 当成一种基础能力提供给其他业务/App 使用，就需要使用混合模式。</p>
<p>遇到问题时如何快速排查定位，是我们实际开发过程中经常遇到的问题。由于 React Native 的链路比较长、涉及客户端、前端、后端，且 React Native 框架输出的日志不够多，排查问题比较困难。这个时候我们可以通过捕获 React Native 运行异常、在 React Native 框架内加入足够的日志，帮助我们来快速定位问题。</p>
<p>其实混合开发并没有那么难，只要理解了以上的一些关键点，就足以让你应对日常的 React Native 混合开发需求了。</p>
<h2 id="_11">作业</h2>
<ol>
<li>设计一个简单的载体页，包含初始化、加载本地 bundle 文件、异常处理逻辑。</li>
</ol>
<p>欢迎在评论区分享你的想法和经验，我们下一讲再见。</p>
<div><strong>精选留言（15）</strong></div>
<ul>
<li><span>Yolo七夜</span> 👍（1） 💬（2）<p>RN 可以与 flutter直接混编吗？</p>2022-11-30</li><br/><li><span>飘逸跑酷</span> 👍（11） 💬（0）<p>来波源码，参照一下</p>2022-05-26</li><br/><li><span>下一刻。</span> 👍（6） 💬（0）<p>iOS 期望可以讲解一下，类似Android arr的混合模式。把iOS RN部分打包成framework。</p>2022-05-16</li><br/><li><span>黑马有点白986</span> 👍（3） 💬（0）<p>Android 端动态加载 bundle 就讲完了,按照你的文档来，根本跑不通呀，能不能给个demo</p>2023-02-13</li><br/><li><span>Geek_585b44</span> 👍（3） 💬（0）<p>没看懂iOS是怎么集成RN的，没有demo吗</p>2022-11-18</li><br/><li><span>下一刻。</span> 👍（2） 💬（1）<p>安卓使用arr混合模式后，可以抛弃node_modules，那么如果项目中使用到一些原生第三方库，应该如何处理呢？</p>2022-05-16</li><br/><li><span>Print JQK°</span> 👍（1） 💬（0）<p>来波源码，参考一下</p>2024-01-14</li><br/><li><span>大神博士</span> 👍（1） 💬（0）<p>podspec 参考哪啊，大哥，不能就直接给个 github 项目首页的地址吧</p>2023-04-13</li><br/><li><span>王小东</span> 👍（1） 💬（0）<p>新手小白提问，这种搭建的是线上运行环境吧 如何搭建方便调试的开发环境呢</p>2023-02-23</li><br/><li><span>Geek_4a10b1</span> 👍（1） 💬（1）<p>关于混合开发的环境集成这块儿有个问题咨询下，如果Android项目集成新版本架构，我看官网介绍需要依赖nodemodule里的react-native-gradle-plugin，nodemodule都被删了的话，这一步你们是怎么处理呢？另外如果要用TuboModule和Fabric，需要生成各种c++文件使用NDK进行编译，采用混合开发这种集成方式的话这一步又要怎么处理呢？</p>2022-07-05</li><br/><li><span>Sunny</span> 👍（1） 💬（1）<p>请问下，纯RN的客户端如何配置热更新？如果能具体些，非常感谢！期望是搭配23章CDN方案实现</p>2022-06-13</li><br/><li><span>小怪兽</span> 👍（1） 💬（1）<p>不用添加react.gradle脚本吗</p>2022-05-19</li><br/><li><span>大神博士</span> 👍（0） 💬（0）<p>我用 swift 集成了一下，开发阶段热更新也没有问题，但是如果有报错，iOS 就崩溃了，这是怎么回事？
&#39;-[hybridnative.AppDelegate window]: unrecognized selector sent to instance</p>2023-04-14</li><br/><li><span>songyq</span> 👍（0） 💬（0）<p> RCTSetFatalHandler(^(NSError *error) {
    dispatch_async(dispatch_get_main_queue(), ^{
        RNViewController *rnVC = nil;
        RCTBridge *bridge = (RCTBridge *)error.userInfo[@&quot;ErrorBridgeTag&quot;];
        if (bridge) {
           carrierVC = (RNViewController *)bridge.delegate;
        }
        NSString *descriptions = error.localizedDescription;
        NSLog(@&quot;error --- %@ --- %@&quot;, rnVC.rnModel.bundleID, descriptions);
    }
}
指出一处错误
carrierVC 名称错误了，应该是rnVC</p>2022-08-19</li><br/><li><span>songyq</span> 👍（0） 💬（0）<p>RNViewController *rnVC = nil; RCTBridge *bridge = (RCTBridge *)error.userInfo[@&quot;ErrorBridgeTag&quot;]; if (bridge) { carrierVC = (RNViewController *)bridge.delegate; } NSString *des</p>2022-08-19</li><br/>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../20-Sentry%EF%BC%9A%E7%BA%BF%E4%B8%8A%E9%94%99%E8%AF%AF%E4%B8%8E%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%EF%BC%9F/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 20 Sentry：线上错误与性能监控怎么处理？">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                20 Sentry：线上错误与性能监控怎么处理？
              </div>
            </div>
          </a>
        
        
          
          <a href="../22-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E6%BB%A1%E8%B6%B3%E4%B8%9A%E5%8A%A1%E7%9A%84%E4%B8%AA%E6%80%A7%E5%8C%96%E9%9C%80%E6%B1%82%EF%BC%9F/" class="md-footer__link md-footer__link--next" aria-label="下一页: 22 自定义组件：如何满足业务的个性化需求？">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                22 自定义组件：如何满足业务的个性化需求？
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2025-Present zkep
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "toc.follow", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.footer", "navigation.tracking", "navigation.instant", "navigation.instant.progress", "navigation.indexes", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../../javascript/extra.js"></script>
      
        <script src="../../../javascript/giscus.js"></script>
      
    
  </body>
</html>