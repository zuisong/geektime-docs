ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ¶›ã€‚åˆäºŒè¿‡å¹´å¥½ï¼

åœ¨ä¸ŠèŠ‚è¯¾é‡Œï¼Œæˆ‘ç»™ä½ ç•™äº†ä¸€ä¸ªä½œä¸šï¼Œé‚£å°±æ˜¯ï¼šç”¨Kotlinæ¥å®Œæˆ [LeetCodeçš„640å·é¢˜ã€Šæ±‚è§£æ–¹ç¨‹ã€‹](https://leetcode-cn.com/problems/solve-the-equation/)ã€‚é‚£ä¹ˆè¿™èŠ‚è¯¾ï¼Œæˆ‘å°±æ¥è®²è®²æˆ‘çš„è§£é¢˜æ€è·¯ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚

è¿™é“é¢˜ä¹Ÿéå¸¸å®¹æ˜“ç†è§£ï¼Œç¨‹åºçš„è¾“å…¥æ˜¯ä¸€ä¸ªâ€œä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹â€ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¾“å…¥çš„æ–¹ç¨‹ï¼Œè®¡ç®—å‡ºæ­£ç¡®çš„ç»“æœã€‚æ ¹æ®è¾“å…¥æ–¹ç¨‹çš„ä¸åŒï¼Œç»“æœå¯èƒ½æœ‰ä¸‰ç§æƒ…å†µï¼š

- **æ–¹ç¨‹ä»…æœ‰ä¸€ä¸ªè§£**ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§æ ¼å¼è¿”å›ç»“æœå³å¯ï¼Œæ¯”å¦‚è¾“å…¥â€œ2x=4â€ï¼Œé‚£ä¹ˆè¾“å‡ºå°±åº”è¯¥æ˜¯â€œx=2â€ã€‚
- **æ–¹ç¨‹æœ‰æ— æ•°ä¸ªè§£**ï¼Œæ¯”å¦‚è¾“å…¥â€œx=xâ€ï¼Œé‚£ä¹ˆè¾“å‡ºå°±åº”è¯¥æ˜¯â€œInfinite solutionsâ€ã€‚
- **æ–¹ç¨‹æ— è§£**ï¼Œæ¯”å¦‚è¾“å…¥â€œx=x+5â€ï¼Œé‚£ä¹ˆè¾“å‡ºç»“æœå°±åº”è¯¥æ˜¯â€œNo solutionâ€ã€‚

å¦å¤–ï¼Œå¯¹äºç¨‹åºçš„**è¾“å…¥æ ¼å¼**ï¼Œå…¶å®æˆ‘ä»¬è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦å¼„æ¸…æ¥šã€‚åªæœ‰å¼„æ¸…æ¥šäº†è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ‰èƒ½å¼€å§‹å†™ä»£ç ï¼š

- æ–¹ç¨‹å½“ä¸­çš„æœªçŸ¥æ•°åªä¼šç”¨xè¡¨ç¤ºï¼Œä¸ä¼šæ˜¯yï¼Œä¹Ÿä¸ä¼šæ˜¯å¤§å†™çš„â€œXâ€ã€‚
- æ–¹ç¨‹å½“ä¸­ä¸ä¼šå‡ºç°ç©ºæ ¼ï¼Œæ¯”å¦‚â€œ2x=4â€ï¼Œä¸ä¼šå‡ºç°â€œ2x = 4 â€çš„æƒ…å†µã€‚
- æ–¹ç¨‹å½“ä¸­åªä¼šæœ‰åŠ å‡æ³•ï¼Œä¸ä¼šå‡ºç°ä¹˜é™¤æ³•ã€‚
- æ–¹ç¨‹å½“ä¸­çš„æ•°å­—ï¼Œä¸€å®šæ˜¯æ•´æ•°ï¼Œä¸ä¼šå‡ºç°åˆ†æ•°ã€å°æ•°ã€‚
- è¾“å…¥çš„æ–¹ç¨‹ä¸€å®šæ˜¯ä¸€ä¸ªæ­£ç¡®çš„æ–¹ç¨‹ï¼Œä¸ä¼šå‡ºç°â€œx=â€¦â€ä¹‹ç±»çš„è„æ•°æ®ã€‚

å¥½ï¼Œé—®é¢˜çš„ç»†èŠ‚éƒ½å¼„æ¸…æ¥šäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è§£é¢˜çš„æ€è·¯ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ6ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å°è¯•ç”¨æ­£åˆ™åˆ†å‰²

```kotlin
&#47;&#47; æ ¹æ®â€œ+â€ã€â€œ-â€åˆ†å‰²å¼å­
private fun splitByOperator(list: String) =
    list.split(Regex(&quot;(?=[+-])&quot;)).filter { it.isNotEmpty() }
```

æˆ–è€…

```kotlin
&#47;&#47; æ ¹æ®â€œ+â€ã€â€œ-â€åˆ†å‰²å¼å­
private fun splitByOperator(list: String): Sequence&lt;String&gt; =
    Regex(&quot;&quot;&quot;[+-]?(\d*x|\d+)&quot;&quot;&quot;).findAll(list).map { it.value }
```
</div>2022-02-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f9/c5/95b97dfa.jpg" width="30px"><span>éƒ‘å³°</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>```Kotlin
fun fractionAddition(expression: String): String {
  &#47;&#47; Split the expression to several pairs of numerator and denominator
  val numbers = expression
    .replace(&quot;-&quot;, &quot;+-&quot;)
    .split(&quot;+&quot;)
    .filter { it.isNotEmpty() }
    .map { it.split(&quot;&#47;&quot;).take(2).map(String::toInt) }

  &#47;&#47; Calculate the lcm of all denominators
  val rawDenominator = numbers.map { it[1] }.fold(1) { x, y -&gt; lcm(x, y) }
  &#47;&#47; Calculate the sum of all numerators
  val rawNumerator = numbers.sumOf { it[0] * rawDenominator &#47; it[1] }

  &#47;&#47; Reformat numerator and denominator through their gcd
  val gcd = abs(gcd(rawNumerator, rawDenominator))
  val denominator = rawDenominator &#47; gcd
  val numerator = rawNumerator &#47; gcd
  return &quot;$numerator&#47;$denominator&quot;
}

fun gcd(x: Int, y: Int): Int = if (y == 0) x else gcd(y, x % y)
fun lcm(x: Int, y: Int): Int = x * y &#47; gcd(x, y)
```</div>2022-02-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg" width="30px"><span>ç™½ä¹¾æ¶›</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>fun solveEquation(equation: String): String { &#47;&#47; x+5-3+2x=6+x-2
    var xCount = 0   &#47;&#47; ç§»åˆ°å·¦è¾¹çš„ x ç³»æ•°ä¹‹å’Œ
    var addValue = 0 &#47;&#47; ç§»åˆ°å³è¾¹çš„æ•°å­—ä¹‹å’Œ
    val equalIndex = equation.indexOf(&#39;=&#39;) &#47;&#47; ç­‰å·çš„ä½ç½®
    var i = 0
    while (i &lt; equation.length) {
        val fromIndex = i
        if (i == 0) {
            i++
        }
        for (j in i until equation.length) {
            val c: Char = equation[j]
            if (c == &#39;+&#39; || c == &#39;-&#39; || c == &#39;=&#39;) {
                break
            }
            i++
        }
        var subString = equation.substring(if (fromIndex == 0) fromIndex else fromIndex - 1, i)
        subString = if (subString.startsWith(&quot;=&quot;)) subString.substring(1) else subString
        println(&quot;å€¼ä¸ºï¼š$subString&quot;)
        if (subString.endsWith(&quot;x&quot;)) {
            subString = subString.substring(0, subString.length - 1)
            val tempCount = if (subString.isEmpty()) 1 &#47;&#47; x
            else {
                if (subString.length == 1 &amp;&amp; (subString.startsWith(&quot;+&quot;) || subString.startsWith(&quot;-&quot;))) { &#47;&#47; +x æˆ– -x
                    if (subString[0] == &#39;+&#39;) 1 else -1
                } else subString.toInt() &#47;&#47; +5x æˆ– 5x æˆ– 53x æˆ– -2x
            }
            xCount = if (i &gt; equalIndex) xCount - tempCount else xCount + tempCount &#47;&#47; å·¦æ­£å³è´Ÿ
        } else if (subString.isNotEmpty()) { &#47;&#47; è¿‡æ»¤æ‰ = äº§ç”Ÿçš„ä¸€ä¸ªç©ºå­—ç¬¦ä¸²
            val tempValue = subString.toInt()
            addValue = if (i &gt; equalIndex) addValue + tempValue else addValue - tempValue &#47;&#47; å·¦è´Ÿå³æ­£
        }
        i++
    }
    println(&quot;ç»“æœï¼š${xCount}x = $addValue&quot;)
    return if (xCount == 0) if (addValue == 0) &quot;Infinite solutions&quot; else &quot;No solution&quot;
    else &quot;x=&quot; + addValue &#47; xCount
}</div>2022-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/e5/e1/a5064f88.jpg" width="30px"><span>Geek_Adr</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç¬¦å·å¤„ç†å¤æ‚äº†ï¼Œå…¶å®ƒä¸ @éƒ‘å³° ç•¥åŒ
    &#47;&#47; åˆ†æ•°çš„æ•°æ®ç»“æ„ symbolä¸º-1 1
    &#47;&#47; æ³¨æ„åˆ†å­&#47;åˆ†æ¯ä¸ºæ­£æ•´æ•°
    data class Fraction(val numerator: Int, val denominator: Int, val symbol: Int)
    fun fractionAddition(expression: String): String {
        return expression.replace(&quot;-&quot;, &quot;+-&quot;) &#47;&#47; &quot;-&quot;å‰å¢åŠ +ï¼Œæ–¹ä¾¿splitå¤„ç†
            .split(&quot;+&quot;) &#47;&#47; æŒ‰&quot;+&quot;åˆ†éš”
            .filter { it.isNotBlank() } &#47;&#47; å»æ‰å¯èƒ½ä¸ºç©ºçš„éƒ¨åˆ†
            .map { &#47;&#47; å¤„ç†æˆåˆ†æ•°å®ä¾‹
                var symbol = if (it.startsWith(&quot;-&quot;)) -1 else 1
                val ss = it.replace(&quot;-&quot;, &quot;&quot;).split(&quot;&#47;&quot;)
                Fraction(ss[0].toInt(), ss[1].toInt(), symbol)
            }.run {
                &#47;&#47; ç®—å‡ºåˆ†æ¯çš„æœ€å°å…¬å€æ•°ï¼Œä½œä¸ºåˆ†æ¯
                val denominator = map { it.denominator }.reduce { a, b -&gt; lcm(a, b) }
                &#47;&#47; æŒ‰æœ€å°å…¬å€æ•°è®¡ç®—åˆ†å­ç»“æœ
                var numerator = map { it.symbol * it.numerator * denominator &#47; it.denominator }.reduce { a, b -&gt; a + b }
                val symbol = if (numerator &lt; 0) -1 else 1
                numerator *= symbol &#47;&#47; è½¬æ­£
                val gcd = gcd(numerator, denominator) &#47;&#47; ç»“æœå¯èƒ½å¯çº¦åˆ†
                Fraction(numerator &#47; gcd, denominator &#47; gcd, symbol)
            }.run { &quot;${if (symbol &lt; 0) &quot;-&quot; else &quot;&quot;}${numerator}&#47;${denominator}&quot; }

    }

    &#47;&#47; æœ€å°å…¬å€æ•°
    private fun lcm(m: Int, n: Int): Int {
        return m * n &#47; gcd(m, n)
    }

    &#47;&#47; æœ€å¤§å…¬çº¦æ•°
    private fun gcd(m: Int, n: Int): Int {
        return if (m % n == 0) n else gcd(n, m % n)
    }
</div>2022-02-20</li><br/><li><img src="" width="30px"><span>Dash</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>```kotlin
class Solution {
        fun solveEquation(equation: String): String {
            val (left, right) = equation.replace(&quot;-&quot;, &quot;+-&quot;)
                .split(&quot;=&quot;)
                .map { it.split(&quot;+&quot;) }
                .map { list -&gt; list.filter { it.isNotBlank() } }

            fun sumX(str: List&lt;String&gt;): Int = str.filter { it.contains(&quot;x&quot;) }
                .sumOf {
                    when (it) {
                        &quot;x&quot; -&gt; 1
                        &quot;-x&quot; -&gt; -1
                        else -&gt; it.substringBefore(&quot;x&quot;).toInt()
                    }
                }

            fun sumNum(str: List&lt;String&gt;): Int = str.filter { !it.contains(&quot;x&quot;) }
                .sumOf { it.toInt() }

            val x = sumX(left) - sumX(right)
            val num = sumNum(right) - sumNum(left)
            return when {
                x == 0 &amp;&amp; num == 0 -&gt; &quot;Infinite solutions&quot;
                x == 0 || num % x != 0 -&gt; &quot;No solution&quot;
                else -&gt; &quot;x=${num &#47; x}&quot;
            }
        }
    }
```</div>2025-01-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/82/fa/7e5f7a0a.jpg" width="30px"><span>æ˜¥å¤ç§‹å†¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>class Solution {
    fun solveEquation(equation: String): String =
        equation.split(&quot;=&quot;)
            .map(this::statistics)
            .calculate()


    private fun statistics(expr: String): Pair&lt;Int, Int&gt; =
        expr.replace(&quot;-&quot;, &quot;+-&quot;)
            .split(&quot;+&quot;)
            .fold(Pair(0, 0)) { ans, s -&gt;
                if (s.contains(&quot;x&quot;)) {
                    ans.copy(first = ans.first + s.substring(0, s.length-1).toValue())
                } else {
                    ans.copy(second = ans.second + if (s.isEmpty()) { 0 } else {s.toValue()})
                }
            }

    private fun String.toValue(): Int =
        when(this) {
            &quot;&quot; -&gt; 1
            &quot;-&quot; -&gt; -1
            else -&gt; this.toInt()
        }

    private fun List&lt;Pair&lt;Int,Int&gt;&gt;.calculate(): String {
        val left = this[0]
        val right = this[1]
        return if (left.first == right.first) {
            if (left.second == right.second) &quot;Infinite solutions&quot;
            else &quot;No solution&quot;
        } else {
            val x = left.first - right.first
            val v = right.second - left.second
            &quot;x=${v &#47; x}&quot;
        }
    }
}</div>2022-11-05</li><br/>
</ul>