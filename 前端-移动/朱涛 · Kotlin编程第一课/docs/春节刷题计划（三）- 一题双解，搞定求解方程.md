ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ¶›ã€‚åˆäºŒè¿‡å¹´å¥½ï¼

åœ¨ä¸ŠèŠ‚è¯¾é‡Œï¼Œæˆ‘ç»™ä½ ç•™äº†ä¸€ä¸ªä½œä¸šï¼Œé‚£å°±æ˜¯ï¼šç”¨Kotlinæ¥å®Œæˆ [LeetCodeçš„640å·é¢˜ã€Šæ±‚è§£æ–¹ç¨‹ã€‹](https://leetcode-cn.com/problems/solve-the-equation/)ã€‚é‚£ä¹ˆè¿™èŠ‚è¯¾ï¼Œæˆ‘å°±æ¥è®²è®²æˆ‘çš„è§£é¢˜æ€è·¯ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚

è¿™é“é¢˜ä¹Ÿéå¸¸å®¹æ˜“ç†è§£ï¼Œç¨‹åºçš„è¾“å…¥æ˜¯ä¸€ä¸ªâ€œä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹â€ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¾“å…¥çš„æ–¹ç¨‹ï¼Œè®¡ç®—å‡ºæ­£ç¡®çš„ç»“æœã€‚æ ¹æ®è¾“å…¥æ–¹ç¨‹çš„ä¸åŒï¼Œç»“æœå¯èƒ½æœ‰ä¸‰ç§æƒ…å†µï¼š

- **æ–¹ç¨‹ä»…æœ‰ä¸€ä¸ªè§£**ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§æ ¼å¼è¿”å›ç»“æœå³å¯ï¼Œæ¯”å¦‚è¾“å…¥â€œ2x=4â€ï¼Œé‚£ä¹ˆè¾“å‡ºå°±åº”è¯¥æ˜¯â€œx=2â€ã€‚
- **æ–¹ç¨‹æœ‰æ— æ•°ä¸ªè§£**ï¼Œæ¯”å¦‚è¾“å…¥â€œx=xâ€ï¼Œé‚£ä¹ˆè¾“å‡ºå°±åº”è¯¥æ˜¯â€œInfinite solutionsâ€ã€‚
- **æ–¹ç¨‹æ— è§£**ï¼Œæ¯”å¦‚è¾“å…¥â€œx=x+5â€ï¼Œé‚£ä¹ˆè¾“å‡ºç»“æœå°±åº”è¯¥æ˜¯â€œNo solutionâ€ã€‚

å¦å¤–ï¼Œå¯¹äºç¨‹åºçš„**è¾“å…¥æ ¼å¼**ï¼Œå…¶å®æˆ‘ä»¬è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦å¼„æ¸…æ¥šã€‚åªæœ‰å¼„æ¸…æ¥šäº†è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ‰èƒ½å¼€å§‹å†™ä»£ç ï¼š

- æ–¹ç¨‹å½“ä¸­çš„æœªçŸ¥æ•°åªä¼šç”¨xè¡¨ç¤ºï¼Œä¸ä¼šæ˜¯yï¼Œä¹Ÿä¸ä¼šæ˜¯å¤§å†™çš„â€œXâ€ã€‚
- æ–¹ç¨‹å½“ä¸­ä¸ä¼šå‡ºç°ç©ºæ ¼ï¼Œæ¯”å¦‚â€œ2x=4â€ï¼Œä¸ä¼šå‡ºç°â€œ2x = 4 â€çš„æƒ…å†µã€‚
- æ–¹ç¨‹å½“ä¸­åªä¼šæœ‰åŠ å‡æ³•ï¼Œä¸ä¼šå‡ºç°ä¹˜é™¤æ³•ã€‚
- æ–¹ç¨‹å½“ä¸­çš„æ•°å­—ï¼Œä¸€å®šæ˜¯æ•´æ•°ï¼Œä¸ä¼šå‡ºç°åˆ†æ•°ã€å°æ•°ã€‚
- è¾“å…¥çš„æ–¹ç¨‹ä¸€å®šæ˜¯ä¸€ä¸ªæ­£ç¡®çš„æ–¹ç¨‹ï¼Œä¸ä¼šå‡ºç°â€œx=â€¦â€ä¹‹ç±»çš„è„æ•°æ®ã€‚

å¥½ï¼Œé—®é¢˜çš„ç»†èŠ‚éƒ½å¼„æ¸…æ¥šäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è§£é¢˜çš„æ€è·¯ã€‚

å¯¹äºè¿™ç§ç®€å•çš„ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹çš„è§£æ³•ï¼Œå…¶å®æˆ‘ä»¬åœ¨å°å­¦å°±å­¦è¿‡äº†ï¼Œæ¦‚æ‹¬èµ·æ¥ï¼Œå°±æ˜¯åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ã€‚

- ç¬¬ä¸€æ­¥ï¼Œ**ç§»é¡¹**ã€‚å°†å«æœ‰xçš„å¼å­å…¨éƒ¨ç§»åˆ°ç­‰å¼çš„å·¦è¾¹ï¼Œå°†æ•°å­—å…¨éƒ¨éƒ½ç§»åˆ°ç­‰å¼çš„å³è¾¹ã€‚å¦å¤–ï¼Œç§»é¡¹çš„æ—¶å€™ç¬¦å·è¦å˜ã€‚æ¯”å¦‚â€œ3x-4=x+2â€è¿™ä¸ªæ–¹ç¨‹ï¼Œç§»é¡¹ä»¥åï¼Œå°±ä¼šå˜æˆè¿™æ ·ï¼šâ€œ3x-x=2+4â€ã€‚
- ç¬¬äºŒæ­¥ï¼Œ**åˆå¹¶åŒç±»é¡¹**ã€‚è¿™é‡Œå…¶å®å°±æ˜¯å°†ç­‰å¼çš„å·¦è¾¹ä¸å³è¾¹åˆå¹¶èµ·æ¥ï¼Œå¯¹äºâ€œ3x-x=2+4â€è¿™ä¸ªå¼å­ï¼Œåˆå¹¶å®Œä»¥åï¼Œå°±ä¼šå˜æˆâ€œ2x=6â€ã€‚
- ç¬¬ä¸‰æ­¥ï¼Œ**ç³»æ•°åŒ–ä¸ºä¸€**ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‹¿å³è¾¹çš„æ•°å­—ï¼Œé™¤ä»¥å·¦è¾¹çš„ç³»æ•°ã€‚æ¯”å¦‚ä¸Šé¢çš„å¼å­â€œ2x=6â€ï¼Œç³»æ•°åŒ–ä¸ºä¸€ä¹‹åï¼Œå°±ä¼šå˜æˆâ€œx=3â€ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ–¹ç¨‹è§£ã€‚å½“ç„¶ï¼Œè¿™åªæ˜¯æ–¹ç¨‹åªæœ‰ä¸€ä¸ªè§£çš„æƒ…å†µï¼Œå…¶å®åœ¨ç³»æ•°åŒ–ä¸ºä¸€ä¹‹å‰ï¼Œè¿˜å­˜åœ¨å…¶ä»–çš„æƒ…å†µï¼Œæ¯”å¦‚â€œx=x+5â€æœ€ç»ˆä¼šå˜æˆâ€œ0=5â€ï¼Œè¿™æ—¶å€™å·¦è¾¹æ˜¯é›¶ï¼Œå³è¾¹ä¸æ˜¯é›¶ï¼Œè¿™æ—¶å€™å°±ä»£è¡¨æ–¹ç¨‹æ— è§£ï¼›å¯¹äºâ€œ2x=2xâ€è¿™æ ·çš„æ–¹ç¨‹ï¼Œå®ƒæœ€ç»ˆä¼šå˜æˆâ€œ0=0â€ï¼Œè¿™ç§ä¸¤è¾¹éƒ½ç­‰äºé›¶çš„æƒ…å†µï¼Œå°±ä»£è¡¨äº†æ–¹ç¨‹æœ‰æ— æ•°ä¸ªè§£ã€‚

å¥½ï¼Œå¦‚ä½•æ±‚è§£æ–¹ç¨‹çš„æ€è·¯æˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œé‚£ä¹ˆä»£ç è¯¥å¦‚ä½•å†™å‘¢ï¼Ÿè¿™é‡Œï¼Œæˆ‘ä»¬ä»ç„¶æœ‰ä¸¤ç§è§£æ³•ï¼Œè¿™ä¸¤ç§è§£æ³•çš„æ€è·¯æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯å…¶ä¸­ä¸€ç§æ˜¯åå‘½ä»¤å¼çš„ï¼Œå¦ä¸€ç§æ˜¯åå‡½æ•°å¼çš„ã€‚

è¿™é‡Œï¼Œæˆ‘ç…§æ ·æ˜¯åˆ¶ä½œäº†ä¸€å¼ åŠ¨å›¾ï¼Œç»™ä½ å±•ç¤ºä¸‹ç¨‹åºè¿è¡Œçš„æ•´ä½“æ€è·¯ï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/4b/91/4bbc7f1f21cd04e1b17f8032304a2691.gif?wh=1080x608)

## è§£æ³•ä¸€ï¼šå‘½ä»¤å¼

é¦–å…ˆï¼Œæˆ‘ä»¬æŒ‰ç…§å‰é¢åˆ†æçš„æ€è·¯ï¼ŒæŠŠå¾…å®ç°çš„ç¨‹åºåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š

```plain
fun solveEquation(equation: String): String {
    // â‘  åˆ†å‰²ç­‰å·
    // â‘¡ éå†å·¦è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
    // â‘¢ éå†å³è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
    // â‘£ ç³»æ•°åŒ–ä¸ºä¸€ï¼Œè¿”å›ç»“æœ
}
```

æ ¹æ®æ³¨é‡Šï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å®Œæˆå…¶ä¸­â‘ ã€â‘£ä¸¤ä¸ªæ­¥éª¤çš„ä»£ç ï¼š

```plain
fun solveEquation(equation: String): String {
        // â‘  åˆ†å‰²ç­‰å·
        val list = equation.split("=")

        // â‘¡ éå†å·¦è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
        // â‘¢ éå†å³è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹

        // â‘£ ç³»æ•°åŒ–ä¸ºä¸€,è¿”å›ç»“æœ
        return when {
            leftSum == 0 && rightSum == 0 -> "Infinite solutions"
            leftSum == 0 && rightSum != 0 -> "No solution"
            else -> "x=${rightSum / leftSum}"
        }
    }
```

ç°åœ¨ï¼Œå…³é”®è¿˜æ˜¯åœ¨äºâ‘¡ã€â‘¢ä¸¤ä¸ªæ­¥éª¤çš„ä»£ç ã€‚è¿™é‡Œï¼Œlist\[0]å…¶å®å°±ä»£è¡¨äº†å·¦è¾¹çš„å¼å­ï¼Œlist\[1]å°±ä»£è¡¨äº†å³è¾¹çš„å¼å­ã€‚

æŒ‰ç…§ä¹‹å‰çš„æ€è·¯åˆ†æï¼Œæˆ‘ä»¬å…¶å®ç”¨ä¸¤ä¸ªforå¾ªç¯ï¼Œåˆ†åˆ«éå†å®ƒä»¬ï¼Œç„¶åé¡ºä¾¿å®Œæˆç§»é¡¹ä¸åˆå¹¶åŒç±»é¡¹å°±è¡Œäº†ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š

```plain
var leftSum = 0
var rightSum = 0

val leftList = splitByOperator(list[0])
val rightList = splitByOperator(list[1])

// â‘¡ éå†å·¦è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
leftList.forEach {
    if (it.contains("x")) {
        leftSum += xToInt(it)
    } else {
        rightSum -= it.toInt()
    }
}

// â‘¢ éå†å³è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
rightList.forEach{
    if (it.contains("x")) {
        leftSum -= xToInt(it)
    } else {
        rightSum += it.toInt()
    }
}
```

è¿™æ®µä»£ç çš„é€»è¾‘å…¶å®ä¹Ÿæ¯”è¾ƒæ¸…æ™°äº†ï¼ŒleftListã€rightListæ˜¯æ ¹æ®â€œ+â€ã€â€œ-â€åˆ†å‰²å‡ºæ¥çš„å…ƒç´ ã€‚åœ¨å®Œæˆåˆ†å‰²ä»¥åï¼Œæˆ‘ä»¬å†å¯¹å®ƒä»¬è¿›è¡Œäº†éå†ï¼Œä»è€Œå®Œæˆäº†ç§»é¡¹ä¸åˆå¹¶åŒç±»é¡¹ã€‚

å¹¶ä¸”ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜ç”¨åˆ°äº†å¦å¤–ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯splitByOperator()ã€xToInt()ï¼Œå®ƒä»¬å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š

```plain
private fun splitByOperator(list: String): List<String> {
    val result = mutableListOf<String>()
    var temp = ""
    list.forEach {
        if (it == '+' || it == '-') {
            if (temp.isNotEmpty()) {
                result.add(temp)
            }
            temp = it.toString()
        } else {
            temp += it
        }
    }

    result.add(temp)
    return result
}

private fun xToInt(x: String) =
    when (x) {
        "x",
        "+x" -> 1
        "-x" -> -1
        else -> x.replace("x", "").toInt()
    }
```

ä»ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°splitByOperator()å°±æ˜¯ä½¿ç”¨â€œ+â€ã€â€œ-â€ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†å­—ç¬¦ä¸²ç±»å‹çš„å¼å­ï¼Œåˆ†å‰²æˆä¸€ä¸ªä¸ªçš„å…ƒç´ ã€‚è€ŒxToInt()çš„ä½œç”¨åˆ™æ˜¯ä¸ºäº†æå–xçš„ç³»æ•°ï¼Œæ¯”å¦‚â€œ2xâ€ï¼Œæå–ç³»æ•°ä»¥åï¼Œå°±æ˜¯â€œ2â€ï¼›è€Œâ€œ-2xâ€çš„ç³»æ•°å°±æ˜¯â€œ-2â€ã€‚

æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ•´ä½“çš„ä»£ç ï¼š

```plain
fun solveEquation(equation: String): String {
    // â‘  åˆ†å‰²ç­‰å·
    val list = equation.split("=")

    var leftSum = 0
    var rightSum = 0

    val leftList = splitByOperator(list[0])
    val rightList = splitByOperator(list[1])

    // â‘¡ éå†å·¦è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
    leftList.forEach {
        if (it.contains("x")) {
            leftSum += xToInt(it)
        } else {
            rightSum -= it.toInt()
        }
    }

    // â‘¢ éå†å³è¾¹çš„ç­‰å¼ï¼Œç§»é¡¹ï¼Œåˆå¹¶åŒç±»é¡¹
    rightList.forEach{
        if (it.contains("x")) {
            leftSum -= xToInt(it)
        } else {
            rightSum += it.toInt()
        }
    }

    // â‘£ ç³»æ•°åŒ–ä¸ºä¸€,è¿”å›ç»“æœ
    return when {
        leftSum == 0 && rightSum == 0 -> "Infinite solutions"
        leftSum == 0 && rightSum != 0 -> "No solution"
        else -> "x=${rightSum / leftSum}"
    }
}

// æ ¹æ®â€œ+â€ã€â€œ-â€åˆ†å‰²å¼å­
private fun splitByOperator(list: String): List<String> {
    val result = mutableListOf<String>()
    var temp = ""
    list.forEach {
        if (it == '+' || it == '-') {
            if (temp.isNotEmpty()) {
                result.add(temp)
            }
            temp = it.toString()
        } else {
            temp += it
        }
    }

    result.add(temp)
    return result
}

// æå–xçš„ç³»æ•°ï¼šâ€œ-2xâ€ ->â€œ-2â€
private fun xToInt(x: String) =
    when (x) {
        "x",
        "+x" -> 1
        "-x" -> -1
        else -> x.replace("x", "").toInt()
    }
```

è‡³æ­¤ï¼Œåå‘½ä»¤å¼çš„ä»£ç å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åå‡½æ•°å¼çš„ä»£ç è¯¥æ€ä¹ˆå†™ã€‚

## è§£æ³•äºŒï¼šå‡½æ•°å¼

è¿™é‡Œä½ è¦æ³¨æ„äº†ï¼Œå‡½æ•°å¼çš„æ€è·¯å‘¢ï¼Œå’Œå‘½ä»¤å¼çš„æ€è·¯å…¶å®æ˜¯**ä¸€æ ·**çš„ã€‚è§£æ–¹ç¨‹çš„æ­¥éª¤æ˜¯ä¸ä¼šå˜çš„ï¼Œä»ç„¶æ˜¯ç§»é¡¹ã€åˆå¹¶åŒç±»é¡¹ã€ç³»æ•°åŒ–ä¸ºä¸€ã€‚åªä¸è¿‡ï¼Œå¯¹æ¯”å‰é¢çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œä¼šæ›´å¤šåœ°**å€ŸåŠ©Kotlinçš„æ ‡å‡†åº“å‡½æ•°**ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬ä¸€éƒ¨åˆ†çš„ä»£ç æ€ä¹ˆå†™ï¼š

```plain
fun solveEquation(equation: String): String {
    val list = equation
        .replace("-", "+-") // é¢„å¤„ç†é€»è¾‘
        .split("=")

    // ç”¨â€œ+â€åˆ†å‰²å­—ç¬¦ä¸²
    val leftList = list[0].split("+")
    val rightList = list[1].split("+")

    // çœç•¥
}
```

è¿™é‡Œï¼Œä¸ºäº†å¯ä»¥ç›´æ¥ä½¿ç”¨Kotlinçš„åº“å‡½æ•°splitæ¥å®ç°ç®—å¼çš„åˆ†å‰²ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ç§**æ•°æ®é¢„å¤„ç†**çš„åŠæ³•ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸Šé¢ä»£ç çš„æ³¨é‡Šå¤„ï¼Œ`replace("-", "+-")` çš„ä½œç”¨æ˜¯å°†ç®—å¼å½“ä¸­çš„æ‰€æœ‰â€œ-â€æ›¿æ¢æˆâ€œ`+-`â€ï¼Œè¿™å°±æ˜¯é¢„å¤„ç†ã€‚ç»è¿‡è¿™ä¸ªé¢„å¤„ç†åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ `split("+")` æ¥åˆ†å‰²ç®—å¼äº†ã€‚

ä¸ºäº†ä½“ç°è¿™ä¸ªç»†èŠ‚ï¼Œæˆ‘è¿™é‡Œä¹Ÿåšäº†ä¸€ä¸ªåŠ¨å›¾ï¼Œä½ å¯ä»¥çœ‹çœ‹ï¼š

![å›¾ç‰‡](https://static001.geekbang.org/resource/image/b5/e9/b54e8c509be711cea6d3a0c1f22617e9.gif?wh=1080x425)

è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å¾—åˆ°çš„leftListã€rightListå…¶å®å°±æ˜¯å¹²å‡€çš„ã€ç‹¬ç«‹çš„æ•°å­—å’Œxå¼å­äº†ã€‚ä»¥â€œx+5-3+x=6+x-2â€ä¸ºä¾‹ï¼Œ`leftList=["x","5","-3","x"]`ï¼Œè€Œ`rightList=["6","x","-2"]`ã€‚

æ—¢ç„¶å®ƒä»¬ä¸¤è€…éƒ½æ˜¯æ™®é€šçš„é›†åˆï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥ï¼Œå°±å®Œå…¨å¯ä»¥å€ŸåŠ©Kotlinå¼ºå¤§çš„åº“å‡½æ•°æ¥åšå‰©ä¸‹çš„äº‹æƒ…äº†ã€‚æˆ‘ä»¬åªéœ€è¦å°†æ‰€æœ‰xçš„å¼å­æŒªåˆ°å·¦è¾¹ï¼Œæ‰€æœ‰æ•°å­—æŒªåˆ°å³è¾¹ï¼Œç„¶ååˆå¹¶ï¼Œæœ€åç³»æ•°åŒ–ä¸ºä¸€å³å¯ã€‚å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š

```plain
leftList
    .filter { it.hasX() }
    .map { xToInt(it) } // â‘ 
    .toMutableList() 
    .apply {
        rightList
            .filter { it.hasX() }
            .map { xToInt(it).times(-1) } // â‘¡
            .let { addAll(it) } 
    }.sum() // â‘¢
    .let { leftSum = it }

rightList
    .filter { it.isNumber() }
    .map { it.toInt() } // â‘£
    .toMutableList()
    .apply {
        leftList
            .filter { it.isNumber() }
            .map { it.toInt().times(-1) } // â‘¤
            .let { addAll(it) } 
    }.sum() // â‘¥
    .let { rightSum = it }

// è¿”å›ç»“æœ
return when {
    leftSum == 0 && rightSum == 0 -> "Infinite solutions"
    leftSum == 0 && rightSum != 0 -> "No solution"
    else -> "x=${rightSum / leftSum}" // â‘¦
}
```

ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œä¸€å…±æœ‰6ä¸ªæ³¨é‡Šï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªçœ‹ï¼š

- æ³¨é‡Šâ‘ ï¼Œæˆ‘ä»¬æå–å‡ºäº†å·¦è¾¹å¼å­é‡Œæ‰€æœ‰xçš„ç³»æ•°ï¼Œè¿™é‡Œä¸éœ€è¦ç§»é¡¹ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±åœ¨å·¦è¾¹ã€‚
- æ³¨é‡Šâ‘¡ï¼Œæˆ‘ä»¬æå–äº†å³è¾¹å¼å­é‡Œæ‰€æœ‰xçš„ç³»æ•°ï¼Œç”±äºè¿™é‡Œæ¶‰åŠåˆ°ç§»é¡¹ï¼Œå› æ­¤éœ€è¦å˜å·ï¼Œè¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¹˜ä»¥ä¸€ä¸ªâ€œ-1â€æ¥å®ç°çš„ã€‚
- æ³¨é‡Šâ‘¢ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰xçš„ç³»æ•°åˆå¹¶åˆ°äº†ä¸€èµ·ï¼Œå¾—åˆ°äº†å·¦è¾¹xçš„ç³»æ•°ä¹‹å’Œã€‚
- æ³¨é‡Šâ‘£ï¼Œæˆ‘ä»¬æ”¶é›†äº†å³è¾¹å¼å­é‡Œæ‰€æœ‰çš„æ•°å­—ï¼Œè¿™é‡Œä¹Ÿä¸éœ€è¦ç§»é¡¹ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±åœ¨å³è¾¹ã€‚
- æ³¨é‡Šâ‘¤ï¼Œæˆ‘ä»¬æ”¶é›†äº†å·¦è¾¹å¼å­é‡Œæ‰€æœ‰çš„æ•°å­—ï¼Œè¿™é‡Œè¦ç§»é¡¹ï¼Œæ‰€ä»¥è¦å˜å·ã€‚
- æ³¨é‡Šâ‘¥ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰æ•°å­—æ±‚å’Œäº†ã€‚
- æ³¨é‡Šâ‘¦ï¼Œå¦‚æœæ–¹ç¨‹æœ‰è§£çš„è¯ï¼Œæˆ‘ä»¬é€šè¿‡â€œrightSum / leftSumâ€å°±å¯ä»¥è®¡ç®—å‡ºæ¥äº†ã€‚

å¦å¤–ï¼Œä»¥ä¸Šä»£ç å…¶å®è¿˜æ¶‰åŠåˆ°ä¸‰ä¸ªè¾…åŠ©çš„å‡½æ•°ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å®ç°ï¼Œå®ƒä»¬çš„é€»è¾‘éƒ½å¾ˆç®€å•ï¼š

```plain
private fun String.isNumber(): Boolean =
    this != "" && !this.contains("x")

private fun String.hasX(): Boolean =
    this != "" && this.contains("x")

// æå–xçš„ç³»æ•°ï¼šâ€œ-2xâ€ ->â€œ-2â€
private fun xToInt(x: String) =
    when (x) {
        "x" -> 1
        "-x" -> -1
        else -> x.replace("x", "").toInt()
    }
```

xToInt()è¿™ä¸ªå‡½æ•°å’Œä¹‹å‰çš„é€»è¾‘æ˜¯ç›¸ä¼¼çš„ï¼ŒisNumber()å’ŒhasX()è¿™ä¸¤ä¸ªæ‰©å±•å‡½æ•°ï¼Œå®ƒä»¬æ˜¯ç”¨æ¥åˆ¤æ–­å¼å­æ˜¯çº¯æ•°å­—ã€è¿˜æ˜¯å«æœ‰xçš„ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¦æŠŠxæ”¾åˆ°ç­‰å¼å·¦è¾¹ï¼Œè€Œæ•°å­—è¦æ”¾åˆ°ç­‰å¼å³è¾¹ã€‚

æœ€åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ•´ä½“çš„ä»£ç ï¼š

```plain
fun solveEquation(equation: String): String {
    val leftSum: Int
    val rightSum: Int

    val list = equation
        .replace("-", "+-") // é¢„å¤„ç†æ•°æ®
        .split("=")

    val leftList = list[0].split("+")
    val rightList = list[1].split("+")

    // æ±‚å‡ºæ‰€æœ‰xçš„ç³»æ•°ä¹‹å’Œ
    leftList
        .filter { it.hasX() }
        .map { xToInt(it) }
        .toMutableList()
        .apply {
            rightList
                .filter { it.hasX() }
                .map { xToInt(it).times(-1) }
                .let { addAll(it) }
        }.sum()
        .let { leftSum = it }

    // æ±‚å‡ºæ‰€æœ‰æ•°å­—ä¹‹å’Œ
    rightList
        .filter { it.isNumber() }
        .map { it.toInt() }
        .toMutableList()
        .apply {
            leftList
                .filter { it.isNumber() }
                .map { it.toInt().times(-1) }
                .let { addAll(it) }
        }.sum()
        .let { rightSum = it }

    // è¿”å›ç»“æœ
    return when {
        leftSum == 0 && rightSum == 0 -> "Infinite solutions"
        leftSum == 0 && rightSum != 0 -> "No solution"
        else -> "x=${rightSum / leftSum}"
    }
}

private fun String.isNumber(): Boolean =
    this != "" && !this.contains("x")

private fun String.hasX(): Boolean =
    this != "" && this.contains("x")

// æå–xçš„ç³»æ•°ï¼šâ€œ-2xâ€ ->â€œ-2â€
private fun xToInt(x: String) =
    when (x) {
        "x" -> 1
        "-x" -> -1
        else -> x.replace("x", "").toInt()
    }
```

## å°ç»“

è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬ç”¨ä¸¤ç§æ–¹å¼å®ç°äº†[LeetCodeçš„640å·é¢˜ã€Šæ±‚è§£æ–¹ç¨‹ã€‹](https://leetcode-cn.com/problems/solve-the-equation/)ã€‚è¿™ä¸¤ç§è§£æ³•çš„æ ¸å¿ƒæ€è·¯å…¶å®æ˜¯ä¸€è‡´çš„ï¼Œä¸è¿‡å‰è€…æ˜¯åå‘½ä»¤å¼çš„ï¼Œåè€…æ˜¯åå‡½æ•°å¼çš„ã€‚è€Œä½ è¦æ¸…æ¥šï¼Œå³ä½¿å®ƒä»¬æ˜¯ç”¨çš„ä¸€ç§æ€è·¯ï¼Œä¹Ÿä»ç„¶æ˜¯å„æœ‰ä¼˜åŠ£çš„ã€‚

- è§£æ³•ä¸€ï¼Œå‘½ä»¤å¼çš„ä»£ç ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦è¦ç¨å¾®å¥½ä¸€äº›ï¼Œä½†æ€»ä½“å·®è·ä¸å¤§ï¼Œæ‰€ä»¥ä¸ä¸€å®šèƒ½ä½“ç°å‡ºè¿è¡Œæ—¶çš„å·®å¼‚ã€‚è¿™ç§æ–¹å¼çš„åŠ£åŠ¿åœ¨äºï¼Œé€»è¾‘ç›¸å¯¹å¤æ‚ï¼Œå¯è¯»æ€§ç¨å·®ï¼Œä¸”ç¼–ç è¿‡ç¨‹ä¸­å®¹æ˜“å‡ºé”™ã€‚
- è§£æ³•äºŒï¼Œåå‡½æ•°å¼çš„ä»£ç ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºï¼Œä»£ç é€»è¾‘ç›¸å¯¹æ¸…æ™°ï¼Œå¹¶ä¸”ï¼Œç”±äºè¿ç”¨äº†å¤§é‡Kotlinåº“å‡½æ•°ï¼Œæ²¡é‚£ä¹ˆå®¹æ˜“å‡ºé”™ã€‚

## å°ä½œä¸š

å¥½ï¼Œæœ€åï¼Œæˆ‘è¿˜æ˜¯ç»™ä½ ç•™ä¸€ä¸ªå°ä½œä¸šï¼Œè¯·ä½ ç”¨Kotlinæ¥å®Œæˆ [LeetCodeçš„592å·é¢˜ã€Šåˆ†æ•°åŠ å‡è¿ç®—ã€‹](https://leetcode-cn.com/problems/fraction-addition-and-subtraction/)ï¼Œä¸‹èŠ‚è¯¾æˆ‘ä¹Ÿä¼šç»™å‡ºæˆ‘çš„ç­”æ¡ˆã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ6ï¼‰</strong></div><ul>
<li><span>qinsi</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å°è¯•ç”¨æ­£åˆ™åˆ†å‰²

```kotlin
&#47;&#47; æ ¹æ®â€œ+â€ã€â€œ-â€åˆ†å‰²å¼å­
private fun splitByOperator(list: String) =
    list.split(Regex(&quot;(?=[+-])&quot;)).filter { it.isNotEmpty() }
```

æˆ–è€…

```kotlin
&#47;&#47; æ ¹æ®â€œ+â€ã€â€œ-â€åˆ†å‰²å¼å­
private fun splitByOperator(list: String): Sequence&lt;String&gt; =
    Regex(&quot;&quot;&quot;[+-]?(\d*x|\d+)&quot;&quot;&quot;).findAll(list).map { it.value }
```
</p>2022-02-02</li><br/><li><span>éƒ‘å³°</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>```Kotlin
fun fractionAddition(expression: String): String {
  &#47;&#47; Split the expression to several pairs of numerator and denominator
  val numbers = expression
    .replace(&quot;-&quot;, &quot;+-&quot;)
    .split(&quot;+&quot;)
    .filter { it.isNotEmpty() }
    .map { it.split(&quot;&#47;&quot;).take(2).map(String::toInt) }

  &#47;&#47; Calculate the lcm of all denominators
  val rawDenominator = numbers.map { it[1] }.fold(1) { x, y -&gt; lcm(x, y) }
  &#47;&#47; Calculate the sum of all numerators
  val rawNumerator = numbers.sumOf { it[0] * rawDenominator &#47; it[1] }

  &#47;&#47; Reformat numerator and denominator through their gcd
  val gcd = abs(gcd(rawNumerator, rawDenominator))
  val denominator = rawDenominator &#47; gcd
  val numerator = rawNumerator &#47; gcd
  return &quot;$numerator&#47;$denominator&quot;
}

fun gcd(x: Int, y: Int): Int = if (y == 0) x else gcd(y, x % y)
fun lcm(x: Int, y: Int): Int = x * y &#47; gcd(x, y)
```</p>2022-02-02</li><br/><li><span>ç™½ä¹¾æ¶›</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>fun solveEquation(equation: String): String { &#47;&#47; x+5-3+2x=6+x-2
    var xCount = 0   &#47;&#47; ç§»åˆ°å·¦è¾¹çš„ x ç³»æ•°ä¹‹å’Œ
    var addValue = 0 &#47;&#47; ç§»åˆ°å³è¾¹çš„æ•°å­—ä¹‹å’Œ
    val equalIndex = equation.indexOf(&#39;=&#39;) &#47;&#47; ç­‰å·çš„ä½ç½®
    var i = 0
    while (i &lt; equation.length) {
        val fromIndex = i
        if (i == 0) {
            i++
        }
        for (j in i until equation.length) {
            val c: Char = equation[j]
            if (c == &#39;+&#39; || c == &#39;-&#39; || c == &#39;=&#39;) {
                break
            }
            i++
        }
        var subString = equation.substring(if (fromIndex == 0) fromIndex else fromIndex - 1, i)
        subString = if (subString.startsWith(&quot;=&quot;)) subString.substring(1) else subString
        println(&quot;å€¼ä¸ºï¼š$subString&quot;)
        if (subString.endsWith(&quot;x&quot;)) {
            subString = subString.substring(0, subString.length - 1)
            val tempCount = if (subString.isEmpty()) 1 &#47;&#47; x
            else {
                if (subString.length == 1 &amp;&amp; (subString.startsWith(&quot;+&quot;) || subString.startsWith(&quot;-&quot;))) { &#47;&#47; +x æˆ– -x
                    if (subString[0] == &#39;+&#39;) 1 else -1
                } else subString.toInt() &#47;&#47; +5x æˆ– 5x æˆ– 53x æˆ– -2x
            }
            xCount = if (i &gt; equalIndex) xCount - tempCount else xCount + tempCount &#47;&#47; å·¦æ­£å³è´Ÿ
        } else if (subString.isNotEmpty()) { &#47;&#47; è¿‡æ»¤æ‰ = äº§ç”Ÿçš„ä¸€ä¸ªç©ºå­—ç¬¦ä¸²
            val tempValue = subString.toInt()
            addValue = if (i &gt; equalIndex) addValue + tempValue else addValue - tempValue &#47;&#47; å·¦è´Ÿå³æ­£
        }
        i++
    }
    println(&quot;ç»“æœï¼š${xCount}x = $addValue&quot;)
    return if (xCount == 0) if (addValue == 0) &quot;Infinite solutions&quot; else &quot;No solution&quot;
    else &quot;x=&quot; + addValue &#47; xCount
}</p>2022-03-02</li><br/><li><span>Geek_Adr</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ç¬¦å·å¤„ç†å¤æ‚äº†ï¼Œå…¶å®ƒä¸ @éƒ‘å³° ç•¥åŒ
    &#47;&#47; åˆ†æ•°çš„æ•°æ®ç»“æ„ symbolä¸º-1 1
    &#47;&#47; æ³¨æ„åˆ†å­&#47;åˆ†æ¯ä¸ºæ­£æ•´æ•°
    data class Fraction(val numerator: Int, val denominator: Int, val symbol: Int)
    fun fractionAddition(expression: String): String {
        return expression.replace(&quot;-&quot;, &quot;+-&quot;) &#47;&#47; &quot;-&quot;å‰å¢åŠ +ï¼Œæ–¹ä¾¿splitå¤„ç†
            .split(&quot;+&quot;) &#47;&#47; æŒ‰&quot;+&quot;åˆ†éš”
            .filter { it.isNotBlank() } &#47;&#47; å»æ‰å¯èƒ½ä¸ºç©ºçš„éƒ¨åˆ†
            .map { &#47;&#47; å¤„ç†æˆåˆ†æ•°å®ä¾‹
                var symbol = if (it.startsWith(&quot;-&quot;)) -1 else 1
                val ss = it.replace(&quot;-&quot;, &quot;&quot;).split(&quot;&#47;&quot;)
                Fraction(ss[0].toInt(), ss[1].toInt(), symbol)
            }.run {
                &#47;&#47; ç®—å‡ºåˆ†æ¯çš„æœ€å°å…¬å€æ•°ï¼Œä½œä¸ºåˆ†æ¯
                val denominator = map { it.denominator }.reduce { a, b -&gt; lcm(a, b) }
                &#47;&#47; æŒ‰æœ€å°å…¬å€æ•°è®¡ç®—åˆ†å­ç»“æœ
                var numerator = map { it.symbol * it.numerator * denominator &#47; it.denominator }.reduce { a, b -&gt; a + b }
                val symbol = if (numerator &lt; 0) -1 else 1
                numerator *= symbol &#47;&#47; è½¬æ­£
                val gcd = gcd(numerator, denominator) &#47;&#47; ç»“æœå¯èƒ½å¯çº¦åˆ†
                Fraction(numerator &#47; gcd, denominator &#47; gcd, symbol)
            }.run { &quot;${if (symbol &lt; 0) &quot;-&quot; else &quot;&quot;}${numerator}&#47;${denominator}&quot; }

    }

    &#47;&#47; æœ€å°å…¬å€æ•°
    private fun lcm(m: Int, n: Int): Int {
        return m * n &#47; gcd(m, n)
    }

    &#47;&#47; æœ€å¤§å…¬çº¦æ•°
    private fun gcd(m: Int, n: Int): Int {
        return if (m % n == 0) n else gcd(n, m % n)
    }
</p>2022-02-20</li><br/><li><span>Dash</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>```kotlin
class Solution {
        fun solveEquation(equation: String): String {
            val (left, right) = equation.replace(&quot;-&quot;, &quot;+-&quot;)
                .split(&quot;=&quot;)
                .map { it.split(&quot;+&quot;) }
                .map { list -&gt; list.filter { it.isNotBlank() } }

            fun sumX(str: List&lt;String&gt;): Int = str.filter { it.contains(&quot;x&quot;) }
                .sumOf {
                    when (it) {
                        &quot;x&quot; -&gt; 1
                        &quot;-x&quot; -&gt; -1
                        else -&gt; it.substringBefore(&quot;x&quot;).toInt()
                    }
                }

            fun sumNum(str: List&lt;String&gt;): Int = str.filter { !it.contains(&quot;x&quot;) }
                .sumOf { it.toInt() }

            val x = sumX(left) - sumX(right)
            val num = sumNum(right) - sumNum(left)
            return when {
                x == 0 &amp;&amp; num == 0 -&gt; &quot;Infinite solutions&quot;
                x == 0 || num % x != 0 -&gt; &quot;No solution&quot;
                else -&gt; &quot;x=${num &#47; x}&quot;
            }
        }
    }
```</p>2025-01-22</li><br/><li><span>æ˜¥å¤ç§‹å†¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>class Solution {
    fun solveEquation(equation: String): String =
        equation.split(&quot;=&quot;)
            .map(this::statistics)
            .calculate()


    private fun statistics(expr: String): Pair&lt;Int, Int&gt; =
        expr.replace(&quot;-&quot;, &quot;+-&quot;)
            .split(&quot;+&quot;)
            .fold(Pair(0, 0)) { ans, s -&gt;
                if (s.contains(&quot;x&quot;)) {
                    ans.copy(first = ans.first + s.substring(0, s.length-1).toValue())
                } else {
                    ans.copy(second = ans.second + if (s.isEmpty()) { 0 } else {s.toValue()})
                }
            }

    private fun String.toValue(): Int =
        when(this) {
            &quot;&quot; -&gt; 1
            &quot;-&quot; -&gt; -1
            else -&gt; this.toInt()
        }

    private fun List&lt;Pair&lt;Int,Int&gt;&gt;.calculate(): String {
        val left = this[0]
        val right = this[1]
        return if (left.first == right.first) {
            if (left.second == right.second) &quot;Infinite solutions&quot;
            else &quot;No solution&quot;
        } else {
            val x = left.first - right.first
            val v = right.second - left.second
            &quot;x=${v &#47; x}&quot;
        }
    }
}</p>2022-11-05</li><br/>
</ul>