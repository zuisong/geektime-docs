ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ¶›ã€‚ä»Šå¤©æ˜¯åˆå››äº†ï¼Œåœ¨è¿‡å¹´çš„èŠ‚æ—¥æ°›å›´é‡Œä½ è¿˜èƒ½æ¥åšæŒå­¦ä¹ ï¼Œè¿™é‡Œä¹Ÿè·Ÿä¼˜ç§€çš„ä½ è¯´å£°æ„Ÿè°¢ã€‚

åœ¨ä¸ŠèŠ‚è¯¾é‡Œå‘¢ï¼Œæˆ‘ç»™ä½ ç•™äº†ä¸€ä¸ªä½œä¸šï¼šç”¨Kotlinæ¥å®Œæˆ [LeetCodeçš„592å·é¢˜ã€Šåˆ†æ•°åŠ å‡è¿ç®—ã€‹](https://leetcode-cn.com/problems/fraction-addition-and-subtraction/)ã€‚é‚£ä¹ˆä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹çœ‹å®ƒçš„è§£é¢˜æ€è·¯å§ã€‚

è¿™å…¶å®ä¹Ÿæ˜¯ä¸€é“å…¸å‹çš„æ¨¡æ‹Ÿé¢˜ï¼Œåˆ†å¼çš„åŠ å‡æ³•è¿™æ ·çš„é¢˜ç›®ï¼Œæˆ‘ä»¬å°å­¦å°±çŸ¥é“æ€ä¹ˆåšäº†ï¼Œæ ¸å¿ƒè§£é¢˜æ€è·¯ä¸»è¦æ˜¯è¿™å‡ æ­¥ï¼š

- ç¬¬ä¸€æ­¥ï¼Œæ±‚å‡ºåˆ†æ¯çš„**æœ€å°å…¬å€æ•°**ã€‚æ¯”å¦‚ï¼Œ2å’Œ3çš„æœ€å°å…¬å€æ•°å°±æ˜¯6ã€‚
- ç¬¬äºŒæ­¥ï¼Œæ ¹æ®è®¡ç®—å‡ºæ¥çš„æœ€å°å…¬å€æ•°ï¼Œå°†åˆ†æ•°è¿›è¡Œ**é€šåˆ†**ã€‚ä¸¾ä¸ªä¾‹å­ï¼šâ€œ1/2-1/6â€ï¼Œå¦‚æœæŠŠå®ƒä»¬ä¸¤ä¸ªé€šåˆ†ï¼Œå°±ä¼šå˜æˆâ€œ3/6-1/6â€ã€‚
- ç¬¬ä¸‰æ­¥ï¼Œå°†**åˆ†å­è¿›è¡ŒåŠ å‡æ³•**ï¼Œè®¡ç®—å‡ºåˆ†å­çš„ç»“æœã€‚æ¯”å¦‚ï¼Œâ€œ3/6-1/6â€è®¡ç®—è¿‡åï¼Œå°±ä¼šå˜æˆâ€œ2/6â€ã€‚
- æœ€åä¸€æ­¥ï¼Œå°†è®¡ç®—ç»“æœè½¬æ¢æˆâ€œ**æœ€ç®€åˆ†æ•°**â€ï¼Œæ¯”å¦‚â€œ2/6â€åŒ–æˆæœ€ç®€åˆ†æ•°ä»¥åï¼Œåº”è¯¥æ˜¯â€œ1/3â€ã€‚

ç»è¿‡è¿™å››ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å‡ºâ€œ1/2-1/6=1/3â€ã€‚ä¸è¿‡å‘¢ï¼Œè¿™é“é¢˜é‡Œï¼Œæˆ‘ä»¬é™¤äº†è¦è®¡ç®—åˆ†æ•°çš„åŠ å‡æ³•ä»¥å¤–ï¼Œè¿˜è¦å…ˆå®Œæˆåˆ†æ•°çš„è§£æã€‚ç¨‹åºçš„è¾“å…¥æ˜¯å­—ç¬¦ä¸²â€œ1/2-1/6â€ï¼Œä½†å®ƒæ˜¯ä¸ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è§£æçš„ï¼Œæ‰€ä»¥ï¼Œè§£æè¿™ä¸€æ­¥ä¹Ÿéœ€è¦æˆ‘ä»¬æ¥åšã€‚

æ‰€ä»¥ï¼Œè‡ªç„¶è€Œç„¶åœ°ï¼Œæˆ‘ä»¬å°±ä¼šå®šä¹‰ä¸€ä¸ªåˆ†æ•°çš„**æ•°æ®ç±»Expression**ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ7ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg" width="30px"><span>ç™½ä¹¾æ¶›</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¥½ï¼Œæˆ‘å¯¹æ–¹æ³•äºŒåˆåšäº†ä¸€äº›ä¿®æ”¹ï¼Œä¸»è¦æ˜¯å°†ä¸€å †ä¸´æ—¶æ–¹æ³•å»æ‰äº†ï¼Œè€å¸ˆå¸®å¿™çœ‹çœ‹è¿™ç§æ€ç»´åˆä¸åˆé€‚

fun fractionAddition(expression: String): String {
    var lcm: Int &#47;&#47; åˆ†æ¯çš„æœ€å°å…¬å€æ•°
    val addValue = expression.replace(&quot;-&quot;, &quot;+-&quot;) &#47;&#47; åˆ†å­åŠ å‡è¿ç®—çš„ç»“æœ
        .split(&quot;+&quot;)
        .filter { it.trim() != &quot;&quot; }
        .map { Expression(it) } &#47;&#47; å°† String é›†åˆè½¬æ¢ä¸º Expression é›†åˆ
        .also { list -&gt; lcm = list.map { it.denominator }.reduce(::lcm) } &#47;&#47; æœ€å°å…¬å€æ•° â‘ 
        .map { it.numerator * lcm &#47; it.denominator } &#47;&#47; åˆ†å­é€šåˆ†
        .reduce { a, b -&gt; a + b } &#47;&#47;å°†æ‰€æœ‰çš„åˆ†å­ç›¸åŠ 
    val gcd = gcd(abs(addValue), lcm) &#47;&#47; åˆ†å­å’Œåˆ†æ¯çš„æœ€å¤§å…¬çº¦æ•°

    println(&quot;$lcm $addValue $gcd&quot;)
    return &quot;${addValue &#47; gcd}&#47;${lcm &#47; gcd}&quot; &#47;&#47; ç®€åŒ–åˆ†æ•°
}

data class Expression(val exp: String, var numerator: Int = 0, var denominator: Int = 1) {
    init {
        exp.trim()
            .split(&quot;&#47;&quot;)
            .takeIf { it.size == 2 }
            ?.let { numerator = it[0].toInt(); denominator = it[1].toInt() }
    }
}</div>2022-03-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg" width="30px"><span>ç™½ä¹¾æ¶›</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ„Ÿè§‰ç”¨kotlinåˆ·é¢˜æ„ä¹‰ä¸å¤§ï¼Œå› ä¸ºkotlinæ–°å¢çš„é‚£ä¹ˆå¤šè¯­æ³•ã€ç‰¹æ€§ï¼Œä»¥åŠåç¨‹ï¼Œéƒ½ç”¨ä¸ä¸Šï¼Œè¿™æ ·å­çš„kotlinæ²¡å•¥ä¼˜åŠ¿</div>2022-03-03</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Urc67zDC8R6dh9U1ZFTF36icXewM1seehvOUYUs4hyWSsFzS5WQc2RcrE1Mzs8qtgib5SM5wFrVh22QcQd0JUUBw/132" width="30px"><span>jim</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æœ±æ¶›è€å¸ˆï¼Œè¿™ä¸ªç³»åˆ—å¯ä»¥å•ç‹¬å¼€ä¸€ä¸ªè¯¾ç¨‹ï¼Œéå¸¸æœŸå¾…</div>2022-02-07</li><br/><li><img src="" width="30px"><span>Dash</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>```kotlin
class Solution {
        &#47;&#47; æ±‚æœ€å¤§å…¬çº¦æ•°
        private fun gcd(a: Int, b: Int): Int = if (b == 0) a else gcd(b, a % b)

        &#47;&#47; æ±‚æœ€å°å…¬å€æ•°
        private fun lcm(a: Int, b: Int): Int = a * b &#47; gcd(a, b)

        fun fractionAddition(expression: String): String {
            val list = expression.replace(&quot;-&quot;, &quot;+-&quot;)
                .split(&quot;+&quot;)
                .filter { it.isNotBlank() }
                .map { str -&gt;
                    val (up, down) = str.split(&quot;&#47;&quot;)
                        .map { it.toInt() }
                    up to down
                }

            val lcmDown = list.fold(1) { acc, i -&gt; lcm(acc, i.second) }

            val sumUp = list.sumOf { it.first * (lcmDown &#47; it.second) }

            val gcd = gcd(abs(sumUp), lcmDown)

            val isPositive = if (sumUp * lcmDown &gt;= 0) &quot;&quot; else &quot;-&quot;

            return &quot;$isPositive${abs(sumUp &#47; gcd)}&#47;${abs(lcmDown &#47; gcd)}&quot;
        }
    }
```</div>2025-01-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/39/07/d6/f0660f97.jpg" width="30px"><span>æŸæ‹‰å›¾å¼çš„é»‘æ´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>fun fractionAddition(expression: String): String = 
    expression
        .replace(&quot;-&quot;, &quot;+-&quot;) 
        .split(&quot;+&quot;) .filter { it.trim() != &quot;&quot; }
        .map(::parseExpression) 
        .reduce(::calculateExp)
        .reducedFraction() &#47;&#47; æ–¹æ³•ä¸‰é‡Œçš„è¿™ä¸ªè°ƒç”¨, æ˜¯ä¸æ˜¯å¯ä»¥åˆ äº†? å› ä¸º calculateExp é‡Œå·²ç»å¤„ç†è¿‡äº†
        .toString()</div>2024-05-13</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEJnF5tgIt5bqic1yZicKTicoZp8XxHK06gMcibJZ0F2YoTXEhicxILZIAlJrMicWQicBeyMGyzSdZhLBXxmg/132" width="30px"><span>Geek_473933</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>fun fractionAddition(expression: String): String {
    var lcm: Int
    return expression
        .replace(&quot;-&quot;, &quot;+-&quot;)
        .split(&quot;+&quot;)
        .filter { it.isNotBlank() }
        .map {
            it.split(&quot;&#47;&quot;).let { list -&gt;
                list[0].toInt() to list[1].toInt()
            }
        }.also { list -&gt;
            lcm = list.map { it.second }.reduce(::lcm)
        }.sumOf {
            it.first * lcm &#47; it.second
        }.let {
            val gcd = gcd(abs(it), lcm)
            val pair = it &#47; gcd to lcm &#47; gcd
            &quot;${pair.first}&#47;${pair.second}&quot;
        }
}

&#47;&#47;æœ€å°å…¬å€æ•°
fun lcm(x: Int, y: Int): Int = x * y &#47; gcd(x, y)

&#47;&#47;æœ€å¤§å…¬çº¦æ•°
fun gcd(x: Int, y: Int): Int = if (y == 0) x else gcd(y, x % y)</div>2023-01-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/82/fa/7e5f7a0a.jpg" width="30px"><span>æ˜¥å¤ç§‹å†¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>class Solution {
    fun fractionAddition(expression: String): String  =
        expression.replace(&quot;-&quot;, &quot;+-&quot;)
            .split(&quot;+&quot;).filter { it.isNotEmpty() }
            .map(this::toPair)
            .fold(Pair(0, 1), this::sum)
            .string()

    private fun toPair(expr: String): Pair&lt;Int, Int&gt; =
        expr.split(&quot;&#47;&quot;).let {
            Pair(it[0].toInt(), it[1].toInt())
        }

    private fun sum(a: Pair&lt;Int, Int&gt;, b: Pair&lt;Int, Int&gt;): Pair&lt;Int,Int&gt; =
        lsm(a.second, b.second).let {
            Pair(
                it&#47;a.second * a.first + it&#47;b.second * b.first,
                it
            )
        }.small()

    private fun gcd(a: Int, b: Int): Int =
        if (a % b == 0) b else gcd(b, a % b)

    private fun lsm(a: Int, b: Int): Int = a * b &#47;gcd(a, b)

    private fun Pair&lt;Int, Int&gt;.small() =
        gcd(this.first, this.second).let {
            val abs = abs(it)
            Pair(this.first &#47; abs, this.second &#47; abs)
        }

    private fun Pair&lt;Int, Int&gt;.string() = &quot;${this.first}&#47;${this.second}&quot;
}</div>2022-11-05</li><br/>
</ul>