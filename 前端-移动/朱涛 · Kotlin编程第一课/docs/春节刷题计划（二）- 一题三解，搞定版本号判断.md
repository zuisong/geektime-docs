ä½ å¥½ï¼Œæˆ‘æ˜¯æœ±æ¶›ã€‚ä»Šå¤©æ˜¯é™¤å¤•å¤œï¼Œå…ˆç¥ä½ è™å¹´æ˜¥èŠ‚å¿«ä¹ï¼

åœ¨ä¸ŠèŠ‚åˆ·é¢˜è¯¾ä¸­ï¼Œæˆ‘ç»™ä½ ç•™äº†ä¸€ä¸ªä½œä¸šï¼Œé‚£å°±æ˜¯ï¼šç”¨Kotlinæ¥å®Œæˆ [LeetCodeçš„165å·é¢˜ã€Šç‰ˆæœ¬å·åˆ¤æ–­ã€‹](https://leetcode-cn.com/problems/compare-version-numbers/)ã€‚é‚£ä¹ˆä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘å°±æ¥è®²è®²æˆ‘çš„è§£é¢˜æ€è·¯ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘ã€‚

è¿™é“é¢˜ç›®å…¶å®è·Ÿæˆ‘ä»¬å¹³æ—¶çš„å·¥ä½œæ¯æ¯ç›¸å…³ã€‚ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ä»£è¡¨çš„ç‰ˆæœ¬å·ï¼Œéœ€è¦ä½ åˆ¤æ–­å“ªä¸ªç‰ˆæœ¬å·æ˜¯æ–°çš„ï¼Œå“ªä¸ªç‰ˆæœ¬å·æ˜¯æ—§çš„ã€‚æ¯”å¦‚ï¼Œ2.0ä¸1.0å¯¹æ¯”çš„è¯ï¼Œ2.0è‚¯å®šæ˜¯æ–°ç‰ˆæœ¬ï¼Œ1.0è‚¯å®šæ˜¯æ—§ç‰ˆæœ¬ã€‚å¯¹å§ï¼Ÿ

ä¸è¿‡ï¼Œè¿™é‡Œé¢è¿˜æœ‰ä¸€äº›é—®é¢˜éœ€è¦ç•™æ„ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘ä»¬åœ¨æ­£å¼å†™ä»£ç ä¹‹å‰è¦å¼„æ¸…æ¥šçš„ã€‚

- é¦–å…ˆï¼Œç‰ˆæœ¬å·æ˜¯å¯èƒ½ä»¥0å¼€å¤´çš„ã€‚æ¯”å¦‚0.1ã€1.01ï¼Œè¿™äº›éƒ½æ˜¯åˆç†çš„ç‰ˆæœ¬å·ã€‚
- å¦å¤–ï¼Œå¦‚æœæ˜¯ä»¥0å¼€å¤´çš„è¯ï¼Œ1ä¸ª0å’Œå¤šä¸ª0ï¼Œå®ƒä»¬æ˜¯ç­‰ä»·çš„ï¼Œæ¯”å¦‚1.01ã€1.001ã€1.00001ä¹‹é—´å°±æ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™å‡ ä¸ªç‰ˆæœ¬å·å…¶å®æ˜¯ç›¸ç­‰çš„ã€‚
- è¿˜æœ‰ï¼Œ1.0ã€1.0.0ã€1.0.0.0å®ƒä»¬ä¹‹é—´ä¹Ÿæ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™å‡ ä¸ªç‰ˆæœ¬å·ä¹Ÿæ˜¯ç›¸ç­‰çš„ã€‚

## æ€è·¯ä¸€

å¥½äº†ï¼Œç†è§£äº†é¢˜æ„ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™ä»£ç äº†ï¼ŒLeetCodeä¸Šé¢ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¾…å®ç°çš„æ–¹æ³•ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š

```plain
fun compareVersion(version1: String, version2: String): Int {
    // å¾…å®Œå–„
}
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ8ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ–¹æ³•ä¸‰æœ‰ç‚¹ä¸€è¨€éš¾å°½å§...

å°è¯•å†™ä¸€ä¸ªpythonçš„ç‰ˆæœ¬ï¼š

```python
class Solution:
    def compareVersion(self, ver1: str, ver2: str) -&gt; int:
        to_nums = lambda ver: map(int, ver.split(&#39;.&#39;))
        zipped = zip_longest(*map(to_nums, [ver1, ver2]), fillvalue=0)
        cmp = lambda a, b: (a &gt; b) - (a &lt; b) 
        return next((i for i in starmap(cmp, zipped) if i != 0), 0)
        # return next(filter(lambda x: x != 0, starmap(cmp, zipped)), 0)
```

æ–‡ä¸­çš„zipLongestå®ç°æ¥å—Iterable&lt;String&gt;ï¼Œè¿”å›List&lt;Pair&lt;Int, Int&gt;&gt;ã€‚è¿™æ„å‘³ï¼š

1. è¾“å…¥æ˜¯Iterableï¼Œè¾“å‡ºæˆäº†Listã€‚è¿™æ ·å°±ä¸é€‚ç”¨äºè¾“å…¥é•¿åº¦æ— é™çš„æƒ…å†µï¼Œæˆ–æ˜¯å¯ä»¥æƒ°æ€§æ±‚å€¼çš„æƒ…å†µã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œå› ä¸ºåªè¦é‡åˆ°ç¬¬ä¸€ä¸ªä¸ç›¸åŒçš„å­ç‰ˆæœ¬å·å°±å¯ä»¥è¿”å›ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨ç”Ÿæˆå®Œæ•´çš„Listï¼Œæ­£å¥½æ˜¯å¯ä»¥åˆ©ç”¨æƒ°æ€§æ±‚å€¼çš„æƒ…å†µï¼›

2. è¾“å…¥Iterableçš„åŸºç±»å‹æ˜¯Stringï¼Œè¾“å‡ºPairçš„åŸºç±»å‹æ˜¯Intï¼Œè¿™å°±æŠŠç±»å‹è½¬æ¢å†™æ­»åœ¨äº†å®ç°é‡Œï¼Œè®©å®ç°å¤±å»äº†é€šç”¨æ€§ï¼Œå³ä¾¿æ²‰æ·€å‡ºæ¥å¯èƒ½ç”¨é€”ä¹Ÿæœ‰é™å§ï¼›

3. æ–‡ä¸­çš„å®ç°åªæ”¯æŒä¸€ä¸ªIterableä¸å¦ä¸€ä¸ªIterableè¿›è¡Œzipï¼Œè€Œpythonçš„å®ç°æ”¯æŒä»»æ„å¤šä¸ªã€‚

è¿™é‡Œä¸æ˜¯è¦æŠ¬æ ï¼Œåªæ˜¯æƒ³è¯´å„ç§è¯­è¨€çš„ä¸åŒç‰¹æ€§ä¼šå½¢æˆä¸åŒçš„æƒ¯ç”¨æ³•ï¼Œå¼ºè¡Œä½¿ç”¨å¦ä¸€ç§è¯­è¨€çš„æƒ¯ç”¨æ³•å¯èƒ½ä¼šæ˜¾å¾—ä¸ä¼¦ä¸ç±»ã€‚å¦‚æœ‰å†’çŠ¯è¿˜è¯·è§è°…ã€‚</div>2022-01-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/5c/c5/1231d633.jpg" width="30px"><span>æ¢ä¸­å</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è¿™æ ·å†™ä¹Ÿç®—æ¯”è¾ƒç®€æ´æŠŠï¼š
 val list1 = version1.split(&quot;.&quot;)
        val list2 = version2.split(&quot;.&quot;)
        val result = list1.zip(list2) { v1, v2 -&gt; Pair(v1.toInt(), v2.toInt()) }
            .onEach {
                if (it.first != it.second) {
                   return it.first.compareTo(it.second)
                }
            }.run { return  list1.size - list2.size }</div>2022-03-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg" width="30px"><span>ç™½ä¹¾æ¶›</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å·¥ä½œä¸­è°æ•¢ç”¨æ–¹æ³•ä¸‰ï¼Œæˆ‘ä¿å‡†è®©ä»–é»˜å†™åéï¼</div>2022-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/71/c1/cbc55e06.jpg" width="30px"><span>ç™½ä¹¾æ¶›</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è§£æ³•äºŒç¨åŠ å°è£…äº†ä¸€ä¸‹

fun compareVersion(version1: String, version2: String): Int {
    val v1 = Version(0, 0, version1)
    val v2 = Version(0, 0, version2)

    while (v1.index &lt; version1.length || v2.index &lt; version2.length) {
        v1.dealVersion()
        v2.dealVersion()
        if (v1.subValue != v2.subValue) {
            return v1.subValue.compareTo(v2.subValue)
        }
    }
    return 0
}

data class Version(var index: Int, var subValue: Int, var text: String) {
    fun dealVersion(): Version {
        subValue = 0
        while (index &lt; text.length &amp;&amp; text[index] != &#39;.&#39;) {
            subValue = subValue * 10 + text[index].toInt() - &#39;0&#39;.toInt()
            index++
        }
        index++
        return this
    }
}</div>2022-03-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/e5/e1/a5064f88.jpg" width="30px"><span>Geek_Adr</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Solution {
    &#47;&#47; ax+b
    &#47;&#47; symbol å’Œ tmp éƒ½æ˜¯å¤„ç†è¡¨è¾¾å¼ä¸´æ—¶å˜é‡
    data class Expr(var a: Int, var b: Int, var symbol: Int, var tmp: String)

    fun solveEquation(equation: String): String {
        return equation
            .split(&quot;=&quot;)&#47;&#47; 1ã€åˆ†æˆå‰åä¸¤ä¸ªéƒ¨åˆ†
            .map {&#47;&#47; 2ã€å¤„ç†è¡¨è¾¾å¼ä¸º ax+b
                &quot;$it+&quot;&#47;&#47;éªšæ“ä½œåŠ &quot;+&quot;ï¼šé˜²æ­¢è¡¨è¾¾å¼æœ€åä¸€ç‚¹ä¸¢å¤±å¤„ç†
                    .fold(Expr(0, 0, 1, &quot;&quot;)) { acc, c -&gt;
                        when (c) {
                            &#39;+&#39;, &#39;-&#39; -&gt; {
                                if (acc.tmp.contains(&quot;x&quot;)) {
                                    acc.a += acc.symbol * acc.tmp.replace(&quot;x&quot;, &quot;&quot;).ifBlank { &quot;1&quot; }.toInt()
                                } else {
                                    acc.b += acc.symbol * acc.tmp.ifBlank { &quot;0&quot; }.toInt()
                                }
                                acc.symbol = if (c == &#39;+&#39;) 1 else -1
                                acc.tmp = &quot;&quot;
                            }
                            else -&gt; {
                                acc.tmp += c
                            }
                        }
                        acc
                    }

            }.reduce { acc, expr -&gt; &#47;&#47; 3ã€å‰æ®µ å‡ åæ®µ
                acc.a -= expr.a
                acc.b -= expr.b
                acc
            }.run {
                when {
                    a == 0 &amp;&amp; b != 0 -&gt; &quot;No solution&quot;
                    a == 0 -&gt; &quot;Infinite solutions&quot;
                    else -&gt; &quot;x=${-1 * b &#47; a}&quot;

                }
            }
    }
}
</div>2022-02-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/84/85/0a75ada7.jpg" width="30px"><span>è‹¹æœæ˜¯æˆ‘å’¬çš„</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>class Solution {
    fun solveEquation(equation: String): String {
        val eq = equation.replace(&quot;-&quot;, &quot;+-&quot;).split(&quot;=&quot;)
        val (lx, ln) = parse(eq[0])
        val (rx, rn) = parse(eq[1])
        val x = lx - rx
        val n = rn - ln
        return if (x == 0 &amp;&amp; n != 0) {
            &quot;No solution&quot;
        } else if (x == 0 &amp;&amp; n == 0) {
            &quot;Infinite solutions&quot;
        } else {
            &quot;x=${ n &#47; x }&quot;
        }
    }

    fun parse(eq: String): Pair&lt;Int, Int&gt; {
        val exp = eq.split(&quot;+&quot;)
        var (x, n) = 0 to 0
        exp.filter { !it.contains(&quot;x&quot;) &amp;&amp; it != &quot;&quot; }
            .forEach { n += it.toInt() }
        exp.filter { it.contains(&quot;x&quot;) }
            .forEach {
                x += if (it.length == 1 || it.length == 2 &amp;&amp; it[0] == &#39;-&#39;) it.replace(&quot;x&quot;, &quot;1&quot;).toInt()
                else it.replace(&quot;x&quot;, &quot;&quot;).toInt()
            }
        return x to n
    }
}</div>2022-02-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f9/c5/95b97dfa.jpg" width="30px"><span>éƒ‘å³°</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>```Kotlin

fun solveEquation(equation: String): String {
  val (left, right) = equation.split(&quot;=&quot;).take(2)
  val (lx, ln) = parse(left)
  val (rx, rn) = parse(right)
  if (lx == rx) return if (ln == rn) &quot;Infinite solutions&quot; else &quot;No solution&quot;
  if ((rn - ln) % (lx - rx) != 0) return &quot;No solution&quot;
  return &quot;x=&quot; + (rn - ln) &#47; (lx - rx)
}

@OptIn(ExperimentalStdlibApi::class)
fun parse(exp: String): Pair&lt;Int, Int&gt; {
  &#47;&#47; Split operands and operators
  val operands = exp.split(&quot;[+-]&quot;.toRegex())
  val operators = buildList&lt;Int&gt; {
    add(1) &#47;&#47; Add leading + to align with operands
    addAll(exp.filter { it == &#39;+&#39; || it == &#39;-&#39; }.map { if (it == &#39;+&#39;) 1 else -1 })
  }

  var (x, n) = 0 to 0

  &#47;&#47; Calculate x and n
  for (i in operands.indices) {
    if (operands[i].isEmpty()) continue
    if (operands[i].last() == &#39;x&#39;) {
      x += operators[i] * (operands[i].dropLast(1).toIntOrNull() ?: 1)
    } else {
      n += operators[i] * operands[i].toInt()
    }
  }

  return x to n
}

```</div>2022-02-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e9/02/1226d903.jpg" width="30px"><span>PP</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>fun solveEquation(equation: String) {
        var sumX = 0
        var numEq = 0
        equation.replace(&quot;-&quot;, &quot;+-&quot;).split(&#39;=&#39;).forEachIndexed { index, s -&gt;
            s.split(&#39;+&#39;).forEach {
                if (it.contains(&#39;x&#39;)) {
                    val count = if (it == &quot;x&quot;) 1 else it.removeSuffix(&quot;x&quot;).toInt()
                    sumX += if (index == 0) count else -count
                } else {
                    numEq += if (index == 0) -it.toInt() else it.toInt()
                }
            }
        }
        println(when {
            sumX == 0 -&gt; &quot;Infinite solutions&quot;
            numEq.mod(sumX) == 0 -&gt; &quot;x = ${numEq.div(sumX)}&quot;
            else -&gt; &quot;no solution&quot;
        })
    }</div>2023-07-27</li><br/>
</ul>