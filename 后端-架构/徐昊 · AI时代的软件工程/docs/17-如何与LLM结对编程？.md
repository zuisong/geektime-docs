ä½ å¥½ï¼Œæˆ‘æ˜¯å¾æ˜Šï¼Œä»Šå¤©æˆ‘ä»¬æ¥ç»§ç»­å­¦ä¹ AIæ—¶ä»£çš„è½¯ä»¶å·¥ç¨‹ã€‚

ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬ç³»ç»Ÿæ€§åœ°ä»‹ç»äº†ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLarge Language Modelï¼ŒLLMï¼‰è¾…åŠ©è½¯ä»¶å¼€å‘çš„æ€è·¯ï¼Œä¹Ÿå°±æ˜¯éµä»æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTest Driven Developmentï¼ŒTDDï¼‰çš„èŠ‚å¥ï¼Œå¹¶ä¸LLMç»“å¯¹ç¼–ç¨‹ï¼ˆPair Programmingï¼‰å®Œæˆéœ€æ±‚ã€‚

é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ€è·¯ï¼Œé‡æ–°åšä¸€éç¬¬15èŠ‚è¯¾çš„ä¾‹å­ï¼Œçœ‹çœ‹è¿™ä¸€æ¬¡æœ‰ä»€ä¹ˆä¸ä¸€æ ·ã€‚éœ€æ±‚å’Œä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼š

> æˆ‘ä»¬ä¸­çš„å¤§å¤šæ•°äººéƒ½ä¸å¾—ä¸æ—¶ä¸æ—¶åœ°è§£æä¸€ä¸‹å‘½ä»¤è¡Œå‚æ•°ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„å·¥å…·ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ç®€å•åœ°å¤„ç†ä¸€ä¸‹ä¼ å…¥mainå‡½æ•°çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚æœ‰å¾ˆå¤šå¼€æºå·¥å…·å¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œä½†å®ƒä»¬å¯èƒ½å¹¶ä¸èƒ½å®Œå…¨æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚æ‰€ä»¥æˆ‘ä»¬å†å†™ä¸€ä¸ªå§ã€‚  
> Â   
> ä¼ é€’ç»™ç¨‹åºçš„å‚æ•°ç”±æ ‡å¿—å’Œå€¼ç»„æˆã€‚æ ‡å¿—åº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œå‰é¢æœ‰ä¸€ä¸ªå‡å·ã€‚æ¯ä¸ªæ ‡å¿—éƒ½åº”è¯¥æœ‰é›¶ä¸ªæˆ–å¤šä¸ªä¸ä¹‹ç›¸å…³çš„å€¼ã€‚ä¾‹å¦‚ï¼š  
> Â   
> -l -p 8080 -d /usr/logs  
> Â   
> â€œlâ€ï¼ˆæ—¥å¿—ï¼‰æ²¡æœ‰ç›¸å…³çš„å€¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”æ ‡å¿—ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ºtrueï¼Œä¸å­˜åœ¨åˆ™ä¸ºfalseã€‚â€œpâ€ï¼ˆç«¯å£ï¼‰æœ‰ä¸€ä¸ªæ•´æ•°å€¼ï¼Œâ€œdâ€ï¼ˆç›®å½•ï¼‰æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ã€‚æ ‡å¿—åé¢å¦‚æœå­˜åœ¨å¤šä¸ªå€¼ï¼Œåˆ™è¯¥æ ‡å¿—è¡¨ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼š  
> Â   
> -g this is a list -d 1 2 -3 5  
> Â   
> â€œgâ€ è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨\[â€œthisâ€, â€œisâ€, â€œaâ€, â€œlistâ€]ï¼Œ"d"æ ‡å¿—è¡¨ç¤ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨\[1, 2, -3, 5]ã€‚  
> Â   
> å¦‚æœå‚æ•°ä¸­æ²¡æœ‰æŒ‡å®šæŸä¸ªæ ‡å¿—ï¼Œé‚£ä¹ˆè§£æå™¨åº”è¯¥æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œfalseä»£è¡¨å¸ƒå°”å€¼ï¼Œ0ä»£è¡¨æ•°å­—ï¼Œ `""` ä»£è¡¨å­—ç¬¦ä¸²ï¼Œ\[]ä»£è¡¨åˆ—è¡¨ã€‚å¦‚æœç»™å‡ºçš„å‚æ•°ä¸æ¨¡å¼ä¸åŒ¹é…ï¼Œé‡è¦çš„æ˜¯ç»™å‡ºä¸€ä¸ªå¥½çš„é”™è¯¯ä¿¡æ¯ï¼Œå‡†ç¡®åœ°è§£é‡Šä»€ä¹ˆæ˜¯é”™è¯¯çš„ã€‚  
> Â   
> ç¡®ä¿ä½ çš„ä»£ç æ˜¯å¯æ‰©å±•çš„ï¼Œå³å¦‚ä½•å¢åŠ æ–°çš„æ•°å€¼ç±»å‹æ˜¯ç›´æ¥å’Œæ˜æ˜¾çš„ã€‚

## æµ‹è¯•å…ˆè¡Œ

è¿™æ¬¡åšçš„æ—¶å€™æˆ‘ä»¬ä¼šæœ‰ä¸€äº›ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚æŒ‰ç…§æˆ‘ä»¬[ä¸ŠèŠ‚è¯¾](https://time.geekbang.org/column/article/766281)è®²çš„å†…å®¹ï¼Œé¦–å…ˆè¦åšçš„æ˜¯æ˜ç¡®æ¶æ„å’Œæµ‹è¯•ç­–ç•¥ï¼Œç„¶åè¿›è¡Œä»»åŠ¡åˆ†è§£ã€‚ç›®å‰çš„éœ€æ±‚éå¸¸ç®€å•ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå•ä½“çš„åº”ç”¨ï¼Œæœ€ç®€å•çš„åšæ³•å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªç±»å®Œæˆæ‰€æœ‰çš„åŠŸèƒ½ã€‚éœ€è¦çš„æµ‹è¯•ä¹Ÿå°±æ˜¯å¯¹äºè¿™ä¸ªç±»çš„åŠŸèƒ½æµ‹è¯•ã€‚å› è€Œï¼Œæˆ‘ä»¬ç›®å‰çš„ä»»åŠ¡åˆ†è§£ä¸»è¦å›´ç»•åŠŸèƒ½éœ€æ±‚è¿›è¡Œã€‚

é€šè¿‡å¦‚ä¸‹çš„æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨LLMå¸®åŠ©æˆ‘ä»¬åˆ†è§£ä»»åŠ¡ï¼š

> åŠŸèƒ½éœ€æ±‚  
> ====  
> {requirement}  
> Â   
> ä»»åŠ¡  
> ====  
> è¯·æ ¹æ®ä¸Šé¢çš„åŠŸèƒ½éœ€æ±‚ï¼Œåˆ—å‡ºéœ€è¦æµ‹è¯•çš„åœºæ™¯ã€‚æè¿°åœºæ™¯ï¼Œå¹¶ç»™å‡ºç›¸å…³çš„æµ‹è¯•æ•°æ®ã€‚

![](https://static001.geekbang.org/resource/image/2d/ec/2d739a4c3ae67615fd44f1be6be8deec.jpg?wh=2020x3333)  
ç®€å•é˜…è¯»GPTçš„è¿”å›ç»“æœï¼Œæˆ‘ä»¬å°±èƒ½å‘ç°å‡ ä¸ªé”™è¯¯ï¼š

1. åœºæ™¯ä¸­å­˜åœ¨å¤§é‡çš„é‡å¤è¦†ç›–ï¼Œæ¯”å¦‚2ã€4ã€6å®é™…æµ‹è¯•çš„æ˜¯åŒæ ·çš„åœºæ™¯ã€‚
2. åœºæ™¯8å®é™…ä¸å¯æµ‹è¯•ï¼Œè€Œä¸”LLMåœ¨ç†è§£é¢˜ç›®çš„æ—¶å€™ï¼Œè®¤ä¸º â€œ-l -p -d -gâ€ æ˜¯å”¯ä¸€éœ€è¦æ”¯æŒçš„å‚æ•°ï¼Œè€Œä¸æ˜¯é€šè¿‡é…ç½®å¯ä»¥æ‰©å±•çš„è®¾è®¡ã€‚è¿™å°±å®Œå…¨è¯¯è§£äº†é¢˜ç›®çš„æ„æ€ã€‚

å¯¹æ¯”æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨LLMç›´æ¥ç”Ÿæˆä»£ç çš„æƒ…å†µï¼Œå°±ä¼šå‘ç°è¿™äº›å¯¹äºéœ€æ±‚çš„è¯¯è§£æ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œåªä¸è¿‡ç¬¬ä¸€æ¬¡LLMç”Ÿæˆçš„æ˜¯ç”Ÿäº§ä»£ç ï¼Œè€Œè¿™ä¸€æ¬¡æˆ‘ä»¬è®©å®ƒç”Ÿäº§äº†æµ‹è¯•åˆ—è¡¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ**LLMä»éœ€æ±‚ä¸­æå–åˆ°çš„çŸ¥è¯†æ˜¯ç›¸åŒçš„ã€‚è¿™äº›çŸ¥è¯†ä¼šè¢«LLMåº”ç”¨åˆ°ä¸åŒçš„åœºæ™¯ä¸­å»**ã€‚**ä¸æ­£ç¡®çš„ç”Ÿäº§ä»£ç å’Œä¸æ­£ç¡®çš„æµ‹è¯•åˆ—è¡¨ï¼Œæ˜¯åŒä¸€ä»½çŸ¥è¯†çš„ä¸åŒè¡¨ç°å½¢å¼**ã€‚

ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå…³é”®å·®åˆ«ï¼š**ä»¥è‡ªç„¶è¯­è¨€äº§ç”Ÿçš„æµ‹è¯•/ä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬æ›´å®¹æ˜“å‘ç°é”™è¯¯ï¼Œå¹¶æå‡ºåé¦ˆã€‚è€Œä»¥ä»£ç å½¢å¼è¡¨ç¤ºçš„åŠŸèƒ½ä»£ç ï¼Œæˆ‘ä»¬å´å¾ˆéš¾åœ¨ç¬¬ä¸€æ—¶é—´å‘ç°é”™è¯¯ã€‚**å› æ­¤æˆ‘ä»¬å°±æ›´éœ€è¦åœ¨æ›´æ—©çš„æ—¶å€™æå‡ºåé¦ˆï¼Œé¿å…é”™è¯¯çš„ç´¯ç§¯ã€‚

ç›®å‰æœ€é‡è¦çš„é—®é¢˜æ˜¯ï¼ŒLLMè®¤ä¸º â€œ-l -p -d -gâ€ æ˜¯å¿…éœ€çš„å‚æ•°ï¼Œè€Œä¸æ˜¯é€šè¿‡å¯ä»¥é…ç½®çš„è®¾è®¡ã€‚æˆ‘ä»¬é¦–å…ˆè¦åé¦ˆè°ƒæ•´è¿™ä¸ªé—®é¢˜ï¼š

> éœ€æ±‚ä¸­çš„-l -p -d -g æ˜¯ä¾‹å­ï¼Œå¹¶ä¸æ˜¯å¿…é¡»æ”¯æŒçš„å‚æ•°ã€‚å‚æ•°æ˜¯å¯é…ç½®ï¼Œå¯æ‰©å±•çš„ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·é…ç½®äº†-xä¸ºintç±»å‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡-x 100 æŒ‡å®šã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰é…ç½®-pä¸ºintç±»å‹ï¼Œé‚£ä¹ˆ-på°±æ˜¯éæ³•å‚æ•°ã€‚è¯·æŒ‰ç…§è¿™ä¸ªè¡¥å……ï¼Œåˆ—å‡ºéœ€è¦æµ‹è¯•çš„åœºæ™¯ã€‚æè¿°åœºæ™¯ï¼Œå¹¶ç»™å‡ºç›¸å…³çš„æµ‹è¯•æ•°æ®ã€‚

GPTç»™å‡ºçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://static001.geekbang.org/resource/image/3d/34/3da905eb5cb57e33b05fe245a0d7df34.jpg?wh=2000x3369)

è¿™ä¸€æ¬¡æ˜æ˜¾æ¯”ä¹‹å‰çš„ç†è§£å¥½äº†å¾ˆå¤šã€‚è™½ç„¶æµ‹è¯•é—´ä»ç„¶å­˜åœ¨é‡å¤çš„æƒ…å†µï¼Œä»¥åŠåœºæ™¯4è¿™ä¸ªæ›´å¤æ‚çš„æƒ…å†µï¼Œå¤„ç†å¾—è¿‡äºç®€å•äº†ï¼Œä½†æ˜¯è¿™äº›å¹¶ä¸å½±å“æˆ‘ä»¬ç›®å‰çš„æ“ä½œã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥è®©LLMå¸®åŠ©æˆ‘ä»¬ç”Ÿäº§æµ‹è¯•ä»£ç ï¼š

> è¯·ä¸è¦è€ƒè™‘custom typeçš„æƒ…å†µï¼Œæµ‹è¯•çš„åœºæ™¯ç”Ÿæˆjunit junpiteræµ‹è¯•ã€‚  
> è¦æ±‚ï¼š
> 
> - æ¯ä¸ªåœºæ™¯å¯¹åº”ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚
> - è¢«æµ‹è¯•çš„ç±»å«ArgumentParserã€‚å®ƒçš„æ„é€ å‡½æ•°æ¥å—Map&lt;String, ArgumentType&gt;ä½œä¸ºå‚æ•°é…ç½®ï¼›
> - ArgumentParserçš„parseæ–¹æ³•è¿”å›Map&lt;String, Object&gt;ä½œä¸ºè§£æç»“æœï¼›
> - éªŒè¯æ—¶ï¼Œé€šè¿‡ä»Mapä¸­è·å–å¯¹åº”å‚æ•°å€¼ï¼Œå®ŒæˆéªŒè¯

![](https://static001.geekbang.org/resource/image/af/e0/af705c7407ec7c71050908e3e58afbe0.jpg?wh=2000x377)

```plain
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

import java.util.HashMap;
import java.util.Map;

public class ArgumentParserTest {

Â  Â  private ArgumentParser parser;

Â  Â  @BeforeEach
Â  Â  void setUp() {
Â  Â  Â  Â  // åœ¨æ¯ä¸ªæµ‹è¯•å‰åˆå§‹åŒ–è§£æå™¨
Â  Â  Â  Â  Map<String, ArgumentType> config = new HashMap<>();
Â  Â  Â  Â  config.put("-l", ArgumentType.BOOLEAN);
Â  Â  Â  Â  config.put("-p", ArgumentType.INTEGER);
Â  Â  Â  Â  config.put("-d", ArgumentType.STRING);
Â  Â  Â  Â  config.put("-g", ArgumentType.STRING_LIST);
Â  Â  Â  Â  parser = new ArgumentParser(config);
Â  Â  }

Â  Â  @Test
Â  Â  void testBooleanFlag() {
Â  Â  Â  Â  // æµ‹è¯•å¸ƒå°”æ ‡å¿—
Â  Â  Â  Â  String input = "-l";
Â  Â  Â  Â  Map<String, Object> result = parser.parse(input);
Â  Â  Â  Â  assertTrue((Boolean) result.get("-l"));
Â  Â  }

Â  Â  @Test
Â  Â  void testIntegerValue() {
Â  Â  Â  Â  // æµ‹è¯•æ•´æ•°å€¼
Â  Â  Â  Â  String input = "-p 8080";
Â  Â  Â  Â  Map<String, Object> result = parser.parse(input);
Â  Â  Â  Â  assertEquals(8080, result.get("-p"));
Â  Â  }

Â  Â  @Test
Â  Â  void testStringValue() {
Â  Â  Â  Â  // æµ‹è¯•å­—ç¬¦ä¸²å€¼
Â  Â  Â  Â  String input = "-d /usr/logs";
Â  Â  Â  Â  Map<String, Object> result = parser.parse(input);
Â  Â  Â  Â  assertEquals("/usr/logs", result.get("-d"));
Â  Â  }

Â  Â  @Test
Â  Â  void testStringListValue() {
Â  Â  Â  Â  // æµ‹è¯•å­—ç¬¦ä¸²åˆ—è¡¨å€¼
Â  Â  Â  Â  String input = "-g this is a list";
Â  Â  Â  Â  Map<String, Object> result = parser.parse(input);
Â  Â  Â  Â  assertArrayEquals(new String[]{"this", "is", "a", "list"}, ((Object[]) result.get("-g")));
Â  Â  }

Â  Â  @Test
Â  Â  void testDefaultValues() {
Â  Â  Â  Â  // æµ‹è¯•é»˜è®¤å€¼
Â  Â  Â  Â  String input = "-l -p -d";
Â  Â  Â  Â  Map<String, Object> result = parser.parse(input);
Â  Â  Â  Â  assertTrue((Boolean) result.get("-l"));
Â  Â  Â  Â  assertEquals(0, result.get("-p"));
Â  Â  Â  Â  assertEquals("", result.get("-d"));
Â  Â  }

Â  Â  @Test
Â  Â  void testMixedParameters() {
Â  Â  Â  Â  // æµ‹è¯•æ··åˆå‚æ•°
Â  Â  Â  Â  String input = "-l -p 8080 -d /usr/logs -g this is a list";
Â  Â  Â  Â  Map<String, Object> result = parser.parse(input);
Â  Â  Â  Â  assertTrue((Boolean) result.get("-l"));
Â  Â  Â  Â  assertEquals(8080, result.get("-p"));
Â  Â  Â  Â  assertEquals("/usr/logs", result.get("-d"));
Â  Â  Â  Â  assertArrayEquals(new String[]{"this", "is", "a", "list"}, ((Object[]) result.get("-g")));
Â  Â  }

Â  Â  @Test
Â  Â  void testIllegalValue() {
Â  Â  Â  Â  // æµ‹è¯•éæ³•å€¼
Â  Â  Â  Â  String input = "-p not_an_integer";
Â  Â  Â  Â  assertThrows(IllegalValueException.class, () -> parser.parse(input));
Â  Â  }

Â  Â  @Test
Â  Â  void testUnconfiguredParameter() {
Â  Â  Â  Â  // æµ‹è¯•æœªé…ç½®å‚æ•°
Â  Â  Â  Â  String input = "-x custom_value";
Â  Â  Â  Â  assertThrows(UnconfiguredParameterException.class, () -> parser.parse(input));
Â  Â  }
}

```

![](https://static001.geekbang.org/resource/image/7e/f7/7e5116b12635c78b0000e653b39cf8f7.jpg?wh=2000x397)

## ç”Ÿæˆç”Ÿäº§ä»£ç 

ä¸å¾—ä¸è¯´ï¼Œè™½ç„¶ä¸LLMç»™å‡ºçš„æµ‹è¯•åœºæ™¯ä¸å¤ªç›¸å…³ï¼Œä½†æ˜¯LLMç»™å‡ºçš„æµ‹è¯•ä»£ç è´¨é‡è¿˜æ˜¯éå¸¸ä¸é”™çš„ã€‚é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆç”Ÿäº§ä»£ç äº†ã€‚

> è¯·æŒ‰ç…§éœ€æ±‚ï¼Œç”ŸæˆArgumentParserä»¥åŠç›¸å…³ç±»ï¼Œå¯ä»¥é€šè¿‡è¿™ç»„æµ‹è¯•ã€‚

![](https://static001.geekbang.org/resource/image/5f/09/5fb01221bda2ab538007de6bfe3d0009.jpg?wh=2000x429)

```plain
import java.util.HashMap;
import java.util.Map;
public class ArgumentParser {
    private Map<String, ArgumentType> config;
    public ArgumentParser(Map<String, ArgumentType> config) {
        this.config = config;
    }
    public Map<String, Object> parse(String input) {
        Map<String, Object> result = new HashMap<>();
        String[] tokens = input.split("\\s+");
        for (int i = 0; i < tokens.length; i++) {
            String token = tokens[i];
            if (config.containsKey(token)) {
                ArgumentType type = config.get(token);
                switch (type) {
                    case BOOLEAN:
                        result.put(token, true);
                        break;
                    case INTEGER:
                        i++;
                        try {
                            result.put(token, Integer.parseInt(tokens[i]));
                        } catch (NumberFormatException e) {
                            throw new IllegalValueException("Illegal value for parameter: " + tokens[i - 1]);
                        }
                        break;
                    case STRING:
                        i++;
                        result.put(token, tokens[i]);
                        break;
                    case STRING_LIST:
                        i++;
                        result.put(token, tokens[i].split(" "));
                        break;
                    default:
                        // Handle custom types if needed
                        break;
                }
            } else {
                throw new UnconfiguredParameterException("Unconfigured parameter: " + token);
            }
        }
        return result;
    }
}
enum ArgumentType {
    BOOLEAN,
    INTEGER,
    STRING,
    STRING_LIST,
    CUSTOM_TYPE // Add more types as needed
}
class IllegalParameterException extends RuntimeException {
    public IllegalParameterException(String message) {
        super(message);
    }
}
class IllegalValueException extends RuntimeException {
    public IllegalValueException(String message) {
        super(message);
    }
}
class UnconfiguredParameterException extends RuntimeException {
    public UnconfiguredParameterException(String message) {
        super(message);
    }
}
```

![](https://static001.geekbang.org/resource/image/08/3f/08e0a06ec28bdb89f8c4e4c4b876313f.jpg?wh=2000x385)

é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è·‘ä¸€ä¸‹æµ‹è¯•çœ‹çœ‹ç»“æœã€‚

![](https://static001.geekbang.org/resource/image/1d/42/1dcd21a520489c0dfd5bf5b867d23b42.jpg?wh=2896x2062)

ä¸€å…±8ä¸ªæµ‹è¯•ï¼Œé€šè¿‡äº†5ä¸ªå¤±è´¥äº†3ä¸ªã€‚å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯testStringListValueï¼Œé”™è¯¯ä¿¡æ¯æ˜¯è¿™æ ·çš„ï¼š

```plain
@Test
void testStringListValue() {
    // æµ‹è¯•å­—ç¬¦ä¸²åˆ—è¡¨å€¼
    String input = "-g this is a list";
    Map<String, Object> result = parser.parse(input);
    assertArrayEquals(new String[]{"this", "is", "a", "list"}, ((Object[]) result.get("-g")));
}
```

> UnconfiguredParameterException: Unconfigured parameter: is  
> at ArgumentParser.parse(ArgumentParser.java:45)  
> at ArgumentParserTest.testStringListValue(ArgumentParserTest.java:51)  
> at java.base/java.lang.reflect.Method.invoke(Method.java:580)  
> at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)  
> at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

ä¹Ÿå°±æ˜¯è¯´ï¼Œç›®å‰ä»£ç ä¸­åªèƒ½å¤„ç†å•å€¼çš„æƒ…å†µï¼Œå¹¶ä¸èƒ½å¤„ç†å¤šå€¼çš„æƒ…å†µã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®©LLMå¸®åŠ©æˆ‘ä»¬ä¿®æ”¹ï¼š

> æ‰§è¡Œæµ‹è¯•çš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼Œè¯·æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œä¿®æ”¹ArgumentParseçš„ä»£ç ï¼š  
> Â   
> UnconfiguredParameterException: Unconfigured parameter: is  
> at ArgumentParser.parse(ArgumentParser.java:45)  
> at ArgumentParserTest.testStringListValue(ArgumentParserTest.java:51)  
> at java.base/java.lang.reflect.Method.invoke(Method.java:580)  
> at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)  
> at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)

![](https://static001.geekbang.org/resource/image/c5/yb/c582b3404d4b50c40cb7b6b3a15c4yyb.jpg?wh=2000x2090)

æ­¤æ—¶éœ€è¦æ³¨æ„ï¼ŒChatGPTå°è¯•é€šè¿‡ä¿®æ”¹æµ‹è¯•çš„æ–¹å¼è’™æ··è¿‡å…³ã€‚æˆ‘ä»¬éœ€è¦åšå®ˆç›®å‰**ç”Ÿäº§ä»£ç é¢†èˆªå‘˜çš„è§’è‰²**ï¼Œå¯¹GPTä½œå‡ºè¦æ±‚ï¼š

> ä¸æ˜¯æµ‹è¯•çš„é—®é¢˜ï¼Œè¯·ä¿®æ”¹ArgumentParserçš„é€»è¾‘

![](https://static001.geekbang.org/resource/image/96/ce/9689f38156315f2811c9ab1fc2141dce.jpg?wh=2000x389)

```plain
public class ArgumentParser {
    private Map<String, ArgumentType> config;
    public ArgumentParser(Map<String, ArgumentType> config) {
        this.config = config;
    }
    public Map<String, Object> parse(String input) {
        Map<String, Object> result = new HashMap<>();
        String[] tokens = input.split("\\s+");
        for (int i = 0; i < tokens.length; i++) {
            String token = tokens[i];
            if (config.containsKey(token)) {
                ArgumentType type = config.get(token);
                switch (type) {
                    case BOOLEAN:
                        result.put(token, true);
                        break;
                    case INTEGER:
                        i++;
                        try {
                            result.put(token, Integer.parseInt(tokens[i]));
                        } catch (NumberFormatException e) {
                            throw new IllegalValueException("Illegal value for parameter: " + tokens[i - 1]);
                        }
                        break;
                    case STRING:
                        i++;
                        result.put(token, tokens[i]);
                        break;
                    case STRING_LIST:
                        i++;
                        List<String> stringList = new ArrayList<>();
                        while (i < tokens.length && !tokens[i].startsWith("-")) {
                            stringList.add(tokens[i]);
                            i++;
                        }
                        result.put(token, stringList.toArray(new String[0]));
                        i--;  // Decrement to correctly process the next token in the loop
                        break;
                    default:
                        // Handle custom types if needed
                        break;
                }
            } else {
                throw new UnconfiguredParameterException("Unconfigured parameter: " + token);
            }
        }
        return result;
    }
}
```

![](https://static001.geekbang.org/resource/image/eb/78/eb72cd139988702fbe5dede0e65dab78.jpg?wh=2000x392)

æˆ‘ä»¬å†æ¬¡è¿è¡Œæµ‹è¯•ï¼š

![](https://static001.geekbang.org/resource/image/c7/61/c77183a21d50d0958bc652ac7a5fd061.jpg?wh=2928x2045)

å°±è¿™æ—¶æˆ‘ä»¬ä¼šå‘ç°åªå‰©äº†ä¸€ä¸ªæ²¡æœ‰é€šè¿‡çš„æµ‹è¯•ã€‚è€Œä»”ç»†æŸ¥çœ‹ä¼šå‘ç°è¿™ä¸ªæµ‹è¯•æ„é€ æœ‰é—®é¢˜ã€‚æˆ‘ä»¬ä¹Ÿä¸éœ€è¦é€šè¿‡LLMå†æ¬¡ä¿®æ”¹äº†ã€‚è‡ªå·±ç›´æ¥æ”¹æ‰å°±è¡Œï¼š

```plain
@Test
void testDefaultValues() {
    // æµ‹è¯•é»˜è®¤å€¼
    String input = "";
    Map<String, Object> result = parser.parse(input);
    assertFalse((Boolean) result.get("-l"));
    assertEquals(0, result.get("-p"));
    assertEquals("", result.get("-d"));
}
```

å†æ¬¡æ‰§è¡Œï¼Œä»ç„¶å¤±è´¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å‘ç°ä»£ç ä¸­å¹¶æ²¡æœ‰å¯¹äºé»˜è®¤å€¼çš„å¤„ç†ã€‚åé¦ˆç»™LLMï¼š

> ç›®å‰ä»£ç ä¸­æ²¡æœ‰å¯¹äºé»˜è®¤å€¼çš„å¤„ç†ï¼Œè¯·æ±‚æ”¹å˜ArgumentParserçš„é€»è¾‘ï¼Œè®©å®ƒèƒ½å¤Ÿé€šè¿‡ä¸‹é¢çš„æµ‹è¯•ï¼š  
> Â   
> @Test  
> void testDefaultValues() {  
> Â  Â  // æµ‹è¯•é»˜è®¤å€¼  
> Â  Â  String input = â€œâ€;  
> Â  Â  Map&lt;String, Object&gt; result = parser.parse(input);  
> Â  Â  assertFalse((Boolean) result.get(â€œ-lâ€));  
> Â  Â  assertEquals(0, result.get(â€œ-pâ€));  
> Â  Â  assertEquals(â€œâ€, result.get(â€œ-dâ€));  
> }

![](https://static001.geekbang.org/resource/image/e9/72/e9d947c9afd5516f711e92dfd8ded472.jpg?wh=2000x391)

```plain
public class ArgumentParser {
    private Map<String, ArgumentType> config;
    public ArgumentParser(Map<String, ArgumentType> config) {
        this.config = config;
    }
    public Map<String, Object> parse(String input) {
        Map<String, Object> result = new HashMap<>();
        String[] tokens = input.split("\\s+");
        if (tokens.length == 1 && tokens[0].isEmpty()) {
            // Handle empty input
            setDefaultValues(result);
            return result;
        }
        for (int i = 0; i < tokens.length; i++) {
            String token = tokens[i];
            if (config.containsKey(token)) {
                ArgumentType type = config.get(token);
                switch (type) {
                    case BOOLEAN:
                        result.put(token, true);
                        break;
                    case INTEGER:
                        i++;
                        try {
                            result.put(token, Integer.parseInt(tokens[i]));
                        } catch (NumberFormatException e) {
                            throw new IllegalValueException("Illegal value for parameter: " + tokens[i - 1]);
                        }
                        break;
                    case STRING:
                        i++;
                        result.put(token, tokens[i]);
                        break;
                    case STRING_LIST:
                        i++;
                        List<String> stringList = new ArrayList<>();
                        while (i < tokens.length && !tokens[i].startsWith("-")) {
                            stringList.add(tokens[i]);
                            i++;
                        }
                        result.put(token, stringList.toArray(new String[0]));
                        i--;  // Decrement to correctly process the next token in the loop
                        break;
                    default:
                        // Handle custom types if needed
                        break;
                }
            } else {
                throw new UnconfiguredParameterException("Unconfigured parameter: " + token);
            }
        }
        return result;
    }
    private void setDefaultValues(Map<String, Object> result) {
        for (Map.Entry<String, ArgumentType> entry : config.entrySet()) {
            String param = entry.getKey();
            ArgumentType type = entry.getValue();
            if (!result.containsKey(param)) {
                switch (type) {
                    case BOOLEAN:
                        result.put(param, false);
                        break;
                    case INTEGER:
                        result.put(param, 0);
                        break;
                    case STRING:
                        result.put(param, "");
                        break;
                    case STRING_LIST:
                        result.put(param, new String[0]);
                        break;
                    default:
                        // Handle custom types if needed
                        break;
                }
            }
        }
    }
}
```

![](https://static001.geekbang.org/resource/image/14/53/1430f70db5716410a4bae76e0c335c53.jpg?wh=2000x399)

ç°åœ¨æˆ‘ä»¬å†æ¥è·‘ä¸€æ¬¡æµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ã€‚

![](https://static001.geekbang.org/resource/image/b7/be/b7605094fca653c2a429c727dbb29cbe.jpg?wh=2917x2079)

## å°ç»“

åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå®Œæˆäº†è¿™ä¸ªåŠŸèƒ½ã€‚å¯¹æ¯”ç¬¬ä¸€æ¬¡å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬è¿­ä»£çš„æ¬¡æ•°æ›´å°‘ï¼Œå®Œæˆçš„è¿‡ç¨‹ä¸­æ›´æœ‰æŠŠæ¡ï¼Œä¸¥é‡çš„è®¾è®¡é—®é¢˜åœ¨æ—©æœŸå°±å¾—åˆ°äº†é‡è§†ã€‚

æˆ‘ä»¬åšå‡ºçš„æ”¹å˜æœ‰è¿™ä¹ˆå‡ ä¸ªï¼š

- é€šè¿‡æµ‹è¯•åˆ—è¡¨ï¼Œæ›´åŠ å…³æ³¨ä¸LLMå¯¹é½å¯¹äºçŸ¥è¯†çš„ç†è§£ï¼›
- ä»¥æµ‹è¯•é©±åŠ¨çš„æ–¹å¼ï¼Œéµå®ˆâ€œçº¢-ç»¿-é‡æ„â€çš„èŠ‚å¥ï¼›
- æŒ‰ç…§â€œå¯¼èˆªå‘˜-å¸æœºâ€çš„æ¨¡å¼ä¸LLMç»“å¯¹ã€‚

è¿™äº›æ”¹å˜è®©æˆ‘ä»¬åœ¨è·å¾—é€Ÿåº¦æå‡çš„æ—¶å€™ï¼Œä¿è¯äº†ä»£ç çš„è´¨é‡ï¼Œå¾—åˆ°äº†çœŸæ­£çš„æ•ˆç‡æå‡ã€‚

## æ€è€ƒé¢˜

è¯·æ€»ç»“åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å“ªäº›è®¤çŸ¥è¡Œä¸ºæ¨¡å¼ã€‚

æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºåˆ†äº«è‡ªå·±çš„æ€è€ƒæˆ–ç–‘æƒ‘ï¼Œæˆ‘ä»¬ä¼šæŠŠç²¾å½©å†…å®¹ç½®é¡¶ä¾›å¤§å®¶å­¦ä¹ è®¨è®ºã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ8ï¼‰</strong></div><ul>
<li><span>Gojustforfun</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>æˆ‘ä¸€ç›´æœ‰ä¸€ä¸ªç–‘é—®ï¼Œåˆ°åº•æ˜¯ä»»åŠ¡åˆ—è¡¨ï¼Ÿè¿˜æ˜¯æµ‹è¯•åˆ—è¡¨ï¼Ÿ

è¿˜æ˜¯å…ˆæ ¹æ®è½¯ä»¶æ¶æ„å’Œæµ‹è¯•ç­–ç•¥å°†éœ€æ±‚åˆ‡åˆ°è¶³å¤Ÿå°ï¼Œå½¢æˆä»»åŠ¡åˆ—è¡¨ï¼Œåœ¨é’ˆå¯¹ä»»åŠ¡åˆ—è¡¨ä¸­çš„æ¯ä¸ªä»»åŠ¡å†™å‡ºæµ‹è¯•ï¼Œä»è€Œå½¢æˆæµ‹è¯•åˆ—è¡¨ã€‚

ä¹‹å‰æåˆ°è¿‡ç”¨æˆ·æ•…äº‹åŠéªŒæ”¶æ¡ä»¶ï¼Œç”¨æˆ·æ•…äº‹éœ€è¦æ ¹æ®è½¯ä»¶æ¶æ„å’Œæµ‹è¯•ç­–ç•¥å†åˆ‡åˆ†å—ï¼ŸéªŒæ”¶æ¡ä»¶ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯æµ‹è¯•åˆ—è¡¨æˆ–è€…æµ‹è¯•åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Ÿ

åé¢ä¼šæœ‰å¤æ‚ç‚¹çš„ä¾‹å­ï¼Œä»‹ç»éœ€æ±‚å¦‚ä½•ä»ç”¨æˆ·æ•…äº‹ï¼Œåˆ°è¢«ä¸åŒè½¯ä»¶æ¶æ„ï¼Œæµ‹è¯•ç­–ç•¥ç»„åˆå½±å“ï¼Œä»è€Œå¯¼å‡ºä¸åŒçš„ä»»åŠ¡åˆ—è¡¨ï¼Œè¿›è€Œå¯¼å‡ºæµ‹è¯•åˆ—åˆ—è¡¨çš„è¿‡ç¨‹å—ï¼Ÿ</p>2024-04-15</li><br/><li><span>èµ·ä¸ªåç§°å§</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æˆ‘è®¤ä¸ºåº”è¯¥æ˜¯åºæ‚+æ¸…æ™°
åºæ‚çš„è®¤çŸ¥è¡Œä¸ºæ¨¡å¼ï¼Œä»gptç»™ä¸çš„éœ€æ±‚æ‹†åˆ†çš„ä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬å’Œllmè¿›è¡Œè®¤çŸ¥å¯¹é½ï¼Œå¸®å…¶å¼¥è¡¥llmè®¤çŸ¥éœ€æ±‚çš„å·®å¼‚ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æˆ‘ä»¬æ ¹æ®å¯¹é½çš„ä»»åŠ¡åˆ—è¡¨ç”Ÿæˆæµ‹è¯•ä»£ç å’Œç”Ÿäº§ä»£ç 
æ¸…æ™°çš„è®¤çŸ¥è¡Œä¸ºæ¨¡å¼ï¼Œæ ¹æ®æµ‹è¯•ä»£ç æ‰§è¡Œè¿›è¡Œæµ‹è¯•æ¥å‘ç°ç”Ÿäº§ä»£ç ä¸Šçš„é—æ¼ï¼Œå‘ç°é”™è¯¯,ä¸llmè¿›è¡Œäº¤äº’è°ƒæ•´ç”Ÿäº§ä»£ç ï¼Œæœ€ç»ˆå®Œæˆæµ‹è¯•çš„é€šè¿‡ã€‚
è¿™é‡Œæœ‰ä¸¤ä¸ªç–‘é—®
1. å‡è®¾æ ¹æ®æµ‹è¯•ä»£ç æ‰§è¡Œå‘ç°æœªçŸ¥çš„é”™è¯¯(æ­¤æ—¶æ— æ³•ä¸gptè¿›è¡Œäº¤äº’)ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç†è§£æ”¹é”™è¯¯çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ­¤æ—¶å°±éœ€è¦debugä¸€æ­¥æ­¥è°ƒè¯•ï¼Œæ­¤æ—¶æˆ‘ä»¬æœ¬èº«åˆå¤„äºå¤æ‚æ¨¡å¼ä¸‹(æ¢ç´¢-æ„ŸçŸ¥-å“åº”)ï¼Œè€Œå¯ä»¥å’Œllmäº¤äº’åæˆ‘ä»¬åˆå¤„äºæ¸…æ™°æ¨¡å¼ä¸‹(æ„ŸçŸ¥-åˆ†ç±»-å“åº”)ã€‚æˆ‘ä»¬å› ä¸ºä¸€ä¸ªllmå¸®åŠ©æˆ‘ä»¬çš„è®¤çŸ¥è¡Œä¸ºå‘ç”Ÿäº†ä¸¤ä¸ªé‡å¤§çš„å˜æ›´å—ï¼Ÿ
2. TDDæµ‹è¯•é©±åŠ¨,çº¢-ç»¿-é‡æ„ï¼Œè¿™èŠ‚è¯¾é‡Œæ²¡çœ‹åˆ°é‡æ„å¾ªç¯,æ„Ÿè§‰ç¼ºå°‘äº†ç‚¹å•¥</p>2024-04-15</li><br/><li><span>FARO_Z</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ„Ÿè§‰ LLM åªèƒ½æ¯”è¾ƒå¥½çš„ç”Ÿæˆå•ç‚¹åŠŸèƒ½çš„ä»£ç ï¼Œä¸€èˆ¬ä¹Ÿå°±æ˜¯å·¥å…·ç±»

å¦‚æœæ¶‰åŠåˆ°ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œä¸æ˜¯æ­‡èœï¼Œå°±æ˜¯è¦å–‚å¤§é‡ promot è¿›è¡Œè°ƒæ ¡ã€‚æœ‰è¿™åŠŸå¤«ä»£ç æ—©å†™å®Œäº†

æ„Ÿè§‰ç›®å‰ LLM å¯¹äºç¨‹åºå‘˜æœ€å¤§çš„å¸®åŠ©åœ¨äºé˜…è¯»æºç ä¸Šé¢ï¼Œå¯¹äºå·²æœ‰å†…å®¹ LLM èƒ½ä½œä¸ºä¸€ä¸ªå¾ˆå¥½çš„ç´¢å¼•å™¨ï¼Œå¸®åŠ©å¿«é€Ÿç†æ¸…ä»£ç ä¸Šä¸‹æ–‡ã€‚è‡³äºå¾ˆå¤šä¸šåŠ¡é©±åŠ¨çš„å·¥ç¨‹ï¼Œè¿˜æ˜¯å…ˆä¸è¦åŠ¨ LLM æå‡å·¥ä½œæ•ˆç‡çš„å¿µå¤´äº†å§</p>2024-08-13</li><br/><li><span>èŒƒé£æ‰¬</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ„Ÿè°¢è€å¸ˆï¼Œå·²ç»ç”¨åˆ°å·¥ä½œä¸­äº†ã€‚
ç›®å‰æˆ‘ä»¬åªè®©GPTè¿›è¡Œäº†éœ€æ±‚åˆ†è§£ã€‚
ç›²çŒœä¸€æ³¢ï¼Œæ¥ä¸‹æ¥åº”è¯¥è®©gptï¼Œä¸ä»…æ ¹æ®éœ€æ±‚åˆ†è§£ï¼Œè¿˜è¦æ ¹æ®æ¶æ„ï¼Œåˆ†è§£æˆåŠŸèƒ½ä¸Šä¸‹æ–‡çš„ä»»åŠ¡é¡¹ã€‚

å†æ ¹æ®ä»»åŠ¡é¡¹ï¼Œåˆ—å‡ºæµ‹è¯•åœºæ™¯å’Œæµ‹è¯•æ•°æ®ã€‚
ç„¶åç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚
æœ€åç”Ÿæˆä»£ç ã€‚

ï¼ˆè¿™å…¶ä¸­ï¼Œæˆ‘è§‰å¾—è¿˜å¯ä»¥æä¾›ç°æœ‰æµ‹è¯•ç±»çš„ä»£ç ä½œä¸ºfew shotï¼Œè€Œä¸”æµ‹è¯•ç±»ä¹Ÿè•´å«äº†SUTçš„APIå¦‚ä½•ä½¿ç”¨çš„ä¿¡æ¯ï¼‰</p>2024-04-16</li><br/><li><span>aoe</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>å­¦ä¹ åæ”¶è·äº† 2 ä¸ªæ¨¡ç‰ˆ
ç»ƒä¹ åè·å¾—ç»éªŒï¼šéœ€è¦è®¤çœŸæ£€æŸ¥ AI åˆ—å‡ºçš„æµ‹è¯•åœºæ™¯ï¼Œä¸ç„¶ä¼šå‡ºç°å¥‡æ€ªçš„ä»£ç ï¼

å®ç”¨çš„ AI æ¨¡ç‰ˆ
======

åˆ—å‡ºæµ‹è¯•åœºæ™¯
----------------
åŠŸèƒ½éœ€æ±‚
====
{requirement}

ä»»åŠ¡
====
è¯·æ ¹æ®ä¸Šé¢çš„åŠŸèƒ½éœ€æ±‚ï¼Œåˆ—å‡ºéœ€è¦æµ‹è¯•çš„åœºæ™¯ã€‚æè¿°åœºæ™¯ï¼Œå¹¶ç»™å‡ºç›¸å…³çš„æµ‹è¯•æ•°æ®ã€‚

ç¼–å†™æµ‹è¯•ä»£ç 
----------------
è¯·ç”Ÿæˆ junit junpiter æµ‹è¯•
è¦æ±‚ï¼š
æ¯ä¸ªåœºæ™¯å¯¹åº”ä¸€ä¸ªæµ‹è¯•æ–¹æ³•
ä½¿ç”¨ Kotlin ç¼–å†™
ä½¿ç”¨ TDD ä¸­çš„ should style ç¼–å†™æµ‹è¯•

è¯¦è§ https:&#47;&#47;wyyl1.com&#47;post&#47;28&#47;17</p>2024-04-15</li><br/><li><span>6ç‚¹æ— ç—›æ—©èµ·å­¦ä¹ çš„å’Œå°š</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æœ‰ä¸ªé—®é¢˜ï¼Œé‚£å¦‚ä½•æŠŠ TDD ä¸ LLM ç»“åˆå†™ä¸šåŠ¡ä»£ç å‘¢ï¼Ÿ
å¦‚æœæŒ‰ç…§ 16 èŠ‚çš„å†…å®¹ï¼Œé€»è¾‘å°±æ˜¯æ‹†åˆ†ä¸€ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æ¶æ„ï¼Œæ¯”å¦‚ http å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®å±‚
ç„¶åå¯¹ä¸šåŠ¡é€»è¾‘å±‚å†™æ¸…æ¥šè¯‰æ±‚ï¼Œç„¶åè·Ÿ LLM ç»“é˜Ÿç¼–ç¨‹å—ï¼Ÿè¿ç”¨æœ¬ç¯‡å†…å®¹</p>2024-05-04</li><br/><li><span>æœ¯å­ç±³å¾·</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>&#47;&#47; Question by EnigmaWU: generate could missing ut code for me
&#47;&#47; Answer from ChatCopilot:
TEST(CC_parseCmdLineArgs, LogSavingDir) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;-d&quot;, (char *)&quot;&#47;path&#47;to&#47;log&quot;};
  EXPECT_EQ(CC_SUCCESS, CC_parseCmdLineArgs(3, argv, &amp;CmdLineArgs));
  EXPECT_FALSE(CmdLineArgs.IsLoggingEnabled);
  EXPECT_EQ(0, CmdLineArgs.RecvPort);
  EXPECT_STREQ(&quot;&#47;path&#47;to&#47;log&quot;, CmdLineArgs.pLogSavingDir);
}

TEST(CC_parseCmdLineArgs, InvalidArgs) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;invalid&quot;};
  EXPECT_EQ(CC_FAIL, CC_parseCmdLineArgs(2, argv, &amp;CmdLineArgs));
}

TEST(CC_parseCmdLineArgs, MissingValueForPort) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;-p&quot;};
  EXPECT_EQ(CC_FAIL, CC_parseCmdLineArgs(2, argv, &amp;CmdLineArgs));
}

TEST(CC_parseCmdLineArgs, MissingValueForDir) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;-d&quot;};
  EXPECT_EQ(CC_FAIL, CC_parseCmdLineArgs(2, argv, &amp;CmdLineArgs));
}

TEST(CC_parseCmdLineArgs, NonNumericPort) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;-p&quot;, (char *)&quot;nonnumeric&quot;};
  EXPECT_EQ(CC_FAIL, CC_parseCmdLineArgs(3, argv, &amp;CmdLineArgs));
}

TEST(CC_parseCmdLineArgs, MultipleSameArgs) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;-l&quot;, (char *)&quot;-l&quot;};
  EXPECT_EQ(CC_SUCCESS, CC_parseCmdLineArgs(3, argv, &amp;CmdLineArgs));
  EXPECT_TRUE(CmdLineArgs.IsLoggingEnabled);
}

TEST(CC_parseCmdLineArgs, ArgsInDifferentOrder) {
  CC_CmdLineArgs_T CmdLineArgs;
  char *argv[] = {(char *)&quot;test&quot;, (char *)&quot;-p&quot;, (char *)&quot;1234&quot;, (char *)&quot;-l&quot;, (char *)&quot;-d&quot;, (char *)&quot;&#47;path&#47;to&#47;log&quot;};
  EXPECT_EQ(CC_SUCCESS, CC_parseCmdLineArgs(6, argv, &amp;CmdLineArgs));
  EXPECT_TRUE(CmdLineArgs.IsLoggingEnabled);
  EXPECT_EQ(1234, CmdLineArgs.RecvPort);
  EXPECT_STREQ(&quot;&#47;path&#47;to&#47;log&quot;, CmdLineArgs.pLogSavingDir);
}</p>2024-04-15</li><br/><li><span>æœ¯å­ç±³å¾·</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>&#47;&#47; Chat with Copilot, Question by EnigmaWU:
&#47;&#47; #file:CC_parseCmdLineArgs.c #file:CC_parseCmdLineArgsTest_byCopilot.cxx
&#47;&#47;      what UT already written and what UT is missed?

&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;&#47;
&#47;&#47; Answer from ChatCopilot:
&#47;**
The unit tests that are already written for the CC_parseCmdLineArgs function in the CC_parseCmdLineArgsTest_byCopilot.cxx file
are:

NullCmdLineArgs: Tests the function with argc as 0 and argv as NULL.
NullCmdLineArgsPtr: Tests the function with argc as 0, argv as NULL, and pCmdLineArgs as NULL.
NoArgs: Tests the function with no command line arguments.
LoggingEnabled: Tests the function with the logging enabled argument -l.
RecvPort: Tests the function with the receive port argument -p and a value.
LogSavingDir: Tests the function with the log saving directory argument -d and a value.
AllArgs: Tests the function with all possible arguments.
The unit tests that are missing could be:

InvalidArgs: Tests the function with invalid arguments that do not start with -.
MissingValueForPort: Tests the function with the -p argument but without a value following it.
MissingValueForDir: Tests the function with the -d argument but without a value following it.
NonNumericPort: Tests the function with a non-numeric value for the -p argument.
MultipleSameArgs: Tests the function with multiple instances of the same argument.
ArgsInDifferentOrder: Tests the function with all possible arguments in a different order.
 **&#47;</p>2024-04-15</li><br/>
</ul>