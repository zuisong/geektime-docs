ä½ å¥½ï¼Œæˆ‘æ˜¯ä¿Šè¾¾ã€‚

ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠæ•°æ®åº“è¿æ¥çš„ä¸€äº›äº‹æƒ…ã€‚åœ¨è¿™é‡Œï¼Œè¿æ¥è¿™ä¸ªè¯æœ‰ä¸¤ä¸ªæ„æ€ã€‚é¦–å…ˆè¿æ¥æ˜¯ä¸€ä¸ªåŠ¨è¯ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯è¿æ¥åˆ°æ•°æ®åº“çš„è¿™ä¸ªè¿‡ç¨‹ã€‚å…¶æ¬¡è¿æ¥è¿˜æ˜¯ä¸€ä¸ªåè¯ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹çš„ä¸€ä¸ªé€šé“ï¼Œå®¢æˆ·ç«¯çš„å‘½ä»¤ã€SQLã€æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®éƒ½ä¼šç»è¿‡è¿™ä¸ªé€šé“æ¥ä¼ è¾“ã€‚è¿™ä¸€è®²ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥åˆ†ææ•°æ®åº“è¿æ¥ä¸ä¸Šçš„é—®é¢˜ï¼Œä»¥åŠè¿æ¥å¼‚å¸¸ä¸­æ–­çš„é—®é¢˜ã€‚

## ä¸ºä»€ä¹ˆè¿æ¥ä¸ä¸Šæ•°æ®åº“ï¼Ÿ

å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤æˆ–SQLå‰ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªåˆ°æ•°æ®åº“æœåŠ¡ç«¯çš„è¿æ¥ï¼Œå¹¶å®Œæˆç”¨æˆ·è®¤è¯ã€‚MySQLæœåŠ¡ç«¯ä½¿ç”¨æ’ä»¶çš„æ–¹å¼è®¤è¯å®¢æˆ·ç«¯çš„ç”¨æˆ·èº«ä»½ã€‚ä¸åŒçš„æ’ä»¶åœ¨éªŒè¯ç”¨æˆ·å¯†ç æ—¶ï¼Œç»†èŠ‚ä¸Šä¼šæœ‰æ‰€ä¸åŒã€‚MySQLä¸­ï¼Œè®¤è¯æ’ä»¶å’Œç”¨æˆ·ç›¸å…³ï¼Œä¸åŒç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ’ä»¶è¿›è¡Œå¯†ç éªŒè¯ã€‚åˆ›å»ºç”¨æˆ·æ—¶ï¼Œå¦‚æœä¸æ˜¾å¼æŒ‡å®šï¼Œä¼šä½¿ç”¨å‚æ•°default\_authentication\_pluginæŒ‡å®šçš„æ’ä»¶ã€‚ä»MySQL 8.0å¼€å§‹ï¼Œä½¿ç”¨caching\_sha2\_passwordä½œä¸ºé»˜è®¤çš„è®¤è¯æ’ä»¶ï¼Œè€Œ5.7ä½¿ç”¨çš„é»˜è®¤æ’ä»¶æ˜¯mysql\_native\_passwordã€‚

```plain
mysql> show variables like 'default_authentication_plugin';
+-------------------------------+-----------------------+
| Variable_name                 | Value                 |
+-------------------------------+-----------------------+
| default_authentication_plugin | caching_sha2_password |
+-------------------------------+-----------------------+
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ6ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/3c/4e/44/49b29792.jpg" width="30px"><span>Geek_0126</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ€è€ƒé¢˜è¿™ç§æŠ¥é”™ç¡®å®ç»å¸¸é‡åˆ°ï¼Œå¼€å‘è¯´æ˜¯æ•°æ®åº“é—®é¢˜ï¼ŒDBAè¯´æ˜¯ç¨‹åºé…ç½®é—®é¢˜ï¼Œä¸€èˆ¬éƒ½æ˜¯å»ºè®®æ’æŸ¥ç¨‹åºè¿æ¥æ± åŠé‡å¯åº”ç”¨ï¼ŒæœŸå¾…è€å¸ˆçš„å›ç­”ã€‚</div>2024-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3c/4a/fe/7b6bd101.jpg" width="30px"><span>ç¬™ é¸¢</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œshow variables like &quot;wait_timeout&quot;;å’Œshow global variables like &quot;wait_timeout&quot;ä¸ä¸€è‡´ï¼Œå¯æ˜¯è¿æ¥æ•°æ®åº“ä¹‹åå¹¶æ²¡æœ‰set ä¿®æ”¹ä¼šè¯å˜é‡å€¼å•Šï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå•Šï¼Ÿ</div>2024-09-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f7/b1/982ea185.jpg" width="30px"><span>ç¾å¦™çš„ä»£ç </span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆï¼Œæˆ‘è¿™è¾¹æœ‰ä¸ªæ¡ˆä¾‹ï¼š
server å‚æ•°ï¼š
wait_timeout ï¼š3600   
interactive_timeout ï¼š7200  
max_allowed_packet ï¼š1G

å®¢æœç«¯ç»å¸¸å‡ºç°é”™è¯¯ï¼š(MySQLdb.OperationalError) (2013, &#39;Lost connection to MySQL server during query&#39;)
MySQLæœåŠ¡å™¨ç»å¸¸çœ‹è§é”™è¯¯ï¼š Aborted connection 87082567 to db: &#39;test&#39; user: &#39;test&#39; host: &#39;x.x.x.x&#39; (Got timeout reading communication packets)

è¿™æ˜¯å“ªå„¿æ²¡æœ‰é…ç½®å¯¹å—ï¼Ÿè¿˜æ˜¯å…¶ä»–é—®é¢˜ï¼Ÿ</div>2024-08-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1d/3f/0d/1e8dbb2c.jpg" width="30px"><span>æ€€æ£æ¢¦æƒ³çš„å­¦æ¸£</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚ä½•æ“ä½œç¯å¢ƒè¢«ç¦ç”¨telnetï¼Œå¯ä»¥ç”¨sshæµ‹è¯•ç«¯å£
```
ssh -v 192.168.63.128 -p 3306
OpenSSH_9.6p1, OpenSSL 3.0.12 24 Oct 2023
debug1: Reading configuration data &#47;etc&#47;ssh_config
debug1: &#47;etc&#47;ssh_config line 10: Deprecated option &quot;useroaming&quot;
debug1: Connecting to 192.168.63.128 [192.168.63.128] port 3306.
debug1: Connection established.
```</div>2025-01-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/24/36/0829cbdc.jpg" width="30px"><span>TheOne</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œæ–‡ä¸­çš„ä¼šè¯çº§åˆ«å˜é‡æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ˜¯è¯´ä¸€ä¸ªè¿æ¥é‡Œå¯ä»¥ç›´æ¥è®¾ç½®çš„å˜é‡ï¼Œè¿˜æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡é‡Œå¯ä»¥è®¾ç½®çš„å˜é‡ï¼Ÿ</div>2024-08-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7f/77/8c34e407.jpg" width="30px"><span>kalid</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å—ç”¨ï¼Œå‚¬æ›´ğŸ˜„</div>2024-08-23</li><br/>
</ul>