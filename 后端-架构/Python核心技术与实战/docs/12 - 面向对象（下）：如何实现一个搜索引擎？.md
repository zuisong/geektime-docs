ä½ å¥½ï¼Œæˆ‘æ˜¯æ™¯éœ„ã€‚è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ª Python çš„æœç´¢å¼•æ“ï¼ˆsearch engineï¼‰ã€‚

æ‰¿æ¥ä¸Šæ–‡ï¼Œä»Šå¤©è¿™èŠ‚è¯¾çš„ä¸»è¦ç›®çš„æ˜¯ï¼Œå¸¦ä½ æ¨¡æ‹Ÿæ•æ·å¼€å‘è¿‡ç¨‹ä¸­çš„è¿­ä»£å¼€å‘æµç¨‹ï¼Œå·©å›ºé¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡æ€æƒ³ã€‚

æˆ‘ä»¬å°†ä»æœ€ç®€å•æœ€ç›´æ¥çš„æœç´¢åšèµ·ï¼Œä¸€æ­¥æ­¥ä¼˜åŒ–ï¼Œè¿™å…¶ä¸­ï¼Œæˆ‘ä¸ä¼šæ¶‰åŠåˆ°è¿‡å¤šçš„è¶…çº²ç®—æ³•ï¼Œä½†ä¸å¯é¿å…ä¼šä»‹ç»ä¸€äº›ç°ä»£æœç´¢å¼•æ“ä¸­çš„åŸºç¡€æ¦‚å¿µï¼Œä¾‹å¦‚è¯­æ–™ï¼ˆcorpusï¼‰ã€å€’åºç´¢å¼•ï¼ˆinverted indexï¼‰ç­‰ã€‚

å¦‚æœä½ å¯¹è¿™æ–¹é¢æœ¬èº«æœ‰äº›äº†è§£ï¼Œè‡ªç„¶å¯ä»¥è½»æ¾ç†è§£ï¼›å³ä½¿ä½ ä¹‹å‰å®Œå…¨æ²¡æ¥è§¦è¿‡æœç´¢å¼•æ“ï¼Œä¹Ÿä¸ç”¨è¿‡åˆ†æ‹…å¿ƒï¼Œæˆ‘ä¼šåŠ›æ±‚ç®€æ´æ¸…æ™°ï¼Œé™ä½å­¦ä¹ éš¾åº¦ã€‚åŒæ—¶ï¼Œæˆ‘å¸Œæœ›ä½ æŠŠæ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨é¢å‘å¯¹è±¡çš„å»ºæ¨¡æ€è·¯ä¸Šã€‚

## â€œé«˜å¤§ä¸Šâ€çš„æœç´¢å¼•æ“

å¼•æ“ä¸€è¯å°¤å¦‚å…¶åï¼Œå¬èµ·æ¥éå¸¸é…·ç‚«ã€‚æœç´¢å¼•æ“ï¼Œåˆ™æ˜¯æ–°ä¸–çºªåˆæœŸäº’è”ç½‘å‘å±•æœ€é‡è¦çš„å…¥å£ä¹‹ä¸€ï¼Œä¾æ‰˜æœç´¢å¼•æ“ï¼Œä¸­å›½å’Œç¾å›½åˆ†åˆ«è¯ç”Ÿäº†ç™¾åº¦ã€è°·æ­Œç­‰å·¨å‹å…¬å¸ã€‚

æœç´¢å¼•æ“æå¤§åœ°æ–¹ä¾¿äº†äº’è”ç½‘ç”Ÿæ´»ï¼Œä¹Ÿæˆä¸ºä¸Šç½‘å¿…ä¸å¯å°‘çš„åˆšéœ€å·¥å…·ã€‚ä¾æ‰˜æœç´¢å¼•æ“å‘å±•èµ·æ¥çš„äº’è”ç½‘å¹¿å‘Šï¼Œåˆ™æˆäº†ç¡…è°·å’Œä¸­å›½å·¨å¤´çš„æ ¸å¿ƒå•†ä¸šæ¨¡å¼ï¼›è€Œæœç´¢æœ¬èº«ï¼Œä¹Ÿåœ¨æŒç»­è¿›æ­¥ç€ï¼Œ Facebook å’Œå¾®ä¿¡ä¹Ÿä¸€ç›´æœ‰æ„å‘åœ¨è‡ªå®¶ç¤¾äº¤äº§å“æ¶è®¾æœç´¢å¹³å°ã€‚

å…³äºæœç´¢å¼•æ“çš„ä»·å€¼æˆ‘ä¸å¿…å¤šè¯´äº†ï¼Œä»Šå¤©æˆ‘ä»¬ä¸»è¦æ¥çœ‹ä¸€ä¸‹æœç´¢å¼•æ“çš„æ ¸å¿ƒæ„æˆã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJJOlibibPFEWOib8ib7RtfAtxND5FUqCxxoeTuLAbBI9ic23xuwdXT4IyiaWq3Fic9RgEAYI0lBTbEp2rcg/132" width="30px"><span>Jingxiao</span> ğŸ‘ï¼ˆ30ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>æ€è€ƒé¢˜ç­”æ¡ˆï¼š
John Si çš„è¯„è®ºè¯´çš„å¾ˆå¯¹ï¼Œå¦‚æœæƒ³è¦å¼ºè¡Œè®¿é—®çˆ¶ç±»çš„ç§æœ‰ç±»å‹ï¼Œåšæ³•æ˜¯ self._ParentClass__varï¼Œè¿™æ˜¯éå¸¸ä¸æ¨èçš„ hacky methodã€‚ä»¥ä¸‹æ˜¯ç¤ºèŒƒä»£ç ï¼š
class A:
    __a = 1

class B(A):
    pass

b = B()
print(b._A__a)</div>2019-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/30/29/d6816ebf.jpg" width="30px"><span>å°ä¾ é¾™æ—‹é£</span> ğŸ‘ï¼ˆ48ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å’Œé¢å‘å¯¹è±¡æ— å…³çš„å…³é”®è¯æ•´ç†ï¼š
1.ä¸€ä¸ªæœç´¢å¼•æ“ç”±æœç´¢å™¨ã€ç´¢å¼•å™¨ã€æ£€ç´¢å™¨å’Œç”¨æˆ·æ¥å£å››ä¸ªéƒ¨åˆ†ç»„æˆã€‚
2.Bag of Words Modelï¼Œè¯è¢‹æ¨¡å‹ã€‚
3.Inverted Index Modelï¼Œå€’åºç´¢å¼•ã€‚
4.è¯­æ–™corpusåˆ†è¯ï¼Œé½å¤«å®šå¾‹ã€‚
5.åˆå¹¶ K ä¸ªæœ‰åºæ•°ç»„ã€‚
6.LRUç¼“å­˜ã€‚
éš¾ç‚¹æ¶ˆåŒ–ï¼š4ï¼Œ5ï¼Œ6
æ€è€ƒé¢˜ï¼š
Pythonå¹¶æ²¡æœ‰çœŸæ­£çš„ç§æœ‰åŒ–æ”¯æŒï¼Œä½†å¯ç”¨ä¸‹åˆ’çº¿å¾—åˆ°ä¼ªç§æœ‰ï¼š
ï¼ˆ1ï¼‰_xxx      &quot;å•ä¸‹åˆ’çº¿ &quot; å¼€å§‹çš„æˆå‘˜å˜é‡å«åšä¿æŠ¤å˜é‡ï¼Œæ„æ€æ˜¯åªæœ‰ç±»å¯¹è±¡å’Œå­ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®åˆ°è¿™äº›å˜é‡ï¼Œéœ€é€šè¿‡ç±»æä¾›çš„æ¥å£è¿›è¡Œè®¿é—®ï¼›
ï¼ˆ2ï¼‰__xxx    ç±»ä¸­çš„ç§æœ‰å˜é‡&#47;æ–¹æ³•åï¼Œåªæœ‰ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®ï¼Œè¿å­ç±»å¯¹è±¡ä¹Ÿä¸èƒ½è®¿é—®åˆ°è¿™ä¸ªæ•°æ®ã€‚
ï¼ˆ3ï¼‰__xxx__ é­”æ³•å‡½æ•°ï¼Œå‰åå‡æœ‰ä¸€ä¸ªâ€œåŒä¸‹åˆ’çº¿â€ ä»£è¡¨pythoné‡Œç‰¹æ®Šæ–¹æ³•ä¸“ç”¨çš„æ ‡è¯†ï¼Œå¦‚ __init__() ä»£è¡¨ç±»çš„æ„é€ å‡½æ•°ã€‚</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/84/55/1e40bd61.jpg" width="30px"><span>shiziwen</span> ğŸ‘ï¼ˆ21ï¼‰ ğŸ’¬ï¼ˆ5ï¼‰<div>ç¬¬äºŒç§æ–¹æ³•ï¼Œå¯¹äºå¤šé‡ç»§æ‰¿ï¼Œå¦‚æœæœ‰å¤šä¸ªæ„é€ å‡½æ•°éœ€è¦è°ƒç”¨ï¼Œ æˆ‘ä»¬å¿…é¡»ç”¨ä¼ ç»Ÿçš„æ–¹æ³•LRUCache.__init__(self) ã€‚

è¿™é‡Œçš„ä¸¤å¥è¯æ²¡æœ‰å¾ˆæ˜ç™½ï¼ŒLRUCacheä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Ÿ


</div>2020-04-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/ec/4b/442dd5f1.jpg" width="30px"><span>åŠæ™‚è¡Œæ¨‚</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>çœ‹åˆ°è¿™ï¼Œæˆ‘å‘ç°æˆ‘äº”åå…ƒä¹°çš„è¯¾ç¨‹ç®€ç›´è¡€èµšï¼ï¼ï¼çœ‹æ¡è¯„è®ºè¯´çœ‹ä¸æ‡‚ä¸ç¡è§‰ï¼Œå»ºè®®ä½ å–„è‰¯åˆ é™¤ï¼Œæˆ‘ç›´æ¥è¢«ä½ æçš„ç¡è¡£å…¨æ— ï¼Œæ„Ÿè§‰èƒ½æˆ˜åˆ°å¤©äº®</div>2020-04-29</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/0c/8d/5293d44d.jpg" width="30px"><span>å¤´åƒæˆ‘è€å©†</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>class BOWInvertedIndexEngineWithCache(BOWInvertedIndexEngine, LRUCache): 
                  def __init__(self): 
                       super(BOWInvertedIndexEngineWithCache, self).__init__() 
                       LRUCache.__init__(self)
è€å¸ˆï¼Œè¿™é‡Œè¿™2ç§è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•ä¸åº”è¯¥æ˜¯äºŒé€‰ä¸€å—ï¼Œå¦‚æœè¿™æ ·å†™çš„è¯LRUCacheçš„æ„é€ æ–¹æ³•ä¼šè¢«è°ƒç”¨2æ¬¡
class A():
    def __init__(self):
        print(&#39;enter A&#39;)
        print(&#39;leave A&#39;)

class B(A):
    def __init__(self):
        print(&#39;enter B&#39;)
        super().__init__()
        print(&#39;leave B&#39;)

class C(A):
    def __init__(self):
        print(&#39;enter C&#39;)
        super().__init__()
        print(&#39;leave C&#39;)

class D(B, C):
    def __init__(self):
        print(&#39;enter D&#39;)
        super(D,self).__init__()
        C.__init__(self)
        print(&#39;leave D&#39;)

D()
è¾“å‡ºç»“æœï¼š
enter D
enter B
enter C
enter A
leave A
leave C
leave B
enter C
enter A
leave A
leave C
leave D</div>2020-03-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/ee/ee/1cd89270.jpg" width="30px"><span>quanxyun</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Pythonå¹¶æ²¡æœ‰çœŸæ­£çš„ç§æœ‰åŒ–æ”¯æŒï¼Œä½†å¯ç”¨ä¸‹åˆ’çº¿å¾—åˆ°ä¼ªç§æœ‰ï¼š
ï¼ˆ1ï¼‰_xxx &quot;å•ä¸‹åˆ’çº¿ &quot; å¼€å§‹çš„æˆå‘˜å˜é‡å«åšä¿æŠ¤å˜é‡ï¼Œæ„æ€æ˜¯åªæœ‰ç±»å¯¹è±¡å’Œå­ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®åˆ°è¿™äº›å˜é‡ï¼Œéœ€é€šè¿‡ç±»æä¾›çš„æ¥å£è¿›è¡Œè®¿é—®ï¼›
ï¼ˆ2ï¼‰__xxx ç±»ä¸­çš„ç§æœ‰å˜é‡&#47;æ–¹æ³•åï¼Œåªæœ‰ç±»å¯¹è±¡è‡ªå·±èƒ½è®¿é—®ï¼Œè¿å­ç±»å¯¹è±¡ä¹Ÿä¸èƒ½è®¿é—®åˆ°è¿™ä¸ªæ•°æ®ã€‚
ï¼ˆ3ï¼‰__xxx__ é­”æ³•å‡½æ•°ï¼Œå‰åå‡æœ‰ä¸€ä¸ªâ€œåŒä¸‹åˆ’çº¿â€ ä»£è¡¨pythoné‡Œç‰¹æ®Šæ–¹æ³•ä¸“ç”¨çš„æ ‡è¯†ï¼Œå¦‚ __init__() ä»£è¡¨ç±»çš„æ„é€ å‡½æ•°ã€‚</div>2019-11-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/22/89/73397ccb.jpg" width="30px"><span>å“é›¨</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç§æœ‰å±æ€§ä¸å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªæ™®é€šçš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸­æ“ä½œç§æœ‰å±æ€§ã€‚å› ä¸ºæ™®é€šçš„æ–¹æ³•æ˜¯å¯ä»¥æ“ä½œçš„ã€‚</div>2019-06-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/44/3d/35d6670d.jpg" width="30px"><span>Claywoow</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆå¯ä»¥æ‹“å±•ä¸€ä¸‹å…ƒç±»å—ï¼Œå®ƒæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸€ä¸ªé‡è¦çš„ç±»å‹å—ï¼Ÿ</div>2019-06-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/c1/43/50c4cd22.jpg" width="30px"><span>ç›Šè¾¾</span> ğŸ‘ï¼ˆ77ï¼‰ ğŸ’¬ï¼ˆ9ï¼‰<div>çœ‹ä¸æ‡‚ä¸ç¡è§‰</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/77/da/54c663f3.jpg" width="30px"><span>WingÂ·ä¸‰é‡‘</span> ğŸ‘ï¼ˆ65ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ€è€ƒé¢˜ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»ç§æœ‰å˜é‡çš„æ–¹æ³•
- é€šè¿‡å®šä¹‰ get&#47;set å‡½æ•°æ¥é—´æ¥æ“ä½œç§æœ‰å˜é‡
- é€šè¿‡ å®ä¾‹å._çˆ¶ç±»å__ç§æœ‰å˜é‡å æ¥ç›´æ¥è°ƒç”¨ï¼Œæ‰€ä»¥äº‹å®ä¸Š python å¹¶ä¸ç›´æ¥ç§æœ‰å˜é‡

# ä¸»è¦çŸ¥è¯†ç‚¹

- æœç´¢å¼•æ“çš„å››ä¸ªç»„æˆéƒ¨åˆ†
- è¿­ä»£å¼€å‘çš„æµç¨‹
- ç±»çš„ç»§æ‰¿ä¸çˆ¶ç±»å‡½æ•°çš„å¼ºè¡Œè°ƒç”¨
- è¯è¢‹æ¨¡å‹ + é€†åºç´¢å¼• + åˆå¹¶æœ‰åºæ•°ç»„ = ä¼˜åŒ–æ£€ç´¢é€Ÿåº¦ + è€ƒè™‘å•è¯é¡ºåºä¸é—´éš”
- pylru çš„åŸºæœ¬ç”¨æ³•
- å¤šé‡ç»§æ‰¿çš„åˆå§‹åŒ–è§„åˆ™

# æœç´¢å¼•æ“

- æœç´¢å™¨ï¼šç›¸å½“äºçˆ¬è™«
- ç´¢å¼•å™¨ï¼šä¸ºæ¯ä¸ªæ–‡ä»¶&#47;ç½‘é¡µå»ºç«‹å”¯ä¸€çš„ç´¢å¼•
- æ£€ç´¢å™¨ï¼šé«˜æ•ˆåœ°æ£€ç´¢å¹¶è¿”å›åŒ¹é…çš„æ–‡ä»¶&#47;ç½‘é¡µ
- ç”¨æˆ·æ¥å£ï¼šè¾“å…¥æ¡†å’Œç»“æœè¿”å›ç•Œé¢

# è¿­ä»£å¼€å‘çš„æµç¨‹

- æ„å»ºä¸€ä¸ªé€šç”¨çš„åŸºæœ¬æ¡†æ¶
- ä»æœ€ç®€å•çš„æƒ…å†µè€ƒè™‘èµ·ï¼Œæ­å»ºä¸€ä¸ªèƒ½è¿è¡Œçš„æç®€ç‰ˆæœ¬
- æŒ‰ç…§å®é™…éœ€è¦ä¸æ–­å¯¹å…·ä½“çš„å®ç°è¿‡ç¨‹è¿›è¡Œä¼˜åŒ–ï¼šå¦‚åœ¨æœ¬è®²çš„ä¾‹å­ä¸­ï¼Œå…ˆè€ƒè™‘äº†å•ä¸ªæœç´¢è¯ + å°æœç´¢é‡çš„æƒ…å†µï¼Œæ„å»ºäº† ver 1ï¼›ç„¶åè€ƒè™‘äº†å¤šä¸ªæœç´¢è¯ï¼Œæ„å»ºäº†è¯è¢‹çš„ ver 2ï¼›å†è€ƒè™‘äº†å¤§æœç´¢é‡ï¼Œæ„å»ºäº†è¯è¢‹ + é€†åºç´¢å¼•çš„ ver 3ï¼ˆæäº† æœç´¢è¯æ’åºä¸é—´éš” æƒ…å†µä¸‹çš„å¤„ç†æ€è·¯ï¼‰ï¼›æœ€åè€ƒè™‘äº†è´Ÿè½½ä¸é‡å¤æ€§æœç´¢é—®é¢˜ï¼Œæ„å»ºäº†ä½¿ç”¨ LRU ç¼“å­˜ç­–ç•¥çš„ ver 4
- å¦‚æœå›è¿‡å¤´æ¥çœ‹æœ€åˆçš„æ¡†æ¶ï¼Œè¿˜èƒ½å‘ç° add_corpus çš„æ–¹æ³•å¹¶ä¸é€‚ç”¨äºæ–‡ä»¶è¾ƒå¤§çš„æƒ…å†µï¼Œç»“åˆå‰é¢ç¬¬å…­è®²çš„å†…å®¹å¯ä»¥åšäº›æ”¹è¿›ï¼›ä»¥åŠ main å‡½æ•°ç›´æ¥ç”¨äº† for å¾ªç¯æ¥æ‰¾æ‰€æœ‰çš„æ–‡ä»¶ï¼Œå®é™…ä½¿ç”¨æ—¶ç”¨çš„æ˜¯è¯¸å¦‚ os.walk çš„æ–¹æ³•</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/2d/5a/cc637589.jpg" width="30px"><span>îŒ®</span> ğŸ‘ï¼ˆ50ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ç¯‡æ–‡ç« å°±å€¼å›ç¥¨ä»·äº†ã€‚</div>2019-06-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/8a/11/8e9fc7e7.jpg" width="30px"><span>é£å±…ä½çš„è¡—</span> ğŸ‘ï¼ˆ23ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Python3.x å’Œ Python2.x çš„ä¸€ä¸ªåŒºåˆ«æ˜¯: Python 3 å¯ä»¥ä½¿ç”¨ç›´æ¥ä½¿ç”¨ super().xxx ä»£æ›¿ super(Class, self).xxx</div>2019-06-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/48/e7/da93cbec.jpg" width="30px"><span>chuan_chen</span> ğŸ‘ï¼ˆ14ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ„Ÿè§‰è¿™ç¯‡å¥½éš¾ã€‚ã€‚ã€‚</div>2019-09-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/4b/53/67c08006.jpg" width="30px"><span>John Si</span> ğŸ‘ï¼ˆ10ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å…³äºæ€è€ƒé¢˜,å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»ç§æœ‰å±æ€§ï¼Œåªå¯é€è¿‡self._Parent__varnameå»è¯»å–è¯¥ç§æœ‰å±æ€§çš„å€¼ï¼Œæˆ–åœ¨çˆ¶ç±»åˆ›å»ºæ–¹æ³•è¿”å›ç§æœ‰å±æ€§çš„å€¼ï¼Œç„¶åå­ç±»è°ƒç”¨çˆ¶ç±»æ–¹æ³•å»å–å¾—è¯¥ç§æœ‰å±æ€§çš„å€¼

class Animal():
    
    def __init__(self, sex, height, weight):
        self.__sex = sex
        self.height = height
        self.weight = weight
        
    def say_hello(self):
        raise &#39;say hello not implemented&#39;
        
    def get_sex(self):
        print(&#39;Achieve sex information for parent method: {}&#39;.format(self.__sex))
        
class Person(Animal):
    
    def __init__(self,name,age):
        super().__init__(&#39;M&#39;,172,70)
        self.name = name
        self.age = age
        
    def say_hello(self):
        print(&#39;Hello, {}, age: {}, weight:{}&#39;.format(self.name, self.age, self.weight))
        print(&#39;Sex: {}&#39;.format(self._Animal__sex))
        

john = Person(&#39;John&#39;,35)
john.say_hello()
john.get_sex()

========================
Hello, John, age: 35, weight:70
Sex: M
Achieve sex information for parent method: M

</div>2019-06-05</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/rsQcAfBYSwPWRNTSv0ax21faoBic53FxKiaEEbx6CibuXlzL4g6nzEftdMFjWUGNf17RwwOHso8YoiaE5Fg1GNtmbg/132" width="30px"><span>zhuanghua</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Python 3 ä¸­ç»§æ‰¿å†™æ³• super().__init__()
Python 2 ä¸­ç»§æ‰¿å†™æ³• super(å­ç±»å, self).__init__()ï¼Œä¸”åœ¨çˆ¶ç±»å®šä¹‰æ—¶è¦åœ¨æ‹¬å·å†…æŒ‡å®š objectã€‚</div>2019-08-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/43/dc/4f70c936.jpg" width="30px"><span>ä¸€åªçœ¼çœ‹ä¸–ç•Œ</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>        query_list = []
        for word in query_words:
            if word in self.inverted_index:
                query_list.append(self.inverted_index[word])
        # å–é›†åˆçš„äº¤é›†
        result = set(reduce(lambda x, y: set(x) &amp; set(y), query_list))
        return result
ç”¨äº¤é›†ä¼šçœå»Nè¡Œä»£ç çš„åˆ¤æ–­</div>2019-08-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/b6/e7/460a6870.jpg" width="30px"><span>æˆ‘æ˜¯ä¼ å¥‡</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å›¾ä¸é”™</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/54/b2/5ea0b709.jpg" width="30px"><span>Danpier</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>BOWInvertedIndexEngine searchå‡½æ•°ååŠéƒ¨åˆ†å°‘äº†ç¼©è¿›ï¼Œç¬¬40è¡Œå¼€å§‹</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/dc/38/719040a4.jpg" width="30px"><span>old Z</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¼€å§‹ä¹Ÿçœ‹ä¸å¤ªæ‡‚forå¾ªç¯åé¢çš„æ“ä½œï¼Œæœ€åè°ƒè¯•äº†ä¸€æ®µæ—¶é—´å‘ç°while trueä¸­çš„forå¾ªç¯åšäº†å¾ˆå¤šæ¬¡ï¼Œè¿™ä¸ªæ¬¡æ•°æ ¹æ®ç”¨æˆ·è¾“å…¥æ¥å®šï¼Œåšè¿™ä¹ˆå¤šå¾ªç¯ä½æ„Ÿè§‰åªæ˜¯ä¸ºäº†å¾—åˆ°æœç´¢ç»“æœçš„ä¸ªæ•°å’Œlistï¼Œè‡ªæˆ‘æ„Ÿè§‰ä¸æ˜¯å¾ˆåˆ©äºç†è§£ï¼Œè€Œä¸”å¾ªç¯æ¬¡æ•°è¿‡å¤šï¼Œå¦‚æœç”¨æˆ·è¾“å…¥è¿‡å¤šï¼ŒåŠ¿å¿…ä¼šé€ æˆæ—¶é—´çš„å·¨å¤§æ¶ˆè€—ã€‚æ‰€ä»¥æˆ‘æ ¹æ®è‡ªå·±çš„æƒ³æ³•ï¼Œåªé€šè¿‡ä¸€æ¬¡forå¾ªç¯ï¼Œä»£ç å¦‚ä¸‹ï¼š
class OLDZBOWInvertedIndexEngine(SearchEngineBase):
    def __init__(self):
        super(OLDZBOWInvertedIndexEngine, self).__init__()
        self.inverted_index = {}

    def process_corpus(self, id, text):
        # set
        words = self.parse_text_to_words(text)
        for word in words:
            if word not in self.inverted_index:
                self.inverted_index[word] = []
            self.inverted_index[word].append(id)

    def search(self, query):

        query_words = list(self.parse_text_to_words(query))
        query_words_index = list()
        for query_word in query_words:
            query_words_index.append(0)
        for query_word in query_words:
            if query_word not in self.inverted_index:
                return []
        while True:
            input_inverted_list=[]
            for idx, query_word in enumerate(query_words):

                current_inverted_list = self.inverted_index[query_word]
                input_inverted_list.append(current_inverted_list)

            result=self.l_output_same(input_inverted_list)
            return result

    # å¯¹Lä¸­çš„å…ƒç´ è¿›è¡Œè®¡æ•°ï¼Œå°†æœ€å¤šçš„å…ƒç´ è¾“å‡º
    @staticmethod
    def l_output_same(L):
        L_ALL = []
        L_SAME = []
        for l in L:
            L_ALL += l
        count_dict = Counter(L_ALL)
        count_dict_sort = sorted(count_dict.items(), key=lambda x: x[1], reverse=True)
        max_count = count_dict_sort[0][1]
        for id, count in count_dict_sort:
            if count == max_count:
                L_SAME.append(id)
        return L_SAME

å…·ä½“æ—¶é—´å’Œè€å¸ˆçš„ç›¸æ¯”æˆ‘æ²¡æœ‰æµ‹è¯•ï¼Œåªæ˜¯è§‰å¾—æˆ‘è¿™ä¸ªæ–¹æ³•å¯èƒ½æ›´åˆ©äºæ–°æ‰‹ç†è§£å§ï¼Œæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿æŒ‡å‡ºï¼Œä»£ç ä¸­çœç•¥äº†parse_text_to_words(text)è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºå­—æ•°å¤ªå¤šå‘ä¸äº†è¯„è®ºï¼Œéœ€è¦çš„è‡ªå·±åŠ ä¸Šæµ‹è¯•</div>2019-10-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/75/1c/0238b794.jpg" width="30px"><span>luyang</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ˜¯searchï¼ˆï¼‰åˆè¢«é‡è½½äº†ï¼Œä¸æ˜¯queryï¼ˆï¼‰</div>2019-06-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/8c/b3/a74a7125.jpg" width="30px"><span>tux</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿è¡Œæ–‡ä¸­ä»£ç ï¼Œå§‹ç»ˆåœ¨è¿è¡ŒçŠ¶æ€!

ä¿®æ”¹äº†ä¸€å¤„ï¼š
class SearchEngineBase(object):
	...
    def add_corpus(self, file_path):
        with open(&#39;æ–‡ä»¶çš„ç›®å½•&#39; + file_path, &#39;r&#39;) as fin:  #ä¿®æ”¹äº†æ­¤å¤„
            text = fin.read()
            print(&#39;text:&#39;, text)   #èƒ½æ‰“å°å‡ºå†…å®¹
			
			
ä¸ä¿®æ”¹ä»£ç ï¼ŒæŠ¥FileNotFoundErrorã€‚å»æŸ¥èµ„æ–™ï¼Œåº”è¯¥ç”¨å…¨è·¯å¾„ã€‚ æ€»æœ‰ä¸ªæƒ³å…ˆçœ‹åˆ°åé¦ˆç»“æœçš„ å¼ºè¿«ç—‡ã€‚</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/98/fc/b1d22b7e.jpg" width="30px"><span>é—²äºº</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ5ï¼‰<div>BOWInvertedIndexEngineç±»çš„searchå‡½æ•°ä¸­ï¼š
query_words_index = list()
for query_word in query_words:
    query_words_index.append(0)
è¿™ä¸€æ®µæ²¡çœ‹æ˜ç™½ï¼š
query_words_indexæ˜¯ä¸€ä¸ªå…¨ä¸º0çš„åˆ—è¡¨ï¼Ÿ
æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</div>2019-06-20</li><br/><li><img src="https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epbRibsic15KXfGEN3SSjnLhXGyhK2Uyrj5ibBJsKAjicNqtafDaQOLH4xpSJRZD1vmibFPJER1ySmwP9A/132" width="30px"><span>farFlight</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æŒ‰ç…§æˆ‘ä¹‹å‰çš„ç†è§£ï¼ŒPythonæ˜¯æ²¡æœ‰ä¸¥æ ¼çš„privateå˜é‡çš„ã€‚å­ç±»ç¡®å®æ— æ³•ç›´æ¥è®¿é—®çˆ¶ç±»&quot;self.__var&quot;å˜é‡ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡&quot;self._Superclass__var&quot;è®¿é—®ã€‚è¦æƒ³æ¯”è¾ƒå¥½åœ°è®¿é—®æˆ–è€…ä¿®æ”¹è¿™äº›å˜é‡ï¼Œå¯ä»¥åƒJAVAä¸€æ ·å†™getterå’Œsetterå§ï¼Ÿ
å¦å¤–æˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š
1. ä¸€äº›æ‰‹å†Œä¸­è¯´pythonçš„å¤šé‡ç»§æ‰¿éå¸¸æ··ä¹±ä¸å¯é ï¼Œå°¤å…¶æ¶‰åŠå¾ˆå¤šé‡è½½çš„æ—¶å€™ï¼Œå› æ­¤éœ€è¦é¿å…ï¼Œæˆ–è€…é‡‡ç”¨compositionçš„æ–¹å¼ã€‚å®é™…å·¥ç¨‹ä¸­æ˜¯å¦ä¼šæœ‰è¿™æ ·çš„è€ƒè™‘å‘¢ï¼Ÿ
2. ä»¥æœç´¢å¼•æ“ä¸ºä¾‹ï¼Œå¦‚ä½•è§„åˆ’å„ä¸ªç±»ä»¥åŠå‡½æ•°çš„åŠŸèƒ½ï¼Œæ˜¯å¦æ˜¯ è®¾è®¡æ¨¡å¼ æ–¹é¢çš„çŸ¥è¯†å‘¢ï¼Ÿ</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/8a/bc/cb39ed38.jpg" width="30px"><span>è‡ªç”±æ°‘</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å°ç»“:
â‘ ç”¨superå‡½æ•°ï¼Œå…ˆè¿è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è¿è¡Œå­ç±»çš„æ„é€ å‡½æ•°ã€‚
â‘¡é›†æˆçš„æ—¶å€™ï¼Œçˆ¶ç±»é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœå­ç±»ä¸å®ç°ï¼Œå°±ä¼šå‡ºç°å¼‚å¸¸ã€‚
â‘¢å­ç±»å®ç°çˆ¶ç±»çš„å‡½æ•°éœ€æŒ‰åŒæ ·çš„å‡½æ•°åå’Œå‚æ•°åˆ—è¡¨æ¥å®ç°ã€‚
â‘£å˜é‡åœ¨æ„é€ å‡½æ•°ä¸­å£°æ˜ï¼Œå…¶å®ƒæ–¹æ³•å¯ä»¥ä½¿ç”¨ã€‚å˜é‡å®šä¹‰ä¸ºç§æœ‰çš„(__å˜é‡å)åˆ™éæˆå‘˜æ–¹æ³•ä¸èƒ½è®¿é—®ã€‚
é™æ€å‡½æ•°æ²¡æœ‰çŠ¶æ€ï¼Œä¸æ¶‰åŠå¯¹è±¡çš„ç§æœ‰å˜é‡ï¼Œç›¸åŒçš„è¾“å…¥èƒ½å¾—åˆ°å®Œå…¨ç›¸åŒçš„è¾“å‡ºç»“æœã€‚é™æ€çš„ï¼Œæ–¹ä¾¿å…¶ä»–çš„ç±»æ¥ä½¿ç”¨ã€‚
åœ¨åˆç†åˆ†å±‚è®¾è®¡åï¼Œæ¯ä¸€å±‚çš„é€»è¾‘åªéœ€è¦å¤„ç†å¥½ä»½å†…çš„äº‹æƒ…å³å¯ã€‚
è¿­ä»£å¼€å‘çš„æµç¨‹ï¼Œå…ˆå®šä¹‰åŸºç±»ï¼Œè§„åˆ’å¥½æ¥å£ï¼Œåœ¨æ ¹æ®éœ€è¦è¿›ä¸€æ­¥å®Œå–„ï¼Œé€šè¿‡ç»§æ‰¿åŸºç±»æ·»åŠ åŠŸèƒ½æˆ–ä¿®æ”¹è®¾è®¡ã€‚è¿™ä¸ªæ—¶å€™å°±ä¸ç”¨ä¿®æ”¹è°ƒç”¨è¯¥åŠŸèƒ½çš„ä»£ç äº†ã€‚
æ€è€ƒé¢˜:ç§æœ‰å˜é‡ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè¦ç»§æ‰¿å¯ä»¥å®šä¹‰ä¸ºé™æ€å˜é‡ã€‚
ç±»çš„ç»§æ‰¿å…³ç³»è§githubä¸»é¡µé‡Œçš„å›¾ç‰‡æ–‡ä»¶
è¯¾ç¨‹çš„ç»ƒä¹ ä»£ç : https:&#47;&#47;github.com&#47;zwdnet&#47;PythonPractice</div>2019-09-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3b/fc/04a75cd0.jpg" width="30px"><span>taoist</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>python3 åœ¨functools æ¨¡å—é‡Œ å¼•å…¥äº†è£…é¥°å™¨ lru_cache
å¯ä»¥ç›´æ¥ å¯¼å…¥å¹¶ä½¿ç”¨
from functools import lru_cache

 @lru_cache()
 def search(self, query):
    pass</div>2019-06-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/14/0f/91f0194d.jpg" width="30px"><span>æµ·ç”Ÿ</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å¯ä¸å¯ä»¥è®²è§£ä¸€äº›å¼€æºçš„æ¡†æ¶ä»€ä¹ˆçš„ï¼Œpython è¿™è¾¹æ·±åº¦å­¦ä¹ æ¡†æ¶å¾ˆå¤šã€‚è¿™äº›æ¡†æ¶çš„ä»£ç å¾ˆä¼˜ç§€ï¼Œä¹Ÿæ˜¯è¯­è¨€çš„æ ¸å¿ƒæŠ€æœ¯è¿ç”¨æœ€å¤šçš„åœ°æ–¹ã€‚</div>2019-06-05</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/24/73/47/c85c8941.jpg" width="30px"><span>æå¥½</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å€’ç½®ç´¢å¼•ä¸­çš„searchå®ç°çš„æœ‰ç‚¹æ™¦æ¶©ï¼Œå®ç°ä¸€ä¸ªå¸¸è§„æ€è·¯ï¼Œå¸®åŠ©å¤§å®¶è·³è¿‡è¿™ä¸ªå‘ï¼Œå»ä¸“æ³¨äºé¢å‘å¯¹è±¡çš„æ€æƒ³
def search(self, query): 
    query_words = list(self.parse_text_to_words(query)) 
    # å­˜æ”¾ç»“æœ
    result = set()
    # å½“å‰è¯è¢‹ä¸­æœ‰å“ªäº›å•è¯
    word_list = self.self.inverted_index.keys()
    # éå†è¦æŸ¥æ‰¾çš„è¯ 
    for idx, query_word in enumerate(query_words): 
        # é‡åˆ°ä¸åœ¨åˆ—è¡¨ä¸­çš„å•è¯ï¼Œç›´æ¥è¿”å›ç©º
        if query_word not in word_list:
            return []
        # æ²¡æœ‰è¿”å›ï¼Œè¯´æ˜ä¸‹ä¸€è¡Œçš„å–å€¼è‚¯å®šä¸ä¼šå¼‚å¸¸
        current_inverted_list = set(self.inverted_index[query_word])
        # å¦‚æœæ˜¯ç¬¬0ä¸ªå•è¯ï¼Œå°±æŠŠresultè®¾æˆæŸ¥æ‰¾çš„åˆ—è¡¨
        if idx == 0:
            result = current_inverted_list
        # å¦‚æœæ˜¯åé¢çš„å•è¯ï¼Œresultä¸æŸ¥æ‰¾çš„åˆ—è¡¨å–äº¤é›†ï¼Œå³æ–°çš„èŒƒå›´
        else:
            result = result &amp; current_inverted_list
        # å¦‚æœå–äº¤é›†ä¸ºç©ºï¼Œè¿”å›ç©º
        if not result:
            return []
    return list(result)
</div>2023-12-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/2f/83/81e146e4.jpg" width="30px"><span>å¤§æµ·</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å€’æ’ç´¢å¼•çš„è¿™æ®µæŸ¥æ‰¾é€»è¾‘å¼€å§‹æ²¡çœ‹æ‡‚ï¼Œè‡ªå·±ç”¨æ³¨é‡Šæ¨¡æ‹Ÿè¿‡äº†ä¸€éæ€è·¯ï¼Œçœ‹æ‡‚äº†ï¼

        result = []
        while True:
            current_ids = []
            # æŸ¥è¯¢è¯ç¤ºä¾‹ï¼š &#39;hello&#39;,&#39;world&#39;
            # å€’æ’ç´¢å¼•å†…å®¹ç¤ºä¾‹{&#39;hello&#39;:[&#39;1.txt&#39;,&#39;2.txt&#39;,&#39;4.txt&#39;,&#39;6.txt&#39;,&#39;7.txt&#39;] , &#39;world&#39;:[&#39;3.txt&#39;,&#39;4.txt&#39;,&#39;5.txt&#39;]}
            for idx, query_word in enumerate(query_words): # 2ä¸ªæŸ¥è¯¢è¯ï¼Œå› æ­¤ä¸‹æ–¹çš„å¾ªç¯ä½“ä¸­æ³¨é‡Šä¸¤æ¬¡å€¼ç”¨é€—å·åˆ†éš”
                # idx: 0,1
                # query_word: &#39;hello&#39;,&#39;world&#39;
                current_index = query_words_index[idx]  # current_index: 0,0 =&gt; 1,0 =&gt; 2,0 =&gt; 2,1 =&gt; 3,2 =&gt; 3,3
                current_inverted_list = self.inverted_index[query_word]
                # hello: [&#39;1.txt&#39;,&#39;2.txt&#39;,&#39;4.txt&#39;,&#39;6.txt&#39;,&#39;7.txt&#39;]
                # world: [&#39;3.txt&#39;,&#39;4.txt&#39;,&#39;5.txt&#39;]

                # å·²ç»éå†åˆ°äº†æŸä¸€ä¸ªå€’åºç´¢å¼•çš„æœ«å°¾ï¼Œç»“æŸ search
                if current_index &gt;= len(current_inverted_list):  # condition: F,F =&gt; F,F =&gt; F,F =&gt; F,F =&gt; F,F =&gt;F,T
                    return result                                # T:return [&#39;4.txt&#39;] è¿™é‡Œç¨‹åºè¿”å›å¹¶ç»“æŸ

                current_ids.append(current_inverted_list[current_index])
                # current_ids: 1.txt,3.txt =&gt; 2.txt,3.txt =&gt; 4.txt,3.txt =&gt; 4.txt,4.txt =&gt; 6.txt,5.txt

            # ç„¶åï¼Œå¦‚æœ current_ids çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆè¡¨æ˜è¿™ä¸ªå•è¯åœ¨è¿™ä¸ªå…ƒç´ å¯¹åº”çš„æ–‡æ¡£ä¸­éƒ½å‡ºç°äº†
            if all(x == current_ids[0] for x in current_ids):     # condition: F =&gt; F =&gt; F =&gt; T &gt; F
                result.append(current_ids[0])
                query_words_index = [x + 1 for x in query_words_index]  # T:3,2
                continue
            
            # å¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å°±æŠŠæœ€å°çš„å…ƒç´ åŠ ä¸€
            min_val = min(current_ids)                  # min_val: 1.txt =&gt; 2.txt =&gt; 3.txt =&gt; T =&gt; 5.txt
            min_val_pos = current_ids.index(min_val)    # min_val_pos: 0 =&gt; 0 =&gt; 1 =&gt; T =&gt; 1
            query_words_index[min_val_pos] += 1         # query_words_index: 1,0 =&gt; 2,0 =&gt; 2,1 =&gt; T =&gt; 3,3

</div>2021-11-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/2e/60/4fa1f3bd.jpg" width="30px"><span>rså‹¿å¿˜åˆå¿ƒ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Pythonï¼šç±»çš„ç»§æ‰¿ï¼Œè°ƒç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•åŸºç¡€è¯¦è§£ï¼Œå¯ä»¥å‚è€ƒï¼šhttps:&#47;&#47;blog.csdn.net&#47;yilulvxing&#47;article&#47;details&#47;85374142</div>2021-10-12</li><br/><li><img src="" width="30px"><span>Geek_f6bfca</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div># ä¸€.çˆ¶ç±»
class SearchEngineBase(object):# çˆ¶ç±»
    def __init__(self):# æ„é€ å‡½æ•°ï¼Œä¼ é€’å‚æ•°
        pass

    # ä»¥ä¸‹æ˜¯éœ€è¦å®ç°çš„æ–¹æ³•
    # 1.è¯»å–æ–‡ä»¶å†…å®¹
    def add_corpus(self, file_path):
        with open(file_path,&#39;r&#39;,encoding=&#39;utf-8&#39;) as file:
            context = file.read()
        self.process_corpus(file_path, context) # è°ƒç”¨ç±»å†…éƒ¨çš„æ–¹æ³• process_corpus

    # 2.å¤„ç†æ–‡ä»¶å†…å®¹
    # å¦‚æœçˆ¶ç±»å®ä¾‹åŒ–åè°ƒç”¨ process_corpus æ–¹æ³•åˆ™ä¼šæŠ¥é”™ï¼Œè¯¥å¤„ç†æ–¹å¼å¼ºåˆ¶è¦æ±‚å­ç±»é‡å†™çˆ¶ç±»å‡½æ•°æ¥è¦†ç›–çˆ¶ç±»åŸæœ‰å‡½æ•°,æ‰€ä»¥è¿™é‡Œä»€ä¹ˆåŠŸèƒ½éƒ½æ²¡æœ‰
    # id ç­‰åŒäº file_path
    def process_corpus(self, id, text):
        raise Exception(&#39;process corpus not implement&#39;)

    # 3.è¾“å…¥éœ€è¦æ£€ç´¢çš„å•è¯
    def search(self, query):
        raise Exception(&#39;search corpus not implement&#39;)

# äºŒ.å­ç±»
class SimpleSearchEngine(SearchEngineBase):
    def __init__(self):
        super().__init__() # å¯¹ç»§æ‰¿è‡ªçˆ¶ç±»çš„å±æ€§åˆå§‹åŒ–
        self.__id_to_text = {} # å¢åŠ åˆå§‹åŒ–å˜é‡ï¼Œè®¾å®šä¸ºç©ºå­—å…¸ï¼Œç”¨æ¥å‚¨å­˜æ–‡ä»¶åœ°å€ã€å†…å®¹

    # çˆ¶ç±»ä¸­è¯¥æ–¹æ³•æ˜¯ä¸ªç©ºï¼Œåªèƒ½åœ¨å®ä¾‹åŒ–åæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘åœ¨å­ç±»ä¸­é‡å†™è¯¥æ–¹æ³•ï¼Œä»¥å®ç°çœŸæ­£çš„ç›®çš„
    def process_corpus(self, id, text):
        self.__id_to_text[id] = text

    def search(self, query):
        results = []
        for id, text in self.__id_to_text.items():
            if query in text:
                results.append(id)

        return results

# ä¸‰.ä¸»å‡½æ•°
# search_engine å®ä¾‹
def main():
    search_engine = SimpleSearchEngine()
    for file_path in [&#39;1.txt&#39;, &#39;2.txt&#39;, &#39;3.txt&#39;, &#39;4.txt&#39;, &#39;5.txt&#39;]:
        search_engine.add_corpus(file_path)

    while True:
        query = input(f&#39;Input your wordï¼š&#39;)
        results = search_engine.search(query)
        print(f&#39;found {len(results)} results.&#39;)
        for result in results:
            print(result)


# search_engine = SimpleSearchEngine()
main()

</div>2021-08-26</li><br/>
</ul>