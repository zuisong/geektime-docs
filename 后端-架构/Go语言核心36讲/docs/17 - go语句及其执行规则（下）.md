ä½ å¥½ï¼Œæˆ‘æ˜¯éƒæ—ï¼Œä»Šå¤©æˆ‘ä»¬ç»§ç»­åˆ†äº«goè¯­å¥æ‰§è¡Œè§„åˆ™çš„å†…å®¹ã€‚

åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°äº†goroutineåœ¨æ“ä½œç³»ç»Ÿçš„å¹¶å‘ç¼–ç¨‹ä½“ç³»ï¼Œä»¥åŠåœ¨Goè¯­è¨€å¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¸­çš„åœ°ä½å’Œä½œç”¨ç­‰ä¸€ç³»åˆ—å†…å®¹ï¼Œä»Šå¤©æˆ‘ä»¬ç»§ç»­æ¥èŠä¸€èŠè¿™ä¸ªè¯é¢˜ã€‚

## çŸ¥è¯†æ‰©å±•

**é—®é¢˜1ï¼šæ€æ ·æ‰èƒ½è®©ä¸»goroutineç­‰å¾…å…¶ä»–goroutineï¼Ÿ**

æˆ‘åˆšæ‰è¯´è¿‡ï¼Œä¸€æ—¦ä¸»goroutineä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå½“å‰çš„Goç¨‹åºå°±ä¼šç»“æŸè¿è¡Œï¼Œæ— è®ºå…¶ä»–çš„goroutineæ˜¯å¦å·²ç»åœ¨è¿è¡Œäº†ã€‚é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½åšåˆ°ç­‰å…¶ä»–çš„goroutineè¿è¡Œå®Œæ¯•ä¹‹åï¼Œå†è®©ä¸»goroutineç»“æŸè¿è¡Œå‘¢ï¼Ÿ

å…¶å®æœ‰å¾ˆå¤šåŠæ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å…¶ä¸­ï¼Œæœ€ç®€å•ç²—æš´çš„åŠæ³•å°±æ˜¯è®©ä¸»goroutineâ€œå°ç¡â€ä¸€ä¼šå„¿ã€‚

```
for i := 0; i < 10; i++ {
	go func() {
		fmt.Println(i)
	}()
}
time.Sleep(time.Millisecond * 500)
```

åœ¨`for`è¯­å¥çš„åè¾¹ï¼Œæˆ‘è°ƒç”¨äº†`time`åŒ…çš„`Sleep`å‡½æ•°ï¼Œå¹¶æŠŠ`time.Millisecond * 500`çš„ç»“æœä½œä¸ºå‚æ•°å€¼ä¼ ç»™äº†å®ƒã€‚`time.Sleep`å‡½æ•°çš„åŠŸèƒ½å°±æ˜¯è®©å½“å‰çš„goroutineï¼ˆåœ¨è¿™é‡Œå°±æ˜¯ä¸»goroutineï¼‰æš‚åœè¿è¡Œä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°åˆ°è¾¾æŒ‡å®šçš„æ¢å¤è¿è¡Œæ—¶é—´ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªç›¸å¯¹çš„æ—¶é—´ä¼ ç»™è¯¥å‡½æ•°ï¼Œå°±åƒæˆ‘åœ¨è¿™é‡Œä¼ å…¥çš„â€œ500æ¯«ç§’â€é‚£æ ·ã€‚`time.Sleep`å‡½æ•°ä¼šåœ¨è¢«è°ƒç”¨æ—¶ç”¨å½“å‰çš„ç»å¯¹æ—¶é—´ï¼Œå†åŠ ä¸Šç›¸å¯¹æ—¶é—´è®¡ç®—å‡ºåœ¨æœªæ¥çš„æ¢å¤è¿è¡Œæ—¶é—´ã€‚æ˜¾ç„¶ï¼Œä¸€æ—¦åˆ°è¾¾æ¢å¤è¿è¡Œæ—¶é—´ï¼Œå½“å‰çš„goroutineå°±ä¼šä»â€œç¡çœ â€ä¸­é†’æ¥ï¼Œå¹¶å¼€å§‹ç»§ç»­æ‰§è¡Œåè¾¹çš„ä»£ç ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/4e/ef/2ad3effd.jpg" width="30px"><span>æ«æ—ç«å±±</span> ğŸ‘ï¼ˆ70ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>è€å¸ˆï¼Œå…³äºé¡ºåºæ‰“å°çš„demo40.goçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼ŒåŒæ¥ç¢—ç»¿è±†æ±¤åŒå­¦çš„å®ç°
package main

import &quot;fmt&quot;

func main() {

	var num = 10
	sign := make(chan struct{}, 1)

	for i := 0; i &lt; num; i++ {
		go func(i int) {
			fmt.Println(i)
			sign &lt;- struct{}{}
		}(i)
		&lt;-sign
	}

}
è¿™æ ·å†™ä¸ºä»€ä¹ˆä¸èƒ½ä¿è¯åŒæ­¥ï¼Œèƒ½ä¸èƒ½å†è¯¦ç»†è§£é‡Šä¸‹å‘¢ã€‚è¿™ä¸ªå®ç°å’Œæ‚¨demo39.go ç›¸æ¯”ï¼Œåªæ˜¯åˆå¹¶äº†ä¸¤å¤„forå¾ªç¯ï¼Œæˆ‘çœ‹å¥½å¤šåŒå­¦ä¹Ÿæœ‰è¿™ä¸ªç–‘é—®ï¼Œå‘æ‚¨æ±‚è§£ã€‚
demo40.goçš„å®ç°ç›¸å½“äºå®ç°äº†æ¯ä¸ªå¼‚æ­¥çº¿ç¨‹çš„ä¸€ä¸ªè½®è¯¢loopã€‚ ä¸Šé¢çš„å®ç°ç›¸å½“äºå•æ­¥é—´åŠ äº†ä¸€ä¸ªbarrierã€‚æ‰§è¡Œ1-&gt;ç­‰å¾…-&gt;æ‰§è¡Œ2-&gt;ç­‰å¾…ã€‚ å®åœ¨æ²¡ç†è§£ä¸ºä»€ä¹ˆä¸èƒ½ä¿è¯åŒæ­¥</div>2019-04-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/53/e3/39dcfb11.jpg" width="30px"><span>æ¥ç¢—ç»¿è±†æ±¤</span> ğŸ‘ï¼ˆ37ï¼‰ ğŸ’¬ï¼ˆ9ï¼‰<div>æˆ‘æœ‰ä¸€ä¸ªæ›´ç®€å•çš„å®ç°æ–¹å¼ï¼Œ å¦‚ä¸‹
func main(){
	ch := make(chan struct{})
	for i:=0; i &lt; 100; i++{
		go func(i int){
			fmt.Println(i)
			ch &lt;- struct{}{}
		}(i)
		&lt;-ch
	}
}
è¿™æ ·ï¼Œæ¯æ¬¡å¾ªç¯éƒ½åŒ…è£…goroutine æ‰§è¡Œç»“æŸæ‰è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œå°±å¯ä»¥ä¿è¯é¡ºåºæ‰§è¡Œäº†</div>2018-09-19</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKbHJIeiaXIApbom8Yx325VvUouL4auhC62JBSpwY8Ao5VbrvCWDq2UUIl4XM6SicnGCW5LrHibQZwjQ/132" width="30px"><span>Geek_3241ef</span> ğŸ‘ï¼ˆ20ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä½ å¥½ï¼Œéƒè€å¸ˆï¼Œè¯·é—®è¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦sleepå‘¢ï¼Œæˆ‘ç†è§£çš„å¦‚æœä¸åŠ sleepï¼Œå…¶ä¸­æŸä¸ªgä¼šä¸€ç›´è½®è¯¢countçš„å€¼ï¼Œå½“å¦ä¸€ä¸ªgæ›´æ”¹è¿™ä¸ªå€¼æ—¶ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªgå°±ä¼šåˆ¤æ–­ç›¸ç­‰æ‰å¯¹å‘€ã€‚
ä½†å®é™…ä¸Šå»æ‰sleepåï¼Œç¨‹åºç¡®å®æ²¡æœ‰æŒ‰ç…§æˆ‘ç†è§£çš„é€»è¾‘æ‰§è¡Œï¼Œè¯·é—®è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢</div>2019-08-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/fb/a7/12c90699.jpg" width="30px"><span>Askerlve</span> ğŸ‘ï¼ˆ12ï¼‰ ğŸ’¬ï¼ˆ7ï¼‰<div>package main

import (
	&quot;fmt&quot;
	&quot;sync&#47;atomic&quot;
)

func main() {
	var count uint32
	trigger := func(i uint32, fn func()) {
		for {
			if n := atomic.LoadUint32(&amp;count); n == i {
				fn()
				atomic.AddUint32(&amp;count, 1)
				break
			}
		}
	}
	for i := uint32(0); i &lt; 10; i++ {
		go func(i uint32) {
			fn := func() {
				fmt.Println(i)
			}
			trigger(i, fn)
		}(i)
	}
	trigger(10, func() {})
}

æµ‹è¯•äº†ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°çš„è¾“å‡ºä¸å—æ§ï¼Œå¹¶ä¸”å¥½åƒæ°¸è¿œä¹Ÿä¸ä¼šç»“æŸï¼Œæœ‰äººèƒ½å¸®å¿™è§£é‡Šä¸‹å—ï¼Œgoå°ç™½~ğŸ˜€</div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4e/6a/ad3707f4.jpg" width="30px"><span>è€èŒ‚</span> ğŸ‘ï¼ˆ10ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸åŠ sleepç¨‹åºä¸èƒ½æ­£å¸¸ç»“æŸçš„æƒ…å†µè²Œä¼¼è·Ÿcpuæ ¸æ•°æœ‰å…³ï¼Œæˆ‘æ˜¯4æ ¸cpuï¼Œæ‰“å°0åˆ°2æ¯æ¬¡éƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼›0åˆ°3ä»¥ä¸Šå°±ä¼šæœ‰å¡ä¸»çš„æƒ…å†µï¼Œå¡ä¸»æ—¶cpuè¾¾åˆ°100%ï¼Œloadä¼šè¶…è¿‡4ã€‚çŒœæµ‹æ˜¯ä¸æ˜¯æ­¤æ—¶æ‰€æœ‰cpuéƒ½åœ¨å¤„ç†count==0çš„forå¾ªç¯ï¼Œæ²¡æœ‰ç©ºé—²çš„cpuæ‰§è¡Œatomic.AddUint32(&amp;count, 1)ï¼Ÿ</div>2018-10-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/49/db/ee5e8b43.jpg" width="30px"><span>æ–°å£ç»“è£¤</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>func main() {
	num := 10
	chs := [num+1]chan struct{}{}
	for i := 0; i &lt; num+1; i++ {
		chs[i] = make(chan struct{})
	}
	for i := 0; i &lt; num; i++ {
		go func(i int) {
			&lt;- chs[i]
			fmt.Println(i)
			chs[i+1] &lt;- struct{}{}
		}(i)
	}
	chs[0] &lt;- struct{}{}
	&lt;- chs[num]
}
æ¯ä¸ªgoroutineæ‰§è¡Œå®Œé€šè¿‡channelé€šçŸ¥ä¸‹ä¸€ä¸ªgoroutineï¼Œåœ¨ä¸»goroutineé‡Œæ§åˆ¶ç¬¬ä¸€ä¸ªgoroutineçš„å¼€å§‹ï¼Œå¹¶æ¥æ”¶æœ€åä¸€ä¸ªgoroutineç»“æŸçš„ä¿¡å·</div>2018-09-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/53/71/a4e9f20e.jpg" width="30px"><span>è¨€åˆæœ¨æ‰</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è¿™ç¯‡åŠ äº†ä»£ç ï¼Œä¸€ä¸‹å­å°±å®¹æ˜“å¾ˆå¤šäº†ï¼Œè€å¸ˆå‰é¢çš„å‡ ç¯‡éƒ½å¤ªå¤šåè¯äº†ï¼Œéœ€è¦ç¢ç£¨å»å¥½å‡ é</div>2020-01-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/fb/a7/12c90699.jpg" width="30px"><span>Askerlve</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>package main

import (
	&quot;fmt&quot;
	&quot;sync&#47;atomic&quot;
)

func main() {
	var count uint32
	trigger := func(i uint32, fn func()) {
		for {
			if n := atomic.LoadUint32(&amp;count); n == i {
				fn()
				atomic.AddUint32(&amp;count, 1)
				break
			}
		}
	}
	for i := uint32(0); i &lt; 10; i++ {
		go func(i uint32) {
			fn := func() {
				fmt.Println(i)
			}
			trigger(i, fn)
		}(i)
	}
	trigger(10, func() {})
}

è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œè¿˜æ˜¯ä¸å¯æ§è¯¶ï¼Œå¹¶ä¸”å¥½åƒæ°¸è¿œä¹Ÿä¸ä¼šç»“æŸï¼Œæ˜¯å› ä¸ºæˆ‘çš„goç‰ˆæœ¬é—®é¢˜å—ï¼Ÿ</div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/f5/5f/01b82ba1.jpg" width="30px"><span>è‚–æ©</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ç¬¬ä¸€éçœ‹å¥½å¤šéƒ½çœ‹ä¸æ‡‚ï¼Œçœ‹åˆ°åè¾¹å›è¿‡å¤´æ¥çœ‹ï¼Œå‘ç°ç”¨è‡ªæ—‹goroutineå®ç°ï¼ŒçœŸå®å¥‡å¦™ï¼›ç°åœ¨æƒ³æƒ³ï¼Œé™¤äº†æ–‡ç« ä¸­å®ç°æ–¹å¼ï¼Œå¯ä»¥ç”¨channelåŒæ­¥å®ç°ï¼›è¿˜å¯ä»¥ç”¨sync.WaitGroupå®ç°</div>2019-05-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/62/c3/d7f2bd8f.jpg" width="30px"><span>å—·å¤§çŒ«çš„é±¼</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆï¼Œæœ€è¿‘ä»å¤´å­¦ä¹ ï¼Œå‰é¢ä¸€ç›´æ²¡è·Ÿç€åŠ¨æ‰‹ï¼Œä¹Ÿæ²¡è‡ªå·±æ€»ç»“ã€‚è¿™å‡ å¤©åœ¨æ•´ç†æ¯ç« çš„é‡ç‚¹ï¼

https:&#47;&#47;github.com&#47;wenxuwan&#47;go36

åˆšå†™å®Œç¬¬äºŒç« ï¼Œçªç„¶å‘ç°è‡ªå·±åŠ¨æ‰‹æ€»ç»“å’Œåªçœ‹å·®å¥½å¤šã€‚æˆ‘ä¼šç»§ç»­ä¿æŒå–œæ¬¢æ€»ç»“ï¼</div>2018-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/83/4b/0e96fcae.jpg" width="30px"><span>sky</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>win64ç‰ˆæœ¬ï¼šgo1.10.2
linux64ç‰ˆæœ¬ï¼šgo1.11

linuxä¸‹å®é™…è¿è¡Œå’Œé¢„æœŸä¸€æ ·ï¼Œä½†ä¸ºä½•winä¸‹ä¼šä¸€ç›´è¿è¡Œä¸ä¼šåœæ­¢å‘¢ï¼Œä¸”CPUä¹Ÿå·²ç»æ˜¯100% è¡¨ç¤ºä¸è§£å‘€</div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/99/c9/a7c77746.jpg" width="30px"><span>å†°æ¿€å‡Œçš„çœ¼æ³ª</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>â€˜â€™å¦åˆ™ï¼Œæˆ‘ä»¬å°±å…ˆè®©å½“å‰çš„ goroutineâ€œç¡çœ â€ä¸€ä¸ªçº³ç§’å†è¿›å…¥ä¸‹ä¸€ä¸ªè¿­ä»£ã€‚â€˜â€™

ç¤ºä¾‹ä»£ç é‡Œæ²¡æœ‰è¿™ä¸ªç¡çœ ä»£ç </div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/df/1e/cea897e8.jpg" width="30px"><span>ä¼ è¯´ä¸­çš„æˆå¤§å¤§</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æœ¬èŠ‚å†…å®¹ä¸»è¦æ˜¯è®²äº† goroutineåŒæ­¥é‚£ä¸€å— 
ä¸»è¦é€šè¿‡é€šé“ ä¿¡å· åº”è¯¥syncåŒ…ä¸­ä¹Ÿä¼šæœ‰åŒæ­¥ç›¸å…³çš„å‡½æ•°
æˆ‘åˆå»æŠŠ16è®²é‚£ä¸ªGé˜Ÿåˆ—å†æƒ³äº†ä¸€é
å®é™…ä¸Šå¯èƒ½å­˜åœ¨å¤šä¸ªGé˜Ÿåˆ— Gé˜Ÿåˆ—ä¹‹é—´å±äºå¹¶å‘å…³ç³»
ä½†æ˜¯Gé˜Ÿåˆ—å½“ä¸­ä»–ä»¬åˆæ˜¯é˜Ÿåˆ—å‚¨å­˜ é¡ºåºæ‰§è¡Œçš„</div>2020-03-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/5b/43/edf22486.jpg" width="30px"><span>SuperP â¤ é£</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>runtime.GOMAXPROCS  è¿™ä¸ªåº”è¯¥èƒ½æ§åˆ¶Pçš„æ•°é‡</div>2018-10-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/18/c4/e55fdc1c.jpg" width="30px"><span>cygnus</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>demo40çš„æ‰§è¡Œç»“æœä¸æ˜¯å¹‚ç­‰çš„ï¼Œç¨‹åºç»å¸¸æ— æ³•æ­£å¸¸ç»“æŸé€€å‡ºï¼Œåªæœ‰æå°‘æ•°å‡ æ¬¡æœ‰æ­£ç¡®è¾“å‡ºã€‚</div>2018-09-19</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKELX1Rd1vmLRWibHib8P95NA87F4zcj8GrHKYQL2RcLDVnxNy1ia2geTWgW6L2pWn2kazrPNZMRVrIg/132" width="30px"><span>jxs1211</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å…¶ä»–åœ°æ–¹ä¹Ÿæœ‰ç±»ä¼¼çš„spinningæ“ä½œï¼Œè¯´é“å…¶å®æ˜¯ä¸€ç§ä¹è§‚é”ï¼Œå…ˆé€šè¿‡åŸå­æ“ä½œè¯»å–å€¼ï¼Œå†åœ¨ä¿®æ”¹å€¼çš„æ—¶å€™æ£€æŸ¥ï¼Œç¬¦åˆæ¡ä»¶æ‰èƒ½ä¿®æ”¹ï¼Œæˆ‘çš„é—®é¢˜æ˜¯è¿™æ®µä»£ç æ˜¯å¦å°±æ˜¯ä¹è§‚é”çš„å®šä¹‰è¯ é‡Šï¼Œè¿™é‡Œä»ç„¶è¯»å–äº†åŸå€¼å†ä¿®æ”¹ï¼Œè€Œæ²¡æœ‰ç›´æ¥ä¿®æ”¹ï¼Œæ˜¯å¦è¶³å¤Ÿä¹è§‚ï¼Œä¸å¤ªç†è§£ä¹è§‚çš„çœŸæ˜¯å«ä¹‰ï¼Œå¦å¤–å¦‚æœç”¨æ‚²è§‚é”çš„è¯åº”è¯¥æ€ä¹ˆå®ç°</div>2021-12-01</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/8bkRNKwpPicpibupozsqsbR6apibQyWXyyvrhmdSHIzMXk0lbNRYfRa6ZklQSNib6QrHunxueEFb9x2gJK6GfxSq0A/132" width="30px"><span>Geek_d6cfa7</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>go é€šé“ä¼ é€’è¾¾åˆ°é¡ºåºæ‰§è¡Œç›®çš„ï¼š
func TestTransmitChan(t *testing.T) {
	start, end := make(chan bool), make(chan bool)
	head := start
	for i := 0; i &lt; 10; i++ {
		end = make(chan bool)
		temp := i
		go func(head, end chan bool, i int) {
			&lt;-head
			t.Logf(&quot;goroutine %v doing&quot;, i)
			end &lt;- true
		}(head, end, temp)
		head = end
	}
	start &lt;- true
	&lt;-end

	t.Logf(&quot;main goroutine is end&quot;)
}</div>2021-04-21</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/tmVLphkQHLxRsAOZOzJNhJKXvAhkvvT8koMjMUpIQbJN1e8Uico1habQvNibvibI14yM7DWVicJIgNriaib9tRv735mg/132" width="30px"><span>Geek_9b9769</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div> è€å¸ˆï¼Œæ‚¨çœ‹ä¸‹ï¼Œæˆ‘çš„æ€è·¯æ˜¯ç”¨ä¸€ä¸ªé€šé“æ•°ç»„æ§åˆ¶

func main() {

	&#47;&#47;é¢„å…ˆåˆ›å»º11ä¸ªé€šé“æ•°ç»„,æœ€åä¸€ä¸ªé˜»å¡ä¸»gorouting
	chArr := [11]chan struct{}{}
	for i := 0; i &lt; 11; i++ {
		chArr[i] = make(chan struct{})
	}

	&#47;&#47;ä¸é˜»å¡ç¬¬ä¸€ä¸ªé€šé“
	go func() {
		chArr[0] &lt;- struct{}{}
	}()

	&#47;&#47;å¼€å§‹å¾ªç¯
	for i := 0; i &lt; 10; i++ {

		go func(i2 int) {
			&#47;&#47;é˜»å¡å½“å‰é€šé“
			&lt;-chArr[i2]
			fmt.Println(i2)
			&#47;&#47;æ¯æ¬¡æ‰§è¡Œå®Œé€šçŸ¥ä¸‹ä¸€ä¸ªé€šé“
			chArr[i2+1] &lt;- struct{}{}
		}(i)
	}

	&#47;&#47;é˜»å¡ä¸»gorouting
	&lt;-chArr[10]

}</div>2021-04-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/e4/4d/c7b5f20a.jpg" width="30px"><span>é»„ä¼Ÿæ´ª</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>demo40.go æˆ‘æ³¨é‡Šäº†time.Sleep(time.Nanosecond)åï¼Œç¨‹åºå°±åœç€ä¸€ç›´ä¸åŠ¨äº†ã€‚ã€‚ã€‚ã€‚ã€‚æƒ³ä¸æ˜ç™½ä¸ºä»€ä¹ˆ</div>2019-08-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/46/5b/07858c33.jpg" width="30px"><span>Pixar</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>func trigger(i int64, fn func()) {
	for {
		&#47;&#47;if i != 10 {
		&#47;&#47;	fmt.Print(&quot;&quot;)
		&#47;&#47;}

		if count == i {
			fn()
			count += 1
			break
		}
	}
}

func main() {
	for i := int64(0); i &lt;= 9; i++ {
		go func(i int64) {
			fn := func() {
				fmt.Println(i)
			}
			trigger(i, fn)
		}(i)
	}
	trigger(10, func() {})
}

å–æ¶ˆæ³¨é‡Šåä»£ç å¯é¡ºåº 0 ~9 è¾“å‡º. è€Œæ³¨é‡Šååˆ™ä¼šè«åå¡ä¸», æ€€ç–‘æ˜¯ä¸æ˜¯golang runtime é’ˆå¯¹è¿™äº›å¾ªç¯åšäº†äº›ä»€ä¹ˆ,  è€Œä¸”æ„Ÿè§‰æ²¡å¿…è¦åŠ é”.</div>2018-09-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ed/4c/8674b6ad.jpg" width="30px"><span>timmy21</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æœ‰ä¸€ä¸ªé—®é¢˜ä¸å¤ªæ¸…æ¥šï¼Œå½“iå’Œcountä¸ç›¸ç­‰æ—¶ï¼Œæ‚¨æåˆ°äº†ç¡çœ 1çº³ç§’ï¼Œå¯æ˜¯æˆ‘æ²¡çœ‹åˆ°æœ‰ç›¸å…³çš„sleepè¢«è°ƒç”¨ã€‚è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿ</div>2018-09-19</li><br/><li><img src="" width="30px"><span>NeoMa</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ‚¨å¥½ï¼Œçœ‹å®Œäº†åé¢çš„sync.Mutexï¼Œå†™äº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¯·å¤šå¤šæŒ‡æ­£
package main

import (
    &quot;fmt&quot;
    &quot;sync&quot;
)

func main() {
    ch := make(chan int, 10)
    var mu sync.Mutex
    var index = 1
    for i := 1; i &lt;= 10; i++ {
        go func(ch chan int) {
            mu.Lock()
            defer mu.Unlock()
            fmt.Println(index)
            index++
            ch &lt;- index
        }(ch)
    }
    for j := 1; j &lt;= 10; j++ {
        &lt;- ch
    }
}</div>2022-01-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/21/20/1299e137.jpg" width="30px"><span>ç§‹å¤©</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æœ€ä¸Šé¢çš„ä»£ç  åŠ äº†sleep å¹¶ä¸æ˜¯10ä¸ª10 æœ€åçš„ç»“æœ æ¯æ¬¡éƒ½ä¸ä¸€æ ·å•Šï¼Ÿè€å¸ˆ</div>2021-05-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg" width="30px"><span>ileruza</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œé—®ä¸ªé—®é¢˜
ã€Šgoå¹¶å‘ç¼–ç¨‹å®æˆ˜-ç¬¬2ç‰ˆã€‹ç¬¬136é¡µä¸­è¯´è¿‡ï¼ŒPå’ŒMç»‘å®šåï¼Œå…¶å†…çš„Gä¼šè¢«Mæ‰§è¡Œï¼Œå¦‚æœGè¿›å…¥ç³»ç»Ÿè°ƒç”¨é˜»å¡ï¼ŒMå’ŒPä¼šè¢«åˆ†ç¦»ï¼ŒPå»æ‰¾å…¶ä»–ç©ºé—²Mæ‰§è¡Œå†…éƒ¨å‰©ä¸‹çš„G
é‚£åˆšåˆšé˜»å¡çš„Gå’ŒMå°±ä¸€ç›´è¿™ä¹ˆç»‘å®šäº†å—ï¼Œç›¸å½“äºMå¯¹åº”çš„ç³»ç»Ÿçº¿ç¨‹ä¸€ç›´åœ¨ç­‰ç€å—ï¼Ÿ

</div>2021-03-25</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/4b/e9/bbccf643.jpg" width="30px"><span>sanmao</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>	var count int32 = 0
	trigger := func(i int32, fn func()) {
		for {
			if n := count; n == i {
				fn()
				&#47;&#47;atomic.AddInt32(&amp;count, 1)
				count++
				break
			}
			&#47;&#47;time.Sleep(time.Nanosecond)
		}
	}
@éƒå“¥ é‚£ç§ç†è®ºæƒ…å†µä¼šå‘ç”Ÿ count++ ä¸¤æ¬¡çš„æƒ…å†µï¼Ÿ</div>2021-03-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/22/c0/177d6750.jpg" width="30px"><span>Rico</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>var counter int32
func main(){

	var wg sync.WaitGroup
	wg.Add(10)
    var i int32
	for i = 0;i&lt;10;i++{
		go printNum(&amp;wg,i)
		time.Sleep(time.Nanosecond)
	}

}

func printNum(wg *sync.WaitGroup,i int32){
    if i == atomic.LoadInt32(&amp;counter){
		fmt.Println(i)
		atomic.AddInt32(&amp;counter,1)
		wg.Done()
	}
}
---ç»“æœé¡ºåºæ‰“å°å‡º 0-9

è€å¸ˆï¼Œè¿™ç§æ–¹æ³•æ­£ç¡®ä¸ï¼Ÿ</div>2021-03-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/9a/80/3a8781a4.jpg" width="30px"><span>æ¢è¾‰</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯•äº†ä¸€ä¸‹ï¼Œä¸‹é¢ä»£ç å¯ä»¥ï¼š
package main

import &quot;fmt&quot;
import &quot;sync&quot;
import &quot;time&quot;

func main() {
	wg := sync.WaitGroup{}
	subChan := make(chan struct {}, 1)
	wg.Add(10)
	st := struct{}{}
	subChan &lt;- st
	funcPrint := subPrint(subChan, &amp;wg)
	for i := 0; i &lt; 10; i++ {
		funcPrint(i)
	}
	wg.Wait()
}

func subPrint(subChan chan struct{}, wg *sync.WaitGroup) func(int) {
	count := 0
	subCount := func (sub int) {
		for {
			if count == sub {
				&lt;-subChan
				break
			}
			time.Sleep(time.Nanosecond)
		}

		fmt.Println(&quot;sub : &quot;, sub)
		count++
		st := struct{}{}
		subChan &lt;- st
		wg.Done()
	}
	return subCount
}</div>2020-09-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/5a/d8/cb1045ed.jpg" width="30px"><span>onlyzzw</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>func main() {
	for i := 0; i &lt; 10; i++ {
		time.Sleep(time.Duration(1)*time.Second)
		go func() {
			fmt.Println(i)
		}()
	}
}

ç»“æœä¹Ÿèƒ½æŒ‰ç…§é¡ºåºæ‰“å°è¾“å‡ºï¼š1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9</div>2020-08-09</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKdiaUiaCYQe9tibemaNU5ya7RrU3MYcSGEIG7zF27u0ZDnZs5lYxPb7KPrAsj3bibM79QIOnPXAatfIw/132" width="30px"><span>Geek_a8be59</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>trigger := func(i uint32, fn func()) { for { if n := atomic.LoadUint32(&amp;count); n == i { fn() atomic.AddUint32(&amp;count, 1) break } time.Sleep(time.Nanosecond) }}

ä¸ªäººæ„Ÿè§‰è¿™ä¸ªä¸éœ€è¦ç”¨åŸå­æ“ä½œä¹Ÿå¯ä»¥ï¼Œè™½ç„¶å‘ç”Ÿäº†ç«äº‰ï¼Œåªæ˜¯å¢åŠ äº†åˆ¤æ–­çš„æ¬¡æ•°ï¼Œä¸çŸ¥é“ç†è§£çš„å¯¹ä¸å¯¹ï¼Ÿ
å¯ä»¥æ”¹æˆè¿™æ ·
 for {
    if i == count {
       fn()
       count++
       break
     }
}

ä½œè€…å›å¤: è¿åŸå­æ“ä½œéƒ½ä¸åŠ ï¼Œå°±æœ‰å¯èƒ½ä¼šå‡ºç°ä¸å®Œå…¨å†™æˆ–è¯»å‡ºè„æ•°æ®çš„æƒ…å†µï¼Œæœ€ç»ˆå¯¼è‡´ç¨‹åºæ­»é”åœ¨é‚£é‡Œã€‚åœ¨å†™å¹¶å‘ç¨‹åºæ—¶ä¸è¦æœ‰ä¾¥å¹¸å¿ƒç†ã€‚ä¸ç®¡æ¦‚ç‡æœ‰å¤šå¤§ï¼ˆå†µä¸”ä¸ä¼šæ˜¯å°æ¦‚ç‡ï¼‰ï¼Œéƒ½æ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ã€‚ä¸€æ—¦å‘ç”Ÿï¼ŒæŸå¤±å’Œæˆæœ¬éƒ½æ˜¯ä¸å®¹å°è§‘çš„ã€‚

å¯¹æ‚¨è¯´çš„å‘ç”Ÿæ­»é”çš„æƒ…å†µä¸å¤ªç†è§£ï¼Œèƒ½ç†è§£è„è¯»çš„æƒ…å†µï¼Œä½†æ˜¯é’ˆå¯¹è¿™ä¸ªé¢˜ç›®æ¥è¯´ï¼Œä¼ è¿‡æ¥çš„iè‚¯å®šæ˜¯0åˆ°10ä¹‹å‰ä¸ä¼šé‡å¤çš„ï¼Œå°±ç®—è¯»åˆ°äº†è„æ•°æ®ï¼Œä¹Ÿå’Œcountçš„å€¼ä¸ä¸€è‡´ï¼Œä¸ä¼šè¿›å…¥åˆ°ifè¯­å¥é‡Œé¢ã€‚è€Œä¸”ä¸å­˜åœ¨å¹¶è¡Œçš„count++ æ“ä½œï¼Œåªæœ‰å¹¶è¡Œçš„è·å–countã€‚æ‰€ä»¥æœ€åè‚¯å®šæ˜¯å·²é¡ºåºè¯»å‡ºæ¥çš„ã€‚ æ‰€ä»¥å¹¶ä¸ç†è§£æ‰€è¯´çš„å¯¼è‡´æ­»é”çš„æƒ…å†µï¼Œèƒ½å¦æŒ‡æ˜ä¸€ç§æƒ…å†µäº§ç”Ÿæ­»é”</div>2020-07-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/4e/f5/1d3f13f3.jpg" width="30px"><span>åˆ˜å°è´±</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>&#47;&#47;è€å¸ˆ  ä¸¤ä¸ªé€šé“å®ç°æ–¹å¼ ä¸çŸ¥é“å¯¹ä¸å¯¹
	ch := make(chan int,1)
	signal := make(chan struct{})
	var num = 10
	for i := 0; i &lt; num; i++ {
		go func(i int) {
			for  {
				&#47;&#47; å…ˆé˜»å¡åœ¨è¿™é‡Œ
				t := &lt;-ch
				if t == i {
					fmt.Printf(&quot;%d\n&quot;, i)
					p := i+1
					if p == num {
						&#47;&#47; ç»“æŸä¿¡å·
						signal &lt;- struct{}{}
						break
					} else  {
						ch &lt;- p
						break
					}
				} else {
					ch &lt;- t
				}
			}
		}(i)
	}

	ch &lt;- 0

	&lt;- signal</div>2020-07-02</li><br/>
</ul>