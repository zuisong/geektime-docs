ä½ å¥½ï¼Œæˆ‘æ˜¯åº·æ¨ã€‚

åœ¨å½“å‰äº‘è®¡ç®—å¿«é€Ÿå‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œäº‘åŸç”Ÿåº”ç”¨å˜å¾—è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œè¿™ç§åº”ç”¨ç¨‹åºéœ€è¦å…·å¤‡é«˜åº¦å¯ç§»æ¤æ€§ã€å¼ºå¤§çš„å¯æ‰©å±•æ€§å’Œé«˜æ•ˆçš„æ€§èƒ½ç­‰ç‰¹æ€§ã€‚è¿™ä¹Ÿæ˜¯Javaè¯­è¨€åœ¨äº‘åŸç”Ÿåº”ç”¨å¼€å‘ä¸­é¢ä¸´çš„æŒ‘æˆ˜ï¼Œä¾‹å¦‚éœ€è¦æ›´å¥½åœ°æ”¯æŒå®¹å™¨åŒ–ã€å¾®æœåŠ¡æ¶æ„å’Œäº‘åŸç”ŸæŠ€æœ¯ç­‰ã€‚

ä¸ºäº†åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼ŒJavaä¹Ÿä½œå‡ºäº†å¾ˆå¤šæ”¹å˜ï¼Œæ¯”å¦‚åˆ©ç”¨JDK 17çš„ç¨³å®šæ€§ã€Spring Boot 3 å’Œ SpringÂ 6ç­‰ç°ä»£åŒ–ç‰¹æ€§ï¼Œæ¥æ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„Javaåº”ç”¨ç¨‹åºï¼Œæ¥é€‚åº”äº‘åŸç”Ÿç¯å¢ƒçš„éœ€æ±‚ã€‚è¿™èŠ‚è¯¾æˆ‘å°±å¸¦ä½ æ¥çœ‹çœ‹Javaçš„å˜åŒ–ï¼Œä¸ºäº†è®©ä½ ä½“ä¼šæ›´æ·±åˆ»ï¼Œæˆ‘è¿˜ä¼šæ‰‹æŠŠæ‰‹å¸¦ä½ å®ç°ä¸€ä¸ªåŸºäºJDK 17ã€Spring Boot 3å’ŒSpring 6çš„äº‘åŸç”ŸJavaåº”ç”¨ã€‚

è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬é©¬ä¸Šå¼€å§‹å§ï¼

## **åŸç”Ÿæ—¶ä»£Javaç”Ÿæ€é¢ä¸´çš„æŒ‘æˆ˜**

äº‘åŸç”Ÿæ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„æ–°è¶‹åŠ¿ï¼Œå®ƒè®©æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨å¤šç§äº‘ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶ä¸”èƒ½å¤Ÿçµæ´»åœ°è°ƒæ•´èµ„æºã€‚åœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦å…·å¤‡**å¿«é€Ÿå¯åŠ¨ã€å®‰é™æ‰çº¿**çš„ç‰¹æ€§ï¼Œè¿™å¯¹äºJavaç”Ÿæ€æ¥è¯´æ˜¯ä¸ªæŒ‘æˆ˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJavaåº”ç”¨ç¨‹åºçš„å¯åŠ¨è¿‡ç¨‹ç›¸å¯¹è¾ƒé•¿ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šé™åˆ¶äº†å®ƒåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­çš„è¡¨ç°ã€‚

å†è€…ï¼ŒJavaåº”ç”¨å¸¸å¸¸ä¼šå ç”¨å¤§é‡çš„å†…å­˜ã€‚åœ¨äº‘ç¯å¢ƒä¸­ï¼Œèµ„æºæ˜¯æœ‰é™çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡ä¸­ï¼Œå†…å­˜æ¶ˆè€—å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦å¯»æ‰¾åŠæ³•æ¥**ä¼˜åŒ–Javaåº”ç”¨ç¨‹åºçš„å†…å­˜ä½¿ç”¨**ï¼Œä»¥é€‚åº”äº‘åŸç”Ÿç¯å¢ƒçš„éœ€æ±‚ã€‚

æ­¤å¤–ï¼Œäº‘åŸç”Ÿç¯å¢ƒå¼ºè°ƒå¼€æ”¾æ€§å’Œå¹³å°ç‹¬ç«‹æ€§ï¼Œæ‰€æœ‰æœåŠ¡éƒ½éœ€è¦å…·å¤‡ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œçš„èƒ½åŠ›ã€‚è¿™å¯¹äºJavaç”Ÿæ€æ¥è¯´åŒæ ·æ˜¯ä¸ªæŒ‘æˆ˜ã€‚Javaä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒçš„ç”Ÿæ€ç³»ç»Ÿéå¸¸åºå¤§ï¼Œä½†æ˜¯è¿™ä¹Ÿå¸¦æ¥äº†ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ–¹æ³•æ¥ä¿è¯Javaåº”ç”¨ç¨‹åºåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­çš„**å…¼å®¹æ€§**ã€‚

äº‘åŸç”Ÿå’ŒJavaç”Ÿæ€é¢ä¸´çš„æŒ‘æˆ˜ä¸»è¦åœ¨æ€§èƒ½ã€å†…å­˜æ¶ˆè€—å’Œå…¼å®¹æ€§è¿™ä¸‰ä¸ªæ–¹é¢ã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡æŠ€æœ¯åˆ›æ–°å’Œæœ€ä½³å®è·µï¼Œæ¥å…‹æœè¿™äº›æŒ‘æˆ˜ï¼Œè®©Javaåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­å‘æŒ¥å‡ºæ›´å¤§çš„ä»·å€¼ã€‚

## **Javaå¦‚ä½•åº”å¯¹æŒ‘æˆ˜ï¼Ÿ**

ç›®å‰Javaç”Ÿæ€å·²ç»é€šè¿‡å¼•å…¥ä¸€ç³»åˆ—æ–°å·¥å…·å’Œæ–¹æ¡ˆæ¥ç§¯æåº”å¯¹äº‘åŸç”ŸæŒ‘æˆ˜ã€‚

### JDK 17çš„æ–°ç‰¹æ€§

JDK 17åœ¨æ€§èƒ½å’ŒåŠŸèƒ½ä¸Šéƒ½æœ‰æ˜¾è‘—çš„æå‡ï¼Œä¸ºäº‘åŸç”Ÿç¯å¢ƒæä¾›äº†æ›´å¥½çš„æ”¯æŒã€‚å®ƒå¼•å…¥äº†ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼Œä¾‹å¦‚ZGCå’ŒShenandoahï¼ˆå¯ä»¥å›é¡¾[ç¬¬ 16 è®²](https://time.geekbang.org/column/article/703990)ï¼‰ï¼Œè¿™äº›æ”¶é›†å™¨åœ¨ä¸æš‚åœåº”ç”¨çš„æƒ…å†µä¸‹è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œé™ä½å†…å­˜ä½¿ç”¨å’Œå¯åŠ¨æ—¶é—´ã€‚åŒæ—¶ï¼ŒJDK17æé«˜åƒåœ¾å›æ”¶å™¨ååé‡ï¼Œå†…ç½®å®‰å…¨åŠŸèƒ½ä»¥æ”¯æŒåŠ å¯†ç®—æ³•å’Œå¯†ç å­¦ï¼Œæ”¹è¿›å¼‚å¸¸å¤„ç†ï¼Œæå‡JVMæ€§èƒ½ï¼Œä»è€Œå¢å¼ºäº†Javaçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚è¿™äº›ä¼˜åŒ–ä½¿åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­è¿è¡Œçš„Javaåº”ç”¨ç¨‹åºæ›´åŠ å®‰å…¨å¯é ã€‚

### Spring Boot 3å’ŒSpring 6çš„æ–°ç‰¹æ€§

Spring Boot 3å’ŒSpring 6ä¸ºäº‘åŸç”Ÿåº”ç”¨å¼€å‘å¸¦æ¥äº†è®¸å¤šæœ‰ç›Šçš„æ–°ç‰¹æ€§ã€‚Spring 6æ¡†æ¶æä¾›äº†æ–°çš„ç¼–ç¨‹æ¨¡å‹å’ŒAPIï¼ŒåŒ…æ‹¬å“åº”å¼ç¼–ç¨‹æ¨¡å‹ã€æ¨¡å—åŒ–è®¾è®¡ã€æ”¹è¿›çš„ä¾èµ–æ³¨å…¥ã€æ–°çš„æ•°æ®è®¿é—®å’Œé›†æˆAPIã€å¾®æœåŠ¡æ”¯æŒä»¥åŠå®‰å…¨æ€§æ”¹è¿›ã€‚è¿™äº›æ›´æ–°ä½¿å¾—Javaå¼€å‘æ›´åŠ ä¾¿æ·ã€é«˜æ•ˆï¼Œæ»¡è¶³ç°ä»£åº”ç”¨ç¨‹åºçš„éœ€æ±‚ã€‚

> å“åº”å¼ç¼–ç¨‹ç®€ç§°RPï¼ˆReactive Programmingï¼‰æ˜¯ä¸€ç§é¢å‘æ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„ç¼–ç¨‹èŒƒå¼ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆæ–¹ä¾¿åœ°è¡¨è¾¾é™æ€æˆ–åŠ¨æ€çš„æ•°æ®æµï¼Œè€Œç›¸å…³çš„è®¡ç®—æ¨¡å‹ä¼šè‡ªåŠ¨å°†å˜åŒ–çš„å€¼é€šè¿‡æ•°æ®æµè¿›è¡Œä¼ æ’­ã€‚

### å®¹å™¨åŒ–å’Œå¾®æœåŠ¡

å®¹å™¨åŒ–å’Œå¾®æœåŠ¡æ¶æ„æ˜¯äº‘åŸç”Ÿçš„æ ¸å¿ƒæ¦‚å¿µï¼ŒJavaç”Ÿæ€ç³»ç»Ÿéœ€è¦é€‚åº”è¿™äº›æŠ€æœ¯ï¼Œå¹¶æŠŠå®ƒæ•´åˆåˆ°ç°æœ‰çš„å¼€å‘æµç¨‹ä¸­ã€‚å®¹å™¨åŒ–æŠ€æœ¯ï¼Œæ¯”å¦‚Dockerï¼Œå¯ä»¥ä½¿Javaåº”ç”¨ç¨‹åºæ›´è½»æ¾åœ°éƒ¨ç½²ã€ç®¡ç†å’Œæ‰©å±•ã€‚å¾®æœåŠ¡æ¶æ„åˆ™é¼“åŠ±å°†åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºæ›´å°ã€æ›´æ˜“äºç®¡ç†çš„æœåŠ¡ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

Javaä¸ºäº†é€‚åº”å¾®æœåŠ¡æ¶æ„ï¼Œé‡‡ç”¨äº†æ¨¡å—åŒ–è®¾è®¡ã€å¼•å…¥å“åº”å¼ç¼–ç¨‹æ¨¡å‹ã€æ”¯æŒå®¹å™¨åŒ–æŠ€æœ¯ã€æä¾›æœåŠ¡åŒ–æ¡†æ¶ä»¥åŠæ”¯æŒäº‘åŸç”ŸæŠ€æœ¯æ ˆç­‰ä¸€ç³»åˆ—æ”¹è¿›ã€‚è¿™äº›æªæ–½ä½¿Javaåº”ç”¨ç¨‹åºæ›´æ˜“äºæ‹†åˆ†ã€å¯ç»´æŠ¤å’Œæ‰©å±•ï¼Œå¸®åŠ©å¼€å‘è€…è½»æ¾æ„å»ºå’Œéƒ¨ç½²å¾®æœåŠ¡åº”ç”¨ã€‚

### æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI/CDï¼‰

äº‘åŸç”Ÿåº”ç”¨ç¨‹åºéœ€è¦å¿«é€Ÿè¿­ä»£å’Œéƒ¨ç½²ã€‚Javaç”Ÿæ€ç³»ç»Ÿéœ€è¦æ”¯æŒæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼Œä»¥æ»¡è¶³è¿™ä¸€è¦æ±‚ã€‚é€šè¿‡ä½¿ç”¨è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•å·¥å…·ï¼Œå¦‚ [Jenkins](https://www.jenkins.io/) å’Œ [Travis CI](https://www.travis-ci.com/)ï¼Œå¯ä»¥ç¡®ä¿ä»£ç çš„è´¨é‡å’Œç¨³å®šæ€§ã€‚åŒæ—¶ï¼Œé€šè¿‡ä½¿ç”¨å®¹å™¨ç¼–æ’å·¥å…·ï¼Œå¦‚Kubernetesï¼Œå¯ä»¥å®ç°åº”ç”¨ç¨‹åºçš„è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œæ‰©å±•ã€‚

### äº‘åŸç”Ÿå®‰å…¨æ€§

åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œæ•°æ®å’Œèµ„æºå¯èƒ½æ¶‰åŠæ•æ„Ÿä¿¡æ¯ã€‚Javaç”Ÿæ€ç³»ç»Ÿéœ€è¦åŠ å¼ºå®‰å…¨æ€§ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºå’Œæ•°æ®çš„å®‰å…¨ã€‚å¼€å‘äººå‘˜éœ€è¦éµå¾ªå®‰å…¨ç¼–ç å®è·µï¼Œæ¯”å¦‚ä½¿ç”¨å®‰å…¨ç¼–ç¨‹åº“ã€é¿å…å¸¸è§çš„å®‰å…¨æ¼æ´ç­‰ã€‚åŒæ—¶ï¼Œä½¿ç”¨å®‰å…¨å·¥å…·å’Œç›‘æ§ï¼Œæ¯”å¦‚ [Spring Security](https://spring.io/projects/spring-security)ã€[OAuth2](https://oauth.net/2/) ä»¥åŠäº‘åŸç”Ÿç¯å¢ƒä¸­çš„å®‰å…¨ç›‘æ§å’Œè¯Šæ–­å·¥å…·ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€‚

### æœåŠ¡ç½‘æ ¼å’Œåˆ†å¸ƒå¼ç³»ç»Ÿ

ä¸ºäº†æ›´å¥½åœ°åº”å¯¹äº‘åŸç”Ÿçš„æŒ‘æˆ˜ï¼ŒJavaç”Ÿæ€ç³»ç»Ÿè¿˜éœ€è¦å…³æ³¨æœåŠ¡ç½‘æ ¼å’Œåˆ†å¸ƒå¼ç³»ç»Ÿã€‚æœåŠ¡ç½‘æ ¼æŠ€æœ¯ï¼Œå¦‚ [Istio](https://istio.io/)ï¼Œå¯ä»¥å®ç°æœåŠ¡ä¹‹é—´çš„æ™ºèƒ½è·¯ç”±ã€è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ³¨å…¥ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿåˆ™å¯ä»¥é€šè¿‡æ•°æ®åˆ†ç‰‡å’Œåˆ†å¸ƒå¼å­˜å‚¨ã€ä»»åŠ¡åˆ†å‘å’Œè´Ÿè½½å‡è¡¡ç­‰æŠ€æœ¯ï¼Œå¸®åŠ©Javaåº”ç”¨ç¨‹åºæ›´å¥½åœ°å¤„ç†å¤§è§„æ¨¡æ•°æ®å’Œå¹¶å‘è¯·æ±‚ï¼Œæé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚

### äº‘åŸç”Ÿç›‘æ§å’Œåˆ†æ

äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼ŒJavaåº”ç”¨ç¨‹åºéœ€è¦å®ç°å®æ—¶ç›‘æ§å’Œåˆ†æï¼Œä»¥å¿«é€Ÿå‘ç°å’Œè§£å†³é—®é¢˜ã€‚é€šè¿‡ä½¿ç”¨äº‘åŸç”Ÿç›‘æ§å’Œåˆ†æå·¥å…·ï¼Œå¦‚ [Prometheus](https://prometheus.io/) å’Œ [Grafana](https://grafana.com/)ï¼Œå¯ä»¥å¯¹ç³»ç»Ÿæ€§èƒ½ã€èµ„æºä½¿ç”¨å’Œåº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶å†µè¿›è¡Œå®æ—¶ç›‘æ§ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

Javaç”Ÿæ€åœ¨äº‘åŸç”Ÿè¶‹åŠ¿ä¸‹é¢ä¸´ç€è®¸å¤šæŒ‘æˆ˜ï¼Œä½†é€šè¿‡å¼•å…¥JDK 17ã€Spring Boot 3å’ŒSpring 6ç­‰è§£å†³æ–¹æ¡ˆï¼ŒJavaå·²ç»å‡†å¤‡å¥½åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚æˆ‘ä»¬éœ€è¦æŒç»­å…³æ³¨è¿™äº›æ–°çš„å·¥å…·å’Œæ–¹æ¡ˆï¼Œä»¥å……åˆ†åˆ©ç”¨Javaåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­çš„ä¼˜åŠ¿ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸æ–­å­¦ä¹ å’ŒæŒæ¡æ–°çš„æŠ€æœ¯å’Œæ–¹æ³•ï¼Œä»¥é€‚åº”äº‘åŸç”Ÿç¯å¢ƒä¸‹çš„å¼€å‘å’Œè¿ç»´éœ€æ±‚ã€‚

## å®ç°ä¸€ä¸ªäº‘åŸç”ŸJavaåº”ç”¨

ä¸‹é¢æˆ‘å°±æ‰‹æŠŠæ‰‹å¸¦ä½ æ¥å®ç°ä¸€ä¸ªåŸºäºJDK 17ã€Spring Boot 3ã€Spring 6çš„äº‘åŸç”ŸJavaåº”ç”¨ï¼Œè®©ä½ æ·±å…¥äº†è§£å¦‚ä½•åº”å¯¹äº‘åŸç”Ÿåº”ç”¨å¼€å‘é¢ä¸´çš„æŒ‘æˆ˜ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯å’Œå·¥å…·å¼€å‘é«˜è´¨é‡çš„äº‘åŸç”Ÿåº”ç”¨ç¨‹åºã€‚

### Step 1ï¼šåˆ›å»ºä¸€ä¸ªåŸºäº Spring Boot 3 å’Œ Spring 6 çš„æ–°é¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… JDK 17ï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡ã€‚ä½¿ç”¨ [Spring Initializr](https://start.spring.io/) åˆ›å»ºä¸€ä¸ªæ–°çš„ Spring Boot é¡¹ç›®ï¼Œé€‰æ‹© Spring Boot 3 å’Œ Spring 6 ä½œä¸ºé¡¹ç›®çš„ä¾èµ–ã€‚

å®‰è£… JDK 17ï¼š

```java
# ä½¿ç”¨ JDK 17 å®‰è£…å™¨å®‰è£… JDK 17
curl https://download.java.net/java/jdk/17.0.1/jdk-17.0.1_windows-x64_bin.zip -o jdk-17.0.1.zip
unzip jdk-17.0.1.zip
# é…ç½®ç¯å¢ƒå˜é‡
echo 'JAVA_HOME=C:\Program Files\Java\jdk-17.0.1' >> %USERPROFILE%\.bashrc
echo 'PATH=$JAVA_HOME\bin:$PATH' >> %USERPROFILE%\.bashrc
# ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ
source %USERPROFILE%\.bashrc
```

åˆ›å»º Spring Boot é¡¹ç›®ï¼š  
![å›¾ç‰‡](https://static001.geekbang.org/resource/image/67/7a/676b61221933bbc17def95ab88f2157a.png?wh=1920x1123)

### Step 2ï¼šé…ç½® JDK 17 è¿›è¡Œé¡¹ç›®å¼€å‘

åœ¨é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® JDK 17 ä½œä¸ºé¡¹ç›®çš„ç¼–è¯‘å’Œè¿è¡Œç¯å¢ƒã€‚åŒæ—¶ï¼Œä½¿ç”¨ JDK 17 ä¸­æ–°å¢çš„ ZGC ç‰¹æ€§ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚

#### é…ç½® JDK 17 ç¯å¢ƒ

åœ¨é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œä½¿é¡¹ç›®ä½¿ç”¨ JDK 17 è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œã€‚

```java
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.8.1</version>
            <configuration>
                <source>17</source>
                <target>17</target>
            </configuration>
        </plugin>
    </plugins>
</build>
```

#### ä½¿ç”¨ ZGC ç‰¹æ€§

åœ¨é¡¹ç›®çš„ src/main/resourcesÂ ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º zgc.propertiesÂ çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œå¯ç”¨ ZGC ç‰¹æ€§ã€‚

```plain
spring.jvm.properties.zgc.mode=gc
spring.jvm.properties.zgc.gc.latency-threshold=100000
```

### Step 3ï¼šåœ¨é¡¹ç›®ä¸­é›†æˆäº‘åŸç”Ÿç‰¹æ€§

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Spring Cloud å·¥å…·ï¼Œè½»æ¾åœ°åœ¨é¡¹ç›®ä¸­é›†æˆäº‘åŸç”Ÿç‰¹æ€§ï¼Œä½¿ç”¨ Spring Cloud Config å®ç°é…ç½®ç®¡ç†ï¼Œä½¿ç”¨ Spring Cloud Discovery å®ç°æœåŠ¡å‘ç°ã€‚

#### æ·»åŠ  Spring Cloud ä¾èµ–

åœ¨é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼Œä»¥é›†æˆ Spring Cloud å·¥å…·ã€‚

```java
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-config</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
</dependency>
```

#### é…ç½® Spring Cloud ç‰¹æ€§

åœ¨é¡¹ç›®çš„ src/main/resources ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºapplication.ymlÂ çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä»¥é…ç½® Spring Cloud ç‰¹æ€§ã€‚

```java
spring:
  cloud:
    config:
      server:
        enabled: true
        discovery:
          enabled: true
```

### Step 4ï¼šåœ¨é¡¹ç›®ä¸­å®ç°ååº”å¼ç¼–ç¨‹æ¨¡å‹

ååº”å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå…è®¸å¼€å‘è€…å¤„ç†å¼‚æ­¥å’Œäº‹ä»¶é©±åŠ¨çš„ç¨‹åºã€‚åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ WebFlux å®ç°ååº”å¼ç¼–ç¨‹æ¨¡å‹ã€‚

#### åˆ›å»ºå¼‚æ­¥çš„ HTTP è¯·æ±‚å¤„ç†å™¨

åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåä¸º MyController çš„ç±»ï¼Œä½¿ç”¨ @RestControllerÂ æ³¨è§£æ ‡è®°è¯¥ç±»ã€‚ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸º hello()Â çš„æ–¹æ³•ï¼Œä½¿ç”¨ MonoÂ ç±»å¤„ç†å¼‚æ­¥è¯·æ±‚ã€‚

```plain
@RestController
public class MyController {

    @GetMapping("/hello")
    public Mono<String> hello() {
        return Mono.just("Hello, Reactive!");
    }
}
```

#### é…ç½® WebFlux

åœ¨é¡¹ç›®çš„ src/main/resources ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º application.ymlÂ çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œæ¥é…ç½® WebFluxã€‚

```java
spring:
  web:
    reactive:
      enabled: true
```

### Step 5ï¼šå°†é¡¹ç›®æ‰“åŒ…ä¸º Docker é•œåƒ, å¹¶åœ¨äº‘ç¯å¢ƒä¸­éƒ¨ç½²è¿è¡Œ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Dockerfile æ–‡ä»¶ï¼Œå®šä¹‰é¡¹ç›®çš„é•œåƒã€‚ç„¶åï¼Œä½¿ç”¨Â docker build å‘½ä»¤ï¼Œæ„å»ºé¡¹ç›®çš„é•œåƒã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker runÂ å‘½ä»¤ï¼Œåœ¨äº‘ç¯å¢ƒä¸­éƒ¨ç½²è¿è¡Œé¡¹ç›®ã€‚

#### åˆ›å»º Dockerfile

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º Dockerfile çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä»¥å®šä¹‰é¡¹ç›®çš„é•œåƒã€‚

```plain
FROM openjdk:17-jdk
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-jar","/app.jar"]
```

#### æ„å»º Docker é•œåƒ

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ„å»ºé¡¹ç›®çš„ Docker é•œåƒã€‚

```java
docker build -t my-spring-boot-app .
```

#### åœ¨äº‘ç¯å¢ƒä¸­éƒ¨ç½²è¿è¡Œé¡¹ç›®

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨äº‘ç¯å¢ƒä¸­éƒ¨ç½²è¿è¡Œé¡¹ç›®ã€‚

```java
docker run -p 8080:8080 --name my-spring-boot-app -d my-spring-boot-app
```

### Step 6ï¼šä½¿ç”¨ Native Image æŠŠ Java åº”ç”¨è½¬åŒ–æˆä¸æ“ä½œç³»ç»Ÿæ— å…³çš„å¯æ‰§è¡Œæ–‡ä»¶

Native Image æ˜¯ä¸€ä¸ªå°† Java åº”ç”¨ç¨‹åºç¼–è¯‘ä¸ºæœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶çš„å·¥å…·ï¼Œå®ƒå¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„å¯åŠ¨é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—ã€‚

#### æ·»åŠ  Native Image ä¾èµ–

åœ¨é¡¹ç›®çš„Â pom.xml æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼Œä»¥é›†æˆ Native Image å·¥å…·ã€‚

```java
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-native-image</artifactId>
</dependency>
```

#### ä¸º Native Image é…ç½®å¯åŠ¨å‚æ•°

åœ¨é¡¹ç›®çš„ src/main/resourcesÂ ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º native-image.propertiesÂ çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä»¥é…ç½® Native Image å¯åŠ¨å‚æ•°ã€‚

```plain
# è®¾ç½®ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åç§°
spring.native.image.name=my-spring-boot-app
# è®¾ç½®å¯åŠ¨æ—¶ä¼ é€’çš„å‚æ•°
spring.native.image.args=-Xshare -Xverify=none -Dspring.config.location=file:/path/to/application.yml
```

#### ç”Ÿæˆ Native Image

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆ Native Imageã€‚

```java
./mvnw spring-boot:build-image
```

è¿™ä¼šåœ¨Â `target/native-image`Â ç›®å½•ä¸‹ç”Ÿæˆ Native Imageã€‚

#### è¿è¡Œ Native Image

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œè¿è¡Œ Native Imageã€‚

```plain
./target/my-spring-boot-app
```

åº”ç”¨ç¨‹åºå°†ä½¿ç”¨ Native Image å¯åŠ¨ï¼Œå…·æœ‰æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦å’Œæ›´ä½çš„å†…å­˜æ¶ˆè€—ã€‚

é€šè¿‡è¿™6ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬æœ€ç»ˆå®ç°äº†ä¸€ä¸ªäº‘åŸç”ŸJavaåº”ç”¨ï¼Œè¿™ä¸ªåº”ç”¨è‰¯å¥½åœ°é›†æˆäº†JDK 17ã€Spinrg Boot 3å’ŒSpring 6çš„ä¼˜ç§€ç‰¹æ€§ï¼Œå®ç°äº†ä¸€ä¸ªJavaçš„äº‘åŸç”Ÿåº”ç”¨ã€‚

## é‡ç‚¹å›é¡¾

åœ¨å½“å‰äº‘è®¡ç®—çš„å¤§èƒŒæ™¯ä¸‹ï¼ŒJavaè¯­è¨€ä¸ºäº†é€‚åº”äº‘åŸç”Ÿåº”ç”¨çš„éœ€æ±‚ï¼Œéœ€è¦æ›´å¥½åœ°æ”¯æŒå®¹å™¨åŒ–ã€å¾®æœåŠ¡æ¶æ„å’Œäº‘åŸç”ŸæŠ€æœ¯ã€‚ç„¶è€Œï¼ŒJavaåœ¨æ€§èƒ½ã€å†…å­˜æ¶ˆè€—å’Œå…¼å®¹æ€§ä¸Šé¢ä¸´ç€å¾ˆå¤§æŒ‘æˆ˜ã€‚

ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼ŒJavaé€šè¿‡å¼•å…¥JDK 17ã€Spring Boot 3å’ŒSpring 6ç­‰ç°ä»£åŒ–ç‰¹æ€§ï¼Œæ¥æ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„Javaåº”ç”¨ç¨‹åºã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒJavaè¿˜åˆ©ç”¨å“åº”å¼ç¼–ç¨‹æ¨¡å‹ã€å®¹å™¨åŒ–æŠ€æœ¯å’Œå¾®æœåŠ¡æ¶æ„ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–æ„å»ºå’Œæµ‹è¯•å·¥å…·ã€å®‰å…¨ç›‘æ§å’Œè¯Šæ–­å·¥å…·ã€æœåŠ¡ç½‘æ ¼å’Œåˆ†å¸ƒå¼ç³»ç»Ÿç­‰æŠ€æœ¯å’Œæ–¹æ³•ï¼Œå…¨æ–¹ä½ä¼˜åŒ–åº”ç”¨ç¨‹åºï¼Œå®ç°æ›´é«˜æ•ˆåœ°å¼€å‘å’Œè¿ç»´ã€‚

é€šè¿‡ä¸€ç³»åˆ—æ­¥éª¤ï¼Œåˆ©ç”¨Spring Bootå’ŒSpring Cloudçš„æ–°ç‰¹æ€§ï¼Œä»¥åŠä½¿ç”¨Dockerè¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæˆ‘ä»¬å¯ä»¥æˆåŠŸå®ç°äº†ä¸€ä¸ªåŸºäºJDK 17ã€Spring Boot 3å’ŒSpring 6çš„äº‘åŸç”ŸJavaåº”ç”¨ç¨‹åºï¼Œå¹¶èƒ½åœ¨äº‘ç¯å¢ƒä¸­é«˜æ•ˆè¿è¡Œã€‚

## æ€è€ƒé¢˜

è¿™èŠ‚è¯¾æˆ‘ä»¬ç”¨çš„æ˜¯ç‰ˆæœ¬JDK 17ï¼Œå¦‚æœä½ æ¯”è¾ƒå…³æ³¨JavaæŠ€æœ¯åŠ¨æ€çš„è¯ï¼Œåº”è¯¥çŸ¥é“æœ€æ–°çš„ç‰ˆæœ¬JDK 21å·²ç»å‘å¸ƒï¼Œé‡Œé¢ä¹ŸåŒ…å«äº†å¾ˆå¤šæ–°ç‰¹æ€§ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºåˆ†äº«ä½ äº†è§£åˆ°çš„å…·ä½“ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢è®¨ï¼ŒåŒæ—¶ä¹Ÿæ¬¢è¿ä½ æŠŠè¿™èŠ‚è¯¾çš„å†…å®¹åˆ†äº«ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼

## ç›¸å…³é˜…è¯»

1. [JDK 20 å’Œ JDK 21 æœ€æ–°åŠ¨æ€](https://www.infoq.cn/article/o4cLTZJXMgC7pJwfA8og?utm_campaign=geektime_search&utm_content=geektime_search&utm_medium=geektime_search&utm_source=geektime_search&utm_term=geektime_search)
2. [Java è¿‘æœŸæ–°é—»ï¼šJDK 21ã€é¢å‘ JDK 21 çš„ GraalVMã€Apache Pinot 1.0 å’Œ Eclipse Epicyro 3.0](https://www.infoq.cn/article/0hhqSZ0mg99KVNwGtzmG?utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search)
3. [JEP 444ï¼šJDK 21 ä¸­å‡ºç°è™šæ‹Ÿçº¿ç¨‹ï¼Œå¼€åˆ›å¹¶å‘æ–°çºªå…ƒ](https://www.infoq.cn/article/0hhqSZ0mg99KVNwGtzmG?utm_campaign=geek_search&utm_content=geek_search&utm_medium=geek_search&utm_source=geek_search&utm_term=geek_search)
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ3ï¼‰</strong></div><ul>
<li><span>å¼ ç«‹å‹‹</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¯·é—®ä¸€ä¸‹ï¼š
ç¬¬5æ­¥ï¼šä½¿ç”¨Dockerfileæ‰“åŒ…é•œåƒï¼Œå¹¶ä¸”è¿è¡Œdockeré•œåƒï¼Œè¿™ä¸ªæ˜¯å•ç‹¬è¿è¡Œï¼Œæ²¡æœ‰åœ¨K8Sé‡Œé¢çš„ç›¸å…³é…ç½®å’Œæ“ä½œï¼Œå’Œäº‘åŸç”Ÿè¿˜æ˜¯å·®äº†ä¸€æˆªï¼Œå»ºè®®å¯ä»¥å¢åŠ è¿™éƒ¨åˆ†çš„æè¿°ï¼Œä»¥ç´§è·Ÿå‰é¢çš„ä¸»é¢˜ äº‘åŸç”Ÿã€‚
ç¬¬6æ­¥ï¼šç”Ÿæˆ Native Imageï¼Œå¹¶ä¸”ç”¨ .&#47;target&#47;my-spring-boot-app ç›´æ¥å¯åŠ¨ï¼Œä¹Ÿæ²¡æœ‰æ‰“é•œåƒï¼Œä¹Ÿæ²¡æœ‰åœ¨ K8Sé‡Œé¢å» è¿è¡Œè¿™ä¸ªåŸç”Ÿé•œåƒæ–‡ä»¶ï¼Œé‚£æˆ‘ç”ŸæˆåŸç”Ÿé•œåƒï¼Œå°±æ˜¯ä¸ºäº†è¿™æ ·è¿è¡Œå—ï¼Ÿè¿™ä¸ªè¿˜æ˜¯å·®äº†ä¸€æˆªå§ã€‚

å»ºè®®ä½œè€…è¿™ä¸¤ä¸ªç‚¹ï¼Œèƒ½å¦åœ¨æ›´æ–°å®Œå¤‡ä¸€ä¸‹ï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ¥è¿™é‡Œçœ‹æ–‡ç« ï¼Œè¿™ä¸¤ä¸ªç‚¹ï¼Œæ‰æ˜¯çœŸæ­£çš„å…³é”®ç‚¹æ‰€åœ¨ã€‚</p>2023-11-17</li><br/><li><span>é™å¿ƒ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è¿™èŠ‚è¯¾è®²å¾—å¥½æ‚å‘€ï¼ä¸è¿‡æœ‰äº›ç‚¹å€’æ˜¯æŒºæ–°é²œï¼Œæ¯”å¦‚ï¼ŒNative Image</p>2024-02-05</li><br/><li><span>peter</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è¯·æ•™è€å¸ˆä¸¤ä¸ªé—®é¢˜ï¼š
Q1ï¼šä¾‹å­æ˜¯windowsä¸‹çš„æ“ä½œå—ï¼Ÿ
å‘½ä»¤è¡Œå¥½åƒæ˜¯Linxuä¸‹çš„æ“ä½œï¼Œä½†æœ‰çš„æ“ä½œåˆå¥½åƒæ˜¯åœ¨windowsä¸‹ã€‚
Q2ï¼šNative Imageä¸éœ€è¦Dockerå—ï¼Ÿ
Step6ä¸­çš„Native Imageï¼Œç›´æ¥è¿è¡Œï¼Œä¸éœ€è¦dockerã€‚Native Imageå’Œdockerå“ªç§æ–¹å¼æ›´å¥½ï¼Ÿ</p>2023-11-17</li><br/>
</ul>