ä½ å¥½ï¼Œæˆ‘æ˜¯Barryã€‚

ä¸ŠèŠ‚è¯¾æˆ‘ç•™è¿‡ä¸€ä¸ªæ€è€ƒé¢˜ï¼Œå¦‚æœåœ¨æˆ‘ä»¬å¹³å°ä¸­æœ‰ä¸€äº›å…¬å…±çš„å±•ç¤ºçš„å†…å®¹ï¼Œä¾‹å¦‚å¹³å°çš„Iconï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ¯ä¸€ä¸ªé¡µé¢éƒ½å¯ä»¥çœ‹åˆ°å®ƒï¼Œå¹¶ä¸”ç‚¹å‡»å¯ä»¥è·³å›é¦–é¡µï¼Œè¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ

æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªåšæ³•å°±æ˜¯é€šè¿‡è·¯ç”±æ¥ç®¡ç†ã€‚å®é™…å¼€å‘ä¸­ï¼Œä¸€ä¸ªä¼ä¸šçº§é¡¹ç›®çš„é¡µé¢ä¼—å¤šï¼Œæ¯ä¸€ä¸ªé¡µé¢éƒ½éœ€è¦æœ‰å¯¹åº”çš„è·¯ç”±åœ°å€ï¼Œä¸ºäº†ä¿è¯æ‰€æœ‰é“¾æ¥å¯ç”¨ï¼Œè‡ªç„¶éœ€è¦ç»Ÿä¸€ç®¡ç†èµ·æ¥ã€‚

è·¯ç”±çš„é…ç½®ç®¡ç†åœ¨Vueæ¡†æ¶å¼€å‘ä¸­éå¸¸é‡è¦ï¼Œæ˜¯æˆ‘ä»¬å®Œæˆåç»­å„åŠŸèƒ½æ¨¡å—å¼€å‘çš„å‰æã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦æå‰é…ç½®å¥½è·¯ç”±ï¼Œæ‰èƒ½æ§åˆ¶ç½‘å€å’Œç°å®é¡µé¢çš„å¯¹åº”å…³ç³»ã€‚

è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°±ä¸€èµ·åŠ¨æ‰‹å®è·µï¼Œæœ€åç»™æˆ‘ä»¬çš„è§†é¢‘å¹³å°é…ç½®è·¯ç”±ã€‚åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ Vue çš„å®˜æ–¹è·¯ç”±ã€‚

## åˆè¯† Vue Router

Vue çš„å®˜æ–¹è·¯ç”±æ˜¯Vue Router ï¼Œåœ¨[ç¬¬4èŠ‚è¯¾](https://time.geekbang.org/column/article/653986)ï¼Œæˆ‘ä»¬ä¹Ÿäº†è§£åˆ°è¿‡å®ƒèƒ½å¸®æˆ‘ä»¬åœ¨Vueæ¡†æ¶ä¸­è½»æ¾å¿«æ·åœ°é…ç½®è·¯ç”±ã€‚

æˆ‘ä»¬å…ˆæ¥è®¤è¯†ä¸€ä¸‹Vue Routerä¸­ä¸¤ä¸ªè‡³å…³é‡è¦çš„æ ‡ç­¾ã€‚

1.router-linkï¼šè·¯ç”±çš„é“¾æ¥æ ‡ç­¾ï¼Œtoå±æ€§æ˜¯å°†è¦è·³è½¬çš„è·¯ç”±åœ°å€ï¼ˆå³æˆ‘ä»¬é¢„å…ˆé…ç½®å¥½çš„è·¯ç”±åœ°å€ï¼‰ï¼Œå®ƒçš„ç”¨æ³•ä¼¼äºHTMLçš„&lt;a&gt;æ ‡ç­¾ã€‚

2.router-viewï¼šè·¯ç”±ç»„ä»¶å‡ºå£ï¼Œç›¸å½“äºç”¨æ¥æ˜¾ç¤ºè·¯ç”±åœ°å€å¯¹åº”ç»„ä»¶çš„HTML&lt;div&gt;æ ‡ç­¾ã€‚

å½“æˆ‘ä»¬åœ¨é¡µé¢è¦ç‚¹å‡»é“¾æ¥è·³è½¬åˆ°é¡¹ç›®ä¸­çš„é¡µé¢æ—¶ï¼Œé“¾æ¥å°±è¦ç”¨åˆ°router-linkæ ‡ç­¾ã€‚

```javascript
<router-link to="/">Go to Home</router-link>
```

å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸Šè¦æ˜¾ç¤ºè·¯ç”±å¯¹åº”çš„ç»„ä»¶æ—¶ï¼Œå°±è¦ç”¨åˆ°router-viewæ ‡ç­¾ã€‚

```javascript
<router-view/>
```

ä¸‹é¢æˆ‘ä»¬è¿›å…¥å®æ“ç»ƒä¹ ï¼Œä½“ä¼šä¸€ä¸‹åœ¨Vueé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨Vue Routeré…ç½®è·¯ç”±é…ç½®ã€‚

## Vue Routerå®æ“ç»ƒä¹ 

ä¸ºäº†ç›´è§‚çœ‹åˆ°è·¯ç”±çš„æ•ˆæœï¼Œæˆ‘ä»¬å…ˆæ¥å®šä¹‰ä¸€ä¸ªç®€å•çš„è·¯ç”±ï¼ŒæŠŠå®ƒé…ç½®åˆ°Vueä¸Šã€‚

è¿™ä¸ªæµç¨‹ä¸€å…±4æ­¥èµ°ã€‚ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦å®‰è£…Vue Routerçš„ä¾èµ–åŒ…åˆ°å½“å‰é¡¹ç›®ä¸­ï¼Œéœ€è¦è¿è¡Œåé¢è¿™æ¡å‘½ä»¤ã€‚

```javascript
npm install vue-router@4
```

ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ªè·¯ç”±é…ç½®çš„æ–‡ä»¶ã€‚æ¯”å¦‚åœ¨é¡¹ç›®srcæ–‡ä»¶å¤¹ä¸‹å»ºä¸€ä¸ªrouteræ–‡ä»¶å¤¹ï¼Œç„¶åè¿›å…¥routeræ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ã€‚

```javascript
import Vue from 'vue'
//å¼•å…¥Vue Routerç»„ä»¶
import Router from 'vue-router'
//è®©Vueä½¿ç”¨Router
Vue.use(Router)
const routes = [
  { path: '/', component: Home },    //è·¯ç”±åœ°å€å’Œç»„ä»¶ä¸€ä¸€å¯¹åº”ï¼Œæ³¨æ„éœ€è¦æ¢æˆè‡ªå·±çš„é¡µé¢
  { path: '/about', component: About }
]

const router = new Router({
  routes: routes
})

export default router;
```

ç¬¬ä¸‰æ­¥ï¼Œæ‰“å¼€main.jsï¼Œå°†åˆšåˆšåœ¨æ–‡ä»¶ä¸­å®šä¹‰å¥½çš„è·¯ç”±ç»‘å®šåˆ°Vueå®ä¾‹ä¸Šã€‚

```javascript
import Vue from 'vue'
//å¼•å…¥åˆšåˆšå®šä¹‰å¥½çš„Vue Router é…ç½®æ–‡ä»¶
import router from './router/index.js'
import App from './App'

new Vue({
  el: '#app',
  router,    //å°†è·¯ç”±ç»‘å®šåœ¨Vueå®ä¾‹ä¸Š
  components: {
    App
  },
  template: '<App/>'
})
```

ç¬¬å››æ­¥ï¼Œåœ¨App.vueä¸­åŠ ä¸Šrouter-viewæ ‡ç­¾ã€‚

```javascript
<template>
  <div id="app">
    <!-- è·¯ç”±å‡ºå£ -->
    <!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ -->
    <router-view/>
  </div>
</template>

<script>
export default {
  name: 'App'
}
</script>
```

è¿™æ ·ä¸€ä¸ªæœ€ç®€å•çš„è·¯ç”±å°±é…ç½®å¥½å•¦ï¼æˆ‘ä»¬è¿è¡Œåé¢çš„å‘½ä»¤ï¼Œå¯åŠ¨Vueæ¥çœ‹ä¸€ä¸‹æ•ˆæœã€‚

```javascript
npm run dev
```

è¿™æ—¶å€™æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨ç›´æ¥çœ‹ä¸€ä¸‹é¡µé¢çš„æ•ˆæœã€‚

æˆ‘ä»¬åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥localhost:8080ï¼Œæ˜¾ç¤ºçš„å°±æ˜¯Homeç»„ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥å°è¯•æ›´æ¢è·¯ç”±åœ°å€ï¼Œä¾‹å¦‚è¾“å…¥localhost:8080/about ï¼Œæ˜¾ç¤ºçš„å°±ä¼šæ˜¯Aboutç»„ä»¶ã€‚

### å¸¦å‚æ•°çš„åŠ¨æ€è·¯ç”±åŒ¹é…

åˆšæ‰é€šè¿‡ç®€å•çš„å‡ ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å­¦ä¼šäº†ç®€å•çš„è·¯ç”±é…ç½®ï¼Œä¹ŸæŠŠè·¯ç”±ç»‘å®šåœ¨äº†Vueå®ä¾‹ä¸Šã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†äº†è§£ä¸€äº›è·¯ç”±é…ç½®çš„å…¶ä»–å¸¸è§åŠŸèƒ½ï¼Œè¿™äº›ä¹Ÿæ˜¯åœ¨æˆ‘ä»¬åè¾¹é¡¹ç›®å¼€å‘ä¸­ä¼šç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œç”¨å¥½è¿™äº›åŠŸèƒ½ï¼Œåé¢é¡¹ç›®å¼€å‘æ‰ä¼šæ›´åŠ é«˜æ•ˆã€‚

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†ç»™å®šåŒ¹é…æ¨¡å¼çš„è·¯ç”±æ˜ å°„åˆ°åŒä¸€ä¸ªç»„ä»¶ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå•†å“è¯¦æƒ…ç»„ä»¶ï¼Œç”¨æ¥æ˜¾ç¤ºæ‰€æœ‰å•†å“çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½†å•†å“ ID ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡IDæ¥æŸ¥è¯¢å•†å“çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œå±•ç¤ºã€‚æ‰€ä»¥æ¯ä¸€æ¬¡çš„ç‚¹å‡»ï¼Œéƒ½éœ€è¦å¸¦ä¸Šå•†å“çš„IDè¿›è¡ŒæŸ¥è¯¢ã€‚åœ¨ Vue Router ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è·¯å¾„ä¸­ä½¿ç”¨ä¸€ä¸ªåŠ¨æ€å­—æ®µæ¥å®ç°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º**è·¯å¾„å‚æ•°**Â ã€‚

```javascript
const routes = [
  // åŠ¨æ€å­—æ®µä»¥å†’å·å¼€å§‹
  { path: '/product/detail/:id', component: ProductDetail },
]
```

è¿™æ ·ï¼Œå¸¦è·¯å¾„å‚æ•°çš„è·¯ç”±å°±é…å¥½äº†ã€‚

è¿™æ—¶æˆ‘ä»¬æ‰“å¼€http://localhost:8080/product/detail/1ï¼Œæ˜¾ç¤ºçš„åº”è¯¥æ˜¯idä¸º1çš„å•†å“ã€‚æ‰“å¼€http://localhost:8080/product/detail/2ï¼Œæ˜¾ç¤ºçš„å°±åº”è¯¥æ˜¯idä¸º2çš„å•†å“ã€‚

åœ¨å•†å“è¯¦æƒ…é¡µé¢ä¸­å¯ä»¥é€šè¿‡routeçš„paramsæ–¹å¼æ¥è·å–å½“å‰çš„IDï¼Œparamsæ˜¯è·¯ç”±ä¼ å€¼çš„æ–¹å¼ï¼Œåé¢æ˜¯ä»£ç å®ç°ã€‚

```javascript
this.$route.params.id
```

### é‡å®šå‘

å½“æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°è·¯ç”±é‡å®šå‘çš„éœ€æ±‚ï¼Œéœ€è¦è·³è½¬åˆ°è·¯ç”±é…ç½®çš„åœ°å€æ—¶ï¼Œæƒ³è½¬åˆ°å…¶ä»–åœ°å€ï¼Œå°±å¯ä»¥ä½¿ç”¨é‡å®šå‘ï¼Œ**redirectæ˜¯é‡å®šå‘åˆ°çš„åœ°å€**ã€‚

```javascript
const routes = [{ path: '/home', redirect: '/' }]
```

æˆ–è€…ä½ å¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å®ç°æ–¹å¼ã€‚

```javascript
const routes = [{ path: '/home', redirect: { name: 'homepage' } }]
```

### åˆ«å

æœ‰æ—¶æƒ³é€šè¿‡æ›´å¤šçš„åœ°å€è®¿é—®åŒä¸€ä¸ªç»„ä»¶ï¼Œå°±å¯ä»¥ç»™è·¯ç”±æ·»åŠ åˆ«åï¼Œaliasçš„å€¼å°±æ˜¯å¯¹åº”å…¶ä»–åœ°å€çš„åç§°ï¼Œåé¢å…·ä½“çš„ä»£ç å®ç°ã€‚

```javascript
const routes = [{ path: '/', component: Homepage, alias: '/home' }]
```

å½“æˆ‘ä»¬éœ€è¦æ›´å¤šåœ°å€æ—¶ï¼Œaliaså¯ä»¥æ˜¯æ•°ç»„ã€‚

```javascript
const routes = [{ 
path: '/', component: Homepage, 
alias: ['/addr1','/addr2','/addr3'] 
}]
```

### åµŒå¥—è·¯ç”±

æœ‰æ—¶ç»„ä»¶å†…è¦æ ¹æ®åœ°å€æ çš„åœ°å€åµŒå¥—ä¸åŒçš„å…¶ä»–ç»„ä»¶ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°åµŒå¥—è·¯ç”±ã€‚

ä¾‹å¦‚å‡ ä¸ªé¡µé¢è¦ä½¿ç”¨ç›¸åŒçš„å¸ƒå±€ï¼Œæˆ–è€…ç›¸åŒçš„ç»„ä»¶ï¼Œä¸ºäº†å‡å°‘é‡å¤çš„å·¥ä½œï¼Œæˆ‘ä»¬å°±ä¼šæŠŠå…¬å…±çš„éƒ¨åˆ†å®šä¹‰ä¸ºçˆ¶ç»„ä»¶ï¼Œä¸­é—´å¯åˆ‡æ¢çš„éƒ¨åˆ†ç”¨æ ‡ç­¾æ ¹æ®åœ°å€æ çš„è·¯ç”±åœ°å€æ¸²æŸ“ã€‚

æˆ‘ä»¬è¿˜æ˜¯ç»“åˆä¾‹å­æ¥ç†è§£ï¼Œç”¨æˆ·è¯¦æƒ…é¡µéœ€è¦æ˜¾ç¤ºä¸åŒçš„ä¿¡æ¯ï¼Œè¿™æ—¶å€™å°±éœ€è¦åµŒå¥—ä¸åŒçš„ç»„ä»¶ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹ä¸€èµ·è®¤è¯†ä¸€ä¸‹åµŒå¥—è·¯ç”±ã€‚

```plain
/user/:id/userMesÂ  //æ˜¾ç¤ºç”¨æˆ·ä¸ªäººä¿¡æ¯
/user/:id/photosÂ  // ç°å®ç”¨æˆ·ä¸ªäººç›¸å†Œ

//æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ä½¿ç”¨æ—¶çš„å…·ä½“å†™æ³•
/user/1/profileÂ  æ˜¾ç¤ºidä¸º1çš„ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯
/user/1/posts æ˜¾ç¤ºidä¸º1çš„ç”¨æˆ·çš„ç›¸å†Œ
/user/2/profileÂ  æ˜¾ç¤ºidä¸º2çš„ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯
/user/2/posts æ˜¾ç¤ºidä¸º2çš„ç”¨æˆ·çš„ç›¸å†Œ
```

é‚£ä¹ˆåœ¨Routerä¸­è¯¥æ€ä¹ˆé…ç½®å‘¢ï¼Ÿå…·ä½“ä»£ç æ˜¯åé¢è¿™æ ·ã€‚

```javascript
const routes = [
Â  {
Â  Â  path: '/user/:id',
Â  Â  component: User,
Â  Â  children: [
Â  Â  Â  {
Â  Â  Â  Â  // å½“ /user/:id/profile åŒ¹é…æˆåŠŸ
Â  Â  Â  Â  // UserProfile å°†è¢«æ¸²æŸ“åˆ° User çš„ <router-view> å†…éƒ¨
Â  Â  Â  Â  path: '/profile',
Â  Â  Â  Â  component: UserProfile
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  // å½“ /user/:id/posts åŒ¹é…æˆåŠŸ
Â  Â  Â  Â  // UserPosts å°†è¢«æ¸²æŸ“åˆ° User çš„ <router-view> å†…éƒ¨
Â  Â  Â  Â  path: '/posts',
Â  Â  Â  Â  component: UserPosts
Â  Â  Â  },
Â  Â  ],
Â  },
]
```

è¿™æ ·å½“ /user/:id/profile åŒ¹é…æˆåŠŸæ—¶ï¼ŒUserProfile ç»„ä»¶å°†è¢«æ¸²æŸ“åˆ° User çš„ å†…éƒ¨ï¼Œå½“ /user/:id/posts åŒ¹é…æˆåŠŸæ—¶ï¼ŒUserPosts ç»„ä»¶å°†è¢«æ¸²æŸ“åˆ° User çš„ å†…éƒ¨ã€‚

### æ‡’åŠ è½½

å› ä¸ºè·¯ç”±é…ç½®æ—¶å¼•å…¥äº†å¾ˆå¤šç»„ä»¶ï¼Œå½“æ‰“åŒ…æ„å»ºåº”ç”¨æ—¶ï¼ŒJavaScript åŒ…ä¼šå˜å¾—éå¸¸å¤§ï¼Œå½±å“é¡µé¢åŠ è½½ï¼Œè¿™æ ·ä¸ä»…ä¼šé€ æˆèµ„æºçš„æ¶ˆè€—ï¼Œè¿˜ä¼šå½±å“ç”¨æˆ·çš„ä½“éªŒã€‚å¦‚æœæˆ‘ä»¬èƒ½å½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶ï¼Œå°±ä¼šæ›´åŠ é«˜æ•ˆã€‚

å…·ä½“çš„å®ç°æ–¹å¼æˆ‘å†™åœ¨äº†åé¢ã€‚

```javascript
const ComponentA = ï¼ˆï¼‰=>import('éœ€è¦åŠ è½½çš„æ¨¡å—åœ°å€')
```

åé¢è¿™ç§è¯­æ³•ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚

```javascript
ComponentAï¼šresolve=>(['éœ€è¦åŠ è½½çš„è·¯ç”±çš„åœ°å€'ï¼Œresolve])
```

æˆ‘ä»¬å†ç»“åˆVue Routeré…ç½®æ–‡ä»¶çœ‹ä¸€ä¸‹æ‡’åŠ è½½çš„å®ç°ã€‚

```javascript
// å°†
// import UserDetails from './views/UserDetails.vue'
// æ›¿æ¢æˆ
const UserDetails = () => import('./views/UserDetails.vue')

const router = new Router({
  // ...
  routes: [{
   path: '/users/:id', 
  component: UserDetails
})
```

åˆ°è¿™é‡Œï¼Œå¦‚ä½•é…ç½®è·¯ç”±çš„æ ¸å¿ƒçŸ¥è¯†æˆ‘ä»¬å°±å·²ç»å­¦ä¹ å®Œäº†ã€‚

### API

ä¸ºäº†è®©ä½ å¯¹Vue Routerçš„åŠŸèƒ½å’Œå±æ€§æ›´åŠ ç†Ÿæ‚‰ï¼Œä»Šåå¯ä»¥çµæ´»åœ°ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬å†æ¥ç†Ÿæ‚‰ä¸€äº›å¸¸è§çš„å¸¸è§Router APIï¼Œå®ƒä»¬èƒ½è®©æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å®ç°è·¯ç”±çš„è·³è½¬ã€å›é€€ç­‰åŠŸèƒ½ã€‚

1.è·³è½¬åˆ°å…¶ä»–è·¯ç”±é¡µé¢

åœ¨ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨this.$router.pushæ¥æ§åˆ¶è·¯ç”±é¡µé¢çš„è·³è½¬ï¼Œæ¯”å¦‚è·³è½¬åˆ°Aboutç»„ä»¶é¡µé¢ã€‚

```javascript
this.$router.push('/about')
```

è¿™ä¸ªè·³è½¬ç­‰åŒäºç‚¹å‡»é¡µé¢ä¸Šçš„router-linké“¾æ¥ã€‚

```javascript
<router-link :to="/about">è·³è½¬åˆ°About</router-link>
```

æœ‰æ—¶è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé¡µé¢éœ€è¦å¸¦ä¸Šä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æœç´¢å…³é”®è¯ç­‰ï¼Œå°±éœ€è¦è·³è½¬æ—¶é“¾æ¥å¸¦ä¸Šå‚æ•°ï¼Œå°±åƒåé¢è¿™æ ·ã€‚

```javascript
this.$router.push({ path: '/about', query: { keyword: 'äºŒæ¬¡å…ƒç¾å°‘å¥³' } })
```

åœ¨HTMLä»£ç ä¸­æˆ‘ä»¬æƒ³è¦å®ç°å‚æ•°çš„ä¼ å€¼ï¼Œå°±ç›´æ¥é€šè¿‡æ ‡ç­¾æ¥å®ç°ï¼Œåé¢æ˜¯å…·ä½“çš„å®ç°ä»£ç ã€‚

```javascript
<router-link :to="{ name: 'About', query: { keyword: 'äºŒæ¬¡å…ƒç¾å°‘å¥³' }}">
  è·³è½¬åˆ°About
</router-link>
```

è¿™æ ·ï¼Œè·³è½¬åˆ°Aboutç»„ä»¶æ—¶é“¾æ¥ä¸Šå°±ä¼šå¸¦ä¸Šå‚æ•° â€œkeyword=äºŒæ¬¡å…ƒç¾å°‘å¥³â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ°å€æœ¬æ¥æ˜¯ â€œlocalhost:8080/aboutâ€ï¼Œå¸¦ä¸Šå‚æ•°åæ˜¯ â€œlocalhost:8080/about?keyword=äºŒæ¬¡å…ƒç¾å°‘å¥³â€ã€‚é‚£ä¹ˆåœ¨Aboutç»„ä»¶é¡µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡route.queryæ¥è·å¾—å½“å‰é¡µé¢é“¾æ¥ä¸Šçš„å‚æ•°ã€‚

```javascript
this.$route.query.keyword  //-->'äºŒæ¬¡å…ƒç¾å°‘å¥³'
```

æœ‰ä¸€äº›éšç§˜çš„ä¿¡æ¯ä¸æƒ³åœ¨é“¾æ¥ä¸Šå±•ç¤ºï¼Œé‚£ä¹ˆå¯ä»¥è·³è½¬æ—¶ç»™ç»„ä»¶ä¼ å‚æ•°ã€‚

```javascript
// å‘½åçš„è·¯ç”±ï¼Œå¹¶åŠ ä¸Šå‚æ•°ï¼Œè®©è·¯ç”±å»ºç«‹ url
this.$router.push({ name: 'user', params: { username: 'eduardo' } })
```

é‚£æˆ‘ä»¬å°±å¯ä»¥åœ¨HTMLä»£ç å—ä¸­ç›´æ¥ç”¨åé¢è¿™ç§æ–¹å¼æ¥å®ç°ã€‚

```javascript
<router-link :to="{ name: 'user', params: { username: 'eduardo' }}">
Â  User
</router-link>
```

nameæ˜¯ç»„ä»¶çš„åå­—ï¼Œparamsæ˜¯è¦ç»™ç»„ä»¶ä¼ çš„å‚æ•°å¯¹ã€‚è¿™ä¸¤ç§æ–¹å¼æ˜¯åŒæ ·çš„æ•ˆæœï¼Œè·³è½¬åˆ°userç»„ä»¶é¡µï¼Œå¹¶ä¸”å¸¦ç€å‚æ•°username=â€˜eduardoâ€™ã€‚

åœ¨userç»„ä»¶é¡µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨router.paramsæ¥å–åˆ°è·¯ç”±å¸¦æ¥çš„å‚æ•°ï¼Œè¿™æ ·å½“æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€äº›å­—æ®µåšæ•°æ®å¤„ç†æˆ–æ¥å£è¯·æ±‚æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ä¼ é€’çš„å€¼ã€‚

```javascript
this.$router.params.username  //-->eduardo
```

2.å›åˆ°ä¸Šä¸€é¡µ

å¯¹äºå›åˆ°ä¸Šä¸€é¡µçš„åº”ç”¨ï¼Œåœ¨é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ç”¨åˆ°ï¼Œæ¯”å¦‚è¿™æ ·çš„åœºæ™¯ï¼šæäº¤å®Œè¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦å›åˆ°åˆ—è¡¨é¡µæˆ–è€…é¦–é¡µã€‚

é‚£ä¹ˆè¿™ä¸ªåŠŸèƒ½åœ¨ä»£ç ä¸­åº”è¯¥å¦‚ä½•æ§åˆ¶å‘¢ï¼Ÿä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥å®ç°ï¼Œè¿™æ ·å°±å®ç°å›åˆ°ä¸Šä¸€é¡µçš„åŠŸèƒ½ã€‚

```javascript
this.$router.go(-1)
```

ä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœæƒ³è¦å›åˆ°ä¸Šä¸€é¡µçš„ä¸Šä¸€é¡µçš„ä»£ç å°±æ˜¯åé¢è¿™æ ·ã€‚

```javascript
this.$router.go(-2)
```

3.ç»„ä»¶çš„è·¯ç”±é’©å­å‡½æ•°

ç¬¬å››èŠ‚è¯¾æˆ‘ä»¬å­¦ä¹ è¿‡Vueç»„ä»¶åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„é’©å­å‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬å†æ¥å­¦ä¹ è·Ÿè·¯ç”±ç›¸å…³çš„ä¸¤ä¸ªå¸¸ç”¨é’©å­å‡½æ•°ã€‚

å¦‚æœæˆ‘ä»¬åœ¨è¿›å…¥é¡µé¢å‰ï¼Œæœ‰ä¸€äº›è¦å¤„ç†çš„æ“ä½œï¼ˆæ¯”å¦‚é‡ç½®ç¼“å­˜ï¼‰ï¼Œå°±è¦ç”¨åˆ°beforeRouteEnterå‡½æ•°ã€‚éœ€è¦æ³¨æ„æ­¤æ—¶ç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼Œä¸èƒ½é€šè¿‡thisè®¿é—®ç»„ä»¶å®ä¾‹ã€‚åé¢æ˜¯å…·ä½“ä»£ç ç¤ºä¾‹ã€‚

```javascript
<template>
<div id="MyComponent"></div>
</template>    
<script>
export default {
    name: 'MyComponent',
    data(){
    //è¿™é‡Œå®šä¹‰æ•°æ®
      return{
        ......
      }
  },
  methods:{
    //è¿™é‡Œå®šä¹‰æ–¹æ³•
    ......
  },
  beforeRouteEnter(to, from) {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨
    // ä¸èƒ½è·å–ç»„ä»¶å®ä¾‹ `this`
    // å› ä¸ºå½“å®ˆå«æ‰§è¡Œæ—¶ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»º
  }
}
</script>
```

ç›¸åº”åœ°ï¼Œåœ¨ç¦»å¼€é¡µé¢å‰ï¼Œæœ‰ä¸€äº›è¦å¤„ç†çš„æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·åœ¨ç¦»å¼€é¡µé¢ä¹‹å‰æ”¶åˆ°ä¸€ä¸ªâ€œç¡®å®šè¦ç¦»å¼€ä¹ˆâ€çš„å¼¹çª—ã€‚è¿™ç§æƒ…å†µå°±ä¼šç”¨åˆ°beforeRouteLeaveå‡½æ•°ã€‚

æ­¤æ—¶ç»„ä»¶å®ä¾‹å·²ç»è¢«åˆ›å»ºï¼Œå¯ä»¥é€šè¿‡thisè®¿é—®ç»„ä»¶å®ä¾‹ã€‚ä»£ç æ˜¯åé¢è¿™æ ·ã€‚

```javascript
beforeRouteLeave(to, from) {
    // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    // å¯ä»¥è®¿é—®ç»„ä»¶å®ä¾‹ `this`
 }
```

4.å…¨å±€è·¯ç”±é’©å­å‡½æ•°

é™¤äº†è¿›å…¥é¡µé¢å’Œç¦»å¼€é¡µé¢çš„é’©å­å‡½æ•°ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„é’©å­å‡½æ•°â€”â€”å…¨å±€å‡½æ•°ã€‚å®ƒå®šä¹‰åœ¨Vue Routerçš„é…ç½®æ–‡ä»¶é‡Œï¼Œä¹Ÿå°±æ˜¯åˆšåˆšæˆ‘ä»¬å»ºçš„src/router/index.js ï¼Œå¯¹æ‰€æœ‰è·¯ç”±é¡µé¢éƒ½ç”Ÿæ•ˆã€‚

æ¯”å¦‚è·³è½¬é¡µé¢ä¹‹å‰éœ€è¦æŸ¥çœ‹å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç»ç™»é™†ï¼Œå¦‚æœæ²¡æœ‰ç™»é™†è¦é‡å®šå‘åˆ°ç™»é™†é¡µã€‚è¿™æ—¶å°±ä¼šç”¨åˆ°router.beforeEachã€‚

```javascript
router.beforeEach(async (to, from) => {
   if (
     // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»é™†
     !isAuthenticated &&
     // é¿å…æ— é™é‡å®šå‘
     to.name !== 'Login'
   ) {
     // å°†ç”¨æˆ·é‡å®šå‘åˆ°ç™»é™†é¡µé¢
     return { name: 'Login' }
   }
 })
```

è€Œå½“æˆ‘ä»¬æƒ³è¦ç»Ÿè®¡é¡µé¢è®¿é—®æ•°é‡æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨router.afterEaché’©å­å‡½æ•°ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªå‡½æ•°è¦åœ¨è·¯ç”±è·³è½¬ä¹‹åè°ƒç”¨ã€‚

```javascript
router.afterEach((to, from) => {
  //do something
})
```

åˆ°è¿™é‡Œï¼ŒVue Routerçš„æ ¸å¿ƒçŸ¥è¯†æˆ‘ä»¬å°±æ¢³ç†å¥½äº†ã€‚ä½†çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨çœŸæ­£çš„é¡¹ç›®ä¸­ï¼Œä½“ä¼šä¸€ä¸‹å®ƒä»¬éƒ½æ˜¯å¦‚ä½•åº”ç”¨çš„ã€‚

## è§†é¢‘å¹³å°ä¸­å¦‚ä½•ä½¿ç”¨Vue Router

é¦–å…ˆæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ï¼Œè§†é¢‘å¹³å°ä¸­éƒ½æœ‰å“ªäº›é¡µé¢ã€‚

- é¦–é¡µ
- ç™»é™†
- æ³¨å†Œ
- è§†é¢‘åˆ—è¡¨
- è§†é¢‘è¯¦æƒ…
- è§†é¢‘å‘å¸ƒ
- ä¸ªäººä¸­å¿ƒ
- åˆ›ä½œä¸­å¿ƒ
- æ•°æ®ä¸­å¿ƒ
- æˆ‘çš„èµ„æ–™

åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºæˆ‘ä»¬å¤§éƒ¨åˆ†çš„é¡µé¢éƒ½ä½¿ç”¨ç›¸åŒçš„Headerï¼Œä¸ºäº†å‡å°‘é‡å¤å·¥ä½œã€‚æˆ‘ä»¬éœ€è¦å°†Headerå’ŒFooterå†™æˆå…¬å…±ç»„ä»¶ã€‚å±•ç¤ºæ•ˆæœæ˜¯åé¢è¿™æ ·ã€‚

![](https://static001.geekbang.org/resource/image/09/51/09969fa83abdbb1c3c0bd8e7d93f4f51.jpg?wh=2619x1003)

![](https://static001.geekbang.org/resource/image/a5/52/a5f3b10466b5605eaea7b090a29a1752.jpg?wh=2923x989)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠHeaderå’ŒFooterå®šä¹‰æˆç»„ä»¶ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæ¨¡ç‰ˆï¼Œè®©å…¶ä»–å†…å®¹æ ¹æ®è·¯ç”±åœ°å€å±•ç¤ºåœ¨ä¸­é—´ã€‚

è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨æ ‡ç­¾æ¥å®ç°ï¼Œåé¢æ˜¯å¯¹åº”çš„å®ç°ä»£ç ã€‚

```javascript
<template>
  <div class="layout">
    <my-header ref="myheader"></my-header>
    <div class="content">
      <router-view ref="child"></router-view>
    </div>
    <my-footer></my-footer>
  </div>
</template>

<script>
import MyHeader from '@/components/PC/MyHeader';
import MyFooter from '@/components/PC/MyFooter';
export default {
  name: 'Layout',
  components: { MyHeader, MyFooter },
  data() {
    return {};
  },
  mounted(){}
};
</script>

<style lang="less" scoped>
.content {
  min-height: calc(100vh - 140px);
  background: #fff;
}
</style>

```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€src/router/index.jsé…ç½®è·¯ç”±ã€‚

å¤§éƒ¨åˆ†ç»„ä»¶éƒ½è¦ç”¨åˆ°å…¬ç”¨çš„Headerå’ŒFooterï¼Œå¹¶æ˜¾ç¤ºåœ¨Layoutç»„ä»¶ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠLayoutç»„ä»¶é…ç½®åœ¨routerä¸­ï¼Œä¹Ÿå°±æ˜¯å¤´éƒ¨ç¬¬ä¸€ä¸ªç»„ä»¶ã€‚ä¹‹åæˆ‘ä»¬æŠŠå…¶ä»–é¡µé¢çš„è·¯ç”±ç»Ÿä¸€å†™åœ¨Layoutçš„childrené‡Œã€‚

å…·ä½“çš„ä»£ç å½¢å¼æ˜¯åé¢è¿™æ ·ï¼Œä½ å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°å®ƒä»¬çš„å±‚çº§å…³ç³»ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®ç°äº†é¡¹ç›®çš„è·¯ç”±é…ç½®ç®¡ç†ä»£ç ã€‚

```javascript
import Vue from 'vue'
import Router from 'vue-router'

Vue.use(Router)
() => import('./views/UserDetails.vue')
const router = new Router({
  routes: [{
    path: '/',
    name: 'Layout',
    component: resolve => require([`@/pages/Layout/Layout`], resolve),
    children: [
      //é¦–é¡µ
      {
        path: '/',
        name: 'Index',
        component: resolve => require([`@/pages/Index/Index`], resolve)
      }, {
        path: '/login',
        alias: '/register',
        name: 'Wrapper',
        component: resolve => require([`@/pages/Login/Wrapper`], resolve),
        //ç™»é™†é¡µ
        children: [{
            path: '/login',
            name: 'Login',
            component: resolve => require([`@/pages/Login/Login`], resolve)
          },
          //æ³¨å†Œé¡µ
          {
            path: '/register',
            name: 'Register',
            component: resolve => require([`@/pages/Login/Register`], resolve)
          }
        ]
      },
      //è§†é¢‘åˆ—è¡¨é¡µ
      {
        path: '/video/list/:tag',
        name: 'VideoList',
        component: resolve => require([`@/pages/Video/VideoList`], resolve)
      },
      //è§†é¢‘æœç´¢é¡µ
      {
        path: '/video/search/:keyword',
        name: 'VideoList',
        component: resolve => require([`@/pages/Video/VideoList`], resolve)
      },
      //è§†é¢‘è¯¦æƒ…é¡µ
      {
        path: '/video/detail/:id',
        name: 'VideoDetail',
        component: resolve => require([`@/pages/Video/VideoDetail`], resolve)
      },
      //è§†é¢‘å‘å¸ƒé¡µ
      {
        path: '/video/publish',
        name: 'VideoPublish',
        component: resolve => require([`@/pages/Video/VideoPublish`], resolve)
      },
      //è§†é¢‘ç¼–è¾‘é¡µ
      {
        path: '/video/edit/:id',
        name: 'VideoPublish',
        component: resolve => require([`@/pages/Video/VideoPublish`], resolve)
      },
      //ä½œå“åˆ—è¡¨é¡µ
      {
        path: '/home/admin',
        name: 'Admin',
        component: resolve => require([`@/pages/Home/Admin`], resolve)
      },
      //ä¸ªäººèµ„æ–™é¡µ
      {
        path: '/home/info',
        name: 'Info',
        component: resolve => require([`@/pages/Home/Info`], resolve)
      },
      //æ•°æ®ä¸­å¿ƒé¡µ
      {
        path: '/home/data',
        name: 'Data',
        component: resolve => require([`@/pages/Home/Data`], resolve)
      },
      //æ¶ˆæ¯é€šçŸ¥é¡µ
      {
        path: '/home/message/:id',
        name: 'Message',
        component: resolve => require([`@/pages/Home/Message`], resolve)
      },
      //ä¸ªäººä¸­å¿ƒé¡µ
      {
        path: '/home/:id',
        name: 'Home',
        component: resolve => require([`@/pages/Home/Home`], resolve)
      }
    ]
  }]
})

export default router;
```

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†è·¯ç”±é…ç½®ã€‚æ€ä¹ˆéªŒè¯é…ç½®æˆåŠŸäº†å‘¢ï¼Ÿä½ å¯ä»¥è·Ÿç€åé¢çš„æ“ä½œæ¥ç›´è§‚æ„Ÿå—ä¸‹ã€‚

æˆ‘ä»¬é¦–å…ˆå¯åŠ¨é¡¹ç›®ï¼Œæ‰“å¼€localhost:8080ä¼šæ˜¾ç¤ºé¦–é¡µã€‚

![](https://static001.geekbang.org/resource/image/e1/b5/e1539d1bd4098059c5e5b8b59af552b5.jpg?wh=3183x1211)

ç„¶åç‚¹å‡»å³ä¸Šè§’çš„ç™»é™†ï¼Œå°±ä¼šè·³è½¬åˆ°ç™»é™†é¡µã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ ‡ç­¾ç›´æ¥æ¥å®ç°ï¼Œç‚¹å‡»ç™»é™†ï¼Œæ ‡ç­¾ä¸­çš„toå±æ€§è¡¨ç¤ºç›®æ ‡è·¯ç”±çš„é“¾æ¥ï¼Œæœ‰äº†å®ƒç”¨æˆ·å°±ä¼šç›´æ¥é€šè¿‡è·¯ç”±è·³è½¬è¿›å…¥loginé¡µé¢ï¼Œæ ‡ç­¾é‡Œçš„â€œ/loginâ€å°±æ˜¯å¯¹åº”çš„ç™»é™†é¡µé¢çš„è·¯ç”±ã€‚

```javascript
<router-link to="/login">ç™»é™†</routerlink>
```

![](https://static001.geekbang.org/resource/image/30/58/301988fa2fe8cac0d41afd0a48159858.jpg?wh=3183x1431)

æˆ‘ä»¬å†æ¥è¯´è¯´å¹³å°çš„ç™»é™†åŠŸèƒ½è®¾è®¡ï¼Œåœ¨ç”¨æˆ·ç™»é™†æˆåŠŸä¹‹åï¼Œéœ€è¦å†æ¬¡å›åˆ°å¹³å°çš„é¦–é¡µï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšè®¿é—®è¿‡çš„è·¯ç”±ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡router.go(-1)çš„æ–¹æ³•å›åˆ°ä¸Šä¸€é¡µã€‚

```javascript
this.$router.go(-1)
```

![](https://static001.geekbang.org/resource/image/9a/a3/9a68b186f2a682419246485548cafda3.jpg?wh=3043x1820)

æˆ‘ä»¬ç»§ç»­æ€è€ƒåé¢è¿™ä¸ªé—®é¢˜ã€‚åœ¨å¹³å°çš„é¦–é¡µï¼Œç”¨æˆ·ç‚¹å‡»æŸä¸€ä¸ªè§†é¢‘ï¼Œæƒ³è¦æŸ¥çœ‹è¯¦æƒ…ï¼Œåº”è¯¥å¦‚ä½•æ¥å®ç°å‘¢ï¼Ÿ

è¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦åœ¨ç”¨æˆ·ç‚¹å‡»è§†é¢‘çš„æ–¹æ³•å†…è°ƒç”¨router.push()ï¼Œæ‹¬å·å†…æ”¾ä¸Šå¯¹åº”çš„è·¯ç”±åœ°å€å’Œéœ€è¦ä¼ é€’çš„å‚æ•°ï¼Œå°±å¯ä»¥å®ç°è·³è½¬äº†ã€‚å…·ä½“çš„ä»£ç å®ç°æˆ‘æ”¾åœ¨ä¸‹é¢ã€‚

```javascript
this.$router.push("/video/detail/" + video.id);
```

åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®ç°äº†å¹³å°è§†é¢‘é¡µåˆ°è§†é¢‘è¯¦æƒ…é¡µçš„è·³è½¬ï¼ŒåŒæ—¶è·¯ç”±é‡Œä¹Ÿä¼šæºå¸¦ä¸Šè§†é¢‘çš„idï¼ˆæ–¹ä¾¿æˆ‘ä»¬é€šè¿‡idæŸ¥è¯¢ç›¸å…³ä¿¡æ¯ï¼‰ã€‚è¿™æ—¶ï¼Œå¯¹åº”çš„è·¯ç”±å‘ˆç°å°±ä¼šå˜æˆâ€œlocalhost:8080/#/video/detail/10001â€ï¼Œå…·ä½“å‘ˆç°æ–¹å¼ä½ å¯ä»¥å‚è€ƒåé¢çš„æˆªå›¾ã€‚

![](https://static001.geekbang.org/resource/image/1e/4b/1e5b9585511192a27d154d0117956f4b.jpg?wh=2834x1820)

ç‚¹å‡»Headerå³ä¸Šè§’çš„ç”¨æˆ·å¤´åƒï¼Œè¿™é‡Œæˆ‘ä»¬å¦‚æœæå‰æ”¾ç½®äº†ä¸ç”¨æˆ·ç›¸å…³çš„èœå•ï¼Œç‚¹å‡»å¤´åƒå°±å¯ä»¥ç›´æ¥æ˜¾ç¤ºèœå•è¯¦æƒ…ã€‚

è¿™é‡Œçš„è·¯ç”±è·³è½¬éå¸¸å¤šï¼Œé‚£è¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿå…·ä½“çš„ç•Œé¢æ•ˆæœæˆ‘ä¹Ÿæ”¾åœ¨äº†ä¸‹é¢ã€‚

![](https://static001.geekbang.org/resource/image/5c/c8/5c28a55007ddd40abce35c9cbe16e9c8.jpg?wh=2834x1678)

ä¸éš¾å‘ç°ï¼Œè¿™é‡Œæ¯ä¸€ä¸ªèœå•éƒ½æœ‰ç‚¹å‡»äº‹ä»¶ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒé¡µé¢ï¼Œè¿™æ—¶å€™ç‚¹å‡»ä¸ªäººä¸­å¿ƒå°±éœ€è¦è°ƒç”¨router.push()æ–¹æ³•å®ç°é¡µé¢è·³è½¬ï¼Œä»£ç å¦‚ä¸‹ã€‚

```javascript
this.$router.push("/home/" + user.userId);
```

ä»¥æ­¤ç±»æ¨ï¼Œéƒ½å¯ä»¥é€šè¿‡ä¸Šé¢çš„ä»£ç å®ç°è·¯ç”±çš„è·³è½¬å’Œå‚æ•°çš„ä¼ é€’ï¼Œå½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è·å–ç”¨æˆ·çš„èµ„æ–™ï¼Œæˆ‘ä»¬å°±å¿…é¡»è¦å…ˆçŸ¥é“ç”¨æˆ·idæ˜¯ä»€ä¹ˆï¼Œé€šè¿‡idæˆ‘ä»¬æ‰èƒ½è¿›è¡Œæ•°æ®çš„æŸ¥è¯¢ï¼Œè¿™æ—¶å€™å¯¹äºä¼ é€’å€¼çš„è·å–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡router.paramsè·å–å½“å‰é¡µé¢ç»„ä»¶çš„å‚æ•°idï¼ˆç”¨æˆ·çš„idï¼‰ã€‚

```javascript
this.$router.params.id
```

æŒæ¡äº†ä»¥ä¸Šçš„æ–¹æ³•ï¼Œä½ æƒ³è¦å®ç°è·¯ç”±çš„è·³è½¬ï¼Œè¿˜æœ‰å€¼çš„ä¼ é€’å°±éå¸¸ç®€å•äº†ï¼Œåœ¨é¡¹ç›®ä¸­ä½ éƒ½å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼æ¥å®ç°ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬é€šè¿‡è·¯ç”±ç®¡ç†ï¼Œå®ç°äº†é¡¹ç›®ä¸­ä¸€ç³»åˆ—é¡µé¢çš„åœ°å€å’Œå±•ç¤ºç»„ä»¶çš„é…ç½®å’Œé¡µé¢ä¹‹é—´çš„ç›¸äº’è·³è½¬ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨åé¢çš„é¡¹ç›®å¼€å‘å°±èƒ½æ›´åŠ å¿«æ·ã€‚

## æ€»ç»“

è¯¾ç¨‹åˆ°äº†è¿™é‡Œåˆå³å°†è¿›å…¥å°¾å£°äº†ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™èŠ‚è¯¾çš„å­¦ä¹ é‡ç‚¹ã€‚

é¦–å…ˆæˆ‘ä»¬åˆè¯†Vue Routerç»„ä»¶ï¼Œäº†è§£äº†Vue Routeræ˜¯ä»€ä¹ˆå’Œä¸¤ä¸ªæ ¸å¿ƒæ ‡ç­¾ã€‚è¿™é‡Œé‡ç‚¹è¦ç†è§£è¿™ä¸¤ä¸ªæ ‡ç­¾çš„åº”ç”¨åœºæ™¯ï¼šç‚¹å‡»é¡µé¢æ ‡ç­¾è·³è½¬å°±ç”¨&lt;router-link&gt;ï¼›é¡µé¢ä¸Šæœ‰æŸä¸€éƒ¨åˆ†è¦æ ¹æ®åœ°å€æ åœ°å€å˜åŒ–è€Œå˜åŒ–ï¼Œæ­¤æ—¶å°±ç”¨&lt;router-view&gt;ã€‚

ç„¶åæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•æŠŠVue Routeræ•´åˆåˆ°Vueæ¡†æ¶é‡Œã€‚è¿™é‡Œè¯¾ååŒå­¦ä»¬å¯ä»¥æ–°å»ºVueé¡¹ç›®åŠ å¼ºç»ƒä¹ ï¼ŒæŒ‰ç…§è¿™å››ä¸ªæ­¥éª¤ç»™Vueé¡¹ç›®é…ç½®è·¯ç”±ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Vue Routerçš„æ ¸å¿ƒçŸ¥è¯†å’ŒAPIã€‚è¿™é‡Œé‡ç‚¹æ˜¯æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®ä¸ä¸€æ ·çš„åœºæ™¯ã€éœ€æ±‚æ¥é…ç½®è·¯ç”±ï¼Œå¹¶ä¸”èƒ½åœ¨ç»„ä»¶ä¸­è¿ç”¨APIæ¥æ§åˆ¶è·¯ç”±ã€‚

æœ€åçš„ç¯èŠ‚æ˜¯å¹³å°è·¯ç”±çš„ç®¡ç†é…ç½®å®æˆ˜ï¼Œè·¯ç”±è·³è½¬æœ‰å¤šç§æ–¹å¼ï¼Œè·¯ç”±ä¼ å€¼ä¸å€¼çš„è·å–ä¹Ÿç»å¸¸ç”¨åˆ°ã€‚åªè¦å®Œå…¨ç†è§£äº†æ–‡åŒ–ç¤¾åŒºå¹³å°è¿™ä¸ªé¡¹ç›®çš„è·¯ç”±é…ç½®ï¼Œæ¢æˆå…¶ä»–é¡¹ç›®ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œç›¸ä¿¡ä½ å¯ä»¥ä¸¾ä¸€åä¸‰ã€‚

é€šè¿‡ä»Šå¤©çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥è‡ªå·±ä¸ºVueé¡¹ç›®åšè·¯ç”±é…ç½®äº†ï¼Œæ˜¯ä¸æ˜¯æ”¶è·æ»¡æ»¡å‘¢ï¼Ÿå­¦æ— æ­¢å¢ƒï¼Œè¯¾åä¸€å®šè¦å¤šå­¦å¤šç»ƒï¼Œå¯ä»¥è‡ªå·±å»ºå‡ ä¸ªVueç®€å•çš„é¡µé¢ï¼Œç”¨è·¯ç”±ç®¡ç†èµ·æ¥ï¼Œåœ¨æµè§ˆå™¨åˆ†åˆ«è®¿é—®å®ƒä»¬ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹ [Vue Router å®˜ç½‘](https://router.vuejs.org/zh/)æ–‡æ¡£ï¼Œå­¦ä¹ æ›´å¤šRouterçš„ç›¸å…³çŸ¥è¯†ã€‚

## æ€è€ƒé¢˜

è¿™èŠ‚è¯¾æˆ‘ä»¬åœ¨Vueæ¡†æ¶ä¸­æ•´åˆäº†Vue Routerï¼Œæ•´åˆå…¶ä»–ä¾èµ–ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚ä½ å¯ä»¥å°è¯•æ•´åˆä¸€ä¸‹Vueå¸¸ç”¨çš„UIç»„ä»¶åº“Element-UIã€‚

æç¤ºï¼š[Element-UIå®˜ç½‘](https://element.eleme.io/#/)

æ¬¢è¿ä½ åœ¨ç•™è¨€åŒºå’Œæˆ‘äº¤æµäº’åŠ¨ï¼Œä¹Ÿæ¨èä½ æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>ğŸ¤¬</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æœ‰äº›æ ·å¼å’Œå†…å®¹ä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œèƒ½ä¸èƒ½æ”¾ä¸€ä¸‹ä»£ç ï¼Ÿ</p>2023-05-08</li><br/><li><span>åŠŸå¤«ç†ŠçŒ«</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ä¸ºå•¥è¯¾æœ¬é‡Œæè¿°çš„ä»£ç å’Œä»£ç åº“çš„ä»£ç å®Œå…¨ä¸åŒï¼Œè¿˜æœ‰äººåœ¨ç®¡ç†å—ï¼Ÿè¯¾ä»¶é‡Œçš„å¼•å…¥ä¸¤ä¸ªç»„ä»¶å•¥æ„æ€ï¼Œä¹Ÿæ²¡æ‰¾åˆ°home.vueï¼Œä»£ç åº“çš„ä»£ç ä¹Ÿè¿è¡Œä¸åŒï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å¤ªä¹…äº†ï¼Œç‰ˆæœ¬é—®é¢˜å¯¼è‡´éƒ½å¤±æ•ˆäº†ã€‚
&#47;&#47;å¼•å…¥ä¸¤ä¸ªè‡ªå·±å®šä¹‰å¥½çš„ç»„ä»¶
import Home from &#39;..&#47;pages&#47;Home.vue&#39;
import About from &#39;..&#47;pages&#47;Home.vue&#39;

</p>2023-10-23</li><br/><li><span>ZENG</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è·Ÿç€æ•™ç¨‹å®æ“ä¸€è¾¹ç¡®å®å­¦ä¹ åˆ°å¾ˆå¤š

æœ‰å‡ ç‚¹æ€»ç»“ä¸€ä¸‹ï¼Œ
1. vue-router3.xç‰ˆæœ¬å’Œ4.xç‰ˆæœ¬çš„è·¯ç”±é…ç½®ä¼šæœ‰ä¸€äº›å·®åˆ«ï¼Œå¦‚æœä¹‹å‰ç”¨vue-clié…ç½®æ˜¯3.xç‰ˆæœ¬çš„å¯ä»¥æŒ‰ç…§ https:&#47;&#47;v3.router.vuejs.org&#47;zh&#47;guide&#47;#javascript è¿™ä¸ªæ¥ï¼Œå¦‚æœæ˜¯å†²é‡æ–°å®‰è£…çš„
npm install vue-router@4ï¼ŒæŒ‰ç…§ https:&#47;&#47;router.vuejs.org&#47;zh&#47;guide&#47; æ¥é…ç½®

2. å‡çº§ babel7.x
å…ˆæŠŠ package.json babel å¼€å¤´çš„ä¾èµ–åˆ æ‰ï¼Œå†åˆ æ‰ node_modules

ç„¶å package.json åŠ ä¸Šï¼š
    &quot;@babel&#47;cli&quot;: &quot;^7.21.5&quot;,
    &quot;@babel&#47;core&quot;: &quot;^7.22.1&quot;,
    &quot;@babel&#47;plugin-proposal-class-properties&quot;: &quot;^7.18.6&quot;,
    &quot;@babel&#47;plugin-transform-classes&quot;: &quot;^7.21.0&quot;,
    &quot;@babel&#47;plugin-transform-runtime&quot;: &quot;^7.22.4&quot;,
    &quot;@babel&#47;preset-env&quot;: &quot;^7.22.4&quot;,
    &quot;babel-loader&quot;: &quot;^8.0.4&quot;,
å† npm install é‡æ–°å®‰è£…ä¸€ä¸‹

ç„¶åä¿®æ”¹.babelrcä¸ºï¼š
{  
  &quot;presets&quot;: [  
    &quot;@babel&#47;preset-env&quot;  
  ],
  &quot;plugins&quot;: [
    &quot;@babel&#47;plugin-transform-runtime&quot;,
    &quot;@babel&#47;plugin-proposal-class-properties&quot;,
    &quot;@babel&#47;plugin-transform-classes&quot;
  ]
}
</p>2023-06-11</li><br/><li><span>å‹</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æˆ‘æ˜¯è®¿é—® localhost:8080&#47;#&#47;about æ‰å‡ºç°çš„é¡µé¢ å…¶å®æˆ‘ç°åœ¨ä¹Ÿæä¸æ¸…æ¥šå‰ç«¯è¿™äº›ä¸œè¥¿äº†</p>2023-05-25</li><br/><li><span>æš´èµ°çš„æµ·é¸½</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>Home.vueç»„ä»¶å’ŒAbout.vueç»„ä»¶å‘¢ï¼Ÿ</p>2023-05-10</li><br/><li><span>å†¯ä¸½å¨Ÿ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>abouté¡µé¢å‡ºä¸æ¥ï¼Œæˆ‘æ˜¯å¤åˆ¶æ–‡ä¸­çš„ä»£ç çš„ï¼Œä¹Ÿå‡ºä¸æ¥ï¼Œhomeé¡µé¢èƒ½æ­£å¸¸è·¯ç”±ã€‚</p>2024-05-14</li><br/><li><span>niniã‚¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>SyntaxError: lmporting binding name &#39;default&quot; cannot be resolved by star export entries.
è€å¸ˆï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢</p>2024-04-17</li><br/><li><span>é­</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æƒ³å¼€å‘ä¸€ä¸ªå¸¦æœ‰é¡µé¢åˆ†äº«ç»Ÿè®¡åŠŸèƒ½çš„è¡¨å•é¡µé¢ï¼Œèƒ½è®°å½•æ‰“å¼€çš„è¡¨å•æ˜¯ç”±è°åˆ†äº«çš„ï¼Œè¿™åŠŸèƒ½èƒ½ç”¨å¸¦å‚æ•°çš„åŠ¨æ€è·¯ç”±å®ç°å—ï¼Ÿ</p>2024-04-10</li><br/><li><span>åŠŸå¤«ç†ŠçŒ«</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆä½ å¥½ï¼Œå®‰è£…vue-router@4çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œçœ‹èµ·æ¥æ˜¯ä¸æ˜¯router 4çš„ç‰ˆæœ¬yao ä¾èµ–vue 3.2.0ä»¥ä¸Šç‰ˆæœ¬ï¼Œä½†æ˜¯å‰è¾¹ä¸€è·¯æ•™ç¨‹ä¸‹æ¥ï¼Œå®‰è£…ä¸‹æ¥çš„åº”è¯¥æ˜¯vue2.9.6ç‰ˆæœ¬
npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
npm ERR! 
npm ERR! While resolving: video@1.0.0
npm ERR! Found: vue@2.7.15
npm ERR! node_modules&#47;vue
npm ERR!   vue@&quot;^2.5.2&quot; from the root project
npm ERR! 
npm ERR! Could not resolve dependency:
npm ERR! peer vue@&quot;^3.2.0&quot; from vue-router@4.2.5
npm ERR! node_modules&#47;vue-router
npm ERR!   vue-router@&quot;4&quot; from the root project
npm ERR! 
npm ERR! Fix the upstream dependency conflict, or retry
</p>2023-10-27</li><br/><li><span>æ˜ä»”çš„é˜³å…‰åˆå</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æ‡’åŠ è½½çš„å†™æ³•äºŒ `ComponentAï¼šresolve=&gt;([&#39;éœ€è¦åŠ è½½çš„è·¯ç”±çš„åœ°å€&#39;ï¼Œresolve])`æ²¡èµ·ä½œç”¨ï¼Œæ”¹æˆ`ComponentAï¼šresolve=&gt;require([&#39;éœ€è¦åŠ è½½çš„è·¯ç”±çš„åœ°å€&#39;ï¼Œresolve])`ä¹‹åæ‰èµ·ä½œç”¨</p>2023-08-29</li><br/><li><span>Geek_88cc02</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œæœ‰ä»£ç åœ°å€å—ï¼Ÿå™è¿°è¿‡äºæŠ½è±¡äº† aboutç»„ä»¶é‚£äº›éƒ½ä¹ˆæœ‰ï¼Œçœ‹ä¸æ‡‚ æˆ‘ä»¬çœŸæ²¡åŸºç¡€</p>2023-06-10</li><br/><li><span>Geek_88cc02</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Home ç»„ä»¶  About ç»„ä»¶ä»£ç æ²¡æœ‰è®²å§ï¼Ÿ</p>2023-06-10</li><br/><li><span>é˜¿æœ›(tom)</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œä½ çš„ä»£ç Layout é‡Œè¾¹ ä¸‹è¾¹ css ç”¨äº† less, ä½†æ˜¯åœ¨æ–‡ä¸­è¿˜æœ‰ä½ çš„gitä»£ç é‡Œè¾¹ æ²¡æœ‰æåˆ°éœ€è¦å®‰è£…è¿™ä¸ªæ‰©å±•ï¼Œäºæ˜¯æˆ‘è¿™è¾¹æœäº†ä¸€ä¸‹ ï¼ŒæŒ‰ç…§æ–‡ä¸­ç»™å‡ºçš„æ­å»ºæ–¹æ³•ï¼Œless-loader è¿˜åªèƒ½å®‰è£…@5.0.0ç‰ˆæœ¬ï¼Œ,å¦å¤–åœ¨ ç¼–è¯‘è¿‡ç¨‹ä¸­ é¡¹ç›®å¹¶ä¸èƒ½100%ç¼–è¯‘ ï¼Œæç¤º app.vue {parse:&quot;babylon&quot;} è¢«åºŸå¼ƒäº† éœ€è¦æ¢æˆ {parser::&quot;balbel&quot;} è¯·é—®è¿™2ä¸ªé—®é¢˜ï¼Œèƒ½è®²è§£ä¸‹å—</p>2023-05-31</li><br/><li><span>Geek_840593</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ8ï¼‰<p>ERROR  Failed to compile with 1 errors                                                                                                  18:14:14

 error  in .&#47;src&#47;components&#47;PC&#47;MyHeader.vue

Module build failed: 

.book-header {
  border-bottom: 1px solid @border-color;
                         ^
Variable @border-color is undefined
      in &#47;Users&#47;guoyan&#47;my-project&#47;src&#47;components&#47;PC&#47;MyHeader.vue (line 191, column 27)

 @ .&#47;node_modules&#47;.store&#47;vue-style-loader@4.1.3&#47;node_modules&#47;vue-style-loader!.&#47;node_modules&#47;.store&#47;css-loader@3.2.0&#47;node_modules&#47;css-loader&#47;dist&#47;cjs.js?{&quot;sourceMap&quot;:true}!.&#47;node_modules&#47;vue-loader&#47;lib&#47;style-compiler?{&quot;vue&quot;:true,&quot;id&quot;:&quot;data-v-72e0c896&quot;,&quot;scoped&quot;:true,&quot;hasInlineConfig&quot;:false}!.&#47;node_modules&#47;.store&#47;less-loader@5.0.0&#47;node_modules&#47;less-loader&#47;dist&#47;cjs.js?{&quot;sourceMap&quot;:true}!.&#47;node_modules&#47;vue-loader&#47;lib&#47;selector.js?type=styles&amp;index=0!.&#47;src&#47;components&#47;PC&#47;MyHeader.vue 4:14-463 15:3-20:5 16:22-471
 @ .&#47;src&#47;components&#47;PC&#47;MyHeader.vue
 @ .&#47;node_modules&#47;babel-loader&#47;lib!.&#47;node_modules&#47;vue-loader&#47;lib&#47;selector.js?type=script&amp;index=0!.&#47;src&#47;Layout&#47;Layout.vue
 @ .&#47;src&#47;Layout&#47;Layout.vue
 @ .&#47;node_modules&#47;babel-loader&#47;lib!.&#47;node_modules&#47;vue-loader&#47;lib&#47;selector.js?type=script&amp;index=0!.&#47;src&#47;App.vue
 @ .&#47;src&#47;App.vue
 @ .&#47;src&#47;main.js
 @ multi (webpack)-dev-server&#47;client?http:&#47;&#47;localhost:8080 webpack&#47;hot&#47;dev-server .&#47;src&#47;main.js</p>2023-05-25</li><br/><li><span>Geek_840593</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>npm install vue-router@4

npm ERR! code ERESOLVE
npm ERR! ERESOLVE unable to resolve dependency tree
npm ERR! 
npm ERR! While resolving: my-project@1.0.0
npm ERR! Found: vue@2.7.14
npm ERR! node_modules&#47;vue
npm ERR!   vue@&quot;^2.5.2&quot; from the root project
npm ERR! 
npm ERR! Could not resolve dependency:
npm ERR! peer vue@&quot;^3.2.0&quot; from vue-router@4.2.0
npm ERR! node_modules&#47;vue-router
npm ERR!   vue-router@&quot;4&quot; from the root project
npm ERR! 
npm ERR! Fix the upstream dependency conflict, or retry
npm ERR! this command with --force or --legacy-peer-deps
npm ERR! to accept an incorrect (and potentially broken) dependency resolution.
npm ERR! 
npm ERR! 
npm ERR! For a full report see:</p>2023-05-16</li><br/>
</ul>