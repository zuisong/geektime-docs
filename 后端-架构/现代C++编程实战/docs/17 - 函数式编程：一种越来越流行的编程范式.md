ä½ å¥½ï¼Œæˆ‘æ˜¯å´å’ç‚œã€‚

ä¸Šä¸€è®²æˆ‘ä»¬åˆæ­¥ä»‹ç»äº†å‡½æ•°å¯¹è±¡å’Œ lambda è¡¨è¾¾å¼ï¼Œä»Šå¤©æˆ‘ä»¬æ¥è®²è®²å®ƒä»¬çš„ä¸»è¦ç”¨é€”â€”â€”å‡½æ•°å¼ç¼–ç¨‹ã€‚

## ä¸€ä¸ªå°ä¾‹å­

æŒ‰æƒ¯ä¾‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»ä¸€ä¸ªä¾‹å­å¼€å§‹ã€‚æƒ³ä¸€ä¸‹ï¼Œå¦‚æœç»™å®šä¸€ç»„æ–‡ä»¶åï¼Œè¦æ±‚æ•°ä¸€ä¸‹æ–‡ä»¶é‡Œçš„æ€»æ–‡æœ¬è¡Œæ•°ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ

æˆ‘ä»¬å…ˆè§„å®šä¸€ä¸‹å‡½æ•°çš„åŸå‹ï¼š

```c++
int count_lines(const char** begin,
                const char** end);
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æœŸå¾…æ¥å—ä¸¤ä¸ª C å­—ç¬¦ä¸²çš„è¿­ä»£å™¨ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„æ–‡ä»¶åï¼›è¿”å›å€¼ä»£è¡¨æ–‡ä»¶ä¸­çš„æ€»è¡Œæ•°ã€‚

è¦æµ‹è¯•è¡Œä¸ºæ˜¯å¦æ­£å¸¸ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾ˆå°çš„ `main` å‡½æ•°ï¼š

```c++
int main(int argc,
         const char** argv)
{
  int total_lines = count_lines(
    argv + 1, argv + argc);
  cout << "Total lines: "
       << total_lines << endl;
}
```

æœ€ä¼ ç»Ÿçš„å‘½ä»¤å¼ç¼–ç¨‹å¤§æ¦‚ä¼šè¿™æ ·å†™ä»£ç ï¼š

```c++
int count_file(const char* name)
{
  int count = 0;
  ifstream ifs(name);
  string line;
  for (;;) {
    getline(ifs, line);
    if (!ifs) {
      break;
    }
    ++count;
  }
  return count;
}

int count_lines(const char** begin,
                const char** end)
{
  int count = 0;
  for (; begin != end; ++begin) {
    count += count_file(*begin);
  }
  return count;
}
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ21ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/13/4c/65/370de1b9.jpg" width="30px"><span>é©°éª‹</span> ğŸ‘ï¼ˆ57ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>Y-Combinatorè¢«ä½ è¯´é«˜æ·±äº†ã€‚é€’å½’å°±æ˜¯è‡ªå·±è°ƒç”¨è‡ªå·±ã€‚lamdaè¡¨è¾¾å¼æƒ³é€’å½’ï¼Œå›°éš¾åœ¨äºä¸çŸ¥é“è‡ªå·±çš„å‡½æ•°åï¼Œæ€ä¹ˆåŠï¼Ÿè°ƒç”¨ä¸äº†è‡ªå·±ï¼Œéš¾é“è¿˜è°ƒç”¨ä¸äº†åˆ«äººã€‚æ‰€ä»¥lamdaè¡¨è¾¾å¼è°ƒç”¨äº†Y-Combinatorå»é—´æ¥è°ƒç”¨è‡ªå·±ï¼Œè€ŒY-Combinatoråªä¸è¿‡ï¼šä¸€ï¼Œè®°å½•lamdaè¡¨è¾¾å¼ï¼›äºŒï¼Œè½¬è°ƒlamdaè¡¨è¾¾å¼ã€‚è¿™å°±å¥½æ¯”æ™®äº¬å—åˆ¶äºè¿ä»»æ—¶é—´é™åˆ¶ï¼Œå¦‚æœæƒ³ç»§ç»­è¿ä»»ï¼Œåˆ™æ‰¾ä¸ªä»£è¨€äººY-Combinatorç»§ä»»ã€‚ä»£è¨€äººçš„å”¯ä¸€ä½œç”¨å°±æ˜¯åˆ°æœŸä¼ ä½æ™®äº¬ã€‚</div>2020-01-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/21/7e/fb725950.jpg" width="30px"><span>ç½— ä¹¾ æ—</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>å‚è€ƒ istream_line_reader å®ç°çš„ï¼Œæœ›è€å¸ˆæ–§æ­£

template&lt;typename _InIt, typename _Fun&gt;
class filter_view {
public:
	class iterator {  &#47;&#47;  å®ç°  InputIterator  
	public:

		using iterator_category = input_iterator_tag;
		using value_type = typename _InIt::value_type;
		using difference_type = typename _InIt::difference_type;
		using pointer = typename _InIt::pointer;
		using reference = value_type&amp;;

		iterator(_InIt  _First, _InIt _Last, _Fun f)
			:_First(_First), _Last(_Last), _fun(f) {
			++(*this);
		}

		reference operator*() const noexcept { return *_Cur; }
		
		pointer operator-&gt;() const noexcept { return &amp;(*_Cur); }

		iterator&amp; operator++() {
			while (_First != _Last &amp;&amp; !_fun(*_First)) {
				_First++;
			}
			_Cur = _First;
			if (_First != _Last) {
				_First++;
			}
			return *this;
		}

		iterator operator++(int) {
			iterator temp(*this);
			++(*this);
			return temp;
		}

		bool operator==(const iterator&amp; rhs)
			const noexcept
		{
			return _Cur == rhs._Cur;
		}
		bool operator!=(const iterator&amp; rhs)
			const noexcept
		{
			return !operator==(rhs);
		}
	private:
		_InIt _First;
		_InIt _Last;
		_InIt _Cur;
		_Fun _fun;

	};

	filter_view(_InIt _First, _InIt _Last, _Fun f)
		:_First(_First), _Last(_Last), _fun(f) {

	}

	iterator begin() const noexcept {
		return iterator(_First, _Last, _fun);
	}

	iterator end() const  noexcept {
		return iterator(_Last, _Last, _fun);
	}
private:
	_InIt _First;
	_InIt _Last;
	_Fun _fun;
};</div>2020-01-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/b4/2d/44680897.jpg" width="30px"><span>Resolution</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>  è°ƒä¸äº†è‡ªå·±, å°±è°ƒåˆ«äºº
auto factorial = [](int n)
    {
        auto F = [](auto f, int n) -&gt; int
        { if (n == 0) return 1; else return n * f(f,n - 1); };
        return F(F, n);
    };</div>2023-10-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/1c/abb7bfe3.jpg" width="30px"><span>Frank</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ6ï¼‰<div>å´è€å¸ˆï¼Œä¸ºä»€ä¹ˆc++ä¸èƒ½åœ¨è¿”å›å€¼ä¼˜åŒ–ï¼Œæ”¯æŒæŠŠrvalueé€šè¿‡moveæ„é€ ç»™ä¸€ä¸ªlvalueå¼•ç”¨ã€‚æˆ‘æƒ³å®ç°æ¨¡æ¿ä¸­çš„åå˜ï¼Œå‡½æ•°è¿”å›local variableï¼Œåªèƒ½é€šè¿‡å£°æ˜è¿”å›å€¼ç±»å‹ä¸ºå¼•ç”¨å’ŒæŒ‡é’ˆæ‰èƒ½åå˜æ”¯æŒè¿”å›å€¼å¤šæ€ã€‚æŠŠä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçŸ­çš„variableè‡ªåŠ¨moveç»™è¿”å›å€¼ä¸æ˜¯åº”è¯¥çš„å—ï¼Ÿè¿™ä¸ªåœºæ™¯åœ¨å·¥å‚åœºæ™¯ä¸‹åº”è¯¥å¾ˆå¸¸è§å§ã€‚
class Base{
}
class Derive : public Base {}

class Factory {
 Bae &amp; create(){
 return Base();
}
class SubFactory : public Factory{
 Base &amp; create (){
    return Derive();
}
}
è¿™é‡Œçš„è¿”å›å€¼ç±»å‹ä¹Ÿæœ‰å¯èƒ½æ˜¯æ³›å‹å‚æ•°ï¼Œç°åœ¨çœ‹æ¥åªèƒ½ç”¨æ™ºèƒ½æŒ‡é’ˆåŒ…ä¸€å±‚ï¼Œé€šè¿‡moveæ„é€ è¿”å›ï¼Œè¿™çœ‹èµ·æ¥ä¸å¤ªæ–¹ä¾¿ã€‚
}</div>2021-03-31</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/6c/ea/e03fec22.jpg" width="30px"><span>æ³°ä¼¦å¢</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®è€å¸ˆï¼Œmapå’Œreduce.é‚£æ˜¯æœ€æ–°çš„è¯­å¥å—ï¼Ÿè¿˜æ˜¯æœ‰ç¬¬ä¸‰æ–¹åº“ï¼Ÿé‚£ä¸ªTBBï¼Ÿ</div>2020-01-03</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/NyFOEueITjaGLpakMEuWAqVQjo1uDIXlpDdpCxXGfaWiaXzibLQ3WgOFCe8D9FvCmyjsGT7jDsLUbkt8jt2aVs9g/132" width="30px"><span>geek</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è¯¾åæ€è€ƒçš„ä¸€ç§å®ç°ï¼Œè¯·è€å¸ˆæŒ‡æ­£ä¸€ä¸‹å…¶ä¸­å­˜åœ¨çš„é—®é¢˜ã€‚
template &lt;typename T = std::vector&lt;int&gt;&gt;
    class filter_view {
    public:
        filter_view(){}
        filter_view(typename T::iterator begin, typename T::iterator end, std::function&lt;bool(int)&gt; func):begin_(begin),end_(end),func_(func){}

        class iterator {
        public:
            iterator(typename T::iterator end):end_(end){}
            iterator(typename T::iterator begin, std::function&lt;bool(int)&gt; func):begin_(begin), func_(func) {}

            int operator*() {
                if (!func_(*begin_)) return 0;
                return *begin_;
            }

            int operator-&gt;() {
                if (!func_(*begin_)) return 0;
                return *begin_;
            }

            iterator operator++(int n) {
                ++begin_;
                return *this;
            }

            iterator operator++() {
                iterator t = *this;
                operator++(0);
                return t;
            }

            bool operator==(const iterator&amp; o) const {
                return begin_ == o.begin_;
            }

            bool operator!=(const iterator&amp; o) const {
                return !(begin_ == o.end_);
            }
        private:
            typename T::iterator begin_;
            typename T::iterator end_;
            std::function&lt;bool(int)&gt; func_;
        };

        iterator begin() {
            if (!func_) {
                throw std::logic_error(&quot;func_ is null&quot;);
            }
            return iterator(begin_,func_);
        }

        iterator end() {
            if (!func_) {
                throw std::logic_error(&quot;func_ is null&quot;);
            }
            return iterator(end_);
        }

    private:
        typename T::iterator begin_;
        typename T::iterator end_;
        std::function&lt;bool(int)&gt; func_;
    };</div>2021-03-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/03/ce/ec3b8de9.jpg" width="30px"><span>æ·¡æ¼ è½å¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ä½œä¸šï¼šè¯·è€å¸ˆæŒ‡æ­£ï¼
#include &lt;iostream&gt;
#include &lt;numeric&gt;
#include &lt;vector&gt;

using namespace std;

template &lt;typename Iter, typename F&gt;
class filter_view {
 public:
  class iterator {
   public:
    typedef ptrdiff_t difference_type;
    typedef typename Iter::value_type value_type;
    typedef const value_type* pointer;
    typedef const value_type&amp; reference;
    typedef input_iterator_tag iterator_category;

    template &lt;typename IterT, typename FT&gt;
    iterator(IterT&amp;&amp; itr, FT&amp;&amp; f)
        : itr_(std::forward&lt;IterT&gt;(itr)),
          fun_(std::forward&lt;FT&gt;(f)) {
      while (!fun_(*itr_)) {
        ++itr_;
      }
    }

    bool operator==(const iterator&amp; other) noexcept {
      return itr_ == other.itr_;
    }
    bool operator!=(const iterator&amp; other) noexcept {
      return !operator==(other);
    }
    pointer operator-&gt;() noexcept {
      return itr_;
    }
    reference operator*() noexcept {
      return *itr_;
    }
    iterator&amp; operator++() {
      ++itr_;
      while (!fun_(*itr_)) {
        ++itr_;
      }
      return *this;
    }
    iterator operator++(int) {
      iterator tmp(itr_, fun_);
      operator++();
      return tmp;
    }

   private:
    Iter itr_;
    F fun_;
  };
  filter_view(Iter&amp;&amp; begin, Iter&amp;&amp; end, F&amp;&amp; f)
      : begin_(std::forward&lt;Iter&gt;(begin)),
        end_(std::forward&lt;Iter&gt;(end)),
        fun_(std::forward&lt;F&gt;(f)) {}

  iterator begin() {
    return {begin_, fun_};

  }

  iterator end() {
    return {end_, fun_};

  }

 private:
  Iter begin_;
  Iter end_;
  F fun_;
};

int main()
{
  vector v{1, 2, 3, 4, 5};
  auto&amp;&amp; fv = filter_view(
    v.begin(), v.end(), [](int x) {
      return x % 2 == 0;
    });
  cout &lt;&lt; accumulate(fv.begin(),
                     fv.end(), 0)
       &lt;&lt; endl;
}</div>2024-09-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/31/7b/be/791d0f5e.jpg" width="30px"><span>Geek_595be5</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®æ¼”ç¤ºå¹¶è¡Œè¯»å–æ–‡ä»¶çš„ä»£ç ä¾‹å­ä¸­ï¼Œæœ€åæœ‰è¡¥å……è¯´â€œå¹¶è¡Œè¯»å–æ€§èƒ½ä¸€èˆ¬ä¹Ÿä¸ä¼šå¿«äºé¡ºåºè¯»å–â€ï¼Œä¸ºä»€ä¹ˆå¹¶è¡Œå’Œé¡ºåºè¯»å–æ€§èƒ½å·®ä¸å¤šå‘¢ï¼Ÿ</div>2023-08-23</li><br/><li><img src="" width="30px"><span>å¸¸æŒ¯å</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å‡½æ•°å¼ç¼–ç¨‹åœ¨å¹¶å‘åœºåˆä¸‹çš„ç¡®æœ‰ä¼˜åŠ¿ï¼Œä½†æ˜¯æ™®é€šåº”ç”¨ï¼Œæ¯”å¦‚é€’å½’ï¼Œå®ç°èµ·æ¥æ¯”å‘½ä»¤å¼å¤æ‚é‚£ä¹ˆå¤šï¼Œå¯è¯»æ€§æ›´å·®ï¼Œæ„ä¹‰ä½•åœ¨ã€‚è€Œä¸”å‡½æ•°å¼ç¼–ç¨‹çš„ä»£ç ç®€æ´æ€§ä¸å¦‚ç›´æ¥å‘½ä»¤å¼+æ³¨é‡Š</div>2021-10-15</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/2ibrq71Y5Ww3KDRibDxF1gt9YDEPuZkv4ITHEP1u4vvjpPDukkLoK4ngQy1hKKzccnsicLkUAda7sPpibR6Kyb0cfQ/132" width="30px"><span>chang</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘ä¹Ÿè´´ä¸‹æˆ‘çš„å®ç°ï¼Œå‚è€ƒäº†å‰é¢ä¸€äº›åŒå­¦çš„ï¼Œæœ›è€å¸ˆæŒ‡æ­£ä¸è¶³ä¹‹å¤„ï¼š

template&lt;typename It, typename Comp&gt;
class filter_view {
public:
    class iterator {
    public:
        &#47;&#47;æ”¯æŒå†…ç½®æŒ‡é’ˆ
        using value_type = typename std::iterator_traits&lt;It&gt;::value_type;
        using difference_type = typename std::iterator_traits&lt;It&gt;::difference_type;
        using pointer = value_type*;
        using reference = value_type&amp;;
        using iterator_category = std::input_iterator_tag;

        iterator(It it, It e, Comp cmp) : it_(it), e_(e), cmp_(cmp) {
            skipNoMatch();
        }

        iterator&amp; operator++() {
            ++it_;
            skipNoMatch();
            return *this;
        }

        auto operator*() {
            return *it_;
        }

        bool operator==(const iterator &amp;rhs) const {
            return it_ == rhs.it_;
        }

        bool operator!=(const iterator &amp;rhs) const {
            return !(*this == rhs);
        }

    private:
        void skipNoMatch() {
            while (it_ != e_ &amp;&amp; !cmp_(*it_)) {
                ++it_;
            }
        }

    private:
        It it_;
        It e_;
        Comp cmp_;
    };

    filter_view(It b, It e, Comp cmp) : b_(b), e_(e), cmp_(cmp) {}

    iterator begin() const {
        return iterator(b_, e_, cmp_);
    }

    iterator end() const {
        return iterator(e_, e_, cmp_);
    }

private:
    It b_;
    It e_;
    Comp cmp_;
};</div>2021-06-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/1c/abb7bfe3.jpg" width="30px"><span>Frank</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>å´è€å¸ˆï¼Œæˆ‘é‡å†™äº†map-reduceé€»è¾‘(lazy evaluation)ï¼Œä½†æ˜¯ç›®å‰çš„flattenåŠŸèƒ½è¾“å‡ºæœ‰ç‚¹æ··ä¹±ï¼Œæˆ‘æš‚æ—¶æ²¡æ’æŸ¥å‡ºç»“æœã€‚èƒ½å¸®æˆ‘çœ‹ä¸‹å—ï¼Ÿhttps:&#47;&#47;github.com&#47;franklucky001&#47;fp-map-reduce&#47;blob&#47;master&#47;main.cpp</div>2021-04-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/1c/abb7bfe3.jpg" width="30px"><span>Frank</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å´è€å¸ˆï¼Œ æˆ‘æƒ³å®ç°ç±»ä¼¼rustçš„lazy evaluationç‰¹å¾çš„map reduce,ä»£ç https:&#47;&#47;github.com&#47;franklucky001&#47;template_programming&#47;blob&#47;master&#47;collection&#47;iterator.hpp
ä½†æ˜¯æ¨¡æ¿ä¸­ï¼Œä¸æ–¹ä¾¿å®ç°åå˜ï¼Œå£°æ˜æˆå¼•ç”¨å±€éƒ¨å˜é‡ä¼šææ„ï¼Œbeginå’Œendè™šå‡½æ•°å¿…é¡»å£°æ˜æˆæ™ºèƒ½æŒ‡é’ˆæ‰èƒ½é€šè¿‡moveæ„é€ è¿”å›å±€éƒ¨å˜é‡,æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ã€‚</div>2021-03-31</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLDH0RbXvDGVoyRtxs3kLmwSmibqqic4EYYwSH12KqsrrKgpGic7cZXfsicpDMShFTAIT6p3jTJ3ypKzg/132" width="30px"><span>Geek_845be1</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ç”¨ std::function ä¿å­˜ lambdaï¼Œé€šè¿‡å¼•ç”¨æ•è·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°äº†lambda é€’å½’ã€‚</div>2020-12-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/91/00/2007d2f3.jpg" width="30px"><span>zhengfan</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å´è€å¸ˆï¼Œæ‚¨å¥½ã€‚
æ­¤è®²å†…å®¹å’Œä¹‹å‰å†…å®¹æ¯”è¾ƒï¼Œé¢‡æœ‰äº›é“ä¸æœ¯çš„åˆ†åˆ«ã€‚
ä¸ªäººæ„Ÿè§‰å‡½æ•°å¼ç¼–ç¨‹å’ŒADTèŒƒå¼å¼ºè°ƒçš„isolationæœ‰å‡ ä»½ç¥ä¼¼ã€‚
æ‚¨åœ¨æ–‡ä¸­çš„å‡ æ¡å»ºè®®ï¼Œæˆ‘æœ‰äº›å›°æƒ‘åœ°æ–¹ï¼Œå‘æ‚¨è¯·æ•™ï¼š
ç¬¬äºŒæ¡å»ºè®®ï¼šâ€ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡ï¼Œä½†å°½é‡ä¸è¦å»ä¿®æ”¹å˜é‡å†…å®¹â€”â€”å˜é‡çš„ä¿®æ”¹éå¸¸å®¹æ˜“å¯¼è‡´ç¨‹åºå‘˜çš„æ€ç»´é”™è¯¯â€œï¼›è¯·é—®æ‚¨æŒ‡çš„æ˜¯æŠ½è±¡å±‚é¢ä¸Šâ€ä¸è¦æ”¹å˜å˜é‡çš„å«ä¹‰&#47;æ„ä¹‰â€œï¼Ÿäº¦æˆ–æ˜¯å…·ä½“å±‚é¢ä¸Šâ€ä¸è¦æ”¹å˜ä¼ å…¥å‚æ•°ä»¥åŠç¯å¢ƒå˜é‡çš„å†…å®¹â€œï¼Ÿä»ä¸Šä¸‹æ–‡æ¥çœ‹ä¼¼ä¹æ˜¯åè€…ï¼Œä½†è¿™æ ·ä¸€æ¥å¥½åƒå’Œç¬¬ä¸‰æ¡å»ºè®®æœ‰äº›é‡å¤äº†ã€‚
è¯·æ‚¨æŒ‡æ•™ï¼Œå¤šè°¢ã€‚</div>2020-07-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/58/2c/92c7ce3b.jpg" width="30px"><span>æ˜“è½»å°˜</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ²¡æœ‰çœ‹istream_line_readerå‰ï¼Œä¸ªäººçš„å®ç°ï¼Œæœ‰ç‚¹ä¸‘é™‹ï¼š

template&lt;typename InputIt, typename Pred&gt;
auto filter_view(InputIt a, InputIt b, Pred pred) {
    struct {
        InputIt _begin, _end;
        function&lt;bool(decltype(*_begin))&gt; _pred;
        struct iterator {
            InputIt _it, _end;
            function&lt;bool(decltype(*_it))&gt; _pred;
            iterator(InputIt it, InputIt e, decltype(_pred) p):_it(it), _end(e), _pred(p){}
            bool operator != (const iterator&amp; other) {return _it != other._it;}
            bool operator == (const iterator&amp; other) {return _it == other._it;}

            auto operator*() {return *_it;}
            auto operator-&gt;() {return &amp;(*_it);}

            iterator&amp; operator ++ () {
                do {
                    if(_it == _end) break;
                    ++ _it;
                    if(_it == _end || _pred(*_it)) break;
                } while(true);
                return *this;
            }
        };
        
        iterator begin() {
            while(_begin != _end &amp;&amp; !_pred(*_begin))
                ++ _begin;
            return iterator(_begin, _end, _pred);
        }
        iterator end() {
            return iterator(_end, _end, _pred);
        }
    } object;
    object._begin = a;
    object._end = b;
    object._pred = [pred](decltype(*a) x){return pred(x);};
    return object;
}</div>2020-06-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/9b/a8/6a391c66.jpg" width="30px"><span>geraltlaush</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œæˆ‘é—®ä¸‹ï¼Œæ–‡ç« ä¸­è¿”å›ç±»å‹éƒ½æ˜¯å•ç‹¬ä¸€è¡Œï¼Œä»¥å‰æ˜¯ç”µè„‘å±å¹•å¤ªå°å†™ä¸ä¸‹ï¼Œæ‰€ä»¥å¾ˆå¤šè€ä»£ç éƒ½è¿™ä¹ˆå†™ï¼Œç°åœ¨éš¾é“åˆé‡æ–°æµè¡Œè¿™ç§å†™æ³•äº†å—</div>2020-02-11</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/JGPabHDickBjMJwVoJ7ZRGiaT21BibxvCJ9DR9Gvn3G1iazHQPTJQtkWwfFssYfGJsPahEB7sOnXScibkrsr4gx6LeA/132" width="30px"><span>å¾®é£æ¼‚è¿‡</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>istream_line_reader çš„å®ç°åœ¨å“ªé‡Œæ‰¾ï¼Ÿcppreferenceé‡Œé¢æ²¡æœ‰æœåˆ°ã€‚</div>2020-01-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg" width="30px"><span>ä¸‰å‘³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å…³äºè¿™ä¸ªy_combinator, ä»£ç ä¸­æœ‰å¾ˆå¤šæˆ‘ä¸å¤ªç†è§£çš„ï¼š
1. ä¸ºä»€ä¹ˆlambdaå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’çš„æ—¶å€™ï¼Œéƒ½æ˜¯Fun&amp;&amp;ï¼Ÿæˆ‘å®é™…æµ‹è¯•ç›´æ¥ç”¨Funï¼Œå¯¹äºå½“å‰ä»£ç æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç›´æ¥ç”¨Funä¸å¥½ä¹ˆï¼Ÿï¼›
2. å…³äºforwardï¼Œé¢˜ç›®ä¸­æ‰€æœ‰å¸¦æœ‰forwardçš„åœ°æ–¹ï¼Œæˆ‘éƒ½ç›´æ¥æ›¿æ¢ä¸ºä¸å¸¦forwardçš„æ–¹å¼ï¼Œç¼–è¯‘å’Œè¿è¡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚è¿™é‡Œçš„forwardä½œç”¨ç©¶ç«Ÿæ˜¯æ€æ ·çš„ï¼Ÿ</div>2020-01-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/c9/e3/28c16afa.jpg" width="30px"><span>ä¸‰å‘³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ä¸€èŠ‚æ˜¯æˆ‘è€—æ—¶æœ€é•¿çš„ä¸€èŠ‚ã€‚ã€‚å› ä¸ºæ¥å›ç¿»é˜…è¿­ä»£å™¨é‚£ä¸€èŠ‚ã€‚ã€‚
å†™äº†ä¸ªstd::copy(fv.begin(), fv.end(), std::ostream_iterator&lt;int&gt;(std::cout, &quot; &quot;)); ç»“æœç¼–è¯‘å¤±è´¥ã€‚ã€‚æŸ¥äº†åŠå¤©ã€‚ã€‚å› ä¸ºæ²¡å®šä¹‰pointerå’Œreferenceç±»å‹ã€‚ã€‚
è¿˜æœ‰å°±æ˜¯ï¼Œä¹‹å‰çš„ç« èŠ‚çœ‹å¾—ä¸ä»”ç»†ï¼Œçœ‹åˆ«äººç­”æ¡ˆè§‰å¾—å¥½å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆä¸€ä¸Šæ¥è¦++(*this)ã€‚ã€‚åæ¥å¯¹æ¯”è‡ªå·±çš„å®ç°ï¼Œæˆ‘æ˜¯æŒ‰ç…§forward_iterator_tagæ¥å®šä¹‰çš„ï¼Œæ‰€ä»¥å†™æ³•æœ‰äº›ä¸åŒã€‚ä»£ç æ¯”è¾ƒé•¿ã€‚ã€‚æˆ‘è¿˜æ˜¯è´´ä¸€ä¸‹ï¼Œæ”¾åˆ°ç•™è¨€çš„ç•™è¨€ä¸­å§ï¼Œä¸ç„¶å¤ªé•¿äº†ã€‚è‡ªå·±æµ‹è¯•æ²¡å•¥é—®é¢˜ï¼Œä¸è¿‡ä¸ä¿è¯ã€‚ã€‚æ²¡é—®é¢˜ã€‚ã€‚</div>2020-01-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/61/11/85386508.jpg" width="30px"><span>ã˜JRisenã¥ã‚¸</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>#include &lt;iostream&gt;
#include &lt;chrono&gt;
#include &lt;execution&gt;
#include &lt;numeric&gt;
#include &lt;vector&gt; è€å¸ˆæ€ä¹ˆå­¦ä¹ åº“çŸ¥è¯†ï¼Ÿ æç‚¹æ€è·¯</div>2020-01-07</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/6a/c4/8679ca8a.jpg" width="30px"><span>å»–ç†ŠçŒ«</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Y-Combinatorä¸»è¦ç”¨åˆ°äº†ä¸€ä¸ªä¸åŠ¨ç‚¹ç†è®ºï¼Œåˆ˜æœªé¹è€å¸ˆçš„ã€Šåº·æ‰˜å°”ã€å“¥å¾·å°”ã€å›¾çµâ€”â€”æ°¸æ’çš„é‡‘è‰²å¯¹è§’çº¿ã€‹è¿™ç¯‡æ–‡ç« é‡Œé¢è¯´çš„ç›¸å¯¹è¯¦ç»†ä¸€äº›ã€‚ç©è¿‡ä¸€æ®µå‡½æ•°å¼...å°±åªæœ‰haskellé‚£æ®µä»£ç çœ‹æ‡‚äº†ğŸ˜‚</div>2020-01-03</li><br/>
</ul>