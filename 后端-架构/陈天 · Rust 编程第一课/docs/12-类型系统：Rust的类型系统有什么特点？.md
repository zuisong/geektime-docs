ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚ä»Šå¤©æˆ‘ä»¬å°±å¼€å§‹ç±»å‹ç³»ç»Ÿçš„å­¦ä¹ ã€‚

å¦‚æœä½ ç”¨ C/Golang è¿™æ ·ä¸æ”¯æŒæ³›å‹çš„é™æ€è¯­è¨€ï¼Œæˆ–è€…ç”¨ Python/Ruby/JavaScript è¿™æ ·çš„åŠ¨æ€è¯­è¨€ï¼Œè¿™ä¸ªéƒ¨åˆ†å¯èƒ½æ˜¯ä¸ªéš¾ç‚¹ï¼Œå¸Œæœ›ä½ åšå¥½è¦è½¬æ¢æ€ç»´çš„å‡†å¤‡ï¼›å¦‚æœä½ ç”¨ C++/Java/Swift ç­‰æ”¯æŒæ³›å‹çš„é™æ€è¯­è¨€ï¼Œå¯ä»¥æ¯”è¾ƒä¸€ä¸‹ Rust å’Œå®ƒä»¬çš„å¼‚åŒã€‚

å…¶å®åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å†™äº†ä¸å°‘ Rust ä»£ç ï¼Œä½¿ç”¨äº†å„ç§å„æ ·çš„æ•°æ®ç»“æ„ï¼Œç›¸ä¿¡ä½ å¯¹ Rust çš„ç±»å‹ç³»ç»Ÿå·²ç»æœ‰äº†ä¸€ä¸ªéå¸¸ç²—æµ…çš„å°è±¡ã€‚é‚£ç±»å‹ç³»ç»Ÿåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿèƒ½ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å‘¢ï¼Ÿä»Šå¤©å°±æ¥ä¸€æ¢ç©¶ç«Ÿã€‚

ä½œä¸ºä¸€é—¨è¯­è¨€çš„æ ¸å¿ƒè¦ç´ ï¼Œç±»å‹ç³»ç»Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šå¡‘é€ äº†è¯­è¨€çš„ç”¨æˆ·ä½“éªŒä»¥åŠç¨‹åºçš„å®‰å…¨æ€§ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿå› ä¸ºï¼Œåœ¨æœºå™¨ç çš„ä¸–ç•Œä¸­ï¼Œæ²¡æœ‰ç±»å‹è€Œè¨€ï¼ŒæŒ‡ä»¤ä»…ä»…å’Œç«‹å³æ•°æˆ–è€…å†…å­˜æ‰“äº¤é“ï¼Œå†…å­˜ä¸­å­˜æ”¾çš„æ•°æ®éƒ½æ˜¯å­—èŠ‚æµã€‚

æ‰€ä»¥ï¼Œå¯ä»¥è¯´**ç±»å‹ç³»ç»Ÿå®Œå…¨æ˜¯ä¸€ç§å·¥å…·**ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å¯¹æ•°æ®åšé™æ€æ£€æŸ¥ï¼Œæˆ–è€…è¯­è¨€åœ¨è¿è¡Œæ—¶å¯¹æ•°æ®åšåŠ¨æ€æ£€æŸ¥çš„æ—¶å€™ï¼Œæ¥ä¿è¯æŸä¸ªæ“ä½œå¤„ç†çš„æ•°æ®æ˜¯å¼€å‘è€…æœŸæœ›çš„æ•°æ®ç±»å‹ã€‚

ç°åœ¨ä½ æ˜¯ä¸æ˜¯èƒ½ç†è§£ï¼Œä¸ºä»€ä¹ˆRustç±»å‹ç³»ç»Ÿå¯¹ç±»å‹é—®é¢˜çš„æ£€æŸ¥æ ¼å¤–ä¸¥æ ¼ï¼ˆæ€»æ˜¯æŠ¥é”™ï¼‰ã€‚

## ç±»å‹ç³»ç»ŸåŸºæœ¬æ¦‚å¿µä¸åˆ†ç±»

åœ¨å…·ä½“è®² Rust çš„ç±»å‹ç³»ç»Ÿä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ¾„æ¸…ä¸€äº›ç±»å‹ç³»ç»Ÿçš„æ¦‚å¿µï¼Œåœ¨åŸºæœ¬ç†è§£ä¸Šè¾¾æˆä¸€è‡´ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ30ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/12/54/c6/c2481790.jpg" width="30px"><span>lisiur</span> ğŸ‘ï¼ˆ90ï¼‰ ğŸ’¬ï¼ˆ20ï¼‰<div>æ€è€ƒé¢˜ä»£ç æŠ¥é”™çš„ä¸»è¦åŸå› æ˜¯ï¼Œå®ç° new æ–¹æ³•æ—¶ï¼Œå¯¹æ³›å‹çš„çº¦æŸè¦æ±‚è¦æ»¡è¶³ W: Writeï¼Œè€Œ new çš„å£°æ˜è¿”å›å€¼æ˜¯ Selfï¼Œä¹Ÿå°±æ˜¯è¯´ self.wirter å¿…é¡»æ˜¯ W: Write ç±»å‹(æ³›å‹)ï¼Œä½†å®é™…è¿”å›å€¼æ˜¯ä¸€ä¸ªç¡®å®šçš„ç±»å‹ BufWriter&lt;TcpStream&gt;ï¼Œè¿™ä¸æ»¡è¶³è¦æ±‚ã€‚

ä¿®æ”¹æ–¹æ³•æœ‰è¿™ä¹ˆå‡ ä¸ªæ€è·¯

1. ä¿®æ”¹ new æ–¹æ³•çš„è¿”å›å€¼

```rust
impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(addr: &amp;str) -&gt; MyWriter&lt;BufWriter&lt;TcpStream&gt;&gt; {
        let stream = TcpStream::connect(addr).unwrap();
        MyWriter {
            writer: BufWriter::new(stream),
        }
    }
}

fn main() {
    let mut writer = MyWriter::&lt;BufWriter&lt;TcpStream&gt;&gt;::new(&quot;127.0.0.1:8080&quot;);
    writer.write(&quot;hello world!&quot;);
}
```

2. å¯¹ç¡®å®šçš„ç±»å‹ MyWriter&lt;BufWriter&lt;TcpStream&gt;&gt;å®ç° new æ–¹æ³•ï¼š

```rust
impl MyWriter&lt;BufWriter&lt;TcpStream&gt;&gt; {
    pub fn new(addr: &amp;str) -&gt; Self {
        let stream = TcpStream::connect(addr).unwrap();
        Self {
            writer: BufWriter::new(stream),
        }
    }
}

fn main() {
    let mut writer = MyWriter::new(&quot;127.0.0.1:8080&quot;);
    writer.write(&quot;hello world!&quot;);
}
```

3. ä¿®æ”¹ new æ–¹æ³•çš„å®ç°ï¼Œä½¿ç”¨ä¾èµ–æ³¨å…¥

```rust
impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(writer: W) -&gt; Self {
        Self {
            writer,
        }
    }
}

fn main() {
    let stream = TcpStream::connect(&quot;127.0.0.1:8080&quot;).unwrap();
    let mut writer = MyWriter::new(BufWriter::new(stream));
    writer.write(&quot;hello world!&quot;);
}
```

PSï¼šç¬¬2ç§è§£æ³•è¿˜å¯ä»¥å¯¹ä¸åŒå…·ä½“ç±»å‹å®ç°å¤šä¸ªnewæ–¹æ³•ï¼š

```rust
impl MyWriter&lt;BufWriter&lt;TcpStream&gt;&gt; {
    pub fn new(addr: &amp;str) -&gt; Self {
        let stream = TcpStream::connect(addr).unwrap();
        Self {
            writer: BufWriter::new(stream),
        }
    }
}

impl MyWriter&lt;File&gt; {
    pub fn new(addr: &amp;str) -&gt; Self {
        let file = File::open(addr).unwrap();
        Self { writer: file }
    }
}

fn main() {
    let mut writer = MyWriter::&lt;BufWriter&lt;TcpStream&gt;&gt;::new(&quot;127.0.0.1:8080&quot;);
    writer.write(&quot;hello world!&quot;);

    let mut writer = MyWriter::&lt;File&gt;::new(&quot;&#47;etc&#47;hosts&quot;);
    writer.write(&quot;127.0.0.1 localhost&quot;);
}
```</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg" width="30px"><span>æ ¸æ¡ƒ</span> ğŸ‘ï¼ˆ22ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>è€å¸ˆä½ å¥½ï¼Œè¿™é‡Œé‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯æƒ³å®ç°ä¸€ä¸ªç±»ä¼¼äºŒç»´åŠ¨æ€æ•°ç»„çš„ï¼Œç„¶åæ•°ç»„é‡Œé¢çš„å…ƒç´ æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å¦å¤–ä¸€ä¸ªéšæœºæ•°ç»„ï¼Œå› ä¸ºè¿™é‡Œæ˜¯åŒäº‹å¼ºåˆ¶è¦æ±‚çš„ï¼Œåé¢è°ƒç”¨äº†ä¸€ä¸ªå°è£…ç¬¬ä¸‰æ–¹çš„Cåº“æ¥å£ï¼Œå› æ­¤è¿™é‡Œæˆ‘çš„ä»£ç å®ç°æ€è·¯å¦‚ä¸‹æ‰€ç¤º:


ä»£ç :

let mut data :Vec&lt;* const u8&gt; = Vec::new();

for i in 0..5{
    let mut num: Vec&lt;u8&gt;= Vec::new();
    for i in 0..16 {
        unsafe{
            let rand_num :u8 = rand::thread_rng().gen();
            num.push(rand_num)
        }
    }
    println!(&quot;num is : {:?},num.as_ptr(): {:?}&quot;,num,num.as_ptr());
    data.push(num.as_ptr());
}

println!(&quot;data is: {:?}&quot;,data);


ç»“æœ:
num is : [248, 69, 170, 238, 134, 89, 77, 32, 116, 106, 68, 213, 113, 19, 213, 231],num.as_ptr(): 0x7ff6ec000bc0
num is : [138, 101, 105, 192, 81, 32, 133, 80, 94, 6, 205, 164, 178, 95, 60, 45],num.as_ptr(): 0x7ff6ec000bc0
num is : [204, 173, 46, 246, 72, 25, 171, 186, 167, 175, 154, 4, 219, 78, 78, 227],num.as_ptr(): 0x7ff6ec000bc0
num is : [252, 123, 170, 107, 232, 186, 203, 91, 130, 11, 92, 48, 39, 36, 10, 193],num.as_ptr(): 0x7ff6ec000bc0
num is : [143, 52, 155, 135, 50, 50, 133, 105, 143, 62, 120, 125, 88, 58, 99, 19],num.as_ptr(): 0x7ff6ec000bc0
data is: [0x7ff6ec000bc0, 0x7ff6ec000bc0, 0x7ff6ec000bc0, 0x7ff6ec000bc0, 0x7ff6ec000bc0]

æä¸æ˜ç™½çš„æ˜¯ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆnewäº†ä¹‹åï¼Œè¿˜æ˜¯ä¼šå¯¼è‡´åœ°å€ä¸å˜ï¼Œæœ‰æ²¡æœ‰åŠæ³•å¼ºåˆ¶è®©å˜é‡numæ¯æ¬¡newä¹‹åå°±æ˜¯ä¼šæ”¹å˜çš„ï¼Ÿå¤šè°¢äº†</div>2021-09-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/4c/2d/a0d6a610.jpg" width="30px"><span>è’é‡æ—å…‹</span> ğŸ‘ï¼ˆ11ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼š
```impl&lt;W: Write&gt; MyWriter&lt;W&gt;``` 
é‡Œï¼Œimpl åé¢ä»¥åŠæŒ‡æ˜çº¦æŸï¼Œä¸ºä»€ä¹ˆ MyWriter åé¢è¿˜è¦å•ç‹¬å†™ä¸€æ¬¡å‘¢ï¼Ÿ</div>2021-09-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/14/26/27/eba94899.jpg" width="30px"><span>ç½—æ°</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è¿½è€å¸ˆçš„æ›´æ–°æ¯”è¿½å‰§æœ‰è¶£å¤šäº†ï¼Œé…åˆå¼ è€å¸ˆçš„è§†é¢‘è¯¾ï¼Œè¿˜æœ‰é™ˆè€å¸ˆ B ç«™çš„ Rust åŸ¹è®­è§†é¢‘ï¼ŒçœŸçš„å¾ˆèˆ’æœã€‚</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/22/f4/9fd6f8f0.jpg" width="30px"><span>æ ¸æ¡ƒ</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>fn main() {
    let numbers = vec![1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    let even_numbers = numbers
        .into_iter()
        .filter(|n| n % 2 == 0)
        .collect();
    println!(&quot;{:?}&quot;, even_numbers);
}


è¯·æ•™ä¸€ä¸‹è¿™æ®µä»£ç ä¸ºä»€ä¹ˆå°±æ— æ³•æ¨å¯¼ç±»å‹å‘¢ï¼Ÿå¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œåº”è¯¥æ˜¯çŸ¥é“numberæ˜¯vecçš„å‘€ã€‚ä¸å¤ªæ‡‚ï¼Œè¿™é‡Œå¯èƒ½æ˜¯æˆ‘å¯¹ç¼–è¯‘åŸç†ç†è§£ä¸å¤Ÿæ‰å®ã€‚</div>2021-11-17</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/f7/1b/db7a0edc.jpg" width="30px"><span>Marvichov</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>Wä¼šè¢«resolveæˆä¸€ä¸ªå®é™…ç±»å‹, ä¹Ÿå°±æ˜¯`BufferWriter::new(stream)`çš„ç±»å‹. è€Œrustè¦æ±‚Wæ˜¯ä¸€ä¸ªæ³›å‹. æˆ‘çš„ä¸‹é¢çš„æ”¹åŠ¨æœ‰ç‚¹å¤š...

æœ‰ä¸€ç‚¹æˆ‘å°±æœ‰ç‚¹ä¸æ˜ç™½äº†, å£°æ˜çš„æ—¶å€™éƒ½è¯´äº†W: Write, ä¸ºå•¥implçš„æ—¶å€™è¿˜è¦è¯´ä¸€éå‘¢ (ä¸è¯´ä¸è®©ç¼–è¯‘)? 

```
use std::io::{BufWriter, Write};
use std::net::TcpStream;

#[derive(Debug)]
struct MyWriter&lt;W&gt;
where
    W: Write,
{
    writer: BufWriter&lt;W&gt;,
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(stream: W) -&gt; Self {
        Self {
            writer: BufWriter::new(stream),
        }
    }

    pub fn write(&amp;mut self, buf: &amp;str) -&gt; std::io::Result&lt;()&gt; {
        self.writer.write_all(buf.as_bytes())
    }
}

fn main() {
    let addr = &quot;127.0.0.1:8080&quot;;
    let stream = TcpStream::connect(addr).unwrap();
    let mut writer = MyWriter::new(stream);
    writer.write(&quot;hello world!&quot;).unwrap();
}
```</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ç¡®å®šæœ€åçš„ä»£ç é‡Œä¸ºä»€ä¹ˆè¦ç”¨æ³›å‹ï¼Œæ”¹äº†å‡ ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼š

https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=f21447a10eac4e3b77d39aefbd93ab6b

https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=2d8037d4059efe15c3d15cfa2267bb70

https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=c57f2abe9756bf021241c63e1b944af8</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/28/3d/be/98bebd57.jpg" width="30px"><span>c4f</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸èƒ½ç¼–è¯‘æ˜¯å› ä¸ºç¬¬ 14 è¡Œ writer æœŸå¾…çš„å€¼çš„ç±»å‹ä¹Ÿæ˜¯ Wï¼Œä½†æ”¶åˆ°çš„å´æ˜¯ BufWriter&lt;TcpStream&gt; å› æ­¤ä¸åŒ¹é…ã€‚
å‚è€ƒ MyReader è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•ä¿®æ”¹äº† MyWriter å¯¹å¤–æä¾›çš„æ¥å£ï¼ˆnewï¼‰ï¼Œåº”è¯¥è¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œä¸è¿‡æ²¡æ‰¾å‡ºæ¥ hh

```

use std::io::{BufWriter, Write};
use std::net::TcpStream;

#[derive(Debug)]
struct MyWriter&lt;W&gt; {
    writer: W,
}

impl&lt;W&gt; MyWriter&lt;W&gt; {
    pub fn new(writer: W) -&gt; Self {
        Self {
            writer
        }
    }
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn write(&amp;mut self, buf: &amp;str) -&gt; std::io::Result&lt;()&gt; {
        self.writer.write_all(buf.as_bytes())
    }
}

fn main() {
    let mut writer = MyWriter::new(
        BufWriter::new(TcpStream::connect(&quot;127.0.0.1:8080&quot;).unwrap())
    );
    writer.write(&quot;hello world!&quot;).unwrap();
}
```

å¦å¤–è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æƒ³è¯·æ•™è€å¸ˆï¼šé€šè¿‡åœ¨å†’å·åé¢å¯¹èŒƒå‹è¿›è¡Œé™åˆ¶å’Œä½¿ç”¨ where å¯¹èŒƒå‹è¿›è¡Œé™åˆ¶æ˜¯å¦æ˜¯ç­‰ä»·çš„ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­

```
impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    ...
}

impl&lt;W&gt; MyWriter&lt;W&gt;
where
    W: Write
{
    ...
}
```
</div>2021-09-20</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/OEZQyDeZd2oCPZiak19FKQOZI4I21WjLlwUgJzVFxyXsVKbIlpEEEYZcHbA4lYVzFbd3CtmDfZuUictW3ujvKnUQ/132" width="30px"><span>éšé£wli</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œå› ä¸ºå•æ€åŒ–ï¼Œä»£ç ä»¥äºŒè¿›åˆ¶åˆ†å‘ä¼šæŸå¤±æ³›å‹çš„ä¿¡æ¯ï¼Œè¿™é‡Œä»¥äºŒè¿›åˆ¶åˆ†å‘æ˜¯æŒ‡åº“ä»£ç ç¼–è¯‘æˆäº†ç±»ä¼¼å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶årustç›´æ¥è°ƒç”¨å—</div>2021-12-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/16/e4/aa/811ff4d7.jpg" width="30px"><span>Geek_2b06a7</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ–‡ä¸­è¯´ Rust æ˜¯æ˜¾å¼é™æ€ç±»å‹ï¼Œæ”¯æŒä½œç”¨åŸŸå†…çš„ç±»å‹æ¨å¯¼ï¼Œè€Œ ML å’Œ Haskell æ˜¯éšå¼ç±»å‹ã€‚
è¿™å…¶ä¸­çš„å·®å¼‚æç°åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿæˆ‘æ²¡æœ‰æ˜ç™½ä»–ä»¬ç±»å‹ç³»ç»Ÿçš„å·®å¼‚ã€‚</div>2021-12-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/35/d0/f2ac6d91.jpg" width="30px"><span>é˜¿æˆ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>è€å¸ˆä½ åœ¨å¯¹â€œæ ¸æ¡ƒâ€çš„è§£ç­”ä¸­è¯´ï¼š
â€œas_ptr() æ‹¿åˆ°çš„æ˜¯æ ˆä¸Šçš„æŒ‡é’ˆï¼Œä½ åº”è¯¥éœ€è¦å †ä¸ŠæŒ‡å‘å®é™…å†…å®¹çš„æŒ‡é’ˆã€‚æ‰€ä»¥åº”è¯¥ç”¨ Vec::into_boxed_slice(), ç„¶åå†ç”¨ Box::into_raw æ‹¿åˆ°è£¸æŒ‡é’ˆã€‚â€
1. æ²¡çœ‹æ˜ç™½å•Šï¼Œas_ptr() æ€ä¹ˆå°±æ˜¯æ ˆä¸Šçš„æŒ‡é’ˆäº†ï¼Ÿçœ‹ä¸‹é¢çš„ä»£ç ï¼Œæ‰“å°å‡ºæ¥æ˜æ˜éƒ½æ˜¯åŒä¸€ä¸ªåœ°å€å•Š...
https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=5b74ccf59b05b507d588e5e0297f9448
é‚£ä½ æ‰€è¯´çš„5ä¸ªåœ°å€ç›¸åŒçš„åŸå› å°±ä¸æˆç«‹äº†ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å„¿å‘¢ï¼Ÿ

æˆ‘å‘ç°åœ¨ä½ çš„ä»£ç ä¸­çœŸæ­£èµ·ä½œç”¨çš„æ˜¯ `Box::into_raw(boxed)` è¿™ä¸ªè¡¨è¾¾å¼â€¦â€¦

2. è¿˜æœ‰ Vec&lt;*const u8&gt; å¯ä»¥ç†è§£ä¸ºæŒ‡å‘æ•°ç»„çš„é¦–å…ƒç´ å•Šâ€¦â€¦ä¸ºå•¥ä¸è¡Œå‘¢â€¦â€¦</div>2021-11-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/bc/2c/963688bb.jpg" width="30px"><span>noisyes</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>ä»£ç ä¸ä»¥äºŒè¿›åˆ¶åˆ†å‘å°±æ²¡é—®é¢˜å§</div>2021-09-23</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/f3/61/8f7fca5b.jpg" width="30px"><span>å²åŒé¾™</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æœ‰ç‚¹è¦è·Ÿä¸ä¸ŠèŠ‚å¥äº†ï¼Œæ”¹äº†åŠå¤©ï¼Œè·Ÿæ¦œä¸€å¤§ä½¬å·®ä¸å¤šã€‚
use std::io::{BufWriter, Write};
use std::net::TcpStream;

#[derive(Debug)]
struct MyWriter&lt;W&gt; {
    writer: W,
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(addr: &amp;str) -&gt; MyWriter&lt;BufWriter&lt;TcpStream&gt;&gt; {
        let stream = TcpStream::connect(addr).unwrap();
        MyWriter {
            writer: BufWriter::new(stream),
        }
    }

    pub fn write(&amp;mut self, buf: &amp;str) -&gt; std::io::Result&lt;()&gt; {
        self.writer.write_all(buf.as_bytes())
    }
}

fn main() {
    let mut writer = MyWriter::&lt;BufWriter&lt;TcpStream&gt;&gt;::new(&quot;127.0.0.1:8080&quot;);
    writer.write(&quot;hello world!&quot;).unwrap();
}</div>2021-09-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg" width="30px"><span>è®°äº‹æœ¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>æ”¹è¿›äº†çœ‹ç¬¦ä¸ç¬¦åˆè¦æ±‚ï¼Œè®°äº‹æœ¬å†™çš„
use std::io::{BufWriter,Write};
use std::net::TcpStream;

#[derive(Debug)]
struct MyWriter&lt;W:Write&gt;{
    writer:BufWriter&lt;W&gt;
}

impl &lt;W:Write&gt;  MyWriter&lt;W&gt; {
    pub fn new(stram:W) -&gt;Self {
        Self { 
            writer: BufWriter::new(stram)
        }
    }

    pub fn write(&amp;mut self,s:&amp;str) -&gt;std::io::Result&lt;()&gt; {
        self.writer.write_all(s.as_bytes())   
    }
}
fn main() {

    let addr = &quot;127.0.0.1:8001&quot;;
    let stream = TcpStream::connect(addr).unwrap();
    let mut s =  MyWriter::new(stream);
    s.write(&quot;hello world&quot;);

}
</div>2021-09-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/63/b2/9223bc53.jpg" width="30px"><span>Fenix</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æƒ³é—®ä¸‹ï¼Œçœ‹åˆ°å„ç§æ–‡ç« éƒ½è¯´pythonæ˜¯å¼ºç±»å‹çš„è¯­è¨€å‘€</div>2021-09-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä¸ºä»€ä¹ˆä¸­é—´çš„å›¾ä¸Šå†™ç€Haskell&#47;MLä¸èƒ½è‡ªåŠ¨æ¨å¯¼...ç±»å‹æ¨å¯¼å¯æ˜¯MLç³»è¯­è¨€çš„æ ‡é…</div>2021-09-20</li><br/><li><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83equY82MMjfvGtzlo8fhT9fdKO5LjWoy0P8pfCmiaFJS0v8Z4ibzrmwHjib9CnmgMiaYMhPyja7qS6KqiaQ/132" width="30px"><span>Geek_004fb2</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>BufWriterçš„æºç æœ‰ impl&lt;W: Write&gt; Write for BufWriter&lt;W&gt; ,è€ŒTcpStreamæºç  impl Write for TcpStream  ä¹Ÿå®ç°äº† Write,é‚£ä¹ˆ ä¹Ÿå°±æ˜¯è¯´BufWriter&lt;TcpStream&gt; ä¹Ÿå®ç°äº†Write,æ‰€ä»¥è¿™é‡Œä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆBufWriter&lt;TcpStream&gt;ä¸ç¬¦åˆæœ¬ä¾‹ä¸­ W: Writeçš„é™å®š?è¯·è€å¸ˆè¯¦è§£ä¸€ä¸‹</div>2022-11-14</li><br/><li><img src="" width="30px"><span>Geek_8397eb</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>pub struct GasSceneObj
{
    m_id: PythonObjID,
    m_cfg: SceneCfg,
    m_dictFightObj: HashMap&lt;PythonObjID, GasFightObj&gt;,
    m_dictFightObjAoiProperty: HashMap&lt;PythonObjID, GasFightObjAoiPropery&gt;,
    m_nLatestUpdate: i64,
    m_aoiState: AoiAlg,
}
è¯·æ•™ä¸€ä¸‹è€å¸ˆï¼Œåœ¨åŒä¸€ä¸ªç¼–è¯‘ç¯å¢ƒï¼ŒåŒä¸€ä»½ä»£ç ï¼Œç¼–è¯‘å‡ºæ¥çš„ä¸¤ä¸ªåŠ¨æ€åº“çš„è¿™ä¸ªstructå†…å­˜å¸ƒå±€æ˜¯ä¸€è‡´çš„ä¹ˆï¼Ÿ</div>2025-02-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3a/16/08/4f7144e5.jpg" width="30px"><span>ç’ç’two*^_^*</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æˆ‘ä»¬ æ²¡æœ‰ TS çš„èº«å½±</div>2024-10-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/b7/6b/b813362b.jpg" width="30px"><span>é™ˆæº¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ€è€ƒé¢˜ä½¿ç”¨dynamic objectçš„å‡ ä¸ªå¯ç¼–è¯‘çš„ç‰ˆæœ¬ï¼š
# https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=278e3bb623010d6e5e1546fef5c5e0e6
# https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=c57f2abe9756bf021241c63e1b944af8
# https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=34d98af4dc703ff0f25b4490742a881f
# https:&#47;&#47;play.rust-lang.org&#47;?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=f21447a10eac4e3b77d39aefbd93ab6b</div>2024-09-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/de/f5/a9054651.jpg" width="30px"><span>ADkun</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>é—®é¢˜è§£å†³ï¼š
```rust
use std::io::Write;
use std::net::TcpStream;

#[derive(Debug)]
struct MyWriter&lt;W: Write&gt; {
    writer: W,
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(writer: W) -&gt; Self {
        Self { writer }
    }

    pub fn write(&amp;mut self, buf: &amp;str) -&gt; std::io::Result&lt;()&gt; {
        self.writer.write_all(buf.as_bytes())
    }
}

fn main() {
    let stream = TcpStream::connect(&quot;127.0.0.1:8080&quot;).unwrap();
    let mut writer = MyWriter::new(stream);
    writer.write(&quot;hello world!&quot;);
}
```</div>2024-08-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/1f/3c/70d30681.jpg" width="30px"><span>EEEEEEEarly</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>fn id(x: T) -&gt; T { return x;}
 æ³›å‹ä¸æ˜¯è¦æŒ‡å®šç±»å‹å—ï¼Œæ²¡æœ‰ç±»å‹ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“ç±»å‹å¤§å°ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œå¯ä»¥ç¼–è¯‘é€šè¿‡å‘¢</div>2023-08-22</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/ff/d8/d48d6088.jpg" width="30px"><span>ä¸€ä¸ªäººæ—…è¡Œ</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æŸ¥çœ‹æºç ï¼ŒCellå’ŒRefCellå¹¶æ²¡æœ‰å®ç°Deref traitï¼Œé‚£æ€ä¹ˆè¢«ç§°ä¸ºåªèƒ½æŒ‡é’ˆå‘¢ï¼Ÿ</div>2023-08-07</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM6Vj0BdiciajkSaFO0liaOCOgZC80WdkR3NvDMuaPBxfC0QPj3jHticgptVeenug06NjwY9qZW7KaG4eA/132" width="30px"><span>Geek_0d9ed6</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Cè¯­è¨€ä¸­ï¼Œvoid *æŒ‡é’ˆå°±æ˜¯æœ€å¼ºå¤§çš„æ³›å‹ï¼ˆæ‰‹åŠ¨ç‹—å¤´ï¼‰</div>2023-07-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/37/a8/66/1a55d1d8.jpg" width="30px"><span>MindfulCoder</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ€è€ƒé¢˜ï¼š

use std::io::{BufWriter, Write};
use std::net::TcpStream;

#[derive(Debug)]
struct MyWriter&lt;W&gt; {
    writer: W,
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(writer: W) -&gt; Self {
        Self {
            writer
        }
    }

    pub fn write(&amp;mut self, buf: &amp;str) -&gt; std::io::Result&lt;()&gt; {
        self.writer.write_all(buf.as_bytes())
    }
}

fn main() -&gt; std::io::Result&lt;()&gt; {
    let stream = TcpStream::connect(&quot;127.0.0.1:8080&quot;).unwrap();
    let mut writer= MyWriter::new(BufWriter::new(stream));
    writer.write(&quot;hello world!&quot;)
}</div>2023-06-15</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eojp8oEsjiaDGQtTOZfLDf4m2R2SeibjgMHW9UHvKj0BaCtIGlu7ubbT41Hz1hXFhyib6o25p6LCWtNw/132" width="30px"><span>Geek_4dee8e</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>impl&lt;W:Write&gt; æ˜¯é™å®šäº† MyWriter.writerçš„ç±»å‹å¿…é¡»æ˜¯Writeç±»å‹çš„å€¼ï¼Œè€Œä»£ç ä¸­writeræ‰€å¾—åˆ°çš„å€¼æ—¶BufWriter&lt;TcpStream&gt;ç±»å‹çš„å€¼ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</div>2023-02-21</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/M8pharAAQmYuic3ibnLWF8sl7H0jpoVJB1Rvyoib7YRGsBdFxcaOMSOrsYDA1iaaauK5CBfoF04X0xDvu7shE0GL5w/132" width="30px"><span>Geek_0aaa22</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>struct MyWriter&lt;W&gt; {
    writer: W,
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn new(writer: W) -&gt; Self {
        Self { writer }
    }
}

impl MyWriter&lt;BufWriter&lt;TcpStream&gt;&gt; {
    pub fn new_from_addr(addr: &amp;str) -&gt; Self{
        let stream = TcpStream::connect(addr).unwrap();
        Self {
            writer: BufWriter::new(stream),
        }
    }
}

impl&lt;W: Write&gt; MyWriter&lt;W&gt; {
    pub fn write(&amp;mut self, buf: &amp;str) -&gt; Result&lt;()&gt; {
        self.writer.write_all(buf.as_bytes())?;
        Ok(())
    }
}</div>2022-12-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/29/ea/2e/814b2d61.jpg" width="30px"><span>Freedom</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>fn te&lt;T:Copy&gt;(t: T) -&gt; T {
    return 2;
}

fn main() {

    let b = te::&lt;&amp;str&gt;(&quot;hello&quot;);
}

ç±»ä¼¼äºè¿™ç§æƒ…å†µï¼Œåº”è¯¥è¿˜æ˜¯å•æ€åŒ–çš„é—®é¢˜</div>2022-07-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/bd/a9/688b9bc6.jpg" width="30px"><span>è…ç”°</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ€è€ƒé¢˜ä»£ç æŠ¥é”™ï¼Œä¸ºä»€ä¹ˆå®é™…è¿”å›å€¼ç±»å‹ BufferWrite&lt;TcpStream&gt; ä¸ä¼šè¢«è‡ªåŠ¨æ¨å¯¼æˆæ³›å‹ W: Write å‘¢ï¼Ÿ</div>2022-04-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2c/56/19/d2c65c01.jpg" width="30px"><span>æ˜Ÿæµ·</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>Result&lt;_,Error&gt;å’ŒResult&lt;(),Error&gt;ç­‰ä»·å—ï¼Ÿ</div>2022-03-13</li><br/>
</ul>