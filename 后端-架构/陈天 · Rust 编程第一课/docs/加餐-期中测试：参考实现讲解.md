ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆå¤©ã€‚

ä¸Šä¸€è®²ç»™ä½ å¸ƒç½®äº†ä¸€ä»½ç®€å•çš„æœŸä¸­è€ƒè¯•ä¹ é¢˜ï¼Œä¸çŸ¥é“ä½ å®Œæˆçš„æ€ä¹ˆæ ·ã€‚ä»Šå¤©æˆ‘ä»¬æ¥ç®€å•è®²ä¸€è®²å®ç°ï¼Œä¾›ä½ å‚è€ƒã€‚

æ”¯æŒ grep å¹¶ä¸æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹æƒ…ï¼Œç›¸ä¿¡ä½ åœ¨ä½¿ç”¨äº† clapã€globã€rayon å’Œ regex åï¼Œéƒ½èƒ½å†™å‡ºç±»ä¼¼çš„ä»£ç ï¼ˆä¼ªä»£ç ï¼‰ï¼š

```rust
/// Yet another simplified grep built with Rust.
#[derive(Clap, Debug)]
#[clap(version = "1.0", author = "Tyr Chen <tyr@chen.com>")]
#[clap(setting = AppSettings::ColoredHelp)]
pub struct GrepConfig {
    /// regex pattern to match against file contents
    pattern: String,
    /// Glob of file pattern
    glob: String,
}

impl GrepConfig {
    pub fn matches(&self) -> Result<()> {
        let regex = Regex::new(&self.pattern)?;
        let files: Vec<_> = glob::glob(&self.glob)?.collect();
        files.into_par_iter().for_each(|v| {
            if let Ok(filename) = v {
                if let Ok(file) = File::open(&filename) {
                    let reader = BufReader::new(file);
                    |-	for (lineno, line) in reader.lines().enumerate() {
                    |       if let Ok(line) = line {
                    |           if let Some(_) = pattern.find(&line) {
                    |               println!("{}: {}", lineno + 1, &line);
                    |           }
                    |       }
                    |-  }
                }
            }
        });
        Ok(())
    }
}
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ10ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/15/e1/e9/29b62c57.jpg" width="30px"><span>Bitstream</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆæœ‰æ²¡æœ‰é‡åˆ°rust-analyzerä¸‹ï¼Œ`use thiserror::`æ— æ³•æç¤ºè¡¥å…¨çš„æƒ…å†µï¼Ÿ</div>2021-11-27</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/20/12/e4/57ade29a.jpg" width="30px"><span>dva</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™å‡ ç¯‡æ–‡ç« çœ‹ä¸‹æ¥ï¼Œç»“æ„è®¾è®¡ç›¸å…³çŸ¥è¯†ä¹Ÿæ”¶è·è‰¯å¤šï¼Œæ„Ÿè°¢è€å¸ˆ</div>2021-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/7d/4d/d98865b2.jpg" width="30px"><span>è€å®äººHoney</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>https:&#47;&#47;github.com&#47;clap-rs&#47;clap&#47;issues&#47;2917
clap v3.0.0-beta.4 break changeäº†ï¼Œè¦è°ƒæ•´ä¸€ä¸‹</div>2021-11-08</li><br/><li><img src="" width="30px"><span>linuxfish</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>writer.write(path.display().to_string().green().as_bytes())?;

è¿™ä¸€è¡Œçš„è®¾ç½®é¢œè‰²è²Œä¼¼æ²¡æœ‰èµ·ä½œç”¨ï¼Œæ¢äº†å…¶å®ƒé¢œè‰²ä¹Ÿæ˜¯æ²¡æ•ˆæœ</div>2021-11-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/8d/8c/8e3d356c.jpg" width="30px"><span>é‡å±±é—¨</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>çœ‹å®Œäº†é™„å¸¦çš„è§†é¢‘ï¼Œå¯¹æ•°æ®ç±»å‹çš„å†…å­˜ç»“æ„æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ã€‚æ„Ÿè°¢ï¼</div>2021-10-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg" width="30px"><span>è®°äº‹æœ¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>è€å¸ˆ,å¿…é¡»æ”¹æˆè¿™æ ·æ‰å¯ä»¥æ¢è¡Œç”Ÿæ•ˆå•Š         writer.write(b&quot;\n&quot;)?;
</div>2021-10-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/15/62/e0/d2ff52da.jpg" width="30px"><span>è®°äº‹æœ¬</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ7ï¼‰<div>use std::io::self  selfåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ä»€ä¹ˆå•Š</div>2021-10-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/4c/83/7788fc66.jpg" width="30px"><span>Simon</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆ, æ–‡ä»¶è·¯å¾„çš„é¢œè‰²ä¸èƒ½æ­£å¸¸æ˜¾ç¤º
æˆ‘ä¿®å¤äº†ä¸€ä¸‹, è§PR
https:&#47;&#47;github.com&#47;tyrchen&#47;geektime-rust&#47;pull&#47;10</div>2022-04-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/72/c1/59509397.jpg" width="30px"><span>æ²ˆç•…</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è¿™ä¸ªé¢˜å®Œå…¨ä¸ä¼šåšï¼Œè¿˜å¾—å­¦å„ç§åº“å•Š</div>2022-08-12</li><br/><li><img src="" width="30px"><span>woJA1wCgAA14JCXna23FAiisVJJCYYyA</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>`stdout` è¾“å‡ºè¿™é‡Œä¼šä¸ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™ `io` ï¼Œå¯¼è‡´ `path` å’Œ `matches` äº¤é”™è¾“å‡ºçš„æƒ…å†µå‘€</div>2022-03-26</li><br/>
</ul>