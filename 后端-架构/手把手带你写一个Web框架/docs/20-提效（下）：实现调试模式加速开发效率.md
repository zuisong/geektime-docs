ä½ å¥½ï¼Œæˆ‘æ˜¯è½©è„‰åˆƒã€‚

ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®¨è®ºäº†è°ƒè¯•æ¨¡å¼çš„æ•´ä½“è®¾è®¡æ€è·¯å’Œå…³é”®çš„æŠ€æœ¯éš¾ç‚¹-åå‘ä»£ç†ï¼Œæœ€åå®šä¹‰äº†å…·ä½“çš„å‘½ä»¤è®¾è®¡ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªäºŒçº§å‘½ä»¤ï¼Œèƒ½è®©æˆ‘ä»¬è°ƒè¯•å‰ç«¯/åç«¯ï¼Œæˆ–è€…åŒæ—¶è°ƒè¯•ã€‚ç°åœ¨ï¼Œå¤§çš„æ¡†æ¶éƒ½å»ºç«‹å¥½äº†ï¼Œä½†æ˜¯å…¶ä¸­çš„ç»†èŠ‚å®ç°è¿˜æ²¡æœ‰è®¨è®ºã€‚æˆè´¥åœ¨äºç»†èŠ‚ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ’¸èµ·è¢–å­å¼€å§‹å®ç°å®ƒä»¬ã€‚

## é…ç½®é¡¹çš„è®¾è®¡

ç®€å•å›é¡¾ä¸€ä¸‹è°ƒè¯•æ¨¡å¼çš„æ¶æ„è®¾è®¡ã€‚æ‰€æœ‰å¤–éƒ¨è¯·æ±‚è¿›å…¥åå“ä»£ç†æœåŠ¡åï¼Œä¼šç”±åå‘ä»£ç†æœåŠ¡è¿›è¡Œåˆ†å‘ï¼Œå‰ç«¯è¯·æ±‚åˆ†å‘åˆ°å‰ç«¯è¿›ç¨‹ï¼Œåç«¯è¯·æ±‚åˆ†å‘åˆ°åç«¯è¿›ç¨‹ã€‚  
![](https://static001.geekbang.org/resource/image/86/16/86d2c8a583a1dafa52ee79fb95f30616.jpg?wh=1920x1080)  
åœ¨è¿™ä¸ªè®¾è®¡ä¸­ï¼Œå‰ç«¯æœåŠ¡å¯åŠ¨çš„æ—¶å€™å ç”¨å“ªä¸ªç«¯å£ï¼Ÿåç«¯æœåŠ¡å¯åŠ¨çš„æ—¶å€™å ç”¨å“ªä¸ªç«¯å£ï¼Ÿåå‘ä»£ç†æœåŠ¡proxyå¯åŠ¨çš„æ—¶å€™å ç”¨å“ªä¸ªç«¯å£å‘¢ï¼Ÿè¿™äº›éƒ½å±äºé…ç½®é¡¹ï¼Œéœ€è¦åœ¨è®¾è®¡ä¹‹åˆå°±è§„åˆ’å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆè®¾è®¡é…ç½®é¡¹çš„å…·ä½“å®ç°ã€‚

ç”±äºè°ƒè¯•æ¨¡å¼é…ç½®é¡¹æ¯”è¾ƒå¤šï¼Œåœ¨framework/command/dev.go ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„é…ç½®ç»“æ„devConfigæ¥è¡¨ç¤ºé…ç½®ä¿¡æ¯ï¼š

```go
// devConfig ä»£è¡¨è°ƒè¯•æ¨¡å¼çš„é…ç½®ä¿¡æ¯
type devConfig struct {

   Port    string   // è°ƒè¯•æ¨¡å¼æœ€ç»ˆç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤ä¸º8070
   
   Backend struct { // åç«¯è°ƒè¯•æ¨¡å¼é…ç½®
      RefreshTime   int    // è°ƒè¯•æ¨¡å¼åç«¯æ›´æ–°æ—¶é—´ï¼Œå¦‚æœæ–‡ä»¶å˜æ›´ï¼Œç­‰å¾…3sæ‰è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œèƒ½è®©é¢‘ç¹ä¿å­˜å˜æ›´æ›´ä¸ºé¡ºç•…, é»˜è®¤1s
      Port          string // åç«¯ç›‘å¬ç«¯å£ï¼Œ é»˜è®¤ 8072
      MonitorFolder string // ç›‘å¬æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸ºAppFolder
   }
   
   Frontend struct { // å‰ç«¯è°ƒè¯•æ¨¡å¼é…ç½®
      Port string // å‰ç«¯å¯åŠ¨ç«¯å£, é»˜è®¤8071
   }
}
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ11ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg" width="30px"><span>å‹</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœrefreshTimeè®¾ç½®çš„æ—¶é—´å¤ªçŸ­ é‚£ä¹ˆæ”¹ä¸€æ¬¡ä¼šrebuild3æ¬¡ </div>2021-12-11</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/26/34/891dd45b.jpg" width="30px"><span>å®™æ–¯</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æœ‰äº†è¿™ä¸ªè°ƒè¯•èµ·æ¥æ˜¯å¾ˆæ–¹ä¾¿ ï¼Œåªè¦æŠŠè‡ªå·±ç¼–è¯‘å‡ºæ¥äº†ï¼Œç„¶åå¯åŠ¨ï¼Œåç»­è°ƒè¯•å°±ä¼šè‡ªå·±ç¼–è¯‘è‡ªå·±ç„¶åè‡ªè¡Œå¯åŠ¨</div>2021-12-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> ğŸ‘ï¼ˆ4ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å®æ—¶é‡è½½(live reloading): ä»£ç å˜åŠ¨æ—¶é‡æ–°ç¼–è¯‘å’Œå¯åŠ¨appã€‚è¿™ä¸ªåº”è¯¥æ˜¯æ–‡ä¸­çš„æ¨¡å¼ï¼›

çƒ­é‡è½½(hot reloading): ä»£ç å˜åŠ¨æ—¶åŠ è½½å˜åŠ¨åçš„ä»£ç ï¼Œä¸é‡å¯appï¼Œä¿ç•™å½“å‰appçš„çŠ¶æ€ï¼›

è°ƒè¯•(debug): é€šå¸¸ç‰µæ¶‰åˆ°æ‰“æ–­ç‚¹ï¼Œå•æ­¥è·Ÿè¸ªç­‰ã€‚

å¦‚æœåªæ˜¯å®ç°live reloadçš„è¯ä¹Ÿå¯ä»¥å•ç‹¬ç”¨Airæˆ–nodemonç­‰ï¼Œå‰åç«¯åœ¨ä¸åŒçš„å­ç›®å½•é‡Œåˆ†åˆ«ä¿®æ”¹å’Œreloadä¹Ÿæ²¡å•¥é—®é¢˜ã€‚</div>2021-11-02</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/18/d7/88/6f6b245c.jpg" width="30px"><span>å¼ æµ©è½©</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å¤ªæœ‰æ„æ€äº†è¿™ä¸ªåŠŸèƒ½ï¼Œçˆ±äº†çˆ±äº†</div>2022-11-19</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3c/81/5b/fe82b3c2.jpg" width="30px"><span>Superdandan</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>é—®é¢˜ä¸€ï¼š cmd := exec.Command(path, &quot;run&quot;, &quot;dev&quot;, &quot;--&quot;, &quot;--port&quot;, port) ä½¿ç”¨vue3å¯åŠ¨å‰ç«¯è°ƒè¯•æ¨¡å¼çš„æ— æ³•è·³è½¬åˆ°å‰ç«¯ä¸»é¡µ
é—®é¢˜åŸå› ï¼švue3å¯åŠ¨ä¹‹åï¼Œé»˜è®¤è°ƒè¯•åœ°å€çš„hostæ˜¯localhost, çœ‹ä½ èƒ½å‡ºç° 127.0.0.1 æ— æ³•è·³è½¬çš„æƒ…å†µã€‚
è§£å†³æ–¹å¼ï¼š å¢åŠ hostå‚æ•°  cmd := exec.Command(path, &quot;run&quot;, &quot;dev&quot;, &quot;--&quot;, &quot;--port&quot;, port, &quot;--host&quot;, &quot;127.0.0.1&quot;)

é—®é¢˜äºŒï¼šå‰ç«¯ä¿®æ”¹çš„ä»£ç æ— æ³•é€šè¿‡ 127.0.0.1:8087 è®¿é—®çœ‹åˆ° 
é—®é¢˜åŸå› ï¼šcore.Use(static.Serve(&quot;&#47;&quot;, static.LocalFile(&quot;.&#47;dist&quot;, false))) å¯¼è‡´ è¯·æ±‚è¢«åç«¯æ•è·</div>2024-10-22</li><br/><li><img src="" width="30px"><span>Geek_6d3ca8</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è¦è®¿é—®é¡µé¢æˆåŠŸ,è¦ä¿è¯ vue èƒ½åŸæœ¬å‘½ä»¤ build æˆåŠŸ,å³ npm run dev é‡Œæ‰§è¡Œçš„å®é™…å‘½ä»¤å¼å¯¹çš„,vite --host 127.0.0.1 --port 8071,ç¡®å®šä»£ç å¯åŠ¨çš„å‘½ä»¤æ˜¯æ­£ç¡®çš„,ç„¶åæ˜¯å¯åŠ¨çš„ç«¯å£èƒ½è¢«ä»£ç é‡Œçš„è½¬å‘çš„åœ°å€æˆåŠŸè®¿é—®åˆ°</div>2023-08-28</li><br/><li><img src="" width="30px"><span>Geek_6d3ca8</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>å¯åŠ¨å‰ç«¯ vue3 è¦ä¿®æ”¹ä¸€ä¸‹å‘½ä»¤,å¦‚æœæ˜¯ vite å¯åŠ¨çš„,å‚è€ƒå¦‚ä¸‹:
&#47;&#47; å¯åŠ¨å‰ç«¯æœåŠ¡
func (p *Proxy) restartFrontend() error {
	&#47;&#47; å¯åŠ¨å‰ç«¯è°ƒè¯•æ¨¡å¼
	&#47;&#47; å¦‚æœå·²ç»å¼€å¯äº†npm run serveï¼Œ ä»€ä¹ˆéƒ½ä¸åš
	if p.frontendPid != 0 {
		return nil
	}

	&#47;&#47; å¦åˆ™å¼€å¯npm run serve
	port := p.devConfig.Frontend.Port
	path, err := exec.LookPath(&quot;npm&quot;)
	if err != nil {
		return err
	}
&#47;&#47; ä¿®æ”¹ä¸ºæ­£ç¡®çš„é…ç½®è¿›æŒ‡å®šç«¯å£çš„å‘½ä»¤
	cmd := exec.Command(path, &quot;run&quot;, &quot;dev&quot;, &quot;--&quot;, &quot;--port&quot;, port)
	cmd.Env = os.Environ()
	cmd.Env = append(cmd.Env, fmt.Sprintf(&quot;%s%s&quot;, &quot;PORT=&quot;, port))
	cmd.Stdout = os.NewFile(0, os.DevNull)
	cmd.Stderr = os.Stderr
...
}
}</div>2023-08-28</li><br/><li><img src="" width="30px"><span>Geek_6d3ca8</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ç”¨ npm run devå¯åŠ¨çš„ç«¯å£,å¹¶æ²¡æœ‰åœ¨ dev.goä»£ç é‡Œå¾—åˆ°ä¿®æ”¹,è¿™æ˜¯ä¸€ä¸ª bug,  VITE v4.4.9  ready in 611 ms

  âœ  Local:   http:&#47;&#47;localhost:5173&#47;
</div>2023-08-28</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/56/89/30c2f416.jpg" width="30px"><span>Tal.Huang</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è·‘èµ·æ¥äº† ä½†æ˜¯é¡µé¢æ˜¯ç©ºç™½çš„ï¼š
(base) huanghaitao@huanghaitaodeMacBook-Pro skeleton % .&#47;skeleton build all

&gt; skeleton-vue@0.0.0 build
&gt; run-p type-check build-only


&gt; skeleton-vue@0.0.0 type-check
&gt; vue-tsc --noEmit -p tsconfig.vitest.json --composite false


&gt; skeleton-vue@0.0.0 build-only
&gt; vite build

vite v4.0.3 building for production...
transforming...
âœ“ 48 modules transformed.
rendering chunks...
computing gzip size...
dist&#47;assets&#47;logo-da9b9095.svg        0.31 kB
dist&#47;index.html                      0.42 kB
dist&#47;assets&#47;AboutView-4d995ba2.css   0.09 kB â”‚ gzip:  0.10 kB
dist&#47;assets&#47;index-b9365240.css       4.18 kB â”‚ gzip:  1.31 kB
dist&#47;assets&#47;AboutView-3daf4bd4.js    0.23 kB â”‚ gzip:  0.20 kB
dist&#47;assets&#47;index-25bb1ea1.js       84.51 kB â”‚ gzip: 33.25 kB
=============  å‰ç«¯ç¼–è¯‘æˆåŠŸ ============
ç¼–è¯‘skeletonæˆåŠŸ

base) huanghaitao@huanghaitaodeMacBook-Pro skeleton % .&#47;skeleton dev all
å¯åŠ¨åç«¯æœåŠ¡:  http:&#47;&#47;127.0.0.1:8072
ç›‘æ§æ–‡ä»¶å¤¹ï¼š &#47;Users&#47;huanghaitao&#47;go&#47;src&#47;skeleton&#47;app
åç«¯æœåŠ¡pid: 13785
å¯åŠ¨å‰ç«¯æœåŠ¡:  http:&#47;&#47;127.0.0.1:8071
å‰ç«¯æœåŠ¡pid: 13786
ä»£ç†æœåŠ¡å¯åŠ¨: http:&#47;&#47;127.0.0.1:8070
[PID] 13785
app serve url: :8072

&gt; skeleton-vue@0.0.0 dev
&gt; vite


  VITE v4.0.3  ready in 545 ms

  âœ  Local:   http:&#47;&#47;localhost:5173&#47;
  âœ  Network: use --host to expose

http:&#47;&#47;127.0.0.1:8070&#47; æ˜¾ç¤ºç©ºç™½é¡µé¢
http:&#47;&#47;127.0.0.1:8070&#47;demo&#47;demo  æ˜¾ç¤º[{&quot;id&quot;:1,&quot;name&quot;:&quot;foo&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;bar&quot;}]

https:&#47;&#47;github.com&#47;skeleton1231&#47;skeleton
è¿˜å¸Œæœ›è€å¸ˆæŒ‡å¯¼ä¸‹</div>2023-01-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/2d/d4/5d1d15f3.jpg" width="30px"><span>tsunamiShi</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ§åˆ¶å°ä¹Ÿç›‘å¬æ–‡ä»¶å¤¹äº†ï¼Œä¿®æ”¹æ–‡ä»¶å¤¹ä¹Ÿé‡å¯æœåŠ¡äº†ï¼Œä½†æ˜¯åˆ·æ–°æµè§ˆå™¨å¹¶æ²¡æœ‰æ”¹å˜ï¼Œ</div>2022-05-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/17/2d/d4/5d1d15f3.jpg" width="30px"><span>tsunamiShi</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>åç«¯ä¿®æ”¹apiæ–‡ä»¶ï¼Œåˆ·æ–°æµè§ˆå™¨å¹¶æ²¡æœ‰æ”¹å˜ï¼Œè¯·é—®æ˜¯ä»€ä¹ˆåŸå› å•Šï¼Ÿ</div>2022-05-12</li><br/>
</ul>