ä½ å¥½ï¼Œæˆ‘æ˜¯è½©è„‰åˆƒã€‚

åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»å®Œæˆäº†Webæ¡†æ¶çš„åŸºç¡€éƒ¨åˆ†ï¼Œä½¿ç”¨net/httpå¯åŠ¨äº†ä¸€ä¸ªWebæœåŠ¡ï¼Œå¹¶ä¸”å®šä¹‰äº†è‡ªå·±çš„Contextï¼Œå¯ä»¥æ§åˆ¶è¯·æ±‚è¶…æ—¶ã€‚

ä¹‹å‰åœ¨è®²å…·ä½“å®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åå¤å¼ºè°ƒè¦æ³¨æ„ä»£ç çš„ä¼˜åŒ–ã€‚é‚£ä¹ˆå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿå…·ä½“æ¥è¯´ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯å°è£…ã€‚æ‰€ä»¥ä»Šå¤©æˆ‘ä»¬å°±å›é¡¾ä¸€ä¸‹ä¹‹å‰å†™çš„ä»£ç ï¼Œçœ‹çœ‹å¦‚ä½•é€šè¿‡å°è£…æ¥è¿›ä¸€æ­¥æé«˜ä»£ç æ‰©å±•æ€§ã€‚

åœ¨ç¬¬äºŒè¯¾ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡æ–‡ä»¶å¤¹ä¸­çš„controller.goçš„é€»è¾‘ä¸­è®¾ç½®äº†ä¸€ä¸ªæœ‰è¶…æ—¶æ—¶é•¿çš„æ§åˆ¶å™¨ï¼š

```go
func FooControllerHandler(c *framework.Context) error {
	...
    // åœ¨ä¸šåŠ¡é€»è¾‘å¤„ç†å‰ï¼Œåˆ›å»ºæœ‰å®šæ—¶å™¨åŠŸèƒ½çš„ context
	durationCtx, cancel := context.WithTimeout(c.BaseContext(), time.Duration(1*time.Second))
	defer cancel()

	go func() {
		...
		// æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘
        
		time.Sleep(10 * time.Second)
        // ...
              
		finish <- struct{}{}
	}()
	// åœ¨ä¸šåŠ¡é€»è¾‘å¤„ç†åï¼Œæ“ä½œè¾“å‡ºé€»è¾‘...
    select {
	...
	case <-finish:
		fmt.Println("finish")
	...
	}
	return nil
}
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ26ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/19/70/67/0c1359c2.jpg" width="30px"><span>qinsi</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ4ï¼‰<div>æƒ³åˆ°å‡ ä¸ªç‚¹ï¼š

* ä¸­é—´ä»¶çš„æ³¨å†Œæ˜¯æœ‰é¡ºåºçš„ã€‚æ¯”å¦‚æœ€åæ‰æ³¨å†ŒRecoveryçš„è¯ï¼Œpipelineä¸­åœ¨Recoveryå‰é¢çš„ä¸­é—´ä»¶å¦‚æœpanicäº†è¿˜æ˜¯æ²¡æ³•recoverçš„
* ä¸­é—´ä»¶éœ€è¦æ˜¾å¼è°ƒç”¨ctx.Next()ï¼Œå¦‚æœå†™ä¸­é—´ä»¶æ—¶å¿˜è®°äº†çš„è¯pipelineå°±æ–­äº†ã€‚æˆ–è®¸å¯ä»¥æŠŠä¸­é—´ä»¶è¿›ä¸€æ­¥æ‹†æˆpreRequest()å’ŒpostRequest()ä¸¤éƒ¨åˆ†
* ä¸­é—´ä»¶æœ¬è´¨æ˜¯è£…é¥°å™¨æ¨¡å¼ï¼Œå¦‚æœèƒ½åƒJava&#47;Pythoné‡Œé‚£æ ·å†™è£…é¥°å™¨æ ‡æ³¨çš„è¯å¯èƒ½æ„å›¾æ›´æ˜æ˜¾</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3d/70/a2202898.jpg" width="30px"><span>liyanfeng</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·æ•™ä¸€ä¸‹è€å¸ˆçš„UMLå›¾æ˜¯ç”¨å“ªä¸ªè½¯ä»¶ç”»çš„å“ˆï¼Ÿ</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1a/19/99/ba3719e1.jpg" width="30px"><span>The brain is a good thing</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™è¯¾ç¨‹çœŸçš„æ˜¯ï¼Œçœ‹ä¸€éå›æœ¬ä¸€æ¬¡ - by 2023
</div>2023-02-18</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg" width="30px"><span>å‹</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æˆ‘çœ‹å¤§å®¶éƒ½è¯´ allHandlers := append(c.middlewares, handlers...) çš„å†™æ³•æœ‰é—®é¢˜ã€‚å…¶å®æ²¡é—®é¢˜ 
å› ä¸ºæ¯æ¬¡æ‰©å®¹çš„æ—¶å€™ å¹¶æ²¡æœ‰èµ‹å€¼å›å» å³ :c.middwares  := append(c.middlewares, handlers...)
æ‰€ä»¥æ¯æ¬¡éƒ½æ˜¯æ‹¿æœªæ‰©å®¹çš„æ•°ç»„æ¥ å¹¶ä¸ä¼šå‡ºç°è¦†ç›–çš„æƒ…å†µ 
</div>2021-12-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/3d/70/a2202898.jpg" width="30px"><span>liyanfeng</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿™ä¹ˆå¥½çš„è¯¾ï¼Œå¤§å®¶å¿«æ¥ä¹°ğŸ˜„ï¼Œç†Ÿæ‚‰åŠ æ„å¤–çš„æ„Ÿè§‰ï¼ŒçœŸå¥½</div>2021-09-20</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2a/85/35/0cfa2b84.jpg" width="30px"><span>é‚£äº›å¹´</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>æ”¯æŒï¼</div>2021-12-13</li><br/><li><img src="" width="30px"><span>jayqiyoung</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>å¦‚æœæ¯ä¸€èŠ‚è¯¾åé¢çš„æé—®ï¼Œä¸‹ä¸€èŠ‚èƒ½å¤Ÿç»™äº›è§£ç­”å°±å¥½äº†
</div>2022-09-26</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/41/37/b89f3d67.jpg" width="30px"><span>æˆ‘åœ¨ç¡è§‰</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>æä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œé¢ gourpæœºæ„é¢˜é‡Œé¢å°è£…ä¸€ä¸ªGroupç±»å‹çš„parenté“¾è¡¨æœ‰ä»€ä¹ˆç”¨æ„ï¼Œæˆ‘ä¸éœ€è¦è¿™ä¸ªparentå­—æ®µä¹Ÿå®Œå…¨å®ç°äº†åŒæ ·çš„åŠŸèƒ½ã€‚</div>2021-12-21</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/21/41/37/b89f3d67.jpg" width="30px"><span>æˆ‘åœ¨ç¡è§‰</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<div>core.Use( middleware.Test1()ï¼‰
è€å¸ˆä½ å¥½ã€‚é—®ä¸€ä¸ªé—®é¢˜ï¼Œ ä¸ºä»€ä¹ˆæ­¤å¤„çš„Test1ä¸€å®šè¦å®šä¹‰æˆè¿”å›ControllerHandleråŒ¿åå‡½æ•°çš„å‡½æ•°ï¼Œæˆ‘å®é™…ç›´æ¥æŠŠTest1å®šä¹‰æˆControllerHandlerç±»å‹çš„çš„å‡½æ•°æ‰§è¡Œèµ·æ¥ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</div>2021-12-14</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg" width="30px"><span>å‹</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆè¯·é—®  c.Nextæ˜¯å¯ä»¥æ•è·errorçš„ åœ¨æ•´ä¸ªé“¾è·¯ä¸­å¦‚æœä¸€å¤„åœ°æ–¹æŠ›å‡ºäº†error  ä½†æ˜¯åœ¨æœ€é¡¶å±‚ ServeHTTPä¸­çš„é‚£ä¸ªnextå¦‚æœè¿”å›nil é‚£ä¹ˆæ•´æ¡é“¾è·¯ä¸­çš„errorä¼šè¢«å¿½ç•¥æ‰
æˆ‘ä»¬åªåœ¨ timeoutä¸­åŠ å…¥äº† é”è¿™ä¸ªæ¦‚å¿µ å…¶å®è¿™ä¸ªå…¶å®è¿™ä¸ªåº”è¯¥å¯ä»¥æŠ½å‡ºæ¥ ç»Ÿä¸€åŠ ä¸Šä¸å…è®¸é‡å¤å†™responseWriter
</div>2021-12-01</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/26/b5/74/cd80b9f4.jpg" width="30px"><span>å‹</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¿˜æ²¡å¼€å§‹çœ‹ ï¼Œä½†æ˜¯è®°å¾—contextç« èŠ‚ æŠŠè¶…æ—¶æ§åˆ¶åˆ°å†™åœ¨äº†controllerä¸­ éƒ½å¾—ç›‘å¬ è²Œä¼¼è¿™ç« ä¼šä¼˜åŒ– æ˜å¤©å†æˆ˜ ä¼‘æ¯ä¸€ä¸‹</div>2021-11-30</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/88/a9/789fc9b0.jpg" width="30px"><span>è´ºé¹</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>core.goä»£ç ä¸­æ·»åŠ ä¸­é—´ä»¶æœ‰äº›é—®é¢˜å§ï¼Ÿ
func (c *Core) Use(middlewares ...ControllerHandler) { c.middlewares = middlewares}
æ˜¯å¦åº”è¯¥æ”¹ä¸º
func (c *Core) Use(middlewares ...ControllerHandler) { c.middlewares = append(c.middlewares, middlewares...)}
å¦åˆ™æ·»åŠ å¤šä¸ªä¸‹é¢çš„ä¼šè¦†ç›–ä¸Šé¢çš„ã€‚</div>2021-09-24</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/ed/0a/18201290.jpg" width="30px"><span>Juniper</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>æ—¥å¸¸ä½¿ç”¨çš„webæ¡†æ¶ï¼Œä¸­é—´ä»¶æ˜¯åŸºæœ¬åŠŸèƒ½ä¹‹ä¸€ï¼Œé€šè¿‡è‡ªå·±å®ç°ä¸€éï¼Œæ˜ç™½å…¶ä¸­çš„åŸç†ï¼ŒåŠ æ·±å°è±¡ï¼Œä¸é”™</div>2022-02-15</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/2b/0a/23/c26f4e50.jpg" width="30px"><span>Sunrise</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>core.go ä¸­ allHandlers := append(c.middlewares, handlers...) è¿™æ ·å†™ç»å¯¹æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸º allHandlers å¯èƒ½ä¼šå…±ç”¨åŒä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œåº”è¯¥è¿™æ ·å†™å§ï¼š
allHandlers := make([]ControllerHandler, len(c.middlewares)+len(handlers))
copy(allHandlers, append(c.middlewares, handlers...))</div>2022-12-04</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/ff/a4/55520286.jpg" width="30px"><span>answerå®«</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>çœ‹ä¸€éæœ‰ç‚¹æ™•,è¦å¤šè¯»å‡ éäº†,è¯¾ç¨‹ä¸é”™,æ˜¯æˆ‘çš„ç›²ç‚¹</div>2021-12-30</li><br/><li><img src="" width="30px"><span>Geek_8de965</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è‡ªå·±å†™åç¢°åˆ°ä¸¤ä¸ªé—®é¢˜ï¼š
1.è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º2sï¼Œä¸šåŠ¡é‡Œä¹ŸSleepä¸¤ç§’ï¼Œå‡ºç°ä¸¤ä¸ªåç¨‹éƒ½è®¿é—®äº†c.JSONï¼Œç¨‹åºå´©æºƒï¼Œåœ¨timeouté‚£è¾¹åŠ äº†c.WriterMux().Lock()å¥½åƒæ²¡æœ‰ä½œç”¨
2.ä¸»åç¨‹é€šè¿‡setHasTimeoutè®¾ç½®è¶…æ—¶æ ‡è®°åï¼Œä¸šåŠ¡çš„é‚£ä¸ªåç¨‹è¿˜æ˜¯è¯»åˆ°çš„false,å¯¼è‡´time out å’Œ ok éƒ½è¾“å‡ºäº†ã€‚

æ‰å­¦ä¿©å‘¨Go,æœ‰è¯´å¾—ä¸å¯¹çš„åœ°æ–¹è§è°…</div>2021-11-03</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/13/d4/d9/c3296187.jpg" width="30px"><span>airmyä¸¶</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ä¸€éè·Ÿç€æ€è·¯å†™ä»£ç ï¼Œä¸€éçœ‹ginçš„æºç ï¼Œæ„Ÿè§‰è¿™ä¸ªè¯¾ç¨‹ä¸æ­¢åœ¨æ•™ä½ å†™æ¡†æ¶ï¼Œæ›´æ˜¯åœ¨å¸¦ä½ é˜…è¯»ginçš„æºç </div>2022-09-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/27/05/a2/3fa5a070.jpg" width="30px"><span>åƒæ©˜å­çš„æ±¤åœ†ğŸ³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è®¾è®¡æ¨¡å¼çš„è´£ä»»é“¾å·®ä¸å¤š</div>2024-05-08</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/77/67/b6ad1aeb.jpg" width="30px"><span>owl</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>çœ‹ä»£ç æ—¶æƒ³åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œcoreä½¿ç”¨useé…ç½®äº†å…¨å±€è£…é¥°å™¨ï¼Œé’ˆå¯¹å…·ä½“çš„URLï¼Œåˆè®¾ç½®äº†å•ç‹¬çš„è£…é¥°å™¨ï¼Œæœ€ç»ˆçš„è£…é¥°å™¨æ˜¯è¿™ä¸¤è€…çš„ç›¸åŠ ã€‚å¦‚æœåœ¨å…¨å±€è®¾ç½®äº†è£…é¥°å™¨aï¼Œå…·ä½“URLåˆä¸å°å¿ƒè®¾ç½®äº†aï¼Œæœ€ç»ˆnodeæˆ–contextä¸­ï¼Œæ˜¯æ²¡æœ‰é’ˆå¯¹è£…é¥°å™¨å»é‡åŠŸèƒ½çš„ï¼Œaä¼šé‡å¤æ‰§è¡Œã€‚</div>2023-09-13</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1f/61/77/e4d198a6.jpg" width="30px"><span>MR.å‰ã„ï¼</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>giné‡Œé¢çš„Context.Nextæ–¹æ³•
æ‰§è¡Œçš„æ˜¯Forå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸­é—´ä»¶è°ƒç”¨ä¸è°ƒç”¨Nextæ–¹æ³•éƒ½ä¼šå¼ºåˆ¶æ‰§è¡Œä¸‹ä¸€ä¸ªfunc (ctx *Context)</div>2022-12-17</li><br/><li><img src="" width="30px"><span>Geek_96685a</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>ä½ å¥½ï¼Œä½œè€…ï¼Œæˆ‘åœ¨çº¿ä¸‹è‡ªå·±å®éªŒä¸­é—´ä»¶æ—¶ï¼Œåœ¨åµŒå¥—äº†å¤šä¸ªä¸­é—´ä»¶ä¹‹åï¼ŒRecoveryä¸­é—´ä»¶å¤±æ•ˆäº†ï¼Ÿæ²¡æœ‰æ•è·ä½å¼‚å¸¸ï¼Œå¦‚æœå†™ï¼Œæˆ‘å®šä¹‰çš„timeoutMiddlewareå¼‚å¸¸å¯ä»¥æ•è·åˆ°
å…·ä½“å†™æ³•å¦‚ä¸‹ï¼š
func timeoutMiddleware() framework.ControllerHandler {
	return func(c *framework.Context) error {
		timeoutCtx, cancelFunc := context.WithTimeout(c.BaseContext(), time.Second)
		defer cancelFunc()
		finish := make(chan struct{})
		go func() {
			c.Next()
			finish &lt;- struct{}{}
		}()
		select {
		case &lt;-timeoutCtx.Done():
			c.Json(500, &quot;time out&quot;)
			c.SetHasTimeout()
			return nil
		case &lt;-finish:
			fmt.Println(&quot;æ‰§è¡Œå®Œæ¯•&quot;)
		}
		return nil
	}
}

func Recovery() framework.ControllerHandler {
	return func(c *framework.Context) error {
		defer func() {
			if err := recover(); err != nil {
				fmt.Println(&quot;å¼‚å¸¸äº†&quot;, err)
				c.Json(500, err)
				return
			}
		}()
		fmt.Println(&quot;æ‰§è¡Œå¼‚å¸¸ä¸­é—´ä»¶&quot;)
		c.Next()

		return nil
	}
}

func registerRoute(core *framework.Core) {
	core.Use(middleware.Recovery())
	core.Get(&quot;&#47;user&#47;login&quot;, timeoutMiddleware(), UserLoginController)

	&#47;&#47;&#47;&#47; æ‰¹é‡é€šç”¨å‰ç¼€
	&#47;&#47;subjectApi := core.Group(&quot;&#47;subject&quot;)
	&#47;&#47;{
	&#47;&#47;	&#47;&#47; åŠ¨æ€è·¯ç”±
	&#47;&#47;	subjectApi.Delete(&quot;&#47;:id&quot;, SubjectDelController)
	&#47;&#47;	subjectApi.Put(&quot;&#47;:id&quot;, SubjectUpdateController)
	&#47;&#47;	subjectApi.Get(&quot;&#47;:id&quot;, SubjectGetController)
	&#47;&#47;	subjectApi.Get(&quot;&#47;list&#47;all&quot;, SubjectListController)
	&#47;&#47;}
}</div>2022-11-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/10/56/89/30c2f416.jpg" width="30px"><span>Tal.Huang</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è€å¸ˆå¥½ï¼Œå…³äºåœ¨coreä¸­å­˜å‚¨middlewares
&#47;&#47; æ³¨å†Œä¸­é—´ä»¶
func (c *Core) Use(middlewares ...ControllerHandler) {
	fmt.Println(&quot;Core Use&quot;)
	c.middlewares = append(c.middlewares, middlewares...)
	fmt.Println(c.middlewares)
}

æ‰“å°å‘ç°å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°è¿™ä¸ªæ–¹æ³•ï¼Ÿ
Group Use
core Get
core Get
middleware pre test3
middleware pre test3
middleware post test3
middleware post test3

ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</div>2022-10-18</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/rxz5aKicRkvqWmt6c6c7eayHvh577uibBTVQzcJKwSTqI9FaxZSRlx7NRVw4atWpqER8ncA5jErQb3wb4cPzZxlA/132" width="30px"><span>Geek_065895</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·æ±‚æ—¶é•¿ç»Ÿè®¡çš„ä¸­é—´ä»¶å®ç°ï¼š
func RecordRequsstTime() framework.ControllerHandler {
	&#47;&#47; ä½¿ç”¨å‡½æ•°å›è°ƒ
	return func(c *framework.Context) error {
		&#47;&#47; è·å–å¼€å§‹æ—¶é—´
		startT := time.Now()
		&#47;&#47; è¾“å‡ºè¯·æ±‚URI
		
		&#47;&#47; æ‰§è¡Œå…¶ä»–ä¸­é—´ä»¶å’Œå‡½æ•°å¤„ç†
		c.Next()
		&#47;&#47; è·å–å¤„ç†æ—¶é•¿
		tc := time.Since(startT)
		log.Println(tc)
		return nil
	}
}</div>2022-03-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/7a/55/2f4055f6.jpg" width="30px"><span>void</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>core.Getæ–¹æ³•é‡Œçš„
allHandlers := append(c.middlewares, handlers...)
æ˜¯ä¸å¯¹çš„ï¼Œåº”å½“å¤åˆ¶ä¸€ä»½c.middlewaresã€‚åˆ‡ç‰‡åº•å±‚å…±äº«æ•°ç»„ç©ºé—´ï¼Œå¤šæ¬¡è°ƒç”¨Getæ–¹æ³•ä¼šæœ‰åè¾¹çš„handlerè¦†ç›–å‰é¢handlerçš„æƒ…å†µã€‚æ¯”å¦‚:
core.Use(middleware.Test1(), middleware.Test2()) &#47;&#47; æ­¤æ—¶c.middlewares len 2  cap 2
core.Get(&quot;&#47;user&#47;aa&quot;, SubjectDelController) &#47;&#47; c.middlewares len 3  cap 4
core.Get(&quot;&#47;user&#47;bb&quot;, UserLoginController) &#47;&#47; c.middlewares len 3  cap 4 è¿™é‡Œä¼šæŠŠc.middlewares[2]è¦†ç›–ï¼Œå¯¼è‡´è¿™ä¸¤ä¸ªè·¯ç”±éƒ½æŒ‡å‘äº†UserLoginController</div>2021-11-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1c/f7/62/947004d0.jpg" width="30px"><span>www</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>ä¸­é—´ä»¶åŸæ¥æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œäº†ç„¶äº†ç„¶ï¼Œé€ ä¸€éè½®å­è¿˜æ˜¯æœ€å¿«çš„å­¦ä¹ æ–¹æ³•</div>2021-10-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/0f/47/29/425a2030.jpg" width="30px"><span>Groot</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<div>Use æ³¨å†Œä¸­é—´ä»¶æ˜¯ä¸æ˜¯åº”è¯¥ç”¨ append() è¿½åŠ  middlewaresï¼Œå¦åˆ™åªæœ‰æœ€åä¸€æ¬¡è°ƒç”¨æ‰èƒ½æ³¨å†Œä¸Š</div>2021-09-23</li><br/>
</ul>