ä½ å¥½ï¼Œæˆ‘æ˜¯éƒ‘å»ºå‹‹ã€‚

åœ¨ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è§£äº†æ–‡æœ¬å¤„ç†æŠ€æœ¯ã€‚è¿›è¡Œæ–‡æœ¬å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‡½æ•°çš„å°è£…æ¥å®Œæˆè¿‡ç¨‹çš„æŠ½è±¡ï¼Œå‡½æ•°æ˜¯ä¸€ç§å¤ç”¨ä»£ç ã€å¸®åŠ©æˆ‘ä»¬æ„å»ºå¤§è§„æ¨¡ç¨‹åºçš„åˆ©å™¨ã€‚è¿™èŠ‚è¯¾ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹å¦ä¸€ç§å¯ä»¥æ„å»ºå¤§è§„æ¨¡ç¨‹åºçš„æŠ€æœ¯ï¼šæ¥å£ã€‚

## Goæ¥å£åŠå…¶ä¼˜åŠ¿

åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ¥å£æ˜¯ä¸€ç§å…±äº«è¾¹ç•Œï¼Œè®¡ç®—æœºç³»ç»Ÿçš„å„ä¸ªç‹¬ç«‹ç»„ä»¶å¯ä»¥åœ¨è¿™ä¸ªå…±äº«è¾¹ç•Œä¸Šäº¤æ¢ä¿¡æ¯ã€‚è¿™äº›ç‹¬ç«‹ç»„ä»¶å¯èƒ½æ˜¯è½¯ä»¶ã€ç¡¬ä»¶ã€å¤–å›´è®¾å¤‡ä¸äººã€‚åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ¥å£æŒ‡ç›¸äº’ç‹¬ç«‹çš„ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤æµæ–¹å¼ã€‚æ¥å£æœ‰ä¸‹é¢å‡ ä¸ªå¥½å¤„ã€‚

- éšè—ç»†èŠ‚

æ¥å£å¯ä»¥å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„æŠ½è±¡ï¼Œå¤–æ¥è®¾å¤‡åªè¦æ»¡è¶³ç›¸åº”æ ‡å‡†ï¼ˆä¾‹å¦‚USB åè®®ï¼‰ï¼Œå°±å¯ä»¥å’Œä¸»è®¾å¤‡å¯¹æ¥ï¼›åº”ç”¨ç¨‹åºåªè¦æ»¡è¶³æ“ä½œç³»ç»Ÿè§„å®šçš„ç³»ç»Ÿè°ƒç”¨æ–¹å¼ï¼Œå°±å¯ä»¥ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å¼ºå¤§åŠŸèƒ½ï¼Œè€Œä¸å¿…å…³æ³¨å¯¹æ–¹å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚

- è§£è€¦

é€šè¿‡æ¥å£ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»¥æ¨¡å—åŒ–çš„æ–¹å¼æ„å»ºèµ·å¤æ‚ã€åºå¤§çš„ç³»ç»Ÿã€‚å°†å¤æ‚çš„åŠŸèƒ½æ‹†åˆ†æˆå½¼æ­¤ç‹¬ç«‹çš„æ¨¡å—ï¼Œä¸ä»…æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°å¹¶è¡Œå¼€å‘ç³»ç»Ÿã€æé«˜ç³»ç»Ÿå¼€å‘æ•ˆç‡ï¼Œä¹Ÿèƒ½è®©æˆ‘ä»¬åœ¨è®¾è®¡ç³»ç»Ÿæ—¶ä»¥å…¨å±€çš„è§†é‡çœ‹å¾…æ•´ä¸ªç³»ç»Ÿã€‚æ¨¡å—æ‹†åˆ†è¿˜æœ‰åŠ©äºæˆ‘ä»¬å¿«é€Ÿæ’æŸ¥ã€å®šä½å’Œè§£å†³é—®é¢˜ã€‚

- æƒé™æ§åˆ¶

æ¥å£æ˜¯ç³»ç»Ÿä¸å¤–ç•Œäº¤æµçš„å”¯ä¸€é€”å¾„ï¼Œä¾‹å¦‚Goè¯­è¨€å¯¹äºåƒåœ¾å›æ”¶åªæš´éœ²äº†GOGCç¯å¢ƒå˜é‡åŠ Runtime.GC APIã€‚USB æ¥å£æœ‰æ ‡å‡†çš„æ¥å£åè®®ï¼Œå¦‚æœå¤–ç•Œä¸æ»¡è¶³è¿™ç§åè®®ï¼Œå°±æ— æ³•å’ŒæŒ‡å®šçš„ç³»ç»Ÿè¿›è¡Œäº¤æµã€‚æ‰€ä»¥ï¼Œç³»ç»Ÿå¯ä»¥é€šè¿‡æ¥å£æ¥æ§åˆ¶æ¥å…¥æ–¹å¼å’Œæ¥å…¥æ–¹çš„è¡Œä¸ºï¼Œé™ä½å®‰å…¨é£é™©ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ8ï¼‰</strong></div><ul>
<li><img src="https://static001.geekbang.org/account/avatar/00/16/8d/e5/f3df7b02.jpg" width="30px"><span>ly</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>goos: darwin
goarch: arm64
pkg: goup
BenchmarkDirect-10              	473992540	         2.476 ns&#47;op
BenchmarkInterface-10           	483796916	         2.479 ns&#47;op
BenchmarkInterfacePointer-10    	483879259	         2.483 ns&#47;op
PASS
ok  	goup	4.484s
go1.20çš„æµ‹è¯•...</div>2023-02-10</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/a5/85/b1d9df7d.jpg" width="30px"><span>é’é¹¿</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è¯·é—®ï¼Œä»£ç é¡¹ç›®åœ°å€æœ‰å—ï¼Ÿ</div>2023-02-09</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/12/1d/d6/76fe5259.jpg" width="30px"><span>Dream.</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>&#47;&#47; BenchmarkInterfaceInjection ä¾èµ–æ³¨å…¥å®ç°interfaceè°ƒç”¨æ–¹æ³•
func BenchmarkInterfaceInjection(b *testing.B) {
	b.ResetTimer()
	NewSumifier().Add(10, 12)
}

func NewSumifier() Sumifier {
	return &amp;SumerPointer{id: 6754}
}
ä¸€æ—¶å…´èµ·æŠŠé¡¹ç›®ä¸­å¸¸ç”¨çš„interfaceè°ƒç”¨æ–¹å¼è¯•äº†ä¸‹ï¼Œé€šè¿‡ä½¿ç”¨benchmarkæµ‹è¯•å¾—åˆ°0.0000002 ns&#47;opâ€¦â€¦
æ¯”æ‰€æœ‰çš„éƒ½å¿«ã€‚
GOVERSION=&#39;go1.22.1&#39;</div>2024-06-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/3a/36/43/0fb9d591.jpg" width="30px"><span>èˆŸå°æ™“</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>goos: linux
goarch: amd64
pkg: go-crawler&#47;type-test
cpu: 13th Gen Intel(R) Core(TM) i5-1340P
BenchmarkDirect-16                      582977156                2.013 ns&#47;op
BenchmarkInterface-16                   698875952                1.798 ns&#47;op
BenchmarkInterfacePointer-16            605027127                1.975 ns&#47;op
PASS
ok      go-crawler&#47;type-test    4.219s
go 1.22rc2</div>2024-02-06</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e2/52/56dbb738.jpg" width="30px"><span>ç‰™å°æœ¨</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>tradeçš„éƒ¨åˆ†ï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ„æ€
```
package main

import (
	&quot;context&quot;
	&quot;github.com&#47;go-xorm&#47;xorm&quot;
	&quot;gorm.io&#47;gorm&quot;
)

&#47;&#47;å£°æ˜ä¸€ä¸ªç»Ÿä¸€çš„insertæ¥å£
type DBer interface {
	InsertRow(ctx context.Context, instance ...interface{})
}

type XormDB struct {
	db *xorm.Session
}

func (xorm *XormDB) InsertRow(ctx context.Context, instance ...interface{}) {
	xorm.db.Context(ctx).Insert(instance)
}

type GormDB struct {
	db *gorm.DB
}

func (gorm *GormDB) InsertRow(ctx context.Context, value ...interface{}) {
	gorm.db.Create(value)
}

&#47;&#47;å®šä¹‰ä¸šåŠ¡ç»Ÿä¸€æ“ä½œ
type Trade struct {
	db DBer
}

func (t *Trade) AddDB(db DBer) {
	t.db = db
}
func (t *Trade) AddTrade(ctx context.Context, instance ...interface{}) {
	t.db.InsertRow(ctx, instance)
}

func main() {
	&#47;&#47;dber:=&amp;XormDB{}
	orm := &amp;GormDB{}
	t := &amp;Trade{db: orm}
	ctx := context.Background()
	t.AddTrade(ctx, &quot;xiaoming,28&quot;)
}

```</div>2023-08-16</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/11/e2/52/56dbb738.jpg" width="30px"><span>ç‰™å°æœ¨</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>cpu: Intel(R) Core(TM) i5-6300HQ CPU @ 2.30GHz
BenchmarkDirect-4               412734510                2.860 ns&#47;op
BenchmarkInterface-4            331038409                3.693 ns&#47;op
BenchmarkInterfacePointer-4     327338402                3.640 ns&#47;op
PASS
</div>2023-08-16</li><br/><li><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/4faqHgQSawd4VzAtSv0IWDddm9NucYWibRpxejWPH5RUO310qv8pAFmc0rh0Qu6QiahlTutGZpia8VaqP2w6icybiag/132" width="30px"><span>çˆ±ç¼–ç¨‹çš„è¿ç»´</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<div>è€å¸ˆï¼Œä½ ä¸Šé¢çš„ä»£ç æ€ä¹ˆæµ‹è¯•å•Šï¼Ÿ
æˆ‘æ–°å»ºäº†ä¸€ä¸ªtest.goæ–‡ä»¶ï¼Œç„¶åæŠŠä»£ç å¤åˆ¶è¿›å»ï¼Œå†åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š go test -gcflags &quot;-N -l&quot;   -bench=. 
æç¤ºï¼š?       gitee.com&#47;qiankai_git&#47;crawler.git       [no test files]</div>2023-04-12</li><br/><li><img src="https://static001.geekbang.org/account/avatar/00/1b/5f/57/791d0f5e.jpg" width="30px"><span>Geek_8ed998</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<div>è¿™ä¸ªæ¥å£ä¸æ˜¯å®ç°çš„insertæ–¹æ³•å—ï¼Œæ€ä¹ˆåˆå¯ä»¥è°ƒç”¨creaté˜¿
</div>2023-02-23</li><br/>
</ul>