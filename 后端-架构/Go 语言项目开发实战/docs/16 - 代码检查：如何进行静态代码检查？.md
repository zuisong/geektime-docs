ä½ å¥½ï¼Œæˆ‘æ˜¯å­”ä»¤é£ã€‚ä¸Šä¸€è®²ä¸­ï¼Œæˆ‘åœ¨è®²ä»£ç å¼€å‘çš„å…·ä½“æ­¥éª¤æ—¶ï¼Œæåˆ°äº†é™æ€ä»£ç æ£€æŸ¥ï¼Œä»Šå¤©æˆ‘å°±æ¥è¯¦ç»†è®²è®²å¦‚ä½•æ‰§è¡Œé™æ€ä»£ç æ£€æŸ¥ã€‚

åœ¨åšGoé¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦å¯¹Goä»£ç åšé™æ€ä»£ç æ£€æŸ¥ã€‚è™½ç„¶Goå‘½ä»¤æä¾›äº†go vetå’Œgo tool vetï¼Œä½†æ˜¯å®ƒä»¬æ£€æŸ¥çš„å†…å®¹è¿˜ä¸å¤Ÿå…¨é¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å¼ºå¤§çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚

å…¶å®ï¼ŒGoç”Ÿæ€ä¸­æœ‰å¾ˆå¤šè¿™æ ·çš„å·¥å…·ï¼Œä¹Ÿä¸ä¹ä¸€äº›æ¯”è¾ƒä¼˜ç§€çš„ã€‚ä»Šå¤©æˆ‘æƒ³ç»™ä½ ä»‹ç»çš„golangci-lintï¼Œæ˜¯ç›®å‰ä½¿ç”¨æœ€å¤šï¼Œä¹Ÿæœ€å—æ¬¢è¿çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œæˆ‘ä»¬çš„IAMå®æˆ˜é¡¹ç›®ä¹Ÿç”¨åˆ°äº†å®ƒã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘å°±ä»golangci-lintçš„ä¼˜ç‚¹ã€golangci-lintæä¾›çš„å‘½ä»¤å’Œé€‰é¡¹ã€golangci-lintçš„é…ç½®è¿™ä¸‰ä¸ªæ–¹é¢æ¥å‘ä½ ä»‹ç»ä¸‹å®ƒã€‚åœ¨ä½ äº†è§£è¿™äº›åŸºç¡€çŸ¥è¯†åï¼Œæˆ‘ä¼šå¸¦ç€ä½ ä½¿ç”¨golangci-lintè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼Œè®©ä½ ç†Ÿæ‚‰æ“ä½œï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œå†æŠŠæˆ‘ä½¿ç”¨golangci-lintæ—¶æ€»ç»“çš„ä¸€äº›ç»éªŒæŠ€å·§åˆ†äº«ç»™ä½ ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹©golangci-lintåšé™æ€ä»£ç æ£€æŸ¥ï¼Ÿ

é€‰æ‹©golangci-lintï¼Œæ˜¯å› ä¸ºå®ƒå…·æœ‰å…¶ä»–é™æ€ä»£ç æ£€æŸ¥å·¥å…·ä¸å…·å¤‡çš„ä¸€äº›ä¼˜ç‚¹ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œå®ƒçš„æ ¸å¿ƒä¼˜ç‚¹è‡³å°‘æœ‰è¿™äº›ï¼š

- é€Ÿåº¦éå¸¸å¿«ï¼šgolangci-lintæ˜¯åŸºäºgometalinterå¼€å‘çš„ï¼Œä½†æ˜¯å¹³å‡é€Ÿåº¦è¦æ¯”gometalinterå¿«5å€ã€‚golangci-linté€Ÿåº¦å¿«çš„åŸå› æœ‰ä¸‰ä¸ªï¼šå¯ä»¥å¹¶è¡Œæ£€æŸ¥ä»£ç ï¼›å¯ä»¥å¤ç”¨go buildç¼“å­˜ï¼›ä¼šç¼“å­˜åˆ†æç»“æœã€‚
- å¯é…ç½®ï¼šæ”¯æŒYAMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè®©æ£€æŸ¥æ›´çµæ´»ï¼Œæ›´å¯æ§ã€‚
- IDEé›†æˆï¼šå¯ä»¥é›†æˆè¿›å¤šä¸ªä¸»æµçš„IDEï¼Œä¾‹å¦‚ VS Codeã€GNU Emacsã€Sublime Textã€Golandç­‰ã€‚
- linterèšåˆå™¨ï¼š1.41.1ç‰ˆæœ¬çš„golangci-linté›†æˆäº†76ä¸ªlinterï¼Œä¸éœ€è¦å†å•ç‹¬å®‰è£…è¿™76ä¸ªlinterã€‚å¹¶ä¸”golangci-lintè¿˜æ”¯æŒè‡ªå®šä¹‰linterã€‚
- æœ€å°çš„è¯¯æŠ¥æ•°ï¼šgolangci-lintè°ƒæ•´äº†æ‰€é›†æˆlinterçš„é»˜è®¤è®¾ç½®ï¼Œå¤§å¹…åº¦å‡å°‘äº†è¯¯æŠ¥ã€‚
- è‰¯å¥½çš„è¾“å‡ºï¼šè¾“å‡ºçš„ç»“æœå¸¦æœ‰é¢œè‰²ã€ä»£ç è¡Œå·å’Œlinteræ ‡è¯†ï¼Œæ˜“äºæŸ¥çœ‹å’Œå®šä½ã€‚

ä¸‹å›¾æ˜¯ä¸€ä¸ªgolangci-lintçš„æ£€æŸ¥ç»“æœï¼š

![](https://static001.geekbang.org/resource/image/ed/d4/ed9c1d775e31a8a5b60a5a6882d0bed4.png?wh=2527x563)

ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¾“å‡ºçš„æ£€æŸ¥ç»“æœä¸­åŒ…æ‹¬å¦‚ä¸‹ä¿¡æ¯ï¼š

- æ£€æŸ¥å‡ºé—®é¢˜çš„æºç æ–‡ä»¶ã€è¡Œå·å’Œé”™è¯¯è¡Œå†…å®¹ã€‚
- å‡ºé—®é¢˜çš„åŸå› ï¼Œä¹Ÿå°±æ˜¯æ‰“å°å‡ºä¸ç¬¦åˆæ£€æŸ¥è§„åˆ™çš„åŸå› ã€‚
- æŠ¥é”™çš„linterã€‚

é€šè¿‡æŸ¥çœ‹golangci-lintçš„è¾“å‡ºç»“æœï¼Œå¯ä»¥å‡†ç¡®åœ°å®šä½åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œå¿«é€Ÿå¼„æ˜ç™½æŠ¥é”™çš„åŸå› ï¼Œæ–¹ä¾¿å¼€å‘è€…ä¿®å¤ã€‚

é™¤äº†ä¸Šè¿°ä¼˜ç‚¹ä¹‹å¤–ï¼Œåœ¨æˆ‘çœ‹æ¥golangci-lintè¿˜æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ä¼˜ç‚¹ï¼š**å½“å‰æ›´æ–°è¿­ä»£é€Ÿåº¦å¾ˆå¿«ï¼Œä¸æ–­æœ‰æ–°çš„linterè¢«é›†æˆåˆ°golangci-lintä¸­ã€‚**æœ‰è¿™ä¹ˆå…¨çš„linterä¸ºä½ çš„ä»£ç ä¿é©¾æŠ¤èˆªï¼Œä½ åœ¨äº¤ä»˜ä»£ç æ—¶è‚¯å®šä¼šæ›´æœ‰è‡ªä¿¡ã€‚

ç›®å‰ï¼Œæœ‰å¾ˆå¤šå…¬å¸/é¡¹ç›®ä½¿ç”¨äº†golangci-lintå·¥å…·ä½œä¸ºé™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä¾‹å¦‚ Googleã€Facebookã€Istioã€Red Hat OpenShiftç­‰ã€‚

## golangci-lintæä¾›äº†å“ªäº›å‘½ä»¤å’Œé€‰é¡¹ï¼Ÿ

åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦**å®‰è£…golangci-lint**ã€‚golangci-lintçš„å®‰è£…æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½ åªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥å®‰è£…äº†ã€‚

```
$ go get github.com/golangci/golangci-lint/cmd/golangci-lint@v1.41.1
$ golangci-lint version # è¾“å‡º golangci-lint ç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ
golangci-lint has version v1.39.0 built from (unknown, mod sum: "h1:aAUjdBxARwkGLd5PU0vKuym281f2rFOyqh3GB4nXcq8=") on (unknown)
```

è¿™é‡Œæ³¨æ„ï¼Œä¸ºäº†é¿å…å®‰è£…å¤±è´¥ï¼Œå¼ºçƒˆå»ºè®®ä½ å®‰è£…golangci-lint releases pageä¸­çš„æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ v1.41.1ã€‚

å¦å¤–ï¼Œè¿˜å»ºè®®ä½ å®šæœŸæ›´æ–° golangci-lint çš„ç‰ˆæœ¬ï¼Œå› ä¸ºè¯¥é¡¹ç›®æ­£åœ¨è¢«ç§¯æå¼€å‘å¹¶ä¸æ–­æ”¹è¿›ã€‚

å®‰è£…ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œ `golangci-lint -h` æŸ¥çœ‹å…¶ç”¨æ³•ï¼Œgolangci-lintæ”¯æŒçš„**å­å‘½ä»¤**è§ä¸‹è¡¨ï¼š

![](https://static001.geekbang.org/resource/image/34/42/34617a68604b7b5613948f89230c7a42.png?wh=1376x1015)

æ­¤å¤–ï¼Œgolangci-lintè¿˜æ”¯æŒä¸€äº›**å…¨å±€é€‰é¡¹**ã€‚å…¨å±€é€‰é¡¹æ˜¯æŒ‡é€‚ç”¨äºæ‰€æœ‰å­å‘½ä»¤çš„é€‰é¡¹ï¼Œgolangci-lintæ”¯æŒçš„å…¨å±€é€‰é¡¹å¦‚ä¸‹ï¼š

![](https://static001.geekbang.org/resource/image/79/88/79e517e6a7fd3882ce30320f28aa7088.png?wh=1339x1063)

æ¥ä¸‹æ¥ï¼Œæˆ‘å°±è¯¦ç»†ä»‹ç»ä¸‹golangci-lintæ”¯æŒçš„æ ¸å¿ƒå­å‘½ä»¤ï¼šrunã€cacheã€completionã€configã€lintersã€‚

### runå‘½ä»¤

runå‘½ä»¤æ‰§è¡Œgolangci-lintï¼Œå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¯golangci-lintæœ€ä¸ºæ ¸å¿ƒçš„ä¸€ä¸ªå‘½ä»¤ã€‚runæ²¡æœ‰å­å‘½ä»¤ï¼Œä½†æœ‰å¾ˆå¤šé€‰é¡¹ã€‚runå‘½ä»¤çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä¼šåœ¨è®²è§£å¦‚ä½•æ‰§è¡Œé™æ€ä»£ç æ£€æŸ¥çš„æ—¶å€™è¯¦ç»†ä»‹ç»ã€‚

### cacheå‘½ä»¤

cacheå‘½ä»¤ç”¨æ¥è¿›è¡Œç¼“å­˜æ§åˆ¶ï¼Œå¹¶æ‰“å°ç¼“å­˜çš„ä¿¡æ¯ã€‚å®ƒåŒ…å«ä¸¤ä¸ªå­å‘½ä»¤ï¼š

- cleanç”¨æ¥æ¸…é™¤cacheï¼Œå½“æˆ‘ä»¬è§‰å¾—cacheçš„å†…å®¹å¼‚å¸¸ï¼Œæˆ–è€…cacheå ç”¨ç©ºé—´è¿‡å¤§æ—¶ï¼Œå¯ä»¥é€šè¿‡`golangci-lint cache clean`æ¸…é™¤cacheã€‚
- statusç”¨æ¥æ‰“å°cacheçš„çŠ¶æ€ï¼Œæ¯”å¦‚cacheçš„å­˜æ”¾ç›®å½•å’Œcacheçš„å¤§å°ï¼Œä¾‹å¦‚ï¼š

```
$ golangci-lint cache status
Dir: /home/colin/.cache/golangci-lint
Size: 773.4KiB
```

### completionå‘½ä»¤

completionå‘½ä»¤åŒ…å«4ä¸ªå­å‘½ä»¤bashã€fishã€powershellå’Œzshï¼Œåˆ†åˆ«ç”¨æ¥è¾“å‡ºbashã€fishã€powershellå’Œzshçš„è‡ªåŠ¨è¡¥å…¨è„šæœ¬ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®bashè‡ªåŠ¨è¡¥å…¨çš„ç¤ºä¾‹ï¼š

```
$ golangci-lint completion bash > ~/.golangci-lint.bash
$ echo "source '$HOME/.golangci-lint.bash'" >> ~/.bashrc
$ source ~/.bashrc
```

æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼Œé”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯è‡ªåŠ¨è¡¥å…¨å­å‘½ä»¤ï¼š

```
$ golangci-lint comp<TAB>
```

ä¸Šé¢çš„å‘½ä»¤è¡Œä¼šè‡ªåŠ¨è¡¥å…¨ä¸º`golangci-lint completion` ã€‚

### configå‘½ä»¤

configå‘½ä»¤å¯ä»¥æ‰“å°golangci-lintå½“å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä¾‹å¦‚ï¼š

```
$ golangci-lint config path
.golangci.yaml
```

### linterså‘½ä»¤

linterså‘½ä»¤å¯ä»¥æ‰“å°å‡ºgolangci-lintæ‰€æ”¯æŒçš„linterï¼Œå¹¶å°†è¿™äº›linteråˆ†æˆä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯é…ç½®ä¸ºå¯ç”¨çš„linterå’Œé…ç½®ä¸ºç¦ç”¨çš„linterï¼Œä¾‹å¦‚ï¼š

```
$ golangci-lint linters
Enabled by your configuration linters:
...
deadcode: Finds unused code [fast: true, auto-fix: false]
...
Disabled by your configuration linters:
exportloopref: checks for pointers to enclosing loop variables [fast: true, auto-fix: false]
...
```

ä¸Šé¢æˆ‘ä»‹ç»äº†golangci-lintæä¾›çš„å‘½ä»¤ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹golangci-lintçš„é…ç½®ã€‚

## golangci-linté…ç½®

å’Œå…¶ä»–linterç›¸æ¯”ï¼Œgolangci-lintä¸€ä¸ªéå¸¸å¤§çš„ä¼˜ç‚¹æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸çµæ´»ï¼Œè¿™è¦å¾—ç›Šäºå®ƒå¯¹è‡ªå®šä¹‰é…ç½®çš„æ”¯æŒã€‚

golangci-lintæ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœbool/string/intçš„é€‰é¡¹åŒæ—¶åœ¨å‘½ä»¤è¡Œé€‰é¡¹å’Œé…ç½®æ–‡ä»¶ä¸­è¢«æŒ‡å®šï¼Œå‘½ä»¤è¡Œçš„é€‰é¡¹å°±ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„é€‰é¡¹ã€‚å¦‚æœæ˜¯sliceç±»å‹çš„é€‰é¡¹ï¼Œåˆ™å‘½ä»¤è¡Œå’Œé…ç½®ä¸­çš„é…ç½®ä¼šè¿›è¡Œåˆå¹¶ã€‚

`golangci-lint run` æ”¯æŒå¾ˆå¤š**å‘½ä»¤è¡Œé€‰é¡¹**ï¼Œå¯é€šè¿‡`golangci-lint run -h`æŸ¥çœ‹ï¼Œè¿™é‡Œé€‰æ‹©ä¸€äº›æ¯”è¾ƒé‡è¦çš„é€‰é¡¹è¿›è¡Œä»‹ç»ï¼Œè§ä¸‹è¡¨ï¼š

![](https://static001.geekbang.org/resource/image/ac/fa/ac6098cf64cde7b8326cfd3508b04dfa.jpg?wh=2284x3988)

æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡golangci-lint**é…ç½®æ–‡ä»¶**è¿›è¡Œé…ç½®ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶åä¸º.golangci.yamlã€.golangci.tomlã€.golangci.jsonï¼Œå¯ä»¥é€šè¿‡`-c`é€‰é¡¹æŒ‡å®šé…ç½®æ–‡ä»¶åã€‚é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å®ç°ä¸‹é¢å‡ ç±»åŠŸèƒ½ï¼š

- golangci-lintæœ¬èº«çš„ä¸€äº›é€‰é¡¹ï¼Œæ¯”å¦‚è¶…æ—¶ã€å¹¶å‘ï¼Œæ˜¯å¦æ£€æŸ¥`*_test.go`æ–‡ä»¶ç­‰ã€‚
- é…ç½®éœ€è¦å¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚
- é…ç½®å¯ç”¨å“ªäº›linterï¼Œç¦ç”¨å“ªäº›linterã€‚
- é…ç½®è¾“å‡ºæ ¼å¼ã€‚
- golangci-lintæ”¯æŒå¾ˆå¤šlinterï¼Œå…¶ä¸­æœ‰äº›linteræ”¯æŒä¸€äº›é…ç½®é¡¹ï¼Œè¿™äº›é…ç½®é¡¹å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚
- é…ç½®ç¬¦åˆæŒ‡å®šæ­£åˆ™è§„åˆ™çš„æ–‡ä»¶å¯ä»¥å¿½ç•¥çš„linterã€‚
- è®¾ç½®é”™è¯¯ä¸¥é‡çº§åˆ«ï¼Œåƒæ—¥å¿—ä¸€æ ·ï¼Œæ£€æŸ¥é”™è¯¯ä¹Ÿæ˜¯æœ‰ä¸¥é‡çº§åˆ«çš„ã€‚

æ›´è¯¦ç»†çš„é…ç½®å†…å®¹ï¼Œä½ å¯ä»¥å‚è€ƒ[Configuration](https://golangci-lint.run/usage/configuration/)ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒIAMé¡¹ç›®çš„golangci-linté…ç½®[.golangci.yaml](https://github.com/marmotedu/iam/blob/master/.golangci.yaml)ã€‚.golangci.yamlé‡Œé¢çš„ä¸€äº›é…ç½®ï¼Œæˆ‘å»ºè®®ä½ ä¸€å®šè¦è®¾ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

```
run:
  skip-dirs: # è®¾ç½®è¦å¿½ç•¥çš„ç›®å½•
    - util
    - .*~
    - api/swagger/docs
  skip-files: # è®¾ç½®ä¸éœ€è¦æ£€æŸ¥çš„goæºç æ–‡ä»¶ï¼Œæ”¯æŒæ­£åˆ™åŒ¹é…ï¼Œè¿™é‡Œå»ºè®®åŒ…æ‹¬ï¼š_test.go
    - ".*\\.my\\.go$"
    - _test.go
linters-settings:
  errcheck:
    check-type-assertions: true # è¿™é‡Œå»ºè®®è®¾ç½®ä¸ºtrueï¼Œå¦‚æœç¡®å®ä¸éœ€è¦æ£€æŸ¥ï¼Œå¯ä»¥å†™æˆ`num, _ := strconv.Atoi(numStr)`
    check-blank: false
  gci:
    # å°†ä»¥`github.com/marmotedu/iam`å¼€å¤´çš„åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢
    local-prefixes: github.com/marmotedu/iam
  godox:
    keywords: # å»ºè®®è®¾ç½®ä¸ºBUGã€FIXMEã€OPTIMIZEã€HACK
      - BUG
      - FIXME
      - OPTIMIZE
      - HACK
  goimports:
    # è®¾ç½®å“ªäº›åŒ…æ”¾åœ¨ç¬¬ä¸‰æ–¹åŒ…åé¢ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªåŒ…ï¼Œé€—å·éš”å¼€
    local-prefixes: github.com/marmotedu/iam
  gomoddirectives: # è®¾ç½®å…è®¸åœ¨go.modä¸­replaceçš„åŒ…
    replace-local: true
    replace-allow-list:
      - github.com/coreos/etcd
      - google.golang.org/grpc
      - github.com/marmotedu/api
      - github.com/marmotedu/component-base
      - github.com/marmotedu/marmotedu-sdk-go
  gomodguard: # ä¸‹é¢æ˜¯æ ¹æ®éœ€è¦é€‰æ‹©å¯ä»¥ä½¿ç”¨çš„åŒ…å’Œç‰ˆæœ¬ï¼Œå»ºè®®è®¾ç½®
    allowed:
      modules:
        - gorm.io/gorm
        - gorm.io/driver/mysql
        - k8s.io/klog
      domains: # List of allowed module domains
        - google.golang.org
        - gopkg.in
        - golang.org
        - github.com
        - go.uber.org
    blocked:
      modules:
        - github.com/pkg/errors:
            recommendations:
              - github.com/marmotedu/errors
            reason: "`github.com/marmotedu/errors` is the log package used by marmotedu projects."
      versions:
        - github.com/MakeNowJust/heredoc:
            version: "> 2.0.9"
            reason: "use the latest version"
      local_replace_directives: false
  lll:
    line-length: 240 # è¿™é‡Œå¯ä»¥è®¾ç½®ä¸º240ï¼Œ240ä¸€èˆ¬æ˜¯å¤Ÿç”¨çš„
  importas: # è®¾ç½®åŒ…çš„aliasï¼Œæ ¹æ®éœ€è¦è®¾ç½®
    jwt: github.com/appleboy/gin-jwt/v2         
    metav1: github.com/marmotedu/component-base/pkg/meta/v1
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œgolangci-lintä¸å»ºè®®ä½¿ç”¨ `enable-all: true` é€‰é¡¹ï¼Œä¸ºäº†å°½å¯èƒ½ä½¿ç”¨æœ€å…¨çš„lintersï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š

```
linters: 
  disable-all: true  
  enable: # enableä¸‹åˆ—å‡º <æœŸæœ›çš„æ‰€æœ‰linters>
    - typecheck
    - ... 
```

`<æœŸæœ›çš„æ‰€æœ‰linters> = <golangci-lintæ”¯æŒçš„æ‰€æœ‰linters> - <ä¸æœŸæœ›æ‰§è¡Œçš„linters>`ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è·å–ï¼š

```
$ ./scripts/print_enable_linters.sh
    - asciicheck
    - bodyclose
    - cyclop
    - deadcode
    - ...
```

å°†ä»¥ä¸Šè¾“å‡ºç»“æœæ›¿æ¢æ‰.golangci.yamlé…ç½®æ–‡ä»¶ä¸­çš„ `linters.enable` éƒ¨åˆ†å³å¯ã€‚

ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†ä¸golangci-lintç›¸å…³çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥æˆ‘å°±ç»™ä½ è¯¦ç»†å±•ç¤ºä¸‹ï¼Œå¦‚ä½•ä½¿ç”¨golangci-lintè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ã€‚

## å¦‚ä½•ä½¿ç”¨golangci-lintè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼Ÿ

è¦å¯¹ä»£ç è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œåªéœ€è¦æ‰§è¡Œ `golangci-lint run` å‘½ä»¤å³å¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šå…ˆç»™ä½ ä»‹ç»5ç§å¸¸è§çš„golangci-lintä½¿ç”¨æ–¹æ³•ã€‚

1. å¯¹å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š

```
$ golangci-lint run
```

å‘½ä»¤ç­‰æ•ˆäº`golangci-lint run ./...`ã€‚

2. å¯¹æŒ‡å®šçš„Goæ–‡ä»¶æˆ–è€…æŒ‡å®šç›®å½•ä¸‹çš„Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š

```
$ golangci-lint run dir1 dir2/... dir3/file1.go
```

è¿™é‡Œéœ€è¦ä½ æ³¨æ„ï¼šä¸Šè¿°å‘½ä»¤ä¸ä¼šæ£€æŸ¥dir1ä¸‹å­ç›®å½•çš„Goæ–‡ä»¶ï¼Œå¦‚æœæƒ³é€’å½’åœ°æ£€æŸ¥ä¸€ä¸ªç›®å½•ï¼Œéœ€è¦åœ¨ç›®å½•åé¢è¿½åŠ `/...`ï¼Œä¾‹å¦‚ï¼š`dir2/...`ã€‚

3. æ ¹æ®æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š

```
$ golangci-lint run -c .golangci.yaml ./...
```

4. è¿è¡ŒæŒ‡å®šçš„linterï¼š

golangci-lintå¯ä»¥åœ¨ä¸æŒ‡å®šä»»ä½•é…ç½®æ–‡ä»¶çš„æƒ…å†µä¸‹è¿è¡Œï¼Œè¿™ä¼šè¿è¡Œé»˜è®¤å¯ç”¨çš„linterï¼Œä½ å¯ä»¥é€šè¿‡`golangci-lint help linters`æŸ¥çœ‹å®ƒã€‚

ä½ å¯ä»¥ä¼ å…¥å‚æ•°`-E/--enable`æ¥ä½¿æŸä¸ªlinterå¯ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`-D/--disable`å‚æ•°æ¥ä½¿æŸä¸ªlinterä¸å¯ç”¨ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»…ä»…å¯ç”¨äº†errcheck linterï¼š

```
$ golangci-lint run --no-config --disable-all -E errcheck ./...
```

è¿™é‡Œä½ éœ€è¦æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œgolangci-lintä¼šä»å½“å‰ç›®å½•ä¸€å±‚å±‚å¾€ä¸Šå¯»æ‰¾é…ç½®æ–‡ä»¶å`.golangci.yaml`ã€`.golangci.toml`ã€`.golangci.json`ç›´åˆ°æ ¹ï¼ˆ/ï¼‰ç›®å½•ã€‚å¦‚æœæ‰¾åˆ°ï¼Œå°±ä»¥æ‰¾åˆ°çš„é…ç½®æ–‡ä»¶ä½œä¸ºæœ¬æ¬¡è¿è¡Œçš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢è¯»å–åˆ°æœªçŸ¥çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ `--no-config` å‚æ•°ä½¿golangci-lintä¸è¯»å–ä»»ä½•é…ç½®æ–‡ä»¶ã€‚

5. ç¦æ­¢è¿è¡ŒæŒ‡å®šçš„linerï¼š

å¦‚æœæˆ‘ä»¬æƒ³ç¦ç”¨æŸäº›linterï¼Œå¯ä»¥ä½¿ç”¨`-D`é€‰é¡¹ã€‚

```
$ golangci-lint run --no-config -D godot,errcheck
```

åœ¨ä½¿ç”¨golangci-lintè¿›è¡Œä»£ç æ£€æŸ¥æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šè¯¯æŠ¥ã€‚æ‰€è°“çš„è¯¯æŠ¥ï¼Œå…¶å®æ˜¯æˆ‘ä»¬å¸Œæœ›golangci-lintçš„ä¸€äº›linterèƒ½å¤Ÿå®¹å¿æŸäº›issueã€‚é‚£ä¹ˆå¦‚ä½•å°½å¯èƒ½å‡å°‘è¯¯æŠ¥å‘¢ï¼Ÿgolangci-lintä¹Ÿæä¾›äº†ä¸€äº›é€”å¾„ï¼Œæˆ‘å»ºè®®ä½ ä½¿ç”¨ä¸‹é¢è¿™ä¸‰ç§ï¼š

- åœ¨å‘½ä»¤è¡Œä¸­æ·»åŠ `-e`å‚æ•°ï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶çš„`issues.exclude`éƒ¨åˆ†è®¾ç½®è¦æ’é™¤çš„æ£€æŸ¥é”™è¯¯ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`issues.exclude-rules`æ¥é…ç½®å“ªäº›æ–‡ä»¶å¿½ç•¥å“ªäº›linterã€‚
- é€šè¿‡`run.skip-dirs`ã€`run.skip-files`æˆ–è€…`issues.exclude-rules`é…ç½®é¡¹ï¼Œæ¥å¿½ç•¥æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰Goæ–‡ä»¶ï¼Œæˆ–è€…æŒ‡å®šçš„Goæ–‡ä»¶ã€‚
- é€šè¿‡åœ¨Goæºç æ–‡ä»¶ä¸­æ·»åŠ `//nolint`æ³¨é‡Šï¼Œæ¥å¿½ç•¥æŒ‡å®šçš„ä»£ç è¡Œã€‚

å› ä¸ºgolangci-lintè®¾ç½®äº†å¾ˆå¤šlintersï¼Œå¯¹äºä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œå¯ç”¨æ‰€æœ‰çš„linterä¼šæ£€æŸ¥å‡ºå¾ˆå¤šé—®é¢˜ï¼Œå¹¶ä¸”æ¯ä¸ªé¡¹ç›®å¯¹linteræ£€æŸ¥çš„ç²’åº¦è¦æ±‚ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥glangci-lint**ä½¿ç”¨nolintæ ‡è®°æ¥å¼€å…³æŸäº›æ£€æŸ¥é¡¹**ï¼Œä¸åŒä½ç½®çš„nolintæ ‡è®°æ•ˆæœä¹Ÿä¼šä¸ä¸€æ ·ã€‚æ¥ä¸‹æ¥æˆ‘æƒ³å‘ä½ ä»‹ç»nolintçš„å‡ ç§ç”¨æ³•ã€‚

1. å¿½ç•¥æŸä¸€è¡Œæ‰€æœ‰linterçš„æ£€æŸ¥

```
var bad_name int //nolint
```

2. å¿½ç•¥æŸä¸€è¡ŒæŒ‡å®šlinterçš„æ£€æŸ¥ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªlinterï¼Œç”¨é€—å· `,` éš”å¼€ã€‚

```
var bad_name int //nolint:golint,unused
```

3. å¿½ç•¥æŸä¸ªä»£ç å—çš„æ£€æŸ¥ã€‚

```
//nolint
func allIssuesInThisFunctionAreExcluded() *string {
  // ...
}

//nolint:govet
var (
  a int
  b int
)
```

4. å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æŒ‡å®šlinteræ£€æŸ¥ã€‚

åœ¨package xx ä¸Šé¢ä¸€è¡Œæ·»åŠ `//nolint`æ³¨é‡Šã€‚

```
//nolint:unparam
package pkg
...
```

åœ¨ä½¿ç”¨nolintçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰3ä¸ªåœ°æ–¹éœ€è¦ä½ æ³¨æ„ã€‚

é¦–å…ˆï¼Œå¦‚æœå¯ç”¨äº†nolintlintï¼Œä½ å°±éœ€è¦åœ¨`//nolint`åé¢æ·»åŠ nolintçš„åŸå› `// xxxx`ã€‚

å…¶æ¬¡ï¼Œä½ ä½¿ç”¨çš„åº”è¯¥æ˜¯`//nolint`è€Œä¸æ˜¯`// nolint`ã€‚å› ä¸ºæ ¹æ®Goçš„è§„èŒƒï¼Œéœ€è¦ç¨‹åºè¯»å–çš„æ³¨é‡Š//åé¢ä¸åº”è¯¥æœ‰ç©ºæ ¼ã€‚

æœ€åï¼Œå¦‚æœè¦å¿½ç•¥æ‰€æœ‰linterï¼Œå¯ä»¥ç”¨`//nolint`ï¼›å¦‚æœè¦å¿½ç•¥æŸä¸ªæŒ‡å®šçš„linterï¼Œå¯ä»¥ç”¨`//nolint:<linter1>,<linter2>`ã€‚

## golangci-lintä½¿ç”¨æŠ€å·§

æˆ‘åœ¨ä½¿ç”¨golangci-lintæ—¶ï¼Œæ€»ç»“äº†ä¸€äº›ç»éªŒæŠ€å·§ï¼Œæ”¾åœ¨è¿™é‡Œä¾›ä½ å‚è€ƒï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨golangci-lintã€‚

**æŠ€å·§1ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå¯ä»¥æŒ‰ç›®å½•ä¿®æ”¹ã€‚**

å¦‚æœä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨golangci-lintæ£€æŸ¥ä½ çš„ä»£ç ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šé”™è¯¯ã€‚ä¸ºäº†å‡è½»ä¿®æ”¹çš„å‹åŠ›ï¼Œå¯ä»¥æŒ‰ç›®å½•æ£€æŸ¥ä»£ç å¹¶ä¿®æ”¹ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘å¤±è´¥æ¡æ•°ï¼Œå‡è½»ä¿®æ”¹å‹åŠ›ã€‚

å½“ç„¶ï¼Œå¦‚æœé”™è¯¯å¤ªå¤šï¼Œä¸€æ—¶åŠä¼šå„¿æ”¹ä¸å®Œï¼Œæƒ³ä»¥åæ…¢æ…¢ä¿®æ”¹æˆ–è€…å¹²è„†ä¸ä¿®å¤å­˜é‡çš„issuesï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨golangci-lintçš„ `--new-from-rev` é€‰é¡¹ï¼Œåªæ£€æŸ¥æ–°å¢çš„codeï¼Œä¾‹å¦‚ï¼š

```
$ golangci-lint run --new-from-rev=HEAD~1
```

**æŠ€å·§2ï¼šæŒ‰æ–‡ä»¶ä¿®æ”¹ï¼Œå‡å°‘æ–‡ä»¶åˆ‡æ¢æ¬¡æ•°ï¼Œæé«˜ä¿®æ”¹æ•ˆç‡ã€‚**

å¦‚æœæœ‰å¾ˆå¤šæ£€æŸ¥é”™è¯¯ï¼Œæ¶‰åŠå¾ˆå¤šæ–‡ä»¶ï¼Œå»ºè®®å…ˆä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å°±ä¸ç”¨æ¥å›åˆ‡æ¢æ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡grepè¿‡æ»¤å‡ºæŸä¸ªæ–‡ä»¶çš„æ£€æŸ¥å¤±è´¥é¡¹ï¼Œä¾‹å¦‚ï¼š

```
$ golangci-lint run ./...|grep pkg/storage/redis_cluster.go
pkg/storage/redis_cluster.go:16:2: "github.com/go-redis/redis/v7" imported but not used (typecheck)
pkg/storage/redis_cluster.go:82:28: undeclared name: `redis` (typecheck)
pkg/storage/redis_cluster.go:86:14: undeclared name: `redis` (typecheck)
...
```

**æŠ€å·§3ï¼šæŠŠlinters-setting.lll.line-lengthè®¾ç½®å¾—å¤§ä¸€äº›ã€‚**

åœ¨Goé¡¹ç›®å¼€å‘ä¸­ï¼Œä¸ºäº†æ˜“äºé˜…è¯»ä»£ç ï¼Œé€šå¸¸ä¼šå°†å˜é‡å/å‡½æ•°/å¸¸é‡ç­‰å‘½åå¾—æœ‰æ„ä¹‰ï¼Œè¿™æ ·å¾ˆå¯èƒ½å¯¼è‡´æ¯è¡Œçš„ä»£ç é•¿åº¦è¿‡é•¿ï¼Œå¾ˆå®¹æ˜“è¶…è¿‡`lll` linterè®¾ç½®çš„é»˜è®¤æœ€å¤§é•¿åº¦80ã€‚è¿™é‡Œå»ºè®®å°†`linters-setting.lll.line-length`è®¾ç½®ä¸º120/240ã€‚

**æŠ€å·§4ï¼šå°½å¯èƒ½å¤šåœ°ä½¿ç”¨golangci-lintæä¾›çš„linterã€‚**

golangci-linté›†æˆäº†å¾ˆå¤šlintersï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š

```
$ golangci-lint linters
Enabled by your configuration linters:
deadcode: Finds unused code [fast: true, auto-fix: false]
...
varcheck: Finds unused global variables and constants [fast: true, auto-fix: false]

Disabled by your configuration linters:
asciicheck: Simple linter to check that your code does not contain non-ASCII identifiers [fast: true, auto-fix: false]
...
wsl: Whitespace Linter - Forces you to use empty lines! [fast: true, auto-fix: false]
```

è¿™äº›linteråˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯é»˜è®¤å¯ç”¨çš„ï¼Œå¦ä¸€ç±»æ˜¯é»˜è®¤ç¦ç”¨çš„ã€‚æ¯ä¸ªlinteréƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼š

- fastï¼štrue/falseï¼Œå¦‚æœä¸ºtrueï¼Œè¯´æ˜è¯¥linterå¯ä»¥ç¼“å­˜ç±»å‹ä¿¡æ¯ï¼Œæ”¯æŒå¿«é€Ÿæ£€æŸ¥ã€‚å› ä¸ºç¬¬ä¸€æ¬¡ç¼“å­˜äº†è¿™äº›ä¿¡æ¯ï¼Œæ‰€ä»¥åç»­çš„è¿è¡Œä¼šéå¸¸å¿«ã€‚
- auto-fixï¼štrue/falseï¼Œå¦‚æœä¸ºtrueè¯´æ˜è¯¥linteræ”¯æŒè‡ªåŠ¨ä¿®å¤å‘ç°çš„é”™è¯¯ï¼›å¦‚æœä¸ºfalseè¯´æ˜ä¸æ”¯æŒè‡ªåŠ¨ä¿®å¤ã€‚

å¦‚æœé…ç½®äº†golangci-linté…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡å‘½ä»¤`golangci-lint help linters`æŸ¥çœ‹åœ¨å½“å‰é…ç½®ä¸‹å¯ç”¨å’Œç¦ç”¨äº†å“ªäº›linterã€‚golangci-lintä¹Ÿæ”¯æŒè‡ªå®šä¹‰linteræ’ä»¶ï¼Œå…·ä½“ä½ å¯ä»¥å‚è€ƒï¼š[New linters](https://golangci-lint.run/contributing/new-linters)ã€‚

åœ¨ä½¿ç”¨golangci-lintçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½å¤šçš„ä½¿ç”¨linterã€‚ä½¿ç”¨çš„linterè¶Šå¤šï¼Œè¯´æ˜æ£€æŸ¥è¶Šä¸¥æ ¼ï¼Œæ„å‘³ç€ä»£ç è¶Šè§„èŒƒï¼Œè´¨é‡è¶Šé«˜ã€‚å¦‚æœæ—¶é—´å’Œç²¾åŠ›å…è®¸ï¼Œå»ºè®®æ‰“å¼€golangci-lintæä¾›çš„æ‰€æœ‰linterã€‚

**æŠ€å·§5ï¼šæ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œéƒ½è¦æ‰§è¡Œgolangci-lintã€‚**

æ¯æ¬¡ä¿®æ”¹å®Œä»£ç åéƒ½è¦æ‰§è¡Œgolangci-lintï¼Œä¸€æ–¹é¢å¯ä»¥åŠæ—¶ä¿®æ”¹ä¸è§„èŒƒçš„åœ°æ–¹ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥å‡å°‘é”™è¯¯å †ç§¯ï¼Œå‡è½»åé¢çš„ä¿®æ”¹å‹åŠ›ã€‚

**æŠ€å·§6ï¼šå»ºè®®åœ¨æ ¹ç›®å½•ä¸‹æ”¾ä¸€ä¸ªé€šç”¨çš„golangci-linté…ç½®æ–‡ä»¶ã€‚**

åœ¨`/`ç›®å½•ä¸‹å­˜æ”¾é€šç”¨çš„golangci-linté…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è®©ä½ ä¸ç”¨ä¸ºæ¯ä¸€ä¸ªé¡¹ç›®éƒ½é…ç½®golangci-lintã€‚å½“ä½ éœ€è¦ä¸ºæŸä¸ªé¡¹ç›®å•ç‹¬é…ç½®golangci-lintæ—¶ï¼Œåªéœ€åœ¨è¯¥é¡¹ç›®æ ¹ç›®å½•ä¸‹å¢åŠ ä¸€ä¸ªé¡¹ç›®çº§åˆ«çš„golangci-linté…ç½®æ–‡ä»¶å³å¯ã€‚

## æ€»ç»“

Goé¡¹ç›®å¼€å‘ä¸­ï¼Œå¯¹ä»£ç è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥æ˜¯å¿…è¦çš„æ“ä½œã€‚å½“å‰æœ‰å¾ˆå¤šä¼˜ç§€çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ï¼Œä½†golangci-lintå› ä¸ºå…·æœ‰æ£€æŸ¥é€Ÿåº¦å¿«ã€å¯é…ç½®ã€å°‘è¯¯æŠ¥ã€å†…ç½®äº†å¤§é‡linterç­‰ä¼˜ç‚¹ï¼Œæˆä¸ºäº†ç›®å‰æœ€å—æ¬¢è¿çš„é™æ€ä»£ç æ£€æŸ¥å·¥å…·ã€‚

golangci-lintåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒè¯¸å¦‚runã€cacheã€completionã€lintersç­‰å‘½ä»¤ã€‚å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯runå‘½ä»¤ï¼Œrunå‘½ä»¤å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥ï¼š

```
$ golangci-lint run #  å¯¹å½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ‰€æœ‰Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥
$ golangci-lint run dir1 dir2/... dir3/file1.go # å¯¹æŒ‡å®šçš„Goæ–‡ä»¶æˆ–è€…æŒ‡å®šç›®å½•ä¸‹çš„Goæ–‡ä»¶è¿›è¡Œé™æ€ä»£ç æ£€æŸ¥
$ golangci-lint run -c .golangci.yaml ./... # æ ¹æ®æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œè¿›è¡Œé™æ€ä»£ç æ£€æŸ¥
$ golangci-lint run --no-config --disable-all -E errcheck ./... # è¿è¡ŒæŒ‡å®šçš„ errcheck linter
$ golangci-lint run --no-config -D godot,errcheck # ç¦æ­¢è¿è¡ŒæŒ‡å®šçš„godot,errcheck liner
```

æ­¤å¤–ï¼Œgolangci-lintè¿˜æ”¯æŒ `//nolint` ã€`//nolint:golint,unused` ç­‰æ–¹å¼æ¥å‡å°‘è¯¯æŠ¥ã€‚

æœ€åï¼Œæˆ‘åˆ†äº«äº†ä¸€äº›è‡ªå·±ä½¿ç”¨golangci-lintæ—¶æ€»ç»“çš„ç»éªŒã€‚ä¾‹å¦‚ï¼šç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå¯ä»¥æŒ‰ç›®å½•ä¿®æ”¹ï¼›æŒ‰æ–‡ä»¶ä¿®æ”¹ï¼Œå‡å°‘æ–‡ä»¶åˆ‡æ¢æ¬¡æ•°ï¼Œæé«˜ä¿®æ”¹æ•ˆç‡ï¼›å°½å¯èƒ½å¤šåœ°ä½¿ç”¨golangci-lintæä¾›çš„linterã€‚å¸Œæœ›è¿™äº›å»ºè®®å¯¹ä½ ä½¿ç”¨golangci-lintæœ‰ä¸€å®šå¸®åŠ©ã€‚

## è¯¾åç»ƒä¹ 

1. æ‰§è¡Œ`golangci-lint linters`å‘½ä»¤ï¼ŒæŸ¥çœ‹golangci-lintæ”¯æŒå“ªäº›linterï¼Œä»¥åŠè¿™äº›linterçš„ä½œç”¨ã€‚
2. æ€è€ƒä¸‹ï¼Œå¦‚ä½•åœ¨golangci-lintä¸­é›†æˆè‡ªå®šä¹‰çš„linterã€‚

å¦‚æœé‡åˆ°ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºä¸æˆ‘äº¤æµè®¨è®ºï¼Œæˆ‘ä»¬ä¸‹ä¸€è®²è§ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ12ï¼‰</strong></div><ul>
<li><span>helloworld</span> ğŸ‘ï¼ˆ11ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æˆ‘ä½¿ç”¨vim+ale+golangci-lintåšGoçš„é™æ€ä»£ç æ£€æŸ¥ï¼Œç¼–å†™ä»£ç çš„è¿‡ç¨‹ä¸­ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨è§¦å‘æ£€æŸ¥ï¼Œç¬¬ä¸€æ—¶é—´åœ¨æ–‡ä»¶å†…å°±ç»™å‡ºäº†é”™è¯¯æˆ–è­¦å‘Šçš„æç¤ºä¿¡æ¯ï¼Œç›´æ¥æŒ‰æç¤ºä¿®å¤å³å¯ï¼ŒåŸºæœ¬ä¸Šç”¨ä¸ç€åœ¨å‘½ä»¤è¡Œæ‰§è¡Œgolangci-lintå‘½ä»¤ã€‚è€Œä¸”é…ç½®äº†packageçº§åˆ«çš„æ£€æŸ¥ï¼Œä¸å­˜åœ¨å› å•æ–‡ä»¶æ£€æŸ¥å‡ºç°çš„è¯¯æŠ¥ã€‚</p>2021-07-01</li><br/><li><span>demon</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>å¦‚æœä½¿ç”¨çš„IDEåƒgolandè¿™ç§ï¼Œè‡ªèº«å°±å¸¦é™æ€ä»£ç æ£€æŸ¥å§ï¼Ÿ</p>2021-07-03</li><br/><li><span>lesserror</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>å­”è€æ¿ï¼Œè¿™å¥è¯æ²¡å¤ªç†è§£ï¼šâ€œé¦–å…ˆï¼Œå¦‚æœå¯ç”¨äº† nolintlintï¼Œä½ å°±éœ€è¦åœ¨&#47;&#47;nolintåé¢æ·»åŠ  nolint çš„åŸå› &#47;&#47; xxxxã€‚â€

éº»çƒ¦èƒ½å†è§£é‡Šä¸€ä¸‹å—ï¼Ÿ</p>2021-10-03</li><br/><li><span>HappyHasson</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å¦‚ä½•åœ¨ golangci-lint ä¸­é›†æˆè‡ªå®šä¹‰çš„ linterï¼Ÿ</p>2022-06-24</li><br/><li><span>å’–æ¢µå†°é›¨</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>&quot;D:\Program Files\Go\bin\golangci-lint.exe&quot; run D:\www\golang\test\main.go
level=error msg=&quot;Running error: context loading failed: failed to load packages: failed to load with go&#47;packages: err: go resolves to executable in current directory (.\\go.exe): stderr: &quot;

window golang é…ç½®external ToolsæŠ¥è¿™ä¸ªé”™è¯¯ï¼Œè¯·é—®æ˜¯ä»€ä¹ˆåŸå› </p>2021-11-11</li><br/><li><span>Jone_ä¹”æ³“æº</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼šæ–‡ä¸­ã€æŠ€å·§ 4ï¼šå°½å¯èƒ½å¤šåœ°ä½¿ç”¨ golangci-lint æä¾›çš„ linterã€‘ ä¸­çš„ä¸¤ä¸ªæŸ¥çœ‹ linters çš„å‘½ä»¤æ˜¯ä¸æ˜¯æ”¾åäº†ï¼Ÿ
ã€golangci-lint é›†æˆäº†å¾ˆå¤š lintersï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼šã€‘`golangci-lint help linters`
ã€å¦‚æœé…ç½®äº† golangci-lint é…ç½®æ–‡ä»¶ï¼Œåˆ™å¯ä»¥é€šè¿‡å‘½ä»¤golangci-lint help lintersæŸ¥çœ‹åœ¨å½“å‰é…ç½®ä¸‹å¯ç”¨å’Œç¦ç”¨äº†å“ªäº› linterã€‘`golangci-lint linters`
</p>2022-07-05</li><br/><li><span>HappyHasson</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æ€ä¹ˆè”ç³»è€å¸ˆå‘¢ï¼Œæœ‰é¡¹ç›®é—®é¢˜æƒ³è¯·æ•™ï¼Ÿ</p>2022-06-26</li><br/><li><span>Sch0ng</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>ä½¿ç”¨golangci-lintåšé™æ€ä»£ç æ£€æŸ¥ã€‚æ£€æŸ¥é€Ÿåº¦å¿«ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œé…ç½®çµæ´»ï¼Œç¤¾åŒºæ´»è·ƒï¼Œè®¸å¤šå¤§å…¬å¸åœ¨ç”¨ã€‚
é™æ€ä»£ç æ£€æŸ¥å¯ä»¥å®ˆä½ä»£ç è´¨é‡çš„åº•çº¿ã€‚</p>2021-08-10</li><br/><li><span>__PlasticMan</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ç®€å•è¯•ç”¨äº†ä¸€ä¸‹golangci-lintï¼š
1. è¿™æ˜¯ä¸€ä¸ªé›†æˆäº†å¾ˆå¤šlinterçš„é¡¹ç›®ï¼Œå¦‚æœè¢«é›†æˆlinterçš„ä½œè€…ä¸åŒæ„é›†æˆï¼Œé‚£ä¹ˆå°±ä¸èƒ½é›†æˆï¼Œä½†æ˜¯å®˜æ–¹å¯èƒ½æ¨å‡ºç›¸ä¼¼çš„è§„åˆ™ï¼Œä¾‹å¦‚staticcheckï¼›
2. å¦‚æœlinterä½œè€…è¢«è®¤ä¸ºä¸å†ç»´æŠ¤é¡¹ç›®ï¼Œé‚£ä¹ˆgolangci-lintä¼šåºŸå¼ƒè¯¥linterï¼Œå¹¶åœ¨å®˜ç½‘æˆ–è€…`golangci-lint linters`å‘½ä»¤çš„è¾“å‡ºä¸­æ ‡è®°â€œ[deprecated]â€ï¼Œå› æ­¤print_enable_linters.shè„šæœ¬çš„è¾“å‡ºä¸­åº”è¯¥è¿‡æ»¤æ‰åºŸå¼ƒçš„linterï¼›
3. å¥½åƒæ˜¯è¿™æ ·ï¼šå‡å¦‚æœ‰3ä¸ªlinter a&#47;b&#47;cä¾æ¬¡æ‰§è¡Œæ£€æŸ¥ï¼Œä¸”å‡èƒ½æ£€æŸ¥å‡ºé”™è¯¯ï¼Œæ‰§è¡Œ`golangci-lint run`å‘½ä»¤åï¼Œé¦–å…ˆä¼šè¾“å‡ºaçš„ç»“æœï¼Œè€Œæ²¡æœ‰b&#47;cçš„æ£€æŸ¥ç»“æœï¼Œæ’é™¤açš„é”™è¯¯åï¼Œå†æ‰§è¡Œæ‰èƒ½è¾“å‡ºbçš„é”™è¯¯ï¼›
4. æœ‰äº›linteråœ¨é…ç½®ä¸­ï¼Œé’ˆå¯¹é”™è¯¯æ˜¯æœ‰msgé…ç½®çš„ï¼Œä½†æ˜¯æ£€æŸ¥ç»“æœä¸­å´æ²¡æœ‰ç›¸å…³è¾“å‡ºï¼Œä»è€Œä¸å®¹æ˜“çŸ¥é“ä¸ºä»€ä¹ˆå‡ºé”™ï¼›
5. å¥½åƒæ˜¯è¿™æ ·ï¼šlinterå¤ªå¤šäº†ï¼Œæœ‰äº›æŠ¥é”™å¯èƒ½ä¸æ˜¯ä»£ç çš„é—®é¢˜ï¼šâ€œWARN [runner] Can&#39;t run linter goanalysis_metalinter: musttag: decoding json: invalid character &#39;{&#39; after top-level value:â€ï¼Œå¾ˆéš¾æ‰¾åˆ°æŠ¥é”™çš„åŸå› ï¼Œç½‘ä¸Šç±»ä¼¼é”™è¯¯çš„è¯´æ³•æ˜¯golangci-lintå®‰è£…æœ‰é—®é¢˜ï¼Œä½†æˆ‘æ˜¯ç›´æ¥å®‰è£…çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼›
6. å®˜æ–¹è¯´`go get`ã€`go install`å®‰è£…ä¸èƒ½ä¿è¯æ­£å¸¸å·¥ä½œï¼Œæ¨èäºŒè¿›åˆ¶å®‰è£…ï¼›

æ„Ÿè§‰è¿™ä¸ªå·¥å…·éœ€è¦æœ‰é’ˆå¯¹æ€§çš„ã€æ¼”è¿›åœ°å»ç”¨ï¼Œä¸çŸ¥é“linterçš„ç›®çš„ã€æ²¡æœ‰å¼•å…¥æ˜ç¡®çš„è§„èŒƒï¼Œç›²ç›®æ‰“å¼€å¾ˆå®¹æ˜“è®©äººæ„Ÿè§‰è«åå¥‡å¦™ã€‚</p>2023-08-13</li><br/><li><span>yk</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è´¼æœ‰ç”¨</p>2021-09-18</li><br/><li><span>__PlasticMan</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>print_enable_linters.shè„šæœ¬å¯ä»¥æ”¹ä¸€ä¸‹ï¼Œè¾“å‡ºçš„è¡Œä¸º`    - &lt;linter name&gt; # &lt;linter description&gt;`ï¼Œè¿™æ ·åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æ¯”è¾ƒæ–¹ä¾¿åœ°çœ‹åˆ°linterçš„ç”¨é€”ï¼š
```shell
#!&#47;usr&#47;bin&#47;env bash

disable=(
golint
tagliatelle
wrapcheck
forcetypeassert
goerr113
gomnd
wsl
testpackage
gochecknoglobals
interfacer
maligned
scopelint
gocritic
)

OLD_IFS=${IFS}
IFS=$&#39;\n&#39;

all=(`golangci-lint linters | awk -F&#39;:| &#39; &#39;!match($0, &#47;Enabled|Disabled|^$&#47;){printf(&quot;%s # %s\n&quot;,$1,$0)}&#39; | sort`)

for item  in ${all[@]}
do
    if ! echo &quot;${disable[@]}&quot; | grep -w `echo &quot;${item}&quot; | awk -F&#39; # &#39; &#39;{print $1}&#39;` &amp;&gt; &#47;dev&#47;null; then
	    echo &quot;    - ${item}&quot;
	fi
done

IFS=${OLD_IFS}
```</p>2023-08-13</li><br/><li><span>yandongxiao</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ€»ç»“ï¼š
  1. è§£é‡Šäº† golangci-lint ä¸ºä»€ä¹ˆå¦‚æ­¤å—æ¬¢è¿
  2. ä»‹ç»äº† golangci-lint å·¥å…·çš„å„ä¸ªå­å‘½ä»¤ï¼Œä»¥åŠå®ƒä»¬çš„ä½œç”¨ï¼›
  3. ä»‹ç»äº† config æ–‡ä»¶çš„ä½œç”¨ä½œç”¨
  4. ä»‹ç»äº† golangci-lint run å‘½ä»¤çš„äº”ç§æ‰§è¡Œæ–¹å¼
  5. ä»‹ç»äº† ä»£ç ä¸­å¦‚ä½•å¿½ç•¥ linter çš„æ£€æŸ¥
  6. ä»‹ç» linter çš„ä½¿ç”¨æŠ€å·§ï¼šåªå¯¹æ–°å¢ä»£ç è¿›è¡Œæ£€æŸ¥ã€‚</p>2021-11-27</li><br/>
</ul>