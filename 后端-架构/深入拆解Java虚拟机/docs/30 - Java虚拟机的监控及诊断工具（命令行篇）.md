ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥ä¸€èµ·äº†è§£ä¸€ä¸‹JDKä¸­ç”¨äºç›‘æ§åŠè¯Šæ–­å·¥å…·ã€‚æœ¬ç¯‡ä¸­æˆ‘å°†ä½¿ç”¨åˆšåˆšå‘å¸ƒçš„Java 11ç‰ˆæœ¬çš„å·¥å…·è¿›è¡Œç¤ºèŒƒã€‚

## jps

ä½ å¯èƒ½ç”¨è¿‡`ps`å‘½ä»¤ï¼Œæ‰“å°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ã€‚JDKä¸­çš„`jps`å‘½ä»¤ï¼ˆ[å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/en/java/javase/11/tools/jps.html)ï¼‰æ²¿ç”¨äº†åŒæ ·çš„æ¦‚å¿µï¼šå®ƒå°†æ‰“å°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„Javaè¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ã€‚

åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ`jps`çš„è¾“å‡ºä¿¡æ¯åŒ…æ‹¬Javaè¿›ç¨‹çš„è¿›ç¨‹IDä»¥åŠä¸»ç±»åã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¿½åŠ å‚æ•°ï¼Œæ¥æ‰“å°é¢å¤–çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ`-l`å°†æ‰“å°æ¨¡å—åä»¥åŠåŒ…åï¼›`-v`å°†æ‰“å°ä¼ é€’ç»™Javaè™šæ‹Ÿæœºçš„å‚æ•°ï¼ˆå¦‚`-XX:+UnlockExperimentalVMOptions -XX:+UseZGC`ï¼‰ï¼›`-m`å°†æ‰“å°ä¼ é€’ç»™ä¸»ç±»çš„å‚æ•°ã€‚

å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ jps -mlv
18331 org.example.Foo Hello World
18332 jdk.jcmd/sun.tools.jps.Jps -mlv -Dapplication.home=/Library/Java/JavaVirtualMachines/jdk-11.jdk/Contents/Home -Xms8m -Djdk.module.main=jdk.jcmd
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŸJavaè¿›ç¨‹å…³é—­äº†é»˜è®¤å¼€å¯çš„`UsePerfData`å‚æ•°ï¼ˆå³ä½¿ç”¨å‚æ•°`-XX:-UsePerfData`ï¼‰ï¼Œé‚£ä¹ˆ`jps`å‘½ä»¤ï¼ˆä»¥åŠä¸‹é¢ä»‹ç»çš„`jstat`ï¼‰å°†æ— æ³•æ¢çŸ¥è¯¥Javaè¿›ç¨‹ã€‚

å½“è·å¾—Javaè¿›ç¨‹çš„è¿›ç¨‹IDä¹‹åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è°ƒç”¨æ¥ä¸‹æ¥ä»‹ç»çš„å„é¡¹ç›‘æ§åŠè¯Šæ–­å·¥å…·äº†ã€‚

## jstat

`jstat`å‘½ä»¤ï¼ˆ[å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/en/java/javase/11/tools/jstat.html)ï¼‰å¯ç”¨æ¥æ‰“å°ç›®æ ‡Javaè¿›ç¨‹çš„æ€§èƒ½æ•°æ®ã€‚å®ƒåŒ…æ‹¬å¤šæ¡å­å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ jstat -options
-class
-compiler
-gc
-gccapacity
-gccause
-gcmetacapacity
-gcnew
-gcnewcapacity
-gcold
-gcoldcapacity
-gcutil
-printcompilation
```

åœ¨è¿™äº›å­å‘½ä»¤ä¸­ï¼Œ`-class`å°†æ‰“å°ç±»åŠ è½½ç›¸å…³çš„æ•°æ®ï¼Œ`-compiler`å’Œ`-printcompilation`å°†æ‰“å°å³æ—¶ç¼–è¯‘ç›¸å…³çš„æ•°æ®ã€‚å‰©ä¸‹çš„éƒ½æ˜¯ä»¥`-gc`ä¸ºå‰ç¼€çš„å­å‘½ä»¤ï¼Œå®ƒä»¬å°†æ‰“å°åƒåœ¾å›æ”¶ç›¸å…³çš„æ•°æ®ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`jstat`åªä¼šæ‰“å°ä¸€æ¬¡æ€§èƒ½æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å°†å®ƒé…ç½®ä¸ºæ¯éš”ä¸€æ®µæ—¶é—´æ‰“å°ä¸€æ¬¡ï¼Œç›´è‡³ç›®æ ‡Javaè¿›ç¨‹ç»ˆæ­¢ï¼Œæˆ–è€…è¾¾åˆ°æˆ‘ä»¬æ‰€é…ç½®çš„æœ€å¤§æ‰“å°æ¬¡æ•°ã€‚å…·ä½“ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š

```
# Usage: jstat -outputOptions [-t] [-hlines] VMID [interval [count]]
$ jstat -gc 22126 1s 4
S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT   
17472,0 17472,0  0,0    0,0   139904,0 47146,4   349568,0   21321,0   30020,0 28001,8 4864,0 4673,4     22    0,080   3      0,270   0      0,000    0,350
17472,0 17472,0 420,6   0,0   139904,0 11178,4   349568,0   21321,0   30020,0 28090,1 4864,0 4674,2     28    0,084   3      0,270   0      0,000    0,354
17472,0 17472,0  0,0   403,9  139904,0 139538,4  349568,0   21323,4   30020,0 28137,2 4864,0 4674,2     34    0,088   4      0,359   0      0,000    0,446
17472,0 17472,0  0,0    0,0   139904,0   0,0     349568,0   21326,1   30020,0 28093,6 4864,0 4673,4     38    0,091   5      0,445   0      0,000    0,536
```

> å½“ç›‘æ§æœ¬åœ°ç¯å¢ƒçš„Javaè¿›ç¨‹æ—¶ï¼ŒVMIDå¯ä»¥ç®€å•ç†è§£ä¸ºPIDã€‚å¦‚æœéœ€è¦ç›‘æ§è¿œç¨‹ç¯å¢ƒçš„Javaè¿›ç¨‹ï¼Œä½ å¯ä»¥å‚è€ƒjstatçš„å¸®åŠ©æ–‡æ¡£ã€‚

åœ¨ä¸Šé¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ22126è¿›ç¨‹æ˜¯ä¸€ä¸ªä½¿ç”¨äº†CMSåƒåœ¾å›æ”¶å™¨çš„Javaè¿›ç¨‹ã€‚æˆ‘ä»¬åˆ©ç”¨`jstat`çš„`-gc`å­å‘½ä»¤ï¼Œæ¥æ‰“å°è¯¥è¿›ç¨‹åƒåœ¾å›æ”¶ç›¸å…³çš„æ•°æ®ã€‚å‘½ä»¤æœ€åçš„`1s 4`è¡¨ç¤ºæ¯éš”1ç§’æ‰“å°ä¸€æ¬¡ï¼Œå…±æ‰“å°4æ¬¡ã€‚

åœ¨`-gc`å­å‘½ä»¤çš„è¾“å‡ºä¸­ï¼Œå‰å››åˆ—åˆ†åˆ«ä¸ºä¸¤ä¸ªSurvivoråŒºçš„å®¹é‡ï¼ˆCapacityï¼‰å’Œå·²ä½¿ç”¨é‡ï¼ˆUtilityï¼‰ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªSurvivoråŒºçš„å®¹é‡ç›¸ç­‰ï¼Œè€Œä¸”å§‹ç»ˆæœ‰ä¸€ä¸ªSurvivoråŒºçš„å†…å­˜ä½¿ç”¨é‡ä¸º0ã€‚

å½“ä½¿ç”¨é»˜è®¤çš„G1 GCæ—¶ï¼Œè¾“å‡ºç»“æœåˆ™æœ‰å¦ä¸€äº›ç‰¹å¾ï¼š

```
$ jstat -gc 22208 1s
S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT   
0,0   16384,0  0,0   16384,0 210944,0 192512,0  133120,0    5332,5   28848,0 26886,4 4864,0 4620,5     19    0,067   1      0,016   2      0,002    0,084
0,0   16384,0  0,0   16384,0 210944,0 83968,0   133120,0    5749,9   29104,0 27132,8 4864,0 4621,0     21    0,078   1      0,016   2      0,002    0,095
0,0    0,0    0,0    0,0   71680,0  18432,0   45056,0    20285,1   29872,0 27952,4 4864,0 4671,6     23    0,089   2      0,063   2      0,002    0,153
0,0   2048,0  0,0   2048,0 69632,0  28672,0   45056,0    18608,1   30128,0 28030,4 4864,0 4672,4     32    0,093   2      0,063   2      0,002    0,158
...
```

åœ¨ä¸Šé¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`jstat`æ¯éš”1sä¾¿ä¼šæ‰“å°åƒåœ¾å›æ”¶çš„ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸æ–­é‡å¤ä¸‹å»ã€‚

ä½ å¯èƒ½å·²ç»ç•™æ„åˆ°ï¼Œ`S0C`å’Œ`S0U`å§‹ç»ˆä¸º0ï¼Œè€Œä¸”å¦ä¸€ä¸ªSurvivoråŒºçš„å®¹é‡ï¼ˆS1Cï¼‰å¯èƒ½ä¼šä¸‹é™è‡³0ã€‚

è¿™æ˜¯å› ä¸ºï¼Œå½“ä½¿ç”¨G1 GCæ—¶ï¼ŒJavaè™šæ‹Ÿæœºä¸å†è®¾ç½®EdenåŒºã€SurvivoråŒºï¼Œè€å¹´ä»£åŒºçš„å†…å­˜è¾¹ç•Œï¼Œè€Œæ˜¯å°†å †åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªç­‰é•¿å†…å­˜åŒºåŸŸã€‚

æ¯ä¸ªå†…å­˜åŒºåŸŸéƒ½å¯ä»¥ä½œä¸ºEdenåŒºã€SurvivoråŒºä»¥åŠè€å¹´ä»£åŒºä¸­çš„ä»»ä¸€ç§ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒåŒºåŸŸç±»å‹ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚ï¼ˆ[å‚è€ƒé“¾æ¥](https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html)ï¼‰

æ¢å¥è¯è¯´ï¼Œé€»è¾‘ä¸Šæˆ‘ä»¬åªæœ‰ä¸€ä¸ªSurvivoråŒºã€‚å½“éœ€è¦è¿ç§»SurvivoråŒºä¸­çš„æ•°æ®æ—¶ï¼ˆå³Copying GCï¼‰ï¼Œæˆ‘ä»¬åªéœ€å¦å¤–ç”³è¯·ä¸€ä¸ªæˆ–å¤šä¸ªå†…å­˜åŒºåŸŸï¼Œä½œä¸ºæ–°çš„SurvivoråŒºã€‚

å› æ­¤ï¼ŒJavaè™šæ‹Ÿæœºå†³å®šåœ¨ä½¿ç”¨G1 GCæ—¶ï¼Œå°†æ‰€æœ‰Survivorå†…å­˜åŒºåŸŸçš„æ€»å®¹é‡ä»¥åŠå·²ä½¿ç”¨é‡å­˜æ”¾è‡³S1Cå’ŒS1Uä¸­ï¼Œè€ŒS0Cå’ŒS0Uåˆ™è¢«è®¾ç½®ä¸º0ã€‚

å½“å‘ç”Ÿåƒåœ¾å›æ”¶æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå¯èƒ½å‡ºç°Survivorå†…å­˜åŒºåŸŸå†…çš„å¯¹è±¡**å…¨**è¢«å›æ”¶æˆ–æ™‹å‡çš„ç°è±¡ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJavaè™šæ‹Ÿæœºä¼šå°†è¿™å—å†…å­˜åŒºåŸŸå›æ”¶ï¼Œå¹¶æ ‡è®°ä¸ºå¯åˆ†é…çš„çŠ¶æ€ã€‚è¿™æ ·å­åšçš„ç»“æœæ˜¯ï¼Œå †ä¸­å¯èƒ½å®Œå…¨æ²¡æœ‰Survivorå†…å­˜åŒºåŸŸï¼Œå› è€Œç›¸åº”çš„S1Cå’ŒS1Uå°†ä¼šæ˜¯0ã€‚

`jstat`è¿˜æœ‰ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‚æ•°`-t`ï¼Œå®ƒå°†åœ¨æ¯è¡Œæ•°æ®ä¹‹å‰æ‰“å°ç›®æ ‡Javaè¿›ç¨‹çš„å¯åŠ¨æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€åˆ—ä»£è¡¨è¯¥Javaè¿›ç¨‹å·²ç»å¯åŠ¨äº†10.7ç§’ã€‚

```
$ jstat -gc -t 22407
Timestamp        S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT   
           10,7  0,0    0,0    0,0    0,0   55296,0  45056,0   34816,0    20267,8   30128,0 27975,3 4864,0 4671,6     33    0,086   3      0,111   2      0,001    0,198
```

æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒJavaè¿›ç¨‹çš„å¯åŠ¨æ—¶é—´ä»¥åŠæ€»GCæ—¶é—´ï¼ˆGCTåˆ—ï¼‰ï¼Œæˆ–è€…ä¸¤æ¬¡æµ‹é‡çš„é—´éš”æ—¶é—´ä»¥åŠæ€»GCæ—¶é—´çš„å¢é‡ï¼Œæ¥å¾—å‡ºGCæ—¶é—´å è¿è¡Œæ—¶é—´çš„æ¯”ä¾‹ã€‚

å¦‚æœè¯¥æ¯”ä¾‹è¶…è¿‡20%ï¼Œåˆ™è¯´æ˜ç›®å‰å †çš„å‹åŠ›è¾ƒå¤§ï¼›å¦‚æœè¯¥æ¯”ä¾‹è¶…è¿‡90%ï¼Œåˆ™è¯´æ˜å †é‡Œå‡ ä¹æ²¡æœ‰å¯ç”¨ç©ºé—´ï¼Œéšæ—¶éƒ½å¯èƒ½æŠ›å‡ºOOMå¼‚å¸¸ã€‚

`jstat`è¿˜å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦å‡ºç°å†…å­˜æ³„æ¼ã€‚åœ¨é•¿æ—¶é—´è¿è¡Œçš„Javaç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œ`jstat`å‘½ä»¤è¿ç»­è·å–å¤šè¡Œæ€§èƒ½æ•°æ®ï¼Œå¹¶å–è¿™å‡ è¡Œæ•°æ®ä¸­OUåˆ—ï¼ˆå³å·²å ç”¨çš„è€å¹´ä»£å†…å­˜ï¼‰çš„æœ€å°å€¼ã€‚

ç„¶åï¼Œæˆ‘ä»¬æ¯éš”ä¸€æ®µè¾ƒé•¿çš„æ—¶é—´é‡å¤ä¸€æ¬¡ä¸Šè¿°æ“ä½œï¼Œæ¥è·å¾—å¤šç»„OUæœ€å°å€¼ã€‚å¦‚æœè¿™äº›å€¼å‘ˆä¸Šæ¶¨è¶‹åŠ¿ï¼Œåˆ™è¯´æ˜è¯¥Javaç¨‹åºçš„è€å¹´ä»£å†…å­˜å·²ä½¿ç”¨é‡åœ¨ä¸æ–­ä¸Šæ¶¨ï¼Œè¿™æ„å‘³ç€æ— æ³•å›æ”¶çš„å¯¹è±¡åœ¨ä¸æ–­å¢åŠ ï¼Œå› æ­¤å¾ˆæœ‰å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ã€‚

> ä¸Šé¢æ²¡æœ‰æ¶‰åŠçš„åˆ—ï¼ˆæˆ–è€…å…¶ä»–å­å‘½ä»¤çš„è¾“å‡ºï¼‰ï¼Œä½ å¯ä»¥æŸ¥é˜…å¸®åŠ©æ–‡æ¡£äº†è§£å…·ä½“å«ä¹‰ã€‚è‡³äºæ–‡æ¡£ä¸­æ¼æ‰çš„CGCå’ŒCGCTï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨å¹¶å‘GC Stop-The-Worldçš„æ¬¡æ•°å’Œæ—¶é—´ã€‚

## jmap

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è¯·`jmap`å‘½ä»¤ï¼ˆ[å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/en/java/javase/11/tools/jmap.html)ï¼‰å‡ºé©¬ï¼Œåˆ†æJavaè™šæ‹Ÿæœºå †ä¸­çš„å¯¹è±¡ã€‚

`jmap`åŒæ ·åŒ…æ‹¬å¤šæ¡å­å‘½ä»¤ã€‚

1. `-clstats`ï¼Œè¯¥å­å‘½ä»¤å°†æ‰“å°è¢«åŠ è½½ç±»çš„ä¿¡æ¯ã€‚
2. `-finalizerinfo`ï¼Œè¯¥å­å‘½ä»¤å°†æ‰“å°æ‰€æœ‰å¾…finalizeçš„å¯¹è±¡ã€‚
3. `-histo`ï¼Œè¯¥å­å‘½ä»¤å°†ç»Ÿè®¡å„ä¸ªç±»çš„å®ä¾‹æ•°ç›®ä»¥åŠå ç”¨å†…å­˜ï¼Œå¹¶æŒ‰ç…§å†…å­˜ä½¿ç”¨é‡ä»å¤šè‡³å°‘çš„é¡ºåºæ’åˆ—ã€‚æ­¤å¤–ï¼Œ`-histo:live`åªç»Ÿè®¡å †ä¸­çš„å­˜æ´»å¯¹è±¡ã€‚
4. `-dump`ï¼Œè¯¥å­å‘½ä»¤å°†å¯¼å‡ºJavaè™šæ‹Ÿæœºå †çš„å¿«ç…§ã€‚åŒæ ·ï¼Œ`-dump:live`åªä¿å­˜å †ä¸­çš„å­˜æ´»å¯¹è±¡ã€‚

æˆ‘ä»¬é€šå¸¸ä¼šåˆ©ç”¨`jmap -dump:live,format=b,file=filename.bin`å‘½ä»¤ï¼Œå°†å †ä¸­æ‰€æœ‰å­˜æ´»å¯¹è±¡å¯¼å‡ºè‡³ä¸€ä¸ªæ–‡ä»¶ä¹‹ä¸­ã€‚

è¿™é‡Œ`format=b`å°†ä½¿`jmap`å¯¼å‡ºä¸[hprof](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr008.html)ï¼ˆåœ¨Java 9ä¸­å·²è¢«ç§»é™¤ï¼‰ã€`-XX:+HeapDumpAfterFullGC`ã€`-XX:+HeapDumpOnOutOfMemoryError`æ ¼å¼ä¸€è‡´çš„æ–‡ä»¶ã€‚è¿™ç§æ ¼å¼çš„æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–GUIå·¥å…·æŸ¥çœ‹ï¼Œå…·ä½“æˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡ä¸­è¿›è¡Œæ¼”ç¤ºã€‚

ä¸‹é¢æˆ‘è´´äº†ä¸€æ®µ`-histo`å­å‘½ä»¤çš„è¾“å‡ºï¼š

```
$ jmap -histo 22574
 num     #instances         #bytes  class name (module)
-------------------------------------------------------
   1:        500004       20000160  org.python.core.PyComplex
   2:        570866       18267712  org.python.core.PyFloat
   3:        360295       18027024  [B (java.base@11)
   4:        339394       11429680  [Lorg.python.core.PyObject;
   5:        308637       11194264  [Ljava.lang.Object; (java.base@11)
   6:        301378        9291664  [I (java.base@11)
   7:        225103        9004120  java.math.BigInteger (java.base@11)
   8:        507362        8117792  org.python.core.PySequence$1
   9:        285009        6840216  org.python.core.PyLong
  10:        282908        6789792  java.lang.String (java.base@11)
  ...
2281:             1             16  traceback$py
2282:             1             16  unicodedata$py
Total       5151277      167944400
```

ç”±äº`jmap`å°†è®¿é—®å †ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œä¸ºäº†ä¿è¯åœ¨æ­¤è¿‡ç¨‹ä¸­ä¸è¢«åº”ç”¨çº¿ç¨‹å¹²æ‰°ï¼Œ`jmap`éœ€è¦å€ŸåŠ©å®‰å…¨ç‚¹æœºåˆ¶ï¼Œè®©æ‰€æœ‰çº¿ç¨‹åœç•™åœ¨ä¸æ”¹å˜å †ä¸­æ•°æ®çš„çŠ¶æ€ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±`jmap`å¯¼å‡ºçš„å †å¿«ç…§å¿…å®šæ˜¯å®‰å…¨ç‚¹ä½ç½®çš„ã€‚è¿™å¯èƒ½å¯¼è‡´åŸºäºè¯¥å †å¿«ç…§çš„åˆ†æç»“æœå­˜åœ¨åå·®ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾åœ¨ç¼–è¯‘ç”Ÿæˆçš„æœºå™¨ç ä¸­ï¼ŒæŸäº›å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸåœ¨ä¸¤ä¸ªå®‰å…¨ç‚¹ä¹‹é—´ï¼Œé‚£ä¹ˆ`:live`é€‰é¡¹å°†æ— æ³•æ¢çŸ¥åˆ°è¿™äº›å¯¹è±¡ã€‚

å¦å¤–ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹é•¿æ—¶é—´æ— æ³•è·‘åˆ°å®‰å…¨ç‚¹ï¼Œ`jmap`å°†ä¸€ç›´ç­‰ä¸‹å»ã€‚ä¸Šä¸€å°èŠ‚çš„`jstat`åˆ™ä¸åŒã€‚è¿™æ˜¯å› ä¸ºåƒåœ¾å›æ”¶å™¨ä¼šä¸»åŠ¨å°†`jstat`æ‰€éœ€è¦çš„æ‘˜è¦æ•°æ®ä¿å­˜è‡³å›ºå®šä½ç½®ä¹‹ä¸­ï¼Œè€Œ`jstat`åªéœ€ç›´æ¥è¯»å–å³å¯ã€‚

å…³äºè¿™ç§é•¿æ—¶é—´ç­‰å¾…çš„æƒ…å†µï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢è¿™æ®µç¨‹åºæ¥å¤ç°ï¼š

```
// æš‚åœæ—¶é—´è¾ƒé•¿ï¼Œçº¦ä¸ºäºŒä¸‰åç§’ï¼Œå¯é…Œæƒ…è°ƒæ•´ã€‚
// CTRL+Cçš„SIGINTä¿¡å·æ— æ³•åœæ­¢ï¼Œéœ€è¦SIGKILLã€‚
static double sum = 0;

public static void main(String[] args) {
  for (int i = 0; i < 0x77777777; i++) { // counted loop
    sum += Math.log(i); // Math.log is an intrinsic
  }
}
```

`jmap`ï¼ˆä»¥åŠæ¥ä¸‹æ¥çš„`jinfo`ã€`jstack`å’Œ`jcmd`ï¼‰ä¾èµ–äºJavaè™šæ‹Ÿæœºçš„[Attach API](https://docs.oracle.com/en/java/javase/11/docs/api/jdk.attach/com/sun/tools/attach/package-summary.html)ï¼Œå› æ­¤åªèƒ½ç›‘æ§æœ¬åœ°Javaè¿›ç¨‹ã€‚

ä¸€æ—¦å¼€å¯Javaè™šæ‹Ÿæœºå‚æ•°`DisableAttachMechanism`ï¼ˆå³ä½¿ç”¨å‚æ•°`-XX:+DisableAttachMechanism`ï¼‰ï¼ŒåŸºäºAttach APIçš„å‘½ä»¤å°†æ— æ³•æ‰§è¡Œã€‚åè¿‡æ¥è¯´ï¼Œå¦‚æœä½ ä¸æƒ³è¢«å…¶ä»–è¿›ç¨‹ç›‘æ§ï¼Œé‚£ä¹ˆä½ éœ€è¦å¼€å¯è¯¥å‚æ•°ã€‚

## jinfo

`jinfo`å‘½ä»¤ï¼ˆ[å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/en/java/javase/11/tools/jinfo.html)ï¼‰å¯ç”¨æ¥æŸ¥çœ‹ç›®æ ‡Javaè¿›ç¨‹çš„å‚æ•°ï¼Œå¦‚ä¼ é€’ç»™Javaè™šæ‹Ÿæœºçš„`-X`ï¼ˆå³è¾“å‡ºä¸­çš„jvm\_argsï¼‰ã€`-XX`å‚æ•°ï¼ˆå³è¾“å‡ºä¸­çš„VM Flagsï¼‰ï¼Œä»¥åŠå¯åœ¨Javaå±‚é¢é€šè¿‡`System.getProperty`è·å–çš„`-D`å‚æ•°ï¼ˆå³è¾“å‡ºä¸­çš„System Propertiesï¼‰ã€‚

å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ jinfo 31185
Java System Properties:

gopherProxySet=false
awt.toolkit=sun.lwawt.macosx.LWCToolkit
java.specification.version=11
sun.cpu.isalist=
sun.jnu.encoding=UTF-8
...

VM Flags:
-XX:CICompilerCount=4 -XX:ConcGCThreads=3 -XX:G1ConcRefinementThreads=10 -XX:G1HeapRegionSize=2097152 -XX:GCDrainStackTargetSize=64 -XX:InitialHeapSize=536870912 -XX:MarkStackSize=4194304 -XX:MaxHeapSize=8589934592 -XX:MaxNewSize=5152702464 -XX:MinHeapDeltaBytes=2097152 -XX:NonNMethodCodeHeapSize=5835340 -XX:NonProfiledCodeHeapSize=122911450 -XX:ProfiledCodeHeapSize=122911450 -XX:ReservedCodeCacheSize=251658240 -XX:+SegmentedCodeCache -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC

VM Arguments:
jvm_args: -Xlog:gc -Xmx1024m
java_command: org.example.Foo
java_class_path (initial): .
Launcher Type: SUN_STANDARD
```

`jinfo`è¿˜å¯ä»¥ç”¨æ¥ä¿®æ”¹ç›®æ ‡Javaè¿›ç¨‹çš„â€œmanageableâ€è™šæ‹Ÿæœºå‚æ•°ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`jinfo -flag +HeapDumpAfterFullGC <PID>`å‘½ä»¤ï¼Œå¼€å¯`<PID>`æ‰€æŒ‡å®šçš„Javaè¿›ç¨‹çš„`HeapDumpAfterFullGC`å‚æ•°ã€‚

ä½ å¯ä»¥é€šè¿‡ä¸‹è¿°å‘½ä»¤æŸ¥çœ‹å…¶ä»–"manageable"è™šæ‹Ÿæœºå‚æ•°ï¼š

```
$ java -XX:+PrintFlagsFinal -version | grep manageable   
     intx CMSAbortablePrecleanWaitMillis           = 100                                    {manageable} {default}
     intx CMSTriggerInterval                       = -1                                     {manageable} {default}
     intx CMSWaitDuration                          = 2000                                   {manageable} {default}
     bool HeapDumpAfterFullGC                      = false                                  {manageable} {default}
     bool HeapDumpBeforeFullGC                     = false                                  {manageable} {default}
     bool HeapDumpOnOutOfMemoryError               = false                                  {manageable} {default}
    ccstr HeapDumpPath                             =                                        {manageable} {default}
    uintx MaxHeapFreeRatio                         = 70                                     {manageable} {default}
    uintx MinHeapFreeRatio                         = 40                                     {manageable} {default}
     bool PrintClassHistogram                      = false                                  {manageable} {default}
     bool PrintConcurrentLocks                     = false                                  {manageable} {default}
java version "11" 2018-09-25
Java(TM) SE Runtime Environment 18.9 (build 11+28)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)
```

## jstack

`jstack`å‘½ä»¤ï¼ˆ[å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/en/java/javase/11/tools/jstack.html)ï¼‰å¯ä»¥ç”¨æ¥æ‰“å°ç›®æ ‡Javaè¿›ç¨‹ä¸­å„ä¸ªçº¿ç¨‹çš„æ ˆè½¨è¿¹ï¼Œä»¥åŠè¿™äº›çº¿ç¨‹æ‰€æŒæœ‰çš„é”ã€‚

`jstack`çš„å…¶ä¸­ä¸€ä¸ªåº”ç”¨åœºæ™¯ä¾¿æ˜¯æ­»é”æ£€æµ‹ã€‚è¿™é‡Œæˆ‘ç”¨`jstack`è·å–ä¸€ä¸ªå·²ç»æ­»é”äº†çš„Javaç¨‹åºçš„æ ˆä¿¡æ¯ã€‚å…·ä½“è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ jstack 31634
...

"Thread-0" #12 prio=5 os_prio=31 cpu=1.32ms elapsed=34.24s tid=0x00007fb08601c800 nid=0x5d03 waiting for monitor entry  [0x000070000bc7e000]
   java.lang.Thread.State: BLOCKED (on object monitor)
 at DeadLock.foo(DeadLock.java:18)
 - waiting to lock <0x000000061ff904c0> (a java.lang.Object)
 - locked <0x000000061ff904b0> (a java.lang.Object)
 at DeadLock$$Lambda$1/0x0000000800060840.run(Unknown Source)
 at java.lang.Thread.run(java.base@11/Thread.java:834)

"Thread-1" #13 prio=5 os_prio=31 cpu=1.43ms elapsed=34.24s tid=0x00007fb08601f800 nid=0x5f03 waiting for monitor entry  [0x000070000bd81000]
   java.lang.Thread.State: BLOCKED (on object monitor)
 at DeadLock.bar(DeadLock.java:33)
 - waiting to lock <0x000000061ff904b0> (a java.lang.Object)
 - locked <0x000000061ff904c0> (a java.lang.Object)
 at DeadLock$$Lambda$2/0x0000000800063040.run(Unknown Source)
 at java.lang.Thread.run(java.base@11/Thread.java:834)

...

JNI global refs: 6, weak refs: 0


Found one Java-level deadlock:
=============================
"Thread-0":
  waiting to lock monitor 0x00007fb083015900 (object 0x000000061ff904c0, a java.lang.Object),
  which is held by "Thread-1"
"Thread-1":
  waiting to lock monitor 0x00007fb083015800 (object 0x000000061ff904b0, a java.lang.Object),
  which is held by "Thread-0"

Java stack information for the threads listed above:
===================================================
"Thread-0":
 at DeadLock.foo(DeadLock.java:18)
 - waiting to lock <0x000000061ff904c0> (a java.lang.Object)
 - locked <0x000000061ff904b0> (a java.lang.Object)
 at DeadLock$$Lambda$1/0x0000000800060840.run(Unknown Source)
 at java.lang.Thread.run(java.base@11/Thread.java:834)
"Thread-1":
 at DeadLock.bar(DeadLock.java:33)
 - waiting to lock <0x000000061ff904b0> (a java.lang.Object)
 - locked <0x000000061ff904c0> (a java.lang.Object)
 at DeadLock$$Lambda$2/0x0000000800063040.run(Unknown Source)
 at java.lang.Thread.run(java.base@11/Thread.java:834)

Found 1 deadlock.
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ`jstack`ä¸ä»…ä¼šæ‰“å°çº¿ç¨‹çš„æ ˆè½¨è¿¹ã€çº¿ç¨‹çŠ¶æ€ï¼ˆBLOCKEDï¼‰ã€æŒæœ‰çš„é”ï¼ˆlocked â€¦ï¼‰ä»¥åŠæ­£åœ¨è¯·æ±‚çš„é”ï¼ˆwaiting to lock â€¦ï¼‰ï¼Œè€Œä¸”è¿˜ä¼šåˆ†æå‡ºå…·ä½“çš„æ­»é”ã€‚

## jcmd

ä½ è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨`jcmd`å‘½ä»¤ï¼ˆ[å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/en/java/javase/11/tools/jcmd.html)ï¼‰ï¼Œæ¥æ›¿ä»£å‰é¢é™¤äº†`jstat`ä¹‹å¤–çš„æ‰€æœ‰å‘½ä»¤ã€‚å…·ä½“çš„æ›¿æ¢è§„åˆ™ä½ å¯ä»¥å‚è€ƒä¸‹è¡¨ã€‚

è‡³äº`jstat`çš„åŠŸèƒ½ï¼Œè™½ç„¶`jcmd`å¤åˆ¶äº†`jstat`çš„éƒ¨åˆ†ä»£ç ï¼Œå¹¶æ”¯æŒé€šè¿‡`PerfCounter.print`å­å‘½ä»¤æ¥æ‰“å°æ‰€æœ‰çš„Performance Counterï¼Œä½†æ˜¯å®ƒæ²¡æœ‰ä¿ç•™`jstat`çš„è¾“å‡ºæ ¼å¼ï¼Œä¹Ÿæ²¡æœ‰é‡å¤æ‰“å°çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œæ•´ç†ã€‚

å¦å¤–ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡ä¸­ä»‹ç»`jcmd`ä¸­Java Flight Recorderç›¸å…³çš„å­å‘½ä»¤ã€‚

## æ€»ç»“ä¸å®è·µ

ä»Šå¤©æˆ‘ä»‹ç»äº†JDKä¸­ç”¨äºç›‘æ§åŠè¯Šæ–­çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹ã€‚

1. `jps`å°†æ‰“å°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„Javaè¿›ç¨‹ã€‚
2. `jstat`å…è®¸ç”¨æˆ·æŸ¥çœ‹ç›®æ ‡Javaè¿›ç¨‹çš„ç±»åŠ è½½ã€å³æ—¶ç¼–è¯‘ä»¥åŠåƒåœ¾å›æ”¶ç›¸å…³çš„ä¿¡æ¯ã€‚å®ƒå¸¸ç”¨äºæ£€æµ‹åƒåœ¾å›æ”¶é—®é¢˜ä»¥åŠå†…å­˜æ³„æ¼é—®é¢˜ã€‚
3. `jmap`å…è®¸ç”¨æˆ·ç»Ÿè®¡ç›®æ ‡Javaè¿›ç¨‹çš„å †ä¸­å­˜æ”¾çš„Javaå¯¹è±¡ï¼Œå¹¶å°†å®ƒä»¬å¯¼å‡ºæˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚
4. `jinfo`å°†æ‰“å°ç›®æ ‡Javaè¿›ç¨‹çš„é…ç½®å‚æ•°ï¼Œå¹¶èƒ½å¤Ÿæ”¹åŠ¨å…¶ä¸­manageabeçš„å‚æ•°ã€‚
5. `jstack`å°†æ‰“å°ç›®æ ‡Javaè¿›ç¨‹ä¸­å„ä¸ªçº¿ç¨‹çš„æ ˆè½¨è¿¹ã€çº¿ç¨‹çŠ¶æ€ã€é”çŠ¶å†µç­‰ä¿¡æ¯ã€‚å®ƒè¿˜å°†è‡ªåŠ¨æ£€æµ‹æ­»é”ã€‚
6. `jcmd`åˆ™æ˜¯ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œå¯ä»¥ç”¨æ¥å®ç°å‰é¢é™¤äº†`jstat`ä¹‹å¤–æ‰€æœ‰å‘½ä»¤çš„åŠŸèƒ½ã€‚

* * *

ä»Šå¤©çš„å®è·µç¯èŠ‚ï¼Œä½ å¯ä»¥æ¢ç´¢`jcmd`ä¸­çš„ä¸‹è¿°åŠŸèƒ½ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰é€‚åˆä½ é¡¹ç›®çš„ç›‘æ§é¡¹ï¼š

```
Compiler.CodeHeap_Analytics
Compiler.codecache
Compiler.codelist
Compiler.directives_add
Compiler.directives_clear
Compiler.directives_print
Compiler.directives_remove
Compiler.queue
GC.class_histogram
GC.class_stats
GC.finalizer_info
GC.heap_dump
GC.heap_info
GC.run
GC.run_finalization
VM.class_hierarchy
VM.classloader_stats
VM.classloaders
VM.command_line
VM.dynlibs
VM.flags
VM.info
VM.log
VM.metaspace
VM.native_memory
VM.print_touched_methods
VM.set_flag
VM.stringtable
VM.symboltable
VM.system_properties
VM.systemdictionary
VM.unlock_commercial_features
VM.uptime
VM.version
```
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>æ¨æ™“å³°</span> ğŸ‘ï¼ˆ20ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>jmcæ—©openjdkç½‘ç«™å•ç‹¬ä¸‹è½½ï¼Œç›®å‰éœ€è¦7 eaç‰ˆå¤„ç†jdk11
http:&#47;&#47;jdk.java.net&#47;jmc&#47;</p>2018-09-30</li><br/><li><span>Geek_987169</span> ğŸ‘ï¼ˆ11ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>è€å¸ˆä¸ºä»€ä¹ˆå®˜æ–¹æ–‡æ¡£ä»‹ç»å·¥å…·å¼€å¤´éƒ½æœ‰&quot;This command is experimental and unsupported&quot;è¿™å¥è¯ï¼Ÿ</p>2018-11-04</li><br/><li><span>é’±</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å˜¿å˜¿ï¼Œå°±å–œæ¬¢è¿™æ ·çš„ç®€å•æ‹¿æ¥ä¸»ä¹‰ï¼Œéšå­¦éšç”¨ã€‚è€å¸ˆèƒ½å¦æ·±å…¥è®²ä¸€ä¸‹è¿™äº›å‘½ä»¤çš„åº•å±‚å®ç°ï¼Œå¯¹åº”çš„ä¿¡æ¯éƒ½æ˜¯æ€ä¹ˆè·å–åˆ°çš„ï¼Ÿéƒ½æ˜¯ä»å“ªé‡Œè·å–åˆ°çš„ï¼Ÿå¦‚æœè¯´éƒ½æ˜¯ä»JVMä¸­æ„Ÿè§‰èŒƒå›´æœ‰ç‚¹å¤§ï¼Œå¾€ç»†äº†è®²æ˜¯ä»JVMçš„ä»€ä¹ˆåœ°æ–¹è·å–çš„å‘¢ï¼Ÿ</p>2018-09-28</li><br/><li><span>Axis</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Jdk11ä¸‹å¼€æºäº†jfrä½†æ˜¯æ²¡æœ‰jmcè¿™ä¸ªå·¥å…·æŸ¥çœ‹æ€§èƒ½æ–‡ä»¶  æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>2018-09-28</li><br/><li><span>æ¨æ˜¥é¹</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>ä¸ºä»€ä¹ˆæˆ‘åŒå‡»è¿™äº›.exeï¼Œç›´æ¥å°±é—ªé€€ã€‚</p>2018-10-11</li><br/><li><span>Douglas</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>è€å¸ˆè®²çš„å¥½åƒå’Œjdk11 æ²¡å•¥å…³ç³»å§</p>2018-09-28</li><br/><li><span>wkq2786130</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è‡ªå·±åšçš„ç¬”è®°ï¼Œè¯·å¤§å®¶æ–§æ­£  http:&#47;&#47;weikeqin.com&#47;2020&#47;03&#47;28&#47;jvm-performance-tuning-monitoring-tool&#47; </p>2020-03-30</li><br/><li><span>ç¾æ»‹æ»‹</span> ğŸ‘ï¼ˆ6ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>nullé‚£ä½æœ‹å‹ oom killeräº†è§£ä¸€ä¸‹</p>2018-10-10</li><br/><li><span>ç”°æ–Œ</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Jstack -Fä¼šå¯¼è‡´Javaè¿›ç¨‹ä¸€ç›´æŒ‚èµ·å—ï¼Œè¯´æ˜¯jdkçš„bugï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šä¸€ç›´æŒ‚èµ·å‘¢</p>2018-11-08</li><br/><li><span>null</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œ ä½ å¥½
æˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œ
æˆ‘ä»¬çº¿ä¸Šç¯å¢ƒæœ‰ä¸€å°tomcatå¶å°”ä¼šè«åçš„æŒ‚æ‰ï¼Œ
è€Œä¸”æ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œæ—¥å¿—éƒ½æ˜¯æ­£å¸¸çš„ï¼Œ
å°±åƒè¢«kill -9ä¸€æ ·ã€‚
è¯·é—®è¿™ä¸ªæ€ä¹ˆæ’æŸ¥é—®é¢˜ï¼Ÿ
ä¸ä¼šæ˜¯äººä¸ºçš„ã€‚
è°¢è°¢ã€‚</p>2018-09-28</li><br/><li><span>ã€‚ã€‚ã€‚ã€‚</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>jmapå¯¼å‡ºæ˜¯ä¸æ˜¯ä¼šå¾ˆä¹…å¾ˆæ…¢å•Šï¼Œæœ‰å¥½çš„æ–¹æ³•å—</p>2020-08-07</li><br/><li><span>wkq2786130</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>```
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  248   348.108  359.967
28096.0 28096.0  0.0   28095.9 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  249   349.650  361.510
28096.0 28096.0  0.0   28095.9 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  249   349.650  361.510
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  250   351.329  363.189
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  250   351.329  363.189
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  251   352.853  364.713
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  253   354.598  366.457
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  253   354.598  366.457
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  253   354.598  366.457
28096.0 28096.0  0.0   28096.0 225024.0 225024.0  562560.0   562560.0  90916.0 88514.2 10304.0 9660.5     53   11.859  254   356.826  368.685
```

åƒè¿™ç§ Old Spaceå·²ç»æ»¡äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ OOMï¼Œå¤§å®¶çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› å—ï¼Ÿ</p>2020-03-30</li><br/><li><span>éšå¿ƒè€Œè‡³</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>linux ä¸‹man å¯¹åº”çš„commandï¼Œç»“åˆè€å¸ˆç»™çš„æ–‡æ¡£ï¼Œéƒ½ä¼šç”¨äº†</p>2019-10-30</li><br/><li><span>Geek_c991f2</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å¦‚æœæŸä¸ªæœåŠ¡å¯åŠ¨å,å‘ç°cpuä½¿ç”¨ç‡å¾ˆé«˜,è¿™ç§é—®é¢˜æ€ä¹ˆæ‰¾å‡ºé—®é¢˜</p>2019-10-08</li><br/><li><span>Roway</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è€å¸ˆï¼Œ æ‚¨å¥½ï¼
æˆ‘æƒ³è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çº¿ä¸Šç¯å¢ƒæœ‰ä¸€å°tomcatå¶å°”ä¼šè«åçš„æŒ‚æ‰ï¼Œ
è€Œä¸”æ²¡æœ‰ä»»ä½•é”™è¯¯ä¿¡æ¯(tomcat binç›®å½•ä¸‹ç”Ÿæˆäº†æ–‡ä»¶hs_err_pid20894.log)ï¼Œæ—¥å¿—éƒ½æ˜¯æ­£å¸¸çš„ï¼Œå°±åƒè¢«kill -9ä¸€æ ·ã€‚
è¯·é—®è¿™ä¸ªæ€ä¹ˆæ’æŸ¥é—®é¢˜ï¼Ÿ
ä¸ä¼šæ˜¯äººä¸ºçš„ã€‚
è°¢è°¢ã€‚</p>2019-06-26</li><br/>
</ul>