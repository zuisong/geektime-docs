ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦è·Ÿä½ åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šKafkaå¸¸è§çš„è„šæœ¬æ±‡æ€»ã€‚

## å‘½ä»¤è¡Œè„šæœ¬æ¦‚è§ˆ

Kafkaé»˜è®¤æä¾›äº†å¾ˆå¤šä¸ªå‘½ä»¤è¡Œè„šæœ¬ï¼Œç”¨äºå®ç°å„ç§å„æ ·çš„åŠŸèƒ½å’Œè¿ç»´ç®¡ç†ã€‚ä»Šå¤©æˆ‘ä»¥2.2ç‰ˆæœ¬ä¸ºä¾‹ï¼Œè¯¦ç»†åœ°ç›˜ç‚¹ä¸‹è¿™äº›å‘½ä»¤è¡Œå·¥å…·ã€‚ä¸‹å›¾å±•ç¤ºäº†2.2ç‰ˆæœ¬æä¾›çš„æ‰€æœ‰å‘½ä»¤è¡Œè„šæœ¬ã€‚

![](https://static001.geekbang.org/resource/image/f7/ee/f74fe9a3aef75f8db6533e1011571eee.png?wh=938%2A1611)

ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ2.2ç‰ˆæœ¬æ€»å…±æä¾›äº†30ä¸ªSHELLè„šæœ¬ã€‚å›¾ä¸­çš„windowså®é™…ä¸Šæ˜¯ä¸ªå­ç›®å½•ï¼Œé‡Œé¢ä¿å­˜äº†Windowså¹³å°ä¸‹çš„BATæ‰¹å¤„ç†æ–‡ä»¶ã€‚å…¶ä»–çš„.shæ–‡ä»¶åˆ™æ˜¯Linuxå¹³å°ä¸‹çš„æ ‡å‡†SHELLè„šæœ¬ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸åŠ ä»»ä½•å‚æ•°æˆ–æºå¸¦ --helpè¿è¡ŒSHELLæ–‡ä»¶ï¼Œä¼šå¾—åˆ°è¯¥è„šæœ¬çš„ä½¿ç”¨æ–¹æ³•è¯´æ˜ã€‚ä¸‹é¢è¿™å¼ å›¾ç‰‡å±•ç¤ºäº†kafka-log-dirsè„šæœ¬çš„è°ƒç”¨æ–¹æ³•ã€‚

![](https://static001.geekbang.org/resource/image/04/cc/04953999a40ea439fce05a57b29714cc.png?wh=1950%2A940)

æœ‰äº†è¿™äº›åŸºç¡€çš„äº†è§£ï¼Œæˆ‘æ¥é€ä¸€åœ°è¯´æ˜è¿™äº›è„šæœ¬çš„ç”¨é€”ï¼Œç„¶åå†ç»™ä½ è¯¦ç»†åœ°ä»‹ç»ä¸€äº›å¸¸è§çš„è„šæœ¬ã€‚

æˆ‘ä»¬å…ˆæ¥è¯´è¯´connect-standaloneå’Œconnect-distributedä¸¤ä¸ªè„šæœ¬ã€‚è¿™ä¸¤ä¸ªè„šæœ¬æ˜¯Kafka Connectç»„ä»¶çš„å¯åŠ¨è„šæœ¬ã€‚åœ¨ä¸“æ [ç¬¬4è®²](https://time.geekbang.org/column/article/100285)è°ˆåˆ°Kafkaç”Ÿæ€æ—¶ï¼Œæˆ‘æ›¾è¯´è¿‡ç¤¾åŒºæä¾›äº†Kafka Connectç»„ä»¶ï¼Œç”¨äºå®ç°Kafkaä¸å¤–éƒ¨ä¸–ç•Œç³»ç»Ÿä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚Kafka Connectæ”¯æŒå•èŠ‚ç‚¹çš„Standaloneæ¨¡å¼ï¼Œä¹Ÿæ”¯æŒå¤šèŠ‚ç‚¹çš„Distributedæ¨¡å¼ã€‚è¿™ä¸¤ä¸ªè„šæœ¬åˆ†åˆ«æ˜¯è¿™ä¸¤ç§æ¨¡å¼ä¸‹çš„å¯åŠ¨è„šæœ¬ã€‚é‰´äºKafka Connectä¸åœ¨æˆ‘ä»¬çš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œæˆ‘å°±ä¸å±•å¼€è®²äº†ã€‚

æ¥ä¸‹æ¥æ˜¯kafka-aclsè„šæœ¬ã€‚å®ƒæ˜¯ç”¨äºè®¾ç½®Kafkaæƒé™çš„ï¼Œæ¯”å¦‚è®¾ç½®å“ªäº›ç”¨æˆ·å¯ä»¥è®¿é—®Kafkaçš„å“ªäº›ä¸»é¢˜ä¹‹ç±»çš„æƒé™ã€‚åœ¨ä¸“æ åé¢ï¼Œæˆ‘ä¼šä¸“é—¨æ¥è®²Kafkaå®‰å…¨è®¾ç½®çš„å†…å®¹ï¼Œåˆ°æ—¶å€™æˆ‘ä»¬å†ç»†èŠè¿™ä¸ªè„šæœ¬ã€‚

ä¸‹é¢æ˜¯kafka-broker-api-versionsè„šæœ¬ã€‚**è¿™ä¸ªè„šæœ¬çš„ä¸»è¦ç›®çš„æ˜¯éªŒè¯ä¸åŒKafkaç‰ˆæœ¬ä¹‹é—´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„é€‚é…æ€§**ã€‚æˆ‘æ¥ä¸¾ä¸ªä¾‹å­ï¼Œä¸‹é¢è¿™ä¸¤å¼ å›¾åˆ†åˆ«å±•ç¤ºäº†2.2ç‰ˆæœ¬Serverç«¯ä¸2.2ç‰ˆæœ¬Clientç«¯å’Œ1.1.1ç‰ˆæœ¬Clientç«¯çš„é€‚é…æ€§ã€‚

![](https://static001.geekbang.org/resource/image/59/39/594776ae03ca045b3203f873b75c3139.png?wh=1854%2A275)

![](https://static001.geekbang.org/resource/image/a3/84/a3604bb34011c372d7f63912ffdf0584.png?wh=1854%2A249)

æˆ‘æˆªå–äº†éƒ¨åˆ†è¾“å‡ºå†…å®¹ï¼Œç°åœ¨æˆ‘ç¨å¾®è§£é‡Šä¸€ä¸‹è¿™äº›è¾“å‡ºçš„å«ä¹‰ã€‚æˆ‘ä»¬ä»¥ç¬¬ä¸€è¡Œä¸ºä¾‹ï¼š

> *Produce(0): 0 to 7 \[usable: 7]*

â€œProduceâ€è¡¨ç¤ºProduceè¯·æ±‚ï¼Œç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯æœ¬è´¨ä¸Šå°±æ˜¯å‘Brokerç«¯å‘é€Produceè¯·æ±‚ã€‚è¯¥è¯·æ±‚æ˜¯Kafkaæ‰€æœ‰è¯·æ±‚ç±»å‹ä¸­çš„ç¬¬ä¸€å·è¯·æ±‚ï¼Œå› æ­¤åºå·æ˜¯0ã€‚åé¢çš„â€œ0 to 7â€è¡¨ç¤ºProduceè¯·æ±‚åœ¨Kafka 2.2ä¸­æ€»å…±æœ‰8ä¸ªç‰ˆæœ¬ï¼Œåºå·åˆ†åˆ«æ˜¯0åˆ°7ã€‚â€œusableï¼š7â€è¡¨ç¤ºå½“å‰è¿å…¥è¿™ä¸ªBrokerçš„å®¢æˆ·ç«¯APIèƒ½å¤Ÿä½¿ç”¨çš„ç‰ˆæœ¬å·æ˜¯7ï¼Œå³æœ€æ–°çš„ç‰ˆæœ¬ã€‚

è¯·æ³¨æ„è¿™ä¸¤å¼ å›¾ä¸­çº¢çº¿éƒ¨åˆ†çš„å·®å¼‚ã€‚åœ¨ç¬¬ä¸€å¼ å›¾ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨2.2ç‰ˆæœ¬çš„è„šæœ¬è¿æ¥2.2ç‰ˆæœ¬çš„Brokerï¼Œusableè‡ªç„¶æ˜¯7ï¼Œè¡¨ç¤ºèƒ½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚åœ¨ç¬¬äºŒå¼ å›¾ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨1.1ç‰ˆæœ¬çš„è„šæœ¬è¿æ¥2.2ç‰ˆæœ¬çš„Brokerï¼Œusableæ˜¯5ï¼Œè¿™è¡¨ç¤º1.1ç‰ˆæœ¬çš„å®¢æˆ·ç«¯APIåªèƒ½å‘é€ç‰ˆæœ¬å·æ˜¯5çš„Produceè¯·æ±‚ã€‚

å¦‚æœä½ æƒ³äº†è§£ä½ çš„å®¢æˆ·ç«¯ç‰ˆæœ¬ä¸æœåŠ¡å™¨ç«¯ç‰ˆæœ¬çš„å…¼å®¹æ€§ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥æ£€éªŒä¸€ä¸‹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ**åœ¨0.10.2.0ä¹‹å‰ï¼ŒKafkaæ˜¯å•å‘å…¼å®¹çš„ï¼Œå³é«˜ç‰ˆæœ¬çš„Brokerèƒ½å¤Ÿå¤„ç†ä½ç‰ˆæœ¬Clientå‘é€çš„è¯·æ±‚ï¼Œåè¿‡æ¥åˆ™ä¸è¡Œã€‚è‡ª0.10.2.0ç‰ˆæœ¬å¼€å§‹ï¼ŒKafkaæ­£å¼æ”¯æŒåŒå‘å…¼å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ç‰ˆæœ¬çš„Brokerä¹Ÿèƒ½å¤„ç†é«˜ç‰ˆæœ¬Clientçš„è¯·æ±‚äº†**ã€‚

æ¥ä¸‹æ¥æ˜¯kafka-configsè„šæœ¬ã€‚å¯¹äºè¿™ä¸ªè„šæœ¬ï¼Œæˆ‘æƒ³ä½ åº”è¯¥å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œæˆ‘ä»¬åœ¨è®¨è®ºå‚æ•°é…ç½®å’ŒåŠ¨æ€Brokerå‚æ•°æ—¶éƒ½æåˆ°è¿‡å®ƒçš„ç”¨æ³•ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†èµ˜è¿°äº†ã€‚

ä¸‹é¢çš„ä¸¤ä¸ªè„šæœ¬æ˜¯é‡é‡çº§çš„å·¥å…·è¡Œè„šæœ¬ï¼škafka-console-consumerå’Œkafka-console-producerã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œè¯´å®ƒä»¬æ˜¯æœ€å¸¸ç”¨çš„è„šæœ¬ä¹Ÿä¸ä¸ºè¿‡ã€‚è¿™é‡Œæˆ‘ä»¬æš‚æ—¶å…ˆè·³è¿‡ï¼Œåé¢æˆ‘ä¼šé‡ç‚¹ä»‹ç»å®ƒä»¬ã€‚

å…³äºproducerå’Œconsumerï¼Œæˆç»„å‡ºç°çš„è¿˜æœ‰å¦å¤–ä¸€ç»„è„šæœ¬ï¼škafka-producer-perf-testå’Œkafka-consumer-perf-testã€‚å®ƒä»¬åˆ†åˆ«æ˜¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œéå¸¸å®ç”¨ï¼Œç¨åæˆ‘ä¼šé‡ç‚¹ä»‹ç»ã€‚

æ¥ä¸‹æ¥çš„kafka-consumer-groupså‘½ä»¤ï¼Œæˆ‘åœ¨ä»‹ç»é‡è®¾æ¶ˆè´¹è€…ç»„ä½ç§»æ—¶ç¨æœ‰æ¶‰åŠï¼Œåé¢æˆ‘ä»¬æ¥èŠèŠè¯¥è„šæœ¬çš„å…¶ä»–ç”¨æ³•ã€‚

kafka-delegation-tokensè„šæœ¬å¯èƒ½ä¸å¤ªä¸ºäººæ‰€çŸ¥ï¼Œå®ƒæ˜¯ç®¡ç†Delegation Tokençš„ã€‚åŸºäºDelegation Tokençš„è®¤è¯æ˜¯ä¸€ç§è½»é‡çº§çš„è®¤è¯æœºåˆ¶ï¼Œè¡¥å……äº†ç°æœ‰çš„SASLè®¤è¯æœºåˆ¶ã€‚

kafka-delete-recordsè„šæœ¬ç”¨äºåˆ é™¤Kafkaçš„åˆ†åŒºæ¶ˆæ¯ã€‚é‰´äºKafkaæœ¬èº«æœ‰è‡ªå·±çš„è‡ªåŠ¨æ¶ˆæ¯åˆ é™¤ç­–ç•¥ï¼Œè¿™ä¸ªè„šæœ¬çš„å®é™…å‡ºåœºç‡å¹¶ä¸é«˜ã€‚

kafka-dump-logè„šæœ¬å¯è°“æ˜¯éå¸¸å®ç”¨çš„è„šæœ¬ã€‚å®ƒèƒ½æŸ¥çœ‹Kafkaæ¶ˆæ¯æ–‡ä»¶çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ¶ˆæ¯çš„å„ç§å…ƒæ•°æ®ä¿¡æ¯ï¼Œç”šè‡³æ˜¯æ¶ˆæ¯ä½“æœ¬èº«ã€‚

kafka-log-dirsè„šæœ¬æ˜¯æ¯”è¾ƒæ–°çš„è„šæœ¬ï¼Œå¯ä»¥å¸®åŠ©æŸ¥è¯¢å„ä¸ªBrokerä¸Šçš„å„ä¸ªæ—¥å¿—è·¯å¾„çš„ç£ç›˜å ç”¨æƒ…å†µã€‚

kafka-mirror-makerè„šæœ¬æ˜¯å¸®åŠ©ä½ å®ç°Kafkaé›†ç¾¤é—´çš„æ¶ˆæ¯åŒæ­¥çš„ã€‚åœ¨ä¸“æ åé¢ï¼Œæˆ‘ä¼šå•ç‹¬ç”¨ä¸€è®²çš„å†…å®¹æ¥è®¨è®ºå®ƒçš„ç”¨æ³•ã€‚

kafka-preferred-replica-electionè„šæœ¬æ˜¯æ‰§è¡ŒPreferred Leaderé€‰ä¸¾çš„ã€‚å®ƒå¯ä»¥ä¸ºæŒ‡å®šçš„ä¸»é¢˜æ‰§è¡Œâ€œæ¢Leaderâ€çš„æ“ä½œã€‚

kafka-reassign-partitionsè„šæœ¬ç”¨äºæ‰§è¡Œåˆ†åŒºå‰¯æœ¬è¿ç§»ä»¥åŠå‰¯æœ¬æ–‡ä»¶è·¯å¾„è¿ç§»ã€‚

kafka-topicsè„šæœ¬ä½ åº”è¯¥å¾ˆç†Ÿæ‚‰äº†ï¼Œæ‰€æœ‰çš„ä¸»é¢˜ç®¡ç†æ“ä½œï¼Œéƒ½æ˜¯ç”±è¯¥è„šæœ¬æ¥å®ç°çš„ã€‚

kafka-run-classè„šæœ¬åˆ™é¢‡ä¸ºç¥ç§˜ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªè„šæœ¬æ‰§è¡Œä»»ä½•å¸¦mainæ–¹æ³•çš„Kafkaç±»ã€‚åœ¨Kafkaæ—©æœŸçš„å‘å±•é˜¶æ®µï¼Œå¾ˆå¤šå·¥å…·ç±»éƒ½æ²¡æœ‰è‡ªå·±ä¸“å±çš„SHELLè„šæœ¬ï¼Œæ¯”å¦‚åˆšæ‰æåˆ°çš„kafka-dump-logï¼Œä½ åªèƒ½é€šè¿‡è¿è¡Œkafka-run-class kafka.tools.DumpLogSegmentsçš„æ–¹å¼æ¥é—´æ¥å®ç°ã€‚å¦‚æœä½ ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€kafka-dump-log.shï¼Œä½ ä¼šå‘ç°å®ƒå®é™…ä¸Šè°ƒç”¨çš„å°±æ˜¯è¿™æ¡å‘½ä»¤ã€‚åæ¥ç¤¾åŒºé€æ¸ä¸ºè¿™äº›é‡è¦çš„å·¥å…·ç±»éƒ½æ·»åŠ äº†ä¸“å±çš„å‘½ä»¤è¡Œè„šæœ¬ï¼Œç°åœ¨kafka-run-classè„šæœ¬çš„å‡ºåœºç‡å¤§å¤§é™ä½äº†ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œä½ å‡ ä¹é‡ä¸ä¸Šè¦ç›´æ¥ä½¿ç”¨è¿™ä¸ªè„šæœ¬çš„åœºæ™¯äº†ã€‚

å¯¹äºkafka-server-startå’Œkafka-server-stopè„šæœ¬ï¼Œä½ åº”è¯¥ä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿï¼Œå®ƒä»¬æ˜¯ç”¨äºå¯åŠ¨å’Œåœæ­¢Kafka Brokerè¿›ç¨‹çš„ã€‚

kafka-streams-application-resetè„šæœ¬ç”¨æ¥ç»™Kafka Streamsåº”ç”¨ç¨‹åºé‡è®¾ä½ç§»ï¼Œä»¥ä¾¿é‡æ–°æ¶ˆè´¹æ•°æ®ã€‚å¦‚æœä½ æ²¡æœ‰ç”¨åˆ°Kafka Streamsç»„ä»¶ï¼Œè¿™ä¸ªè„šæœ¬å¯¹ä½ æ¥è¯´æ˜¯æ²¡æœ‰ç”¨çš„ã€‚

kafka-verifiable-producerå’Œkafka-verifiable-consumerè„šæœ¬æ˜¯ç”¨æ¥æµ‹è¯•ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åŠŸèƒ½çš„ã€‚å®ƒä»¬æ˜¯å¾ˆâ€œå¤è€â€çš„è„šæœ¬äº†ï¼Œä½ å‡ ä¹ç”¨ä¸åˆ°å®ƒä»¬ã€‚å¦å¤–ï¼Œå‰é¢æåˆ°çš„Console Producerå’ŒConsole Consumerå®Œå…¨å¯ä»¥æ›¿ä»£å®ƒä»¬ã€‚

å‰©ä¸‹çš„zookeeperå¼€å¤´çš„è„šæœ¬æ˜¯ç”¨æ¥ç®¡ç†å’Œè¿ç»´ZooKeeperçš„ï¼Œè¿™é‡Œæˆ‘å°±ä¸åšè¿‡å¤šä»‹ç»äº†ã€‚

æœ€åè¯´ä¸€ä¸‹trogdorè„šæœ¬ã€‚è¿™æ˜¯ä¸ªå¾ˆç¥ç§˜çš„å®¶ä¼™ï¼Œå®˜ç½‘ä¸Šä¹Ÿä¸æ›¾å‡ºç°å®ƒçš„åå­—ã€‚æ®ç¤¾åŒºå†…éƒ¨èµ„æ–™æ˜¾ç¤ºï¼Œå®ƒæ˜¯Kafkaçš„æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºæ‰§è¡Œå„ç§åŸºå‡†æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•ã€‚ä¸€èˆ¬çš„Kafkaç”¨æˆ·åº”è¯¥ç”¨ä¸åˆ°è¿™ä¸ªè„šæœ¬ã€‚

å¥½äº†ï¼ŒKafkaè‡ªå¸¦çš„æ‰€æœ‰è„šæœ¬æˆ‘å…¨éƒ¨æ¢³ç†äº†ä¸€éã€‚è™½ç„¶è¿™äº›æè¿°çœ‹èµ·æ¥æœ‰ç‚¹æµæ°´è´¦ï¼Œä½†æ˜¯ï¼Œæœ‰äº†è¿™äº›åŸºç¡€çš„è®¤çŸ¥ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½åœ°åˆ©ç”¨è¿™äº›è„šæœ¬ã€‚ä¸‹é¢æˆ‘å°±æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹é‡ç‚¹çš„è„šæœ¬æ“ä½œã€‚

## é‡ç‚¹è„šæœ¬æ“ä½œ

### ç”Ÿäº§æ¶ˆæ¯

ç”Ÿäº§æ¶ˆæ¯ä½¿ç”¨kafka-console-producerè„šæœ¬å³å¯ï¼Œä¸€ä¸ªå…¸å‹çš„å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ bin/kafka-console-producer.sh --broker-list kafka-host:port --topic test-topic --request-required-acks -1 --producer-property compression.type=lz4
>
```

åœ¨è¿™æ®µå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šç”Ÿäº§è€…å‚æ•°acksä¸º-1ï¼ŒåŒæ—¶å¯ç”¨äº†LZ4çš„å‹ç¼©ç®—æ³•ã€‚è¿™ä¸ªè„šæœ¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è®©æˆ‘ä»¬ä½¿ç”¨æ§åˆ¶å°æ¥å‘Kafkaçš„æŒ‡å®šä¸»é¢˜å‘é€æ¶ˆæ¯ã€‚

### æ¶ˆè´¹æ¶ˆæ¯

ä¸‹é¢å†æ¥è¯´è¯´æ•°æ®æ¶ˆè´¹ã€‚å¦‚æœè¦å¿«é€Ÿåœ°æ¶ˆè´¹ä¸»é¢˜ä¸­çš„æ•°æ®æ¥éªŒè¯æ¶ˆæ¯æ˜¯å¦å­˜åœ¨ï¼Œè¿è¡Œkafka-console-consumerè„šæœ¬åº”è¯¥ç®—æ˜¯æœ€ä¾¿æ·çš„æ–¹æ³•äº†ã€‚å¸¸ç”¨çš„å‘½ä»¤ç”¨æ³•å¦‚ä¸‹ï¼š

```
$ bin/kafka-console-consumer.sh --bootstrap-server kafka-host:port --topic test-topic --group test-group --from-beginning --consumer-property enable.auto.commit=false 
```

æ³¨æ„ï¼Œåœ¨è¿™æ®µå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†groupä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œæ¯æ¬¡è¿è¡ŒConsole Consumerï¼Œå®ƒéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„æ¶ˆè´¹è€…ç»„æ¥æ¶ˆè´¹ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œä½ ä¼šå‘ç°ä½ çš„é›†ç¾¤ä¸­æœ‰å¤§é‡çš„ä»¥console-consumerå¼€å¤´çš„æ¶ˆè´¹è€…ç»„ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ æœ€å¥½è¿˜æ˜¯åŠ ä¸Šgroupã€‚

å¦å¤–ï¼Œfrom-beginningç­‰åŒäºå°†Consumerç«¯å‚æ•°auto.offset.resetè®¾ç½®æˆearliestï¼Œè¡¨æ˜æˆ‘æƒ³ä»å¤´å¼€å§‹æ¶ˆè´¹ä¸»é¢˜ã€‚å¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œå®ƒä¼šé»˜è®¤ä»æœ€æ–°ä½ç§»è¯»å–æ¶ˆæ¯ã€‚å¦‚æœæ­¤æ—¶æ²¡æœ‰ä»»ä½•æ–°æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤çš„è¾“å‡ºä¸ºç©ºï¼Œä½ ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ã€‚

æœ€åï¼Œæˆ‘åœ¨å‘½ä»¤ä¸­ç¦æ‰äº†è‡ªåŠ¨æäº¤ä½ç§»ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè®©Console Consumeræäº¤ä½ç§»æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬åªæ˜¯ç”¨å®ƒåšä¸€äº›ç®€å•çš„æµ‹è¯•ã€‚

### æµ‹è¯•ç”Ÿäº§è€…æ€§èƒ½

å¦‚æœä½ æƒ³è¦å¯¹Kafkaåšä¸€äº›ç®€å•çš„æ€§èƒ½æµ‹è¯•ã€‚é‚£ä¹ˆä¸å¦¨è¯•è¯•ä¸‹é¢è¿™ä¸€ç»„å·¥å…·ã€‚å®ƒä»¬åˆ†åˆ«ç”¨äºæµ‹è¯•ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„æ€§èƒ½ã€‚

æˆ‘ä»¬å…ˆè¯´æµ‹è¯•ç”Ÿäº§è€…çš„è„šæœ¬ï¼š**kafka-producer-perf-test**ã€‚å®ƒçš„å‚æ•°æœ‰ä¸å°‘ï¼Œä½†å…¸å‹çš„å‘½ä»¤è°ƒç”¨æ–¹å¼æ˜¯è¿™æ ·çš„ã€‚

```
$ bin/kafka-producer-perf-test.sh --topic test-topic --num-records 10000000 --throughput -1 --record-size 1024 --producer-props bootstrap.servers=kafka-host:port acks=-1 linger.ms=2000 compression.type=lz4

2175479 records sent, 435095.8 records/sec (424.90 MB/sec), 131.1 ms avg latency, 681.0 ms max latency.
4190124 records sent, 838024.8 records/sec (818.38 MB/sec), 4.4 ms avg latency, 73.0 ms max latency.
10000000 records sent, 737463.126844 records/sec (720.18 MB/sec), 31.81 ms avg latency, 681.00 ms max latency, 4 ms 50th, 126 ms 95th, 604 ms 99th, 672 ms 99.9th.
```

ä¸Šè¿°å‘½ä»¤å‘æŒ‡å®šä¸»é¢˜å‘é€äº†1åƒä¸‡æ¡æ¶ˆæ¯ï¼Œæ¯æ¡æ¶ˆæ¯å¤§å°æ˜¯1KBã€‚è¯¥å‘½ä»¤å…è®¸ä½ åœ¨producer-propsåé¢æŒ‡å®šè¦è®¾ç½®çš„ç”Ÿäº§è€…å‚æ•°ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­çš„å‹ç¼©ç®—æ³•ã€å»¶æ—¶æ—¶é—´ç­‰ã€‚

è¯¥å‘½ä»¤çš„è¾“å‡ºå€¼å¾—å¥½å¥½è¯´ä¸€ä¸‹ã€‚å®ƒä¼šæ‰“å°å‡ºæµ‹è¯•ç”Ÿäº§è€…çš„ååé‡(MB/s)ã€æ¶ˆæ¯å‘é€å»¶æ—¶ä»¥åŠå„ç§åˆ†ä½æ•°ä¸‹çš„å»¶æ—¶ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯å»¶æ—¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ç»„åˆ†å¸ƒã€‚æˆ–è€…è¯´ï¼Œ**æˆ‘ä»¬åº”è¯¥å…³å¿ƒå»¶æ—¶çš„æ¦‚ç‡åˆ†å¸ƒæƒ…å†µï¼Œä»…ä»…çŸ¥é“ä¸€ä¸ªå¹³å‡å€¼æ˜¯æ²¡æœ‰æ„ä¹‰çš„**ã€‚è¿™å°±æ˜¯è¿™é‡Œè®¡ç®—åˆ†ä½æ•°çš„åŸå› ã€‚é€šå¸¸æˆ‘ä»¬å…³æ³¨åˆ°**99thåˆ†ä½**å°±å¯ä»¥äº†ã€‚æ¯”å¦‚åœ¨ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œ99thå€¼æ˜¯604msï¼Œè¿™è¡¨æ˜æµ‹è¯•ç”Ÿäº§è€…ç”Ÿäº§çš„æ¶ˆæ¯ä¸­ï¼Œæœ‰99%æ¶ˆæ¯çš„å»¶æ—¶éƒ½åœ¨604msä»¥å†…ã€‚ä½ å®Œå…¨å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®å½“ä½œè¿™ä¸ªç”Ÿäº§è€…å¯¹å¤–æ‰¿è¯ºçš„SLAã€‚

### æµ‹è¯•æ¶ˆè´¹è€…æ€§èƒ½

æµ‹è¯•æ¶ˆè´¹è€…ä¹Ÿæ˜¯ç±»ä¼¼çš„åŸç†ï¼Œåªä¸è¿‡æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯**kafka-consumer-perf-test**è„šæœ¬ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```
$ bin/kafka-consumer-perf-test.sh --broker-list kafka-host:port --messages 10000000 --topic test-topic
start.time, end.time, data.consumed.in.MB, MB.sec, data.consumed.in.nMsg, nMsg.sec, rebalance.time.ms, fetch.time.ms, fetch.MB.sec, fetch.nMsg.sec
2019-06-26 15:24:18:138, 2019-06-26 15:24:23:805, 9765.6202, 1723.2434, 10000000, 1764602.0822, 16, 5651, 1728.1225, 1769598.3012
```

è™½ç„¶è¾“å‡ºæ ¼å¼æœ‰æ‰€å·®åˆ«ï¼Œä½†è¯¥è„šæœ¬ä¹Ÿä¼šæ‰“å°å‡ºæ¶ˆè´¹è€…çš„ååé‡æ•°æ®ã€‚æ¯”å¦‚æœ¬ä¾‹ä¸­çš„1723MB/sã€‚æœ‰ç‚¹ä»¤äººé—æ†¾çš„æ˜¯ï¼Œå®ƒæ²¡æœ‰è®¡ç®—ä¸åŒåˆ†ä½æ•°ä¸‹çš„åˆ†å¸ƒæƒ…å†µã€‚å› æ­¤ï¼Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªè„šæœ¬çš„ä½¿ç”¨ç‡è¦æ¯”ç”Ÿäº§è€…æ€§èƒ½æµ‹è¯•è„šæœ¬çš„ä½¿ç”¨ç‡ä½ã€‚

### æŸ¥çœ‹ä¸»é¢˜æ¶ˆæ¯æ€»æ•°

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æƒ³æŸ¥çœ‹æŸä¸ªä¸»é¢˜å½“å‰çš„æ¶ˆæ¯æ€»æ•°ã€‚ä»¤äººæƒŠè®¶çš„æ˜¯ï¼ŒKafkaè‡ªå¸¦çš„å‘½ä»¤ç«Ÿç„¶æ²¡æœ‰æä¾›è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªèƒ½â€œç»•é“â€è·å–äº†ã€‚æ‰€è°“çš„ç»•é“ï¼Œæ˜¯æŒ‡æˆ‘ä»¬å¿…é¡»è¦è°ƒç”¨ä¸€ä¸ªæœªè¢«è®°å½•åœ¨å®˜ç½‘ä¸Šçš„å‘½ä»¤ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š

```
$ bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list kafka-host:port --time -2 --topic test-topic

test-topic:0:0
test-topic:1:0

$ bin/kafka-run-class.sh kafka.tools.GetOffsetShell --broker-list kafka-host:port --time -1 --topic test-topic

test-topic:0:5500000
test-topic:1:5500000
```

æˆ‘ä»¬è¦ä½¿ç”¨Kafkaæä¾›çš„å·¥å…·ç±»**GetOffsetShell**æ¥è®¡ç®—ç»™å®šä¸»é¢˜ç‰¹å®šåˆ†åŒºå½“å‰çš„æœ€æ—©ä½ç§»å’Œæœ€æ–°ä½ç§»ï¼Œå°†ä¸¤è€…çš„å·®å€¼ç´¯åŠ èµ·æ¥ï¼Œå°±èƒ½å¾—åˆ°è¯¥ä¸»é¢˜å½“å‰æ€»çš„æ¶ˆæ¯æ•°ã€‚å¯¹äºæœ¬ä¾‹æ¥è¯´ï¼Œtest-topicæ€»çš„æ¶ˆæ¯æ•°ä¸º5500000 + 5500000ï¼Œç­‰äº1100ä¸‡æ¡ã€‚

### æŸ¥çœ‹æ¶ˆæ¯æ–‡ä»¶æ•°æ®

ä½œä¸ºKafkaä½¿ç”¨è€…ï¼Œä½ æ˜¯ä¸æ˜¯å¯¹Kafkaåº•å±‚æ–‡ä»¶é‡Œé¢ä¿å­˜çš„å†…å®¹å¾ˆæ„Ÿå…´è¶£? å¦‚æœæ˜¯çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨kafka-dump-logè„šæœ¬æ¥æŸ¥çœ‹å…·ä½“çš„å†…å®¹ã€‚

```
$ bin/kafka-dump-log.sh --files ../data_dir/kafka_1/test-topic-1/00000000000000000000.log 
Dumping ../data_dir/kafka_1/test-topic-1/00000000000000000000.log
Starting offset: 0
baseOffset: 0 lastOffset: 14 count: 15 baseSequence: -1 lastSequence: -1 producerId: -1 producerEpoch: -1 partitionLeaderEpoch: 0 isTransactional: false isControl: false position: 0 CreateTime: 1561597044933 size: 1237 magic: 2 compresscodec: LZ4 crc: 646766737 isvalid: true
baseOffset: 15 lastOffset: 29 count: 15 baseSequence: -1 lastSequence: -1 producerId: -1 producerEpoch: -1 partitionLeaderEpoch: 0 isTransactional: false isControl: false position: 1237 CreateTime: 1561597044934 size: 1237 magic: 2 compresscodec: LZ4 crc: 3751986433 isvalid: true
......
```

å¦‚æœåªæ˜¯æŒ‡å®š --filesï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤æ˜¾ç¤ºçš„æ˜¯æ¶ˆæ¯æ‰¹æ¬¡ï¼ˆRecordBatchï¼‰æˆ–æ¶ˆæ¯é›†åˆï¼ˆMessageSetï¼‰çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚åˆ›å»ºæ—¶é—´ã€ä½¿ç”¨çš„å‹ç¼©ç®—æ³•ã€CRCæ ¡éªŒå€¼ç­‰ã€‚

**å¦‚æœæˆ‘ä»¬æƒ³æ·±å…¥çœ‹ä¸€ä¸‹æ¯æ¡å…·ä½“çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆå°±éœ€è¦æ˜¾å¼æŒ‡å®š --deep-iterationå‚æ•°**ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ bin/kafka-dump-log.sh --files ../data_dir/kafka_1/test-topic-1/00000000000000000000.log --deep-iteration
Dumping ../data_dir/kafka_1/test-topic-1/00000000000000000000.log
Starting offset: 0
baseOffset: 0 lastOffset: 14 count: 15 baseSequence: -1 lastSequence: -1 producerId: -1 producerEpoch: -1 partitionLeaderEpoch: 0 isTransactional: false isControl: false position: 0 CreateTime: 1561597044933 size: 1237 magic: 2 compresscodec: LZ4 crc: 646766737 isvalid: true
| offset: 0 CreateTime: 1561597044911 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 1 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 2 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 3 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 4 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 5 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 6 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 7 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 8 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 9 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 10 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 11 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 12 CreateTime: 1561597044932 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 13 CreateTime: 1561597044933 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
| offset: 14 CreateTime: 1561597044933 keysize: -1 valuesize: 1024 sequence: -1 headerKeys: []
baseOffset: 15 lastOffset: 29 count: 15 baseSequence: -1 lastSequence: -1 producerId: -1 producerEpoch: -1 partitionLeaderEpoch: 0 isTransactional: false isControl: false position: 1237 CreateTime: 1561597044934 size: 1237 magic: 2 compresscodec: LZ4 crc: 3751986433 isvalid: true
......
```

åœ¨ä¸Šé¢çš„è¾“å‡ºä¸­ï¼Œä»¥ç«–çº¿å¼€å¤´çš„å°±æ˜¯æ¶ˆæ¯æ‰¹æ¬¡ä¸‹çš„æ¶ˆæ¯ä¿¡æ¯ã€‚å¦‚æœä½ è¿˜æƒ³çœ‹æ¶ˆæ¯é‡Œé¢çš„å®é™…æ•°æ®ï¼Œé‚£ä¹ˆè¿˜éœ€è¦æŒ‡å®š **--print-data-logå‚æ•°**ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ bin/kafka-dump-log.sh --files ../data_dir/kafka_1/test-topic-1/00000000000000000000.log --deep-iteration --print-data-log
```

### æŸ¥è¯¢æ¶ˆè´¹è€…ç»„ä½ç§»

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹å¦‚ä½•ä½¿ç”¨kafka-consumer-groupsè„šæœ¬æŸ¥çœ‹æ¶ˆè´¹è€…ç»„ä½ç§»ã€‚åœ¨ä¸Šä¸€è®²è®¨è®ºé‡è®¾æ¶ˆè´¹è€…ç»„ä½ç§»çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªå‘½ä»¤ã€‚å½“æ—¶æˆ‘ä»¬ç”¨çš„æ˜¯ **--reset-offsetså‚æ•°**ï¼Œä»Šå¤©æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ **--describeå‚æ•°**ã€‚å‡è®¾æˆ‘ä»¬è¦æŸ¥è¯¢Group IDæ˜¯test-groupçš„æ¶ˆè´¹è€…çš„ä½ç§»ï¼Œé‚£ä¹ˆå‘½ä»¤å¦‚å›¾æ‰€ç¤ºï¼š

![](https://static001.geekbang.org/resource/image/f4/ee/f4b7d92cdebff84998506afece1f61ee.png?wh=2100%2A146)

å›¾ä¸­çš„CURRENT-OFFSETè¡¨ç¤ºè¯¥æ¶ˆè´¹è€…å½“å‰æ¶ˆè´¹çš„æœ€æ–°ä½ç§»ï¼ŒLOG-END-OFFSETè¡¨ç¤ºå¯¹åº”åˆ†åŒºæœ€æ–°ç”Ÿäº§æ¶ˆæ¯çš„ä½ç§»ï¼ŒLAGåˆ—æ˜¯ä¸¤è€…çš„å·®å€¼ã€‚CONSUMER-IDæ˜¯Kafkaæ¶ˆè´¹è€…ç¨‹åºè‡ªåŠ¨ç”Ÿæˆçš„ä¸€ä¸ªIDã€‚æˆªæ­¢åˆ°2.2ç‰ˆæœ¬ï¼Œä½ éƒ½æ— æ³•å¹²é¢„è¿™ä¸ªIDçš„ç”Ÿæˆè¿‡ç¨‹ã€‚å¦‚æœè¿è¡Œè¯¥å‘½ä»¤æ—¶ï¼Œè¿™ä¸ªæ¶ˆè´¹è€…ç¨‹åºå·²ç»ç»ˆæ­¢äº†ï¼Œé‚£ä¹ˆæ­¤åˆ—çš„å€¼ä¸ºç©ºã€‚

## å°ç»“

å¥½äº†ï¼Œæˆ‘ä»¬å°ç»“ä¸€ä¸‹ã€‚ä»Šå¤©æˆ‘ä»¬ä¸€èµ·æ¢³ç†äº†Kafka 2.2ç‰ˆæœ¬è‡ªå¸¦çš„æ‰€æœ‰è„šæœ¬ï¼Œæˆ‘ç»™å‡ºäº†å¸¸è§çš„è¿ç»´æ“ä½œçš„å·¥å…·è¡Œå‘½ä»¤ã€‚å¸Œæœ›è¿™äº›å‘½ä»¤å¯¹ä½ æ“ä½œå’Œç®¡ç†Kafkaé›†ç¾¤æœ‰æ‰€å¸®åŠ©ã€‚å¦å¤–ï¼Œæˆ‘æƒ³å¼ºè°ƒçš„æ˜¯ï¼Œç”±äºKafkaä¾ç„¶åœ¨ä¸æ–­æ¼”è¿›ï¼Œæˆ‘ä»¬ä»Šå¤©æåˆ°çš„å‘½ä»¤çš„ç”¨æ³•å¾ˆå¯èƒ½ä¼šéšç€ç‰ˆæœ¬çš„å˜è¿è€Œå‘ç”Ÿå˜åŒ–ã€‚åœ¨å…·ä½“ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ï¼Œä½ æœ€å¥½è¯¦ç»†åœ°é˜…è¯»ä¸€ä¸‹å®ƒä»¬çš„Usageè¯´æ˜ã€‚

![](https://static001.geekbang.org/resource/image/5b/32/5b0daf262cde0c853a5cf9fbc9dfa332.jpg?wh=2069%2A2580)

## å¼€æ”¾è®¨è®º

ä½ åœ¨ä½¿ç”¨Kafkaå‘½ä»¤çš„è¿‡ç¨‹ä¸­ï¼Œæ›¾ç»è¸©è¿‡å“ªäº›â€œå‘â€ï¼Œæˆ–è€…è¯´æœ‰å“ªäº›æƒ¨ç—›çš„ç»å†å‘¢ï¼Ÿ

æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>ç‰å‰‘å†°é”‹</span> ğŸ‘ï¼ˆ39ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¦è¯´å‘é‡åˆ°ä¸¤ä¸ªï¼Œè¿™ä¸¤ä¸ªå‘éƒ½æ˜¯ç•™è¨€æé—®è€å¸ˆå¸®å¿™è§£ç­”ï¼Œéå¸¸æ„Ÿè°¢ï¼ç¬¬ä¸€ä¸ªå°±æ˜¯æ•°æ®é‡è¿‡å¤§å¯¼è‡´é‡å¯å•å°kafkaæ—¶é—´è¿‘ä¸€ä¸ªå°æ—¶æ‰èƒ½æ¢å¤ï¼Œé€šè¿‡è°ƒå¤§num.recovery.threads.per.data.dirè§£å†³;ç¬¬äºŒä¸ªå°±æ˜¯åˆ†åŒºè¿ç§»ï¼Œå‡ºç°in progressæˆ–è€…failedçŠ¶æ€ï¼Œé€šè¿‡zkåˆ é™¤&#47;controlleræ¥è§£å†³ï¼Œæµ‹è¯•ç¯å¢ƒæµ‹è¯•æ²¡é—®é¢˜ï¼Œç”Ÿäº§å‡ºç°åŒæ ·é—®é¢˜ï¼Œä½†æ˜¯æ‹…å¿ƒå¤§é‡åˆ†åŒºé‡æ–°é€‰ä¸¾leaderï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰è¯•ï¼Œä¸çŸ¥é“è€å¸ˆè¿˜æœ‰æ²¡æœ‰å…¶ä»–å¥½åŠæ³•</p>2019-08-13</li><br/><li><span>What for</span> ğŸ‘ï¼ˆ12ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>è¯·é—®è€å¸ˆæŸ¥çœ‹ä¸»é¢˜åˆ†åŒºæ¶ˆæ¯æ€»æ•° run-class è„šæœ¬ä¸­çš„ --time å‚æ•°ï¼Œ-1 å’Œ -2 åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿè¿˜æœ‰å…¶ä»–çš„å–å€¼ä¹ˆï¼Ÿè°¢è°¢ï¼</p>2019-08-31</li><br/><li><span>cricket1981</span> ğŸ‘ï¼ˆ9ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>broker-listå’Œbootstrap-serverså‚æ•°æ„Ÿè§‰ç”¨å¾—å¾ˆæ··ä¹±å•Šï¼Œæœ‰ä»€ä¹ˆè§„å¾‹å—ï¼Ÿèƒ½å¦ç»Ÿä¸€ä¸€ä¸‹ï¼Ÿ</p>2019-08-13</li><br/><li><span>cricket1981</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>client id, consumer id, consumer group idè¿™å‡ ä¸ªidä½œç”¨å’ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>2019-08-13</li><br/><li><span>è’™å¼€å¼º</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ3ï¼‰<p>è€å¸ˆï¼Œä½ å¥½ï¼Œè¿™ä¸ªkafkaçš„ç¤¾åŒºä»å“ªé‡Œå¯ä»¥çœ‹å‘¢ï¼Œæœ‰æ—¶å€™çœ‹å®˜ç½‘æ²¡æœ‰è¯¦ç»†è¯´æ˜ï¼Œæ¯”å¦‚æˆ‘åœ¨å®˜ç½‘çœ‹kafkaå¹‚ç­‰æ€§ï¼Œä¸Šé¢åªæœ‰å‚æ•°è®¾å®šï¼Œå¹¶æ²¡æœ‰è¯¦ç»†è¯´æ˜</p>2019-08-13</li><br/><li><span>Geek_bb</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å‰¯æœ¬æ˜¯ä¸€ä¸ªæ¶ˆæ¯è¿˜æ˜¯å¤šä¸ªæ¶ˆæ¯æ‰“åŒ…ï¼Ÿ
è¿™ä¸ªé—®é¢˜å›°æ‰°äº†å¾ˆä¹…ï¼Œæ²¡æœ‰çœ‹åˆ°æœ‰æåˆ°ï¼Œæ®æˆ‘æ‰€çŸ¥gemfireå°±æ˜¯å‰¯æœ¬å°±æ˜¯å¤šä¸ªrecordï¼Œè¿™æ ·èƒ½å¤Ÿå‡å°‘ä¼ è¾“å¤§å°ã€‚
å¸Œæœ›å¾—åˆ°è€å¸ˆçš„è§£ç­”ã€‚è°¢è°¢</p>2020-05-23</li><br/><li><span>Geek_edc612</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œæˆ‘æœ€è¿‘çº¿ä¸Šé›†ç¾¤é‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„æƒ…å†µï¼Œéƒ¨åˆ†topicè®¾ç½®çš„æ˜¯3å‰¯æœ¬ï¼Œä½†æ˜¯æ‰€æœ‰åˆ†åŒºéƒ½æ˜¯åªæœ‰ä¸€ä¸ªisrï¼Œä¸çŸ¥é“è¿™ç§æƒ…å†µæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Ÿ
</p>2019-08-14</li><br/><li><span>18923814485</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>kafka-broker-api-versionsæ€ä¹ˆçŸ¥é“ç°åœ¨çš„å„ä¸ªè¯·æ±‚æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œæ¯”å¦‚å›¾ä¸­ç»™å‡ºçš„æ˜¯2.1å’Œ1.1ç‰ˆæœ¬çš„å®¢æˆ·ç«¯æ”¯æŒçš„produceè¯·æ±‚çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ€ä¹ˆåˆ¤æ–­å½“å‰clientå’Œserveræ˜¯å¤„äºä¸å…¼å®¹çš„çŠ¶æ€ï¼Ÿ</p>2021-12-14</li><br/><li><span>Geek_388a76</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆï¼Œæœ€è¿‘é¡¹ç›®ç”¨çš„kafkaæ˜¯0.11.0.3ç‰ˆæœ¬çš„ï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š
åœ¨ç”Ÿäº§é›†ç¾¤ä½¿ç”¨&#47;kafka&#47;bin&#47;kafka-consumer-groups.sh  --bootstrap-server master1:9092ï¼Œmaster2:9092  --listè¿™ä¸ªå‘½ä»¤æ²¡åŠæ³•è·å–åˆ°æ¶ˆè´¹è€…ç»„
æµ‹è¯•ç¯å¢ƒå•æœºç‰ˆåˆå¯ä»¥è·å–åˆ°ï¼Œ
è¯·é—®ä¸‹è¿™æ˜¯å› ä¸ºé›†ç¾¤çš„åŸå› å—ï¼Ÿ
é¡¹ç›®æ˜¯stormç»“åˆkafkaçš„ï¼Œkafkaä½œä¸ºstormçš„spout,è¿˜æ˜¯å›°æƒ‘è¿™ä¸ªå‘½ä»¤ä½¿ç”¨æ˜¯é™åˆ¶stormçš„apiè¿˜æ˜¯è¯´ç¯é›†ç¾¤ç¯å¢ƒæ²¡æ•ˆçš„åŸå› ã€‚
éå¸¸æ„Ÿè°¢ï¼
</p>2021-05-11</li><br/><li><span>é›„é¹°</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è€å¸ˆæ‚¨å¥½ï¼Œæˆ‘ç”¨çš„kafkaæ˜¯2.3.0ç‰ˆæœ¬ï¼Œç”¨ kafka-producer-perf-test.shæµ‹è¯•ç”Ÿäº§è€…çš„æ€§èƒ½åŸºå‡†ï¼Œè¯·é—®è¿™ä¸ªç‰ˆæœ¬è¿˜åŒºåˆ†åŒæ­¥å’Œå¼‚æ­¥çš„æ–¹å¼å—ï¼Ÿåœ¨ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œæœ‰èµ„æ–™è¯´æ–°ç‰ˆæœ¬çš„éƒ½æ˜¯å¼‚æ­¥çš„äº†ï¼Œä¸å†åŒºåˆ†åŒæ­¥å’Œå¼‚æ­¥ï¼Ÿè¯·è€å¸ˆå¸®å¿™ç¡®è®¤ä¸€ä¸‹ï¼Œè°¢è°¢ï¼</p>2020-11-13</li><br/><li><span>James</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¯·é—®è€å¸ˆ,é‚®ä»¶ç»„æ˜¯å•¥.
åœ¨å®˜ç½‘ä¸ŠæŸ¥ä½¿ç”¨è¯´æ˜,æœ‰æ—¶å€™ä»…ä»…åªæ˜¯å‚æ•°è¯´æ˜;</p>2020-07-04</li><br/><li><span>J.Smile</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>æ€ä¹ˆæ‰“å°å‡ºbrokerç«¯æ‰€æœ‰çš„é»˜è®¤å‚æ•°ï¼Ÿ</p>2020-07-01</li><br/><li><span>Action</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>.&#47;kafka-console-consumer.sh --bootstrap-server 192.168.1.67:9092 --topic second --group second --from-beginning --consumer-property enable.auto.commit=false
è€å¸ˆæ‚¨å¥½ï¼Œé—®ä¸ªç®€å•å¾—é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤æ¶ˆè´¹æ•°æ®ï¼Œå°±æ˜¯æ•´ä½“hangä½äº†ï¼Œå¹¶æ²¡æœ‰æ¶ˆè´¹ï¼Œè¯·é—®æ˜¯ä»€ä¹ˆåŸå› å‘€ï¼Ÿ</p>2020-06-01</li><br/><li><span>åœ°ä¸‹åŸå‹‡å£«</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¯·é—®ä¸€ä¸‹è€å¸ˆï¼Œkafka-connectæœ‰ä»€ä¹ˆç›¸å…³èµ„æ–™å—ï¼Ÿ</p>2020-05-20</li><br/><li><span>XThundering</span> ğŸ‘ï¼ˆ0ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>Error: Exception thrown by the agent:java.rmi.server.ExportException:Port alread in use,å‡ºç°è¿™ä¸ªException,kafka ç‰ˆæœ¬å·2.2.1</p>2019-09-25</li><br/>
</ul>