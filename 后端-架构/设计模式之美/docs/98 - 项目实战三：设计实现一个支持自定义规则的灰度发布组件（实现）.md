ä¸Šä¸¤èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è§£äº†ç°åº¦ç»„ä»¶çš„éœ€æ±‚å’Œè®¾è®¡æ€è·¯ã€‚ä¸ç®¡æ˜¯ä¹‹å‰è®²è¿‡çš„é™æµã€å¹‚ç­‰æ¡†æ¶ï¼Œè¿˜æ˜¯ç°åœ¨æ­£åœ¨è®²çš„ç°åº¦ç»„ä»¶ï¼Œè¿™äº›æ¡†æ¶ã€ç»„ä»¶ã€ç±»åº“çš„åŠŸèƒ½æ€§éœ€æ±‚éƒ½ä¸å¤æ‚ï¼Œç›¸åï¼ŒéåŠŸèƒ½æ€§éœ€æ±‚æ˜¯å¼€å‘çš„é‡ç‚¹ã€éš¾ç‚¹ã€‚

ä»Šå¤©ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸ŠèŠ‚è¯¾ç»™å‡ºçš„ç°åº¦ç»„ä»¶çš„è®¾è®¡æ€è·¯ï¼Œè®²è§£å¦‚ä½•è¿›è¡Œç¼–ç å®ç°ã€‚ä¸è¿‡ä»Šå¤©å¯¹å®ç°çš„è®²è§£ï¼Œè·Ÿå‰é¢ä¸¤ä¸ªå®æˆ˜é¡¹ç›®æœ‰æ‰€ä¸åŒã€‚åœ¨å‰é¢ä¸¤ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘éƒ½æ˜¯æ‰‹æŠŠæ‰‹åœ°ä»æœ€åŸºç¡€çš„MVPä»£ç è®²èµ·ï¼Œç„¶åè®²è§£å¦‚ä½•reviewä»£ç å‘ç°é—®é¢˜ã€é‡æ„ä»£ç è§£å†³é—®é¢˜ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä»½è¿˜ç®—é«˜è´¨é‡çš„ä»£ç ã€‚è€ƒè™‘åˆ°å·²ç»æœ‰å‰é¢ä¸¤ä¸ªé¡¹ç›®çš„å­¦ä¹ å’Œé”»ç‚¼äº†ï¼Œä½ åº”è¯¥å¯¹å¼€å‘å¥—è·¯ã€æ€è€ƒè·¯å¾„å¾ˆç†Ÿæ‚‰äº†ï¼Œæ‰€ä»¥ï¼Œä»Šå¤©æˆ‘ä»¬æ¢ä¸ªè®²æ³•ï¼Œå°±ä¸ä»æœ€åŸºç¡€çš„è®²èµ·äº†ï¼Œè€Œæ˜¯é‡ç‚¹è®²è§£å®ç°æ€è·¯ã€‚

è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼

## ç°åº¦ç»„ä»¶åŠŸèƒ½éœ€æ±‚æ•´ç†

é’ˆå¯¹ä¸Šä¸¤èŠ‚è¯¾ç»™å‡ºçš„å¼€å‘éœ€æ±‚å’Œè®¾è®¡æ€è·¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŒ‰ç…§è€å¥—è·¯ï¼Œä»ä¸­å‰¥ç¦»å‡ºV1ç‰ˆæœ¬è¦å®ç°çš„å†…å®¹ã€‚ä¸ºäº†æ–¹ä¾¿æˆ‘è®²è§£å’Œä½ æŸ¥çœ‹ï¼Œæˆ‘æŠŠç°åº¦ç»„ä»¶çš„å¼€å‘éœ€æ±‚å’Œè®¾è®¡æ€è·¯ï¼Œé‡æ–°æ•´ç†ç½—åˆ—äº†ä¸€ä¸‹ï¼Œæ”¾åˆ°äº†è¿™é‡Œã€‚

### 1.ç°åº¦è§„åˆ™çš„æ ¼å¼å’Œå­˜å‚¨æ–¹å¼

æˆ‘ä»¬å¸Œæœ›æ”¯æŒä¸åŒæ ¼å¼ï¼ˆJSONã€YAMLã€XMLç­‰ï¼‰ã€ä¸åŒå­˜å‚¨æ–¹å¼ï¼ˆæœ¬åœ°é…ç½®æ–‡ä»¶ã€Redisã€Zookeeperã€æˆ–è€…è‡ªç ”é…ç½®ä¸­å¿ƒç­‰ï¼‰çš„ç°åº¦è§„åˆ™é…ç½®æ–¹å¼ã€‚å®é™…ä¸Šï¼Œè¿™ä¸€ç‚¹è·Ÿä¹‹å‰çš„é™æµæ¡†æ¶ä¸­é™æµè§„åˆ™çš„æ ¼å¼å’Œå­˜å‚¨æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œä»£ç å®ç°ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥åœ¨æ¥ä¸‹æ¥çš„è®²è§£ä¸­ï¼Œå°±ä¸é‡å¤å•°å—¦äº†ï¼Œä½ å¯ä»¥å›è¿‡å¤´å»çœ‹ä¸‹[ç¬¬92è®²](https://time.geekbang.org/column/article/243961)ã€‚

### 2.ç°åº¦è§„åˆ™çš„è¯­æ³•æ ¼å¼

æˆ‘ä»¬æ”¯æŒä¸‰ç§ç°åº¦è§„åˆ™è¯­æ³•æ ¼å¼ï¼šå…·ä½“å€¼ï¼ˆæ¯”å¦‚893ï¼‰ã€åŒºé—´å€¼ï¼ˆæ¯”å¦‚1020-1120ï¼‰ã€æ¯”ä¾‹å€¼ï¼ˆæ¯”å¦‚%30ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºæ›´åŠ å¤æ‚çš„ç°åº¦è§„åˆ™ï¼Œæ¯”å¦‚åªå¯¹30å¤©å†…è´­ä¹°è¿‡æŸæŸå•†å“å¹¶ä¸”é€€è´§æ¬¡æ•°å°‘äº10æ¬¡çš„ç”¨æˆ·è¿›è¡Œç°åº¦ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼æ¥å®ç°ã€‚

### 3.ç°åº¦è§„åˆ™çš„å†…å­˜ç»„ç»‡æ–¹å¼

ç±»ä¼¼äºé™æµæ¡†æ¶ä¸­çš„é™æµè§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç°åº¦è§„åˆ™ç»„ç»‡æˆæ”¯æŒå¿«é€ŸæŸ¥æ‰¾çš„æ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿå¿«é€Ÿåˆ¤å®šæŸä¸ªç°åº¦å¯¹è±¡ï¼ˆdarkTargetï¼Œæ¯”å¦‚ç”¨æˆ·IDï¼‰ï¼Œæ˜¯å¦è½åœ¨ç°åº¦è§„åˆ™è®¾å®šçš„èŒƒå›´å†…ã€‚

### 4.ç°åº¦è§„åˆ™çƒ­æ›´æ–°

ä¿®æ”¹äº†ç°åº¦è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬å¸Œæœ›ä¸é‡æ–°éƒ¨ç½²å’Œé‡å¯ç³»ç»Ÿï¼Œæ–°çš„ç°åº¦è§„åˆ™å°±èƒ½ç”Ÿæ•ˆï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ”¯æŒç°åº¦è§„åˆ™çƒ­æ›´æ–°ã€‚

åœ¨V1ç‰ˆæœ¬ä¸­ï¼Œå¯¹äºç¬¬ä¸€ç‚¹ç°åº¦è§„åˆ™çš„æ ¼å¼å’Œå­˜å‚¨æ–¹å¼ï¼Œæˆ‘ä»¬åªæ”¯æŒYAMLæ ¼å¼æœ¬åœ°æ–‡ä»¶çš„é…ç½®å­˜å‚¨æ–¹å¼ã€‚å¯¹äºå‰©ä¸‹çš„ä¸‰ç‚¹ï¼Œæˆ‘ä»¬éƒ½è¦è¿›è¡Œå®ç°ã€‚è€ƒè™‘åˆ°V1ç‰ˆæœ¬è¦å®ç°çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬åˆ†ä¸¤æ­¥æ¥å®ç°ä»£ç ï¼Œç¬¬ä¸€æ­¥å…ˆå°†å¤§çš„æµç¨‹ã€æ¡†æ¶æ­å»ºå¥½ï¼Œç¬¬äºŒæ­¥å†è¿›ä¸€æ­¥æ·»åŠ ã€ä¸°å¯Œã€ä¼˜åŒ–åŠŸèƒ½ã€‚

## å®ç°ç°åº¦ç»„ä»¶åŸºæœ¬åŠŸèƒ½

åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å…ˆå®ç°åŸºäºYAMLæ ¼å¼çš„æœ¬åœ°æ–‡ä»¶çš„ç°åº¦è§„åˆ™é…ç½®æ–¹å¼ï¼Œä»¥åŠç°åº¦è§„åˆ™çƒ­æ›´æ–°ï¼Œå¹¶ä¸”åªæ”¯æŒä¸‰ç§åŸºæœ¬çš„ç°åº¦è§„åˆ™è¯­æ³•æ ¼å¼ã€‚åŸºäºç¼–ç¨‹å®ç°ç°åº¦è§„åˆ™çš„æ–¹å¼ï¼Œæˆ‘ä»¬ç•™åœ¨ç¬¬äºŒæ­¥å®ç°ã€‚

æˆ‘ä»¬å…ˆæŠŠè¿™ä¸ªåŸºæœ¬åŠŸèƒ½çš„å¼€å‘éœ€æ±‚ï¼Œç”¨ä»£ç å®ç°å‡ºæ¥ã€‚å®ƒçš„ç›®å½•ç»“æ„åŠå…¶Demoç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚ä»£ç éå¸¸ç®€å•ï¼ŒåªåŒ…å«4ä¸ªç±»ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é’ˆå¯¹æ¯ä¸ªç±»å†è¯¦ç»†è®²è§£ä¸€ä¸‹ã€‚

```
// ä»£ç ç›®å½•ç»“æ„
com.xzg.darklaunch
  --DarkLaunch(æ¡†æ¶çš„æœ€é¡¶å±‚å…¥å£ç±»)
  --DarkFeature(æ¯ä¸ªfeatureçš„ç°åº¦è§„åˆ™)
  --DarkRule(ç°åº¦è§„åˆ™)
  --DarkRuleConfig(ç”¨æ¥æ˜ å°„é…ç½®åˆ°å†…å­˜ä¸­)

// Demoç¤ºä¾‹
public class DarkDemo {
  public static void main(String[] args) {
    DarkLaunch darkLaunch = new DarkLaunch();
    DarkFeature darkFeature = darkLaunch.getDarkFeature("call_newapi_getUserById");
    System.out.println(darkFeature.enabled());
    System.out.println(darkFeature.dark(893));
  }
}

// ç°åº¦è§„åˆ™é…ç½®(dark-rule.yaml)æ”¾ç½®åœ¨classpathè·¯å¾„ä¸‹
features:
- key: call_newapi_getUserById
  enabled: true
  rule: {893,342,1020-1120,%30}
- key: call_newapi_registerUser
  enabled: true
  rule: {1391198723, %10}
- key: newalgo_loan
  enabled: true
  rule: {0-1000}
```

ä»Demoä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºä¸šåŠ¡ç³»ç»Ÿæ¥è¯´ï¼Œç°åº¦ç»„ä»¶çš„ä¸¤ä¸ªç›´æ¥ä½¿ç”¨çš„ç±»æ˜¯DarkLaunchç±»å’ŒDarkFeatureç±»ã€‚

**æˆ‘ä»¬å…ˆæ¥çœ‹DarkLaunchç±»ã€‚**è¿™ä¸ªç±»æ˜¯ç°åº¦ç»„ä»¶çš„æœ€é¡¶å±‚å…¥å£ç±»ã€‚å®ƒç”¨æ¥ç»„è£…å…¶ä»–ç±»å¯¹è±¡ï¼Œä¸²è”æ•´ä¸ªæ“ä½œæµç¨‹ï¼Œæä¾›å¤–éƒ¨è°ƒç”¨çš„æ¥å£ã€‚

DarkLaunchç±»å…ˆè¯»å–ç°åº¦è§„åˆ™é…ç½®æ–‡ä»¶ï¼Œæ˜ å°„ä¸ºå†…å­˜ä¸­çš„Javaå¯¹è±¡ï¼ˆDarkRuleConfigï¼‰ï¼Œç„¶åå†å°†è¿™ä¸ªä¸­é—´ç»“æ„ï¼Œæ„å»ºæˆä¸€ä¸ªæ”¯æŒå¿«é€ŸæŸ¥è¯¢çš„æ•°æ®ç»“æ„ï¼ˆDarkRuleï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜è´Ÿè´£å®šæœŸæ›´æ–°ç°åº¦è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯å‰é¢æåˆ°çš„ç°åº¦è§„åˆ™çƒ­æ›´æ–°ã€‚

ä¸ºäº†é¿å…æ›´æ–°è§„åˆ™å’ŒæŸ¥è¯¢è§„åˆ™çš„å¹¶å‘æ‰§è¡Œå†²çªï¼Œåœ¨æ›´æ–°ç°åº¦è§„åˆ™çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶éç›´æ¥æ“ä½œè€çš„DarkRuleï¼Œè€Œæ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„DarkRuleï¼Œç„¶åç­‰æ–°çš„DarkRuleéƒ½æ„å»ºå¥½ä¹‹åï¼Œå†â€œç¬é—´â€èµ‹å€¼ç»™è€çš„DarkRuleã€‚ä½ å¯ä»¥ç»“åˆç€ä¸‹é¢çš„ä»£ç ä¸€å—çœ‹ä¸‹ã€‚

```
public class DarkLaunch {
  private static final Logger log = LoggerFactory.getLogger(DarkLaunch.class);
  private static final int DEFAULT_RULE_UPDATE_TIME_INTERVAL = 60; // in seconds
  private DarkRule rule;
  private ScheduledExecutorService executor;

  public DarkLaunch(int ruleUpdateTimeInterval) {
    loadRule();
    this.executor = Executors.newSingleThreadScheduledExecutor();
    this.executor.scheduleAtFixedRate(new Runnable() {
      @Override
      public void run() {
        loadRule();
      }
    }, ruleUpdateTimeInterval, ruleUpdateTimeInterval, TimeUnit.SECONDS);
  }

  public DarkLaunch() {
    this(DEFAULT_RULE_UPDATE_TIME_INTERVAL);
  }

  private void loadRule() {
    // å°†ç°åº¦è§„åˆ™é…ç½®æ–‡ä»¶dark-rule.yamlä¸­çš„å†…å®¹è¯»å–DarkRuleConfigä¸­
    InputStream in = null;
    DarkRuleConfig ruleConfig = null;
    try {
      in = this.getClass().getResourceAsStream("/dark-rule.yaml");
      if (in != null) {
        Yaml yaml = new Yaml();
        ruleConfig = yaml.loadAs(in, DarkRuleConfig.class);
      }
    } finally {
      if (in != null) {
        try {
          in.close();
        } catch (IOException e) {
          log.error("close file error:{}", e);
        }
      }
    }

    if (ruleConfig == null) {
      throw new RuntimeException("Can not load dark rule.");
    }
    // æ›´æ–°è§„åˆ™å¹¶éç›´æ¥åœ¨this.ruleä¸Šè¿›è¡Œï¼Œ
    // è€Œæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„DarkRuleï¼Œç„¶åèµ‹å€¼ç»™this.ruleï¼Œ
    // æ¥é¿å…æ›´æ–°è§„åˆ™å’Œè§„åˆ™æŸ¥è¯¢çš„å¹¶å‘å†²çªé—®é¢˜
    DarkRule newRule = new DarkRule(ruleConfig);
    this.rule = newRule;
  }

  public DarkFeature getDarkFeature(String featureKey) {
    DarkFeature darkFeature = this.rule.getDarkFeature(featureKey);
    return darkFeature;
  }
}
```

**æˆ‘ä»¬å†æ¥çœ‹ä¸‹DarkRuleConfigç±»ã€‚**è¿™ä¸ªç±»åŠŸèƒ½éå¸¸ç®€å•ï¼Œåªæ˜¯ç”¨æ¥å°†ç°åº¦è§„åˆ™æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```
public class DarkRuleConfig {
  private List<DarkFeatureConfig> features;

  public List<DarkFeatureConfig> getFeatures() {
    return this.features;
  }

  public void setFeatures(List<DarkFeatureConfig> features) {
    this.features = features;
  }

  public static class DarkFeatureConfig {
    private String key;
    private boolean enabled;
    private String rule;
    // çœç•¥getterã€setteræ–¹æ³•
  }
}
```

ä»ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼ŒDarkRuleConfigç±»åµŒå¥—äº†ä¸€ä¸ªå†…éƒ¨ç±»DarkFeatureConfigã€‚è¿™ä¸¤ä¸ªç±»è·Ÿé…ç½®æ–‡ä»¶çš„ä¸¤å±‚åµŒå¥—ç»“æ„å®Œå…¨å¯¹åº”ã€‚æˆ‘æŠŠå¯¹åº”å…³ç³»æ ‡æ³¨åœ¨äº†ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥å¯¹ç…§ç€ä»£ç çœ‹ä¸‹ã€‚

```
<!--å¯¹åº”DarkRuleConfig-->
features:                       
- key: call_newapi_getUserById  <!--å¯¹åº”DarkFeatureConfig-->
  enabled: true
  rule: {893,342,1020-1120,%30}
- key: call_newapi_registerUser <!--å¯¹åº”DarkFeatureConfig-->
  enabled: true
  rule: {1391198723, %10}
- key: newalgo_loan             <!--å¯¹åº”DarkFeatureConfig-->
  enabled: true
  rule: {0-1000}
```

**æˆ‘ä»¬å†æ¥çœ‹ä¸‹DarkRuleã€‚**DarkRuleåŒ…å«æ‰€æœ‰è¦ç°åº¦çš„ä¸šåŠ¡åŠŸèƒ½çš„ç°åº¦è§„åˆ™ã€‚å®ƒç”¨æ¥æ”¯æŒæ ¹æ®ä¸šåŠ¡åŠŸèƒ½æ ‡è¯†ï¼ˆfeature keyï¼‰ï¼Œå¿«é€ŸæŸ¥è¯¢ç°åº¦è§„åˆ™ï¼ˆDarkFeatureï¼‰ã€‚ä»£ç ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š

```
public class DarkRule {
  private Map<String, DarkFeature> darkFeatures = new HashMap<>();

  public DarkRule(DarkRuleConfig darkRuleConfig) {
    List<DarkRuleConfig.DarkFeatureConfig> darkFeatureConfigs = darkRuleConfig.getFeatures();
    for (DarkRuleConfig.DarkFeatureConfig darkFeatureConfig : darkFeatureConfigs) {
      darkFeatures.put(darkFeatureConfig.getKey(), new DarkFeature(darkFeatureConfig));
    }
  }

  public DarkFeature getDarkFeature(String featureKey) {
    return darkFeatures.get(featureKey);
  }
}
```

**æˆ‘ä»¬æœ€åæ¥çœ‹ä¸‹DarkFeatureç±»ã€‚**DarkFeatureç±»è¡¨ç¤ºæ¯ä¸ªè¦ç°åº¦çš„ä¸šåŠ¡åŠŸèƒ½çš„ç°åº¦è§„åˆ™ã€‚DarkFeatureå°†é…ç½®æ–‡ä»¶ä¸­ç°åº¦è§„åˆ™ï¼Œè§£ææˆä¸€å®šçš„ç»“æ„ï¼ˆæ¯”å¦‚RangeSetï¼‰ï¼Œæ–¹ä¾¿å¿«é€Ÿåˆ¤å®šæŸä¸ªç°åº¦å¯¹è±¡æ˜¯å¦è½åœ¨ç°åº¦è§„åˆ™èŒƒå›´å†…ã€‚å…·ä½“çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```
public class DarkFeature {
  private String key;
  private boolean enabled;
  private int percentage;
  private RangeSet<Long> rangeSet = TreeRangeSet.create();

  public DarkFeature(DarkRuleConfig.DarkFeatureConfig darkFeatureConfig) {
    this.key = darkFeatureConfig.getKey();
    this.enabled = darkFeatureConfig.getEnabled();
    String darkRule = darkFeatureConfig.getRule().trim();
    parseDarkRule(darkRule);
  }

  @VisibleForTesting
  protected void parseDarkRule(String darkRule) {
    if (!darkRule.startsWith("{") || !darkRule.endsWith("}")) {
      throw new RuntimeException("Failed to parse dark rule: " + darkRule);
    }

    String[] rules = darkRule.substring(1, darkRule.length() - 1).split(",");
    this.rangeSet.clear();
    this.percentage = 0;
    for (String rule : rules) {
      rule = rule.trim();
      if (StringUtils.isEmpty(rule)) {
        continue;
      }

      if (rule.startsWith("%")) {
        int newPercentage = Integer.parseInt(rule.substring(1));
        if (newPercentage > this.percentage) {
          this.percentage = newPercentage;
        }
      } else if (rule.contains("-")) {
        String[] parts = rule.split("-");
        if (parts.length != 2) {
          throw new RuntimeException("Failed to parse dark rule: " + darkRule);
        }
        long start = Long.parseLong(parts[0]);
        long end = Long.parseLong(parts[1]);
        if (start > end) {
          throw new RuntimeException("Failed to parse dark rule: " + darkRule);
        }
        this.rangeSet.add(Range.closed(start, end));
      } else {
        long val = Long.parseLong(rule);
        this.rangeSet.add(Range.closed(val, val));
      }
    }
  }

  public boolean enabled() {
    return this.enabled;
  }

  public boolean dark(long darkTarget) {
    boolean selected = this.rangeSet.contains(darkTarget);
    if (selected) {
      return true;
    }

    long reminder = darkTarget % 100;
    if (reminder >= 0 && reminder < this.percentage) {
      return true;
    }

    return false;
  }

  public boolean dark(String darkTarget) {
    long target = Long.parseLong(darkTarget);
    return dark(target);
  }
}
```

## æ·»åŠ ã€ä¼˜åŒ–ç°åº¦ç»„ä»¶åŠŸèƒ½

åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†ç°åº¦ç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½ã€‚åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œæˆ‘ä»¬å†å®ç°åŸºäºç¼–ç¨‹çš„ç°åº¦è§„åˆ™é…ç½®æ–¹å¼ï¼Œç”¨æ¥æ”¯æŒæ›´åŠ å¤æ‚ã€æ›´åŠ çµæ´»çš„ç°åº¦è§„åˆ™ã€‚

æˆ‘ä»¬éœ€è¦å¯¹äºç¬¬ä¸€æ­¥å®ç°çš„ä»£ç ï¼Œè¿›è¡Œä¸€äº›æ”¹é€ ã€‚æ”¹é€ ä¹‹åçš„ä»£ç ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºã€‚å…¶ä¸­ï¼ŒDarkFeatureã€DarkRuleConfigçš„åŸºæœ¬ä»£ç ä¸å˜ï¼Œæ–°å¢äº†IDarkFeatureæ¥å£ï¼ŒDarkLaunchã€DarkRuleçš„ä»£ç æœ‰æ‰€æ”¹åŠ¨ï¼Œç”¨æ¥æ”¯æŒç¼–ç¨‹å®ç°ç°åº¦è§„åˆ™ã€‚

```
// ç¬¬ä¸€æ­¥çš„ä»£ç ç›®å½•ç»“æ„
com.xzg.darklaunch
  --DarkLaunch(æ¡†æ¶çš„æœ€é¡¶å±‚å…¥å£ç±»)
  --DarkFeature(æ¯ä¸ªfeatureçš„ç°åº¦è§„åˆ™)
  --DarkRule(ç°åº¦è§„åˆ™)
  --DarkRuleConfig(ç”¨æ¥æ˜ å°„é…ç½®åˆ°å†…å­˜ä¸­)

// ç¬¬äºŒæ­¥çš„ä»£ç ç›®å½•ç»“æ„
com.xzg.darklaunch
  --DarkLaunch(æ¡†æ¶çš„æœ€é¡¶å±‚å…¥å£ç±»ï¼Œä»£ç æœ‰æ”¹åŠ¨)
  --IDarkFeature(æŠ½è±¡æ¥å£)
  --DarkFeature(å®ç°IDarkFeatureæ¥å£ï¼ŒåŸºäºé…ç½®æ–‡ä»¶çš„ç°åº¦è§„åˆ™ï¼Œä»£ç ä¸å˜)
  --DarkRule(ç°åº¦è§„åˆ™ï¼Œä»£ç æœ‰æ”¹åŠ¨)
  --DarkRuleConfig(ç”¨æ¥æ˜ å°„é…ç½®åˆ°å†…å­˜ä¸­ï¼Œä»£ç ä¸å˜)
```

æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹IDarkFeatureæ¥å£ï¼Œå®ƒç”¨æ¥æŠ½è±¡ä»é…ç½®æ–‡ä»¶ä¸­å¾—åˆ°çš„ç°åº¦è§„åˆ™ï¼Œä»¥åŠç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™ã€‚å…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```
public interface IDarkFeature {
  boolean enabled();
  boolean dark(long darkTarget);
  boolean dark(String darkTarget);
}
```

åŸºäºè¿™ä¸ªæŠ½è±¡æ¥å£ï¼Œä¸šåŠ¡ç³»ç»Ÿå¯ä»¥è‡ªå·±ç¼–ç¨‹å®ç°å¤æ‚çš„ç°åº¦è§„åˆ™ï¼Œç„¶åæ·»åŠ åˆ°DarkRuleä¸­ã€‚ä¸ºäº†é¿å…é…ç½®æ–‡ä»¶ä¸­çš„ç°åº¦è§„åˆ™çƒ­æ›´æ–°æ—¶ï¼Œè¦†ç›–æ‰ç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™ï¼Œåœ¨DarkRuleä¸­ï¼Œæˆ‘ä»¬å¯¹ä»é…ç½®æ–‡ä»¶ä¸­åŠ è½½çš„ç°åº¦è§„åˆ™å’Œç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™åˆ†å¼€å­˜å‚¨ã€‚æŒ‰ç…§è¿™ä¸ªè®¾è®¡æ€è·¯ï¼Œæˆ‘ä»¬å¯¹DarkRuleç±»è¿›è¡Œé‡æ„ã€‚é‡æ„ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```
public class DarkRule {
  // ä»é…ç½®æ–‡ä»¶ä¸­åŠ è½½çš„ç°åº¦è§„åˆ™
  private Map<String, IDarkFeature> darkFeatures = new HashMap<>();
  // ç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™
  private ConcurrentHashMap<String, IDarkFeature> programmedDarkFeatures = new ConcurrentHashMap<>();

  public void addProgrammedDarkFeature(String featureKey, IDarkFeature darkFeature) {
    programmedDarkFeatures.put(featureKey, darkFeature);
  }

  public void setDarkFeatures(Map<String, IDarkFeature> newDarkFeatures) {
    this.darkFeatures = newDarkFeatures;
  }

  public IDarkFeature getDarkFeature(String featureKey) {
    IDarkFeature darkFeature = programmedDarkFeatures.get(featureKey);
    if (darkFeature != null) {
      return darkFeature;
    }
    return darkFeatures.get(featureKey);
  }
}
```

å› ä¸ºDarkRuleä»£ç æœ‰æ‰€ä¿®æ”¹ï¼Œå¯¹åº”åœ°ï¼ŒDarkLaunchçš„ä»£ç ä¹Ÿéœ€è¦åšå°‘è®¸æ”¹åŠ¨ï¼Œä¸»è¦æœ‰ä¸€å¤„ä¿®æ”¹å’Œä¸€å¤„æ–°å¢ä»£ç ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘åœ¨ä»£ç ä¸­éƒ½åšäº†æ³¨é‡Šï¼Œå°±ä¸å†é‡å¤è§£é‡Šäº†ã€‚

```
public class DarkLaunch {
  private static final Logger log = LoggerFactory.getLogger(DarkLaunch.class);
  private static final int DEFAULT_RULE_UPDATE_TIME_INTERVAL = 60; // in seconds
  private DarkRule rule = new DarkRule();
  private ScheduledExecutorService executor;

  public DarkLaunch(int ruleUpdateTimeInterval) {
    loadRule();
    this.executor = Executors.newSingleThreadScheduledExecutor();
    this.executor.scheduleAtFixedRate(new Runnable() {
      @Override
      public void run() {
        loadRule();
      }
    }, ruleUpdateTimeInterval, ruleUpdateTimeInterval, TimeUnit.SECONDS);
  }

  public DarkLaunch() {
    this(DEFAULT_RULE_UPDATE_TIME_INTERVAL);
  }

  private void loadRule() {
    InputStream in = null;
    DarkRuleConfig ruleConfig = null;
    try {
      in = this.getClass().getResourceAsStream("/dark-rule.yaml");
      if (in != null) {
        Yaml yaml = new Yaml();
        ruleConfig = yaml.loadAs(in, DarkRuleConfig.class);
      }
    } finally {
      if (in != null) {
        try {
          in.close();
        } catch (IOException e) {
          log.error("close file error:{}", e);
        }
      }
    }

    if (ruleConfig == null) {
      throw new RuntimeException("Can not load dark rule.");
    }
    
    // ä¿®æ”¹ï¼šå•ç‹¬æ›´æ–°ä»é…ç½®æ–‡ä»¶ä¸­å¾—åˆ°çš„ç°åº¦è§„åˆ™ï¼Œä¸è¦†ç›–ç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™
    Map<String, IDarkFeature> darkFeatures = new HashMap<>();
    List<DarkRuleConfig.DarkFeatureConfig> darkFeatureConfigs = ruleConfig.getFeatures();
    for (DarkRuleConfig.DarkFeatureConfig darkFeatureConfig : darkFeatureConfigs) {
      darkFeatures.put(darkFeatureConfig.getKey(), new DarkFeature(darkFeatureConfig));
    }
    this.rule.setDarkFeatures(darkFeatures);
  }

  // æ–°å¢ï¼šæ·»åŠ ç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™çš„æ¥å£
  public void addProgrammedDarkFeature(String featureKey, IDarkFeature darkFeature) {
    this.rule.addProgrammedDarkFeature(featureKey, darkFeature);
  }

  public IDarkFeature getDarkFeature(String featureKey) {
    IDarkFeature darkFeature = this.rule.getDarkFeature(featureKey);
    return darkFeature;
  }
}
```

ç°åº¦ç»„ä»¶çš„ä»£ç å®ç°å°±è®²å®Œäº†ã€‚æˆ‘ä»¬å†é€šè¿‡ä¸€ä¸ªDemoæ¥çœ‹ä¸‹ï¼Œç›®å‰å®ç°çš„ç°åº¦ç»„ä»¶è¯¥å¦‚ä½•ä½¿ç”¨ã€‚ç»“åˆç€Demoï¼Œå†å»ç†è§£ä¸Šé¢çš„ä»£ç ï¼Œä¼šæ›´å®¹æ˜“äº›ã€‚Demoä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

```
// ç°åº¦è§„åˆ™é…ç½®(dark-rule.yaml)ï¼Œæ”¾åˆ°classpathè·¯å¾„ä¸‹
features:
- key: call_newapi_getUserById
  enabled: true
  rule: {893,342,1020-1120,%30}
- key: call_newapi_registerUser
  enabled: true
  rule: {1391198723, %10}
- key: newalgo_loan
  enabled: true
  rule: {0-100}
  
// ç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™
public class UserPromotionDarkRule implements IDarkFeature {
  @Override
  public boolean enabled() {
    return true;
  }

  @Override
  public boolean dark(long darkTarget) {
    // ç°åº¦è§„åˆ™è‡ªå·±æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™
    return false;
  }

  @Override
  public boolean dark(String darkTarget) {
    // ç°åº¦è§„åˆ™è‡ªå·±æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™
    return false;
  }
}

// Demo
public class Demo {
  public static void main(String[] args) {
    DarkLaunch darkLaunch = new DarkLaunch(); // é»˜è®¤åŠ è½½classpathä¸‹dark-rule.yamlæ–‡ä»¶ä¸­çš„ç°åº¦è§„åˆ™
    darkLaunch.addProgrammedDarkFeature("user_promotion", new UserPromotionDarkRule()); // æ·»åŠ ç¼–ç¨‹å®ç°çš„ç°åº¦è§„åˆ™
    IDarkFeature darkFeature = darkLaunch.getDarkFeature("user_promotion");
    System.out.println(darkFeature.enabled());
    System.out.println(darkFeature.dark(893));
  }
}
```

## é‡ç‚¹å›é¡¾

å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚

åˆ°ä»Šå¤©ä¸ºæ­¢ï¼Œé¡¹ç›®å®æˆ˜ç¯èŠ‚å°±å½»åº•ç»“æŸäº†ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é™æµã€å¹‚ç­‰ã€ç°åº¦è¿™ä¸‰ä¸ªå®æˆ˜é¡¹ç›®ï¼Œå¸¦ä½ ä»éœ€æ±‚åˆ†æã€ç³»ç»Ÿè®¾è®¡ã€ä»£ç å®ç°è¿™ä¸‰ä¸ªç¯èŠ‚ï¼Œå­¦ä¹ äº†å¦‚ä½•è¿›è¡ŒåŠŸèƒ½æ€§ã€éåŠŸèƒ½æ€§éœ€æ±‚åˆ†æï¼Œå¦‚ä½•é€šè¿‡åˆç†çš„è®¾è®¡ï¼Œå®ŒæˆåŠŸèƒ½æ€§éœ€æ±‚çš„åŒæ—¶ï¼Œæ»¡è¶³éåŠŸèƒ½æ€§éœ€æ±‚ï¼Œä»¥åŠå¦‚ä½•ç¼–å†™é«˜è´¨é‡çš„ä»£ç å®ç°ã€‚

å®é™…ä¸Šï¼Œé¡¹ç›®æœ¬èº«çš„åˆ†æã€è®¾è®¡ã€å®ç°å¹¶ä¸é‡è¦ï¼Œä¸å¿…å¯¹ç»†èŠ‚è¿‡äºçº ç»“ã€‚æˆ‘å¸Œæœ›é€šè¿‡è¿™ä¸‰ä¸ªä¾‹å­ï¼Œåˆ†äº«æˆ‘çš„æ€è€ƒè·¯å¾„ã€å¼€å‘å¥—è·¯ï¼Œè®©ä½ å€Ÿé‰´å¹¶ä¸¾ä¸€åä¸‰åœ°åº”ç”¨åˆ°ä½ å¹³æ—¶çš„é¡¹ç›®å¼€å‘ä¸­ã€‚æˆ‘è§‰å¾—è¿™æ‰æ˜¯æœ€æœ‰ä»·å€¼çš„ï¼Œæ‰æ˜¯ä½ å­¦ä¹ çš„é‡ç‚¹ã€‚

å¦‚æœä½ å­¦å®Œè¿™ä¸€éƒ¨åˆ†ä¹‹åï¼Œå¯¹äºé¡¹ç›®ä¸­çš„ä¸€äº›é€šç”¨çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿå¼€å§‹ä¸‹æ„è¯†åœ°ä¸»åŠ¨æ€è€ƒä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œè€ƒè™‘å¦‚ä½•æŠ½è±¡æˆæ¡†æ¶ã€ç±»åº“ã€ç»„ä»¶ï¼Œå¹¶ä¸”å¯¹äºå¦‚ä½•å¼€å‘ï¼Œä¹Ÿä¸å†è§‰å¾—æ— ä»ä¸‹æ‰‹ï¼Œè€Œæ˜¯è§‰å¾—æœ‰ç« å¯å¾ªï¼Œé‚£æˆ‘è§‰å¾—ä½ å°±å­¦åˆ°äº†è¿™ä¸€éƒ¨åˆ†çš„ç²¾é«“ã€‚

## è¯¾å ‚è®¨è®º

åœ¨DarkFeatureç±»ä¸­ï¼Œç°åº¦è§„åˆ™çš„è§£æä»£ç è®¾è®¡çš„ä¸å¤Ÿä¼˜é›…ï¼Œä½ è§‰å¾—é—®é¢˜åœ¨å“ªé‡Œå‘¢ï¼Ÿåˆè¯¥å¦‚ä½•é‡æ„å‘¢ï¼Ÿ

æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚
<div><strong>ç²¾é€‰ç•™è¨€ï¼ˆ15ï¼‰</strong></div><ul>
<li><span>Jagger</span> ğŸ‘ï¼ˆ14ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>DarkLaunch æ„é€ å™¨åŒ…å«å®šæ—¶è½®è¯¢ï¼Œä¼šä¸ä¼šå½±å“å•å…ƒæµ‹è¯•ï¼Ÿ</p>2020-08-07</li><br/><li><span>robincoin</span> ğŸ‘ï¼ˆ8ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>mqå’Œæ•°æ®åº“ç°åº¦æ˜¯ä¸æ˜¯è¦å¯¹mqå’Œæ•°æ®åº“å†å°è£…ä¸€å±‚ï¼Œæ–¹ä¾¿aopå¤„ç†ï¼Ÿ</p>2020-06-17</li><br/><li><span>æ±æ—å¤–å²</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ2ï¼‰<p>å¥½åƒdarkæ–¹æ³•ä¸­æ²¡æœ‰å¯¹åŒºé—´çš„è§„åˆ™è¿›è¡Œå¤„ç†</p>2020-07-15</li><br/><li><span>å°æ™å­</span> ğŸ‘ï¼ˆ46ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>è¿™ä¸ªDarkFeatureç±»ä¸­ç°åº¦è§„åˆ™çš„è§£æä»£ç ä¸ä¼˜é›…çš„åœ°æ–¹åœ¨äºä¸å¤Ÿçµæ´»ï¼Œå¦‚æœæœ‰æ–°çš„ç°åº¦è§„åˆ™è¦åŠ å…¥ï¼Œå°±éœ€è¦å†æ·»åŠ if elseä½œå¤„ç†ï¼Œç ´åäº†å¼€é—­åŸåˆ™ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼â•ç­–ç•¥æ¨¡å¼æ¥ä¿è¯å¼€é—­åŸåˆ™å’Œæ¶ˆé™¤if&#47;elseï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼æ¥å®ç°é’ˆå¯¹æ¯ä¸ªç°åº¦è§„åˆ™çš„å¤„ç†ï¼Œä½¿ç”¨â€œæŸ¥è¡¨æ³•â€çš„ç­–ç•¥æ¨¡å¼æ¥æ¶ˆé™¤if&#47;elseï¼</p>2020-06-17</li><br/><li><span>Lee</span> ğŸ‘ï¼ˆ19ï¼‰ ğŸ’¬ï¼ˆ1ï¼‰<p>å¯ä»¥ä½¿ç”¨è§£é‡Šå™¨æ¨¡å¼ï¼Œå°†ä¸åŒç±»å‹çš„è§„åˆ™è§£ææ‹†åˆ†åˆ°ä¸åŒçš„ç±»ä¸­ã€‚</p>2020-06-17</li><br/><li><span>tingye</span> ğŸ‘ï¼ˆ16ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>å¯ä»¥è€ƒè™‘ç”¨èŒè´£é“¾æ¨¡å¼ï¼Œå°†ä¸åŒè§„åˆ™å­—ç¬¦ä¸²çš„è§£ææŠ½è±¡ä¸ºå•ç‹¬çš„handleç±»ï¼Œä¾æ¬¡è§£æç›´åˆ°å®Œæˆå¤„ç†ï¼Œä¹Ÿæ–¹ä¾¿æ‰©å±•å¯¹æ–°è§„åˆ™ç¼–å†™è¯­æ³•çš„è§£æ</p>2020-06-17</li><br/><li><span>Heaven</span> ğŸ‘ï¼ˆ7ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>åœ¨æ­¤ç±»åœºæ™¯ä¸‹,æˆ‘ä»¬å¯ä»¥ç®€å•çš„ä½¿ç”¨å·¥å‚ç±»å»å°è£…è§„åˆ™çš„è§£æ,
ä½†æ˜¯æˆ‘ä¸ªäººè§‰ç€,åº”è¯¥ä»¥é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„è§„åˆ™ä¸ºä¸»,æ‰€ä»¥,ç¬¬äºŒç‰ˆéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å†™ä¸Šå®ç°æ¥å£çš„å…¨é™å®šç±»å,åå°„è·å–å®ä¾‹,åŒæ ·æ”¯æŒæ›´æ–°,è¿™æ ·é…ç½®æ–‡ä»¶çš„Mapå°±å¯ä»¥ç§»é™¤äº†,è€Œä¸”å¯ä»¥å°†ç®€å•çš„åŸç”Ÿä¸‰ç§è§£æè§„åˆ™ä¹ŸæŠ½è±¡ä¸ºæ¥å£,åˆ©ç”¨ç­–ç•¥ç±»è¿›è¡ŒåŒºåˆ†è°ƒç”¨
</p>2020-06-17</li><br/><li><span>å¼ºå“¥</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è¿™ä¸ªç°åº¦ç»„ä»¶æ„Ÿè§‰é€‚ç”¨ç®€å•åœºæ™¯ï¼Œè§„åˆ™ä¹‹é—´çš„è¡¨è¾¾å¼ã€ä¼˜å…ˆçº§ç­‰ç»„åˆæ–¹å¼ä¸æ”¯æŒï¼Œè§„åˆ™çš„å®šä¹‰å¾ˆé‡è¦ã€‚çƒ­æ›´æ–°å¯ä»¥é€šè¿‡zkä¸‹æ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡sdkå°†é…ç½®ä¿¡æ¯åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p>2020-06-21</li><br/><li><span>Jxin</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>1.å®šæ—¶ä»»åŠ¡åœ¨æ–¹æ³•å†…éƒ¨åˆ›å»ºå’Œä½¿ç”¨ï¼Œè¿™æ ·å°±æ²¡åŠæ³•æ‰‹åŠ¨è°ƒå®šæ—¶ä»»åŠ¡çš„é€€å‡ºæ–¹æ³•äº†ã€‚

2.æ„Ÿè§‰ä¸šåŠ¡æ¥å£çš„è·¯ç”±è§„åˆ™çš„é€‰å‹å’Œè·¯ç”±è§„åˆ™çš„å…·ä½“å®ç°åº”è¯¥åˆ†ç¦»ã€‚DarkFearé‡Œé¢åº”è¯¥åªè¦è¡¨æ˜ï¼Œå“ªä¸ªä¸šåŠ¡æ¥å£ç”¨å“ªä¸ªç°åº¦è§„åˆ™ï¼Œè¿™ä¸ªæ„å›¾å°±å¥½ã€‚è‡³äºç°åº¦è§„åˆ™çš„å…·ä½“å®ç°ï¼ŒåŒ…æ‹¬dslçš„è§£æå’Œç°åº¦è§„åˆ™çš„æ‰§è¡Œéƒ½åº”è¯¥å‰¥ç¦»å‡ºæ¥å•ç‹¬å°è£…ã€‚</p>2020-06-17</li><br/><li><span>gogo</span> ğŸ‘ï¼ˆ5ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>å¯ä»¥è€ƒè™‘å¼•å…¥ç­–ç•¥æ¨¡å¼å’Œå·¥å‚æ¨¡å¼ï¼Œæ¶ˆé™¤if else</p>2020-06-17</li><br/><li><span>djfhchdh</span> ğŸ‘ï¼ˆ3ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>DarkFeatureç±»æ‰©å±•æ€§ã€çµæ´»æ€§éƒ½è¾ƒå¼±ï¼Œå¦‚æœfeatureé…ç½®æ–°å¢äº†å­—æ®µï¼Œé‚£ä¹ˆå°±è¦ä¿®æ”¹ç±»å†…éƒ¨çš„è§£æä»£ç ï¼Œä¸æ»¡è¶³å¼€é—­åŸåˆ™ã€‚å¯ä»¥æŠŠparseå‡½æ•°å•ç‹¬æ‹¿å‡ºæ¥ï¼ŒæŠ½è±¡æˆä¸€ä¸ªParseræ¥å£ï¼Œé’ˆå¯¹ä¸åŒçš„featureé…ç½®æ ¼å¼ï¼Œå®ç°ä¸åŒçš„parserã€‚è¿™æ ·çš„è¯ï¼Œå¯¹äºé…ç½®æ ¼å¼çš„æ”¹åŠ¨ï¼Œåªè¦ä¿®æ”¹æˆ–æ‰©å±•ç›¸åº”çš„parserç±»å°±è¡Œäº†ï¼Œä¸ç”¨æ”¹åŠ¨DarkFeatureç±»çš„ä»£ç ï¼Œè¾¾åˆ°äº†å¯¹äºä¿®æ”¹çš„éš”ç¦»ã€‚</p>2020-09-09</li><br/><li><span>ç½— ä¹¾ æ—</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p> â€œDarkFeature ç±»ä¸­ï¼Œç°åº¦è§„åˆ™çš„è§£æä»£ç â€œï¼Œæ˜¯æˆ‘èƒ½æƒ³åˆ°æœ€ç›´æ¥ç®€å•çš„æ–¹å¼ã€‚æˆ‘æƒ³å¯ä»¥æŠ½è±¡å‡ºè§„åˆ™è§£æç±»ï¼Œå¯¹è§„åˆ™çš„è§£æäº¤ä¸ªè§£æç±»å¤„ç†ï¼Œå°†è§£æç±»å¯¹è±¡æ³¨å…¥åˆ°DarkFeature ç±»ä¸­ã€‚è¿™æ ·DarkFeatureèŒè´£æ›´å•ä¸€</p>2020-06-17</li><br/><li><span>test</span> ğŸ‘ï¼ˆ2ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>parsedarkruleçš„ä»£ç å¯ä»¥å•ç‹¬å‡ºæ¥</p>2020-06-17</li><br/><li><span>æœæœæœ</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>æ„Ÿè°¢ç‹äº‰è€å¸ˆï¼Œçœ‹å®Œè¿™æœ¬ä¹¦åçš„æœ€å¤§æ”¶è·æ˜¯ï¼Œè‡ªå·±åŠ¨æ‰‹å®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½æ›´ä¸ºä¸°å¯Œçš„ç°åº¦ç»„ä»¶ï¼Œæ”¯æŒåŠ¨æ€æ•°æ®æºã€ä»¥åŠæ•°æ®æºçš„æ‰©å±•ã€æ”¯æŒè§„åˆ™æ‰§è¡Œç»“æœè·Ÿè¸ªã€‚
githubåœ°å€
https:&#47;&#47;github.com&#47;TangGuoGuoR&#47;ab-gray</p>2021-11-20</li><br/><li><span>Yeyw</span> ğŸ‘ï¼ˆ1ï¼‰ ğŸ’¬ï¼ˆ0ï¼‰<p>è§„åˆ™æ‰©å±•å¤æ‚çš„è¯å¯ä»¥ç”¨è§£é‡Šå™¨ï¼Œä½†æ˜¯åŠ è½½é…ç½®çš„è¯ æˆ‘è§‰å¾—å®šæ—¶ä¼šé‡å¤åŠ è½½ï¼Œå®šæ—¶åŠ è½½åŠ ä¸ªåˆ¤æ–­å§ï¼Œä¹Ÿå¯ä»¥æš´éœ²é‡æ–°åŠ è½½é…ç½®çš„æ–¹æ³•ï¼Œä¾›å¼€å‘æä¾›è‡ªå·±è‡ªä¸»åˆ·æ–°çš„æ¥å£</p>2021-05-01</li><br/>
</ul>